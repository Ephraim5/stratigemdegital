function M9(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function $o(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wO={exports:{}},k_={},SO={exports:{}},on={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=Symbol.for("react.element"),E9=Symbol.for("react.portal"),C9=Symbol.for("react.fragment"),T9=Symbol.for("react.strict_mode"),P9=Symbol.for("react.profiler"),R9=Symbol.for("react.provider"),B9=Symbol.for("react.context"),I9=Symbol.for("react.forward_ref"),D9=Symbol.for("react.suspense"),L9=Symbol.for("react.memo"),F9=Symbol.for("react.lazy"),NP=Symbol.iterator;function k9(n){return n===null||typeof n!="object"?null:(n=NP&&n[NP]||n["@@iterator"],typeof n=="function"?n:null)}var bO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AO=Object.assign,MO={};function Fh(n,e,t){this.props=n,this.context=e,this.refs=MO,this.updater=t||bO}Fh.prototype.isReactComponent={};Fh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Fh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function EO(){}EO.prototype=Fh.prototype;function XM(n,e,t){this.props=n,this.context=e,this.refs=MO,this.updater=t||bO}var KM=XM.prototype=new EO;KM.constructor=XM;AO(KM,Fh.prototype);KM.isPureReactComponent=!0;var zP=Array.isArray,CO=Object.prototype.hasOwnProperty,JM={current:null},TO={key:!0,ref:!0,__self:!0,__source:!0};function PO(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CO.call(e,r)&&!TO.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yg,type:n,key:s,ref:o,props:i,_owner:JM.current}}function O9(n,e){return{$$typeof:Yg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function YM(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yg}function U9(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var GP=/\/+/g;function Rw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?U9(""+n.key):e.toString(36)}function Qy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yg:case E9:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Rw(o,0):r,zP(i)?(t="",n!=null&&(t=n.replace(GP,"$&/")+"/"),Qy(i,e,t,"",function(u){return u})):i!=null&&(YM(i)&&(i=O9(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(GP,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zP(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Rw(s,a);o+=Qy(s,e,t,l,i)}else if(l=k9(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Rw(s,a++),o+=Qy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Av(n,e,t){if(n==null)return n;var r=[],i=0;return Qy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function N9(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $i={current:null},qy={transition:null},z9={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:qy,ReactCurrentOwner:JM};on.Children={map:Av,forEach:function(n,e,t){Av(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Av(n,function(){e++}),e},toArray:function(n){return Av(n,function(e){return e})||[]},only:function(n){if(!YM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};on.Component=Fh;on.Fragment=C9;on.Profiler=P9;on.PureComponent=XM;on.StrictMode=T9;on.Suspense=D9;on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z9;on.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=AO({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=JM.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)CO.call(e,l)&&!TO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Yg,type:n.type,key:i,ref:s,props:r,_owner:o}};on.createContext=function(n){return n={$$typeof:B9,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:R9,_context:n},n.Consumer=n};on.createElement=PO;on.createFactory=function(n){var e=PO.bind(null,n);return e.type=n,e};on.createRef=function(){return{current:null}};on.forwardRef=function(n){return{$$typeof:I9,render:n}};on.isValidElement=YM;on.lazy=function(n){return{$$typeof:F9,_payload:{_status:-1,_result:n},_init:N9}};on.memo=function(n,e){return{$$typeof:L9,type:n,compare:e===void 0?null:e}};on.startTransition=function(n){var e=qy.transition;qy.transition={};try{n()}finally{qy.transition=e}};on.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};on.useCallback=function(n,e){return $i.current.useCallback(n,e)};on.useContext=function(n){return $i.current.useContext(n)};on.useDebugValue=function(){};on.useDeferredValue=function(n){return $i.current.useDeferredValue(n)};on.useEffect=function(n,e){return $i.current.useEffect(n,e)};on.useId=function(){return $i.current.useId()};on.useImperativeHandle=function(n,e,t){return $i.current.useImperativeHandle(n,e,t)};on.useInsertionEffect=function(n,e){return $i.current.useInsertionEffect(n,e)};on.useLayoutEffect=function(n,e){return $i.current.useLayoutEffect(n,e)};on.useMemo=function(n,e){return $i.current.useMemo(n,e)};on.useReducer=function(n,e,t){return $i.current.useReducer(n,e,t)};on.useRef=function(n){return $i.current.useRef(n)};on.useState=function(n){return $i.current.useState(n)};on.useSyncExternalStore=function(n,e,t){return $i.current.useSyncExternalStore(n,e,t)};on.useTransition=function(){return $i.current.useTransition()};on.version="18.2.0";SO.exports=on;var B=SO.exports;const he=$o(B),G9=M9({__proto__:null,default:he},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H9=B,V9=Symbol.for("react.element"),W9=Symbol.for("react.fragment"),j9=Object.prototype.hasOwnProperty,$9=H9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X9={key:!0,ref:!0,__self:!0,__source:!0};function RO(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j9.call(e,r)&&!X9.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:V9,type:n,key:s,ref:o,props:i,_owner:$9.current}}k_.Fragment=W9;k_.jsx=RO;k_.jsxs=RO;wO.exports=k_;var ZM=wO.exports;const O_=ZM.Fragment,qe=ZM.jsx,xn=ZM.jsxs;var $b={},BO={exports:{}},Ls={},IO={exports:{}},DO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,K){var j=V.length;V.push(K);e:for(;0<j;){var J=j-1>>>1,W=V[J];if(0<i(W,K))V[J]=K,V[j]=W,j=J;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var K=V[0],j=V.pop();if(j!==K){V[0]=j;e:for(var J=0,W=V.length,ne=W>>>1;J<ne;){var ue=2*(J+1)-1,q=V[ue],pe=ue+1,me=V[pe];if(0>i(q,j))pe<W&&0>i(me,q)?(V[J]=me,V[pe]=j,J=pe):(V[J]=q,V[ue]=j,J=ue);else if(pe<W&&0>i(me,j))V[J]=me,V[pe]=j,J=pe;else break e}}return K}function i(V,K){var j=V.sortIndex-K.sortIndex;return j!==0?j:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=V)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function S(V){if(v=!1,w(V),!g)if(t(l)!==null)g=!0,G(T);else{var K=t(u);K!==null&&te(S,K.startTime-V)}}function T(V,K){g=!1,v&&(v=!1,_(b),b=-1),m=!0;var j=d;try{for(w(K),f=t(l);f!==null&&(!(f.expirationTime>K)||V&&!L());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var W=J(f.expirationTime<=K);K=n.unstable_now(),typeof W=="function"?f.callback=W:f===t(l)&&r(l),w(K)}else r(l);f=t(l)}if(f!==null)var ne=!0;else{var ue=t(u);ue!==null&&te(S,ue.startTime-K),ne=!1}return ne}finally{f=null,d=j,m=!1}}var E=!1,R=null,b=-1,M=5,C=-1;function L(){return!(n.unstable_now()-C<M)}function D(){if(R!==null){var V=n.unstable_now();C=V;var K=!0;try{K=R(!0,V)}finally{K?z():(E=!1,R=null)}}else E=!1}var z;if(typeof x=="function")z=function(){x(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=D,z=function(){H.postMessage(null)}}else z=function(){y(D,0)};function G(V){R=V,E||(E=!0,z())}function te(V,K){b=y(function(){V(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,G(T))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(d){case 1:case 2:case 3:var K=3;break;default:K=d}var j=d;d=K;try{return V()}finally{d=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=d;d=V;try{return K()}finally{d=j}},n.unstable_scheduleCallback=function(V,K,j){var J=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,V={id:c++,callback:K,priorityLevel:V,startTime:j,expirationTime:W,sortIndex:-1},j>J?(V.sortIndex=j,e(u,V),t(l)===null&&V===t(u)&&(v?(_(b),b=-1):v=!0,te(S,j-J))):(V.sortIndex=W,e(l,V),g||m||(g=!0,G(T))),V},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(V){var K=d;return function(){var j=d;d=K;try{return V.apply(this,arguments)}finally{d=j}}}})(DO);IO.exports=DO;var K9=IO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO=B,Bs=K9;function ot(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FO=new Set,lg={};function Af(n,e){dh(n,e),dh(n+"Capture",e)}function dh(n,e){for(lg[n]=e,n=0;n<e.length;n++)FO.add(e[n])}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xb=Object.prototype.hasOwnProperty,J9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HP={},VP={};function Y9(n){return Xb.call(VP,n)?!0:Xb.call(HP,n)?!1:J9.test(n)?VP[n]=!0:(HP[n]=!0,!1)}function Z9(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q9(n,e,t,r){if(e===null||typeof e>"u"||Z9(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ci[n]=new Xi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ci[e]=new Xi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ci[n]=new Xi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ci[n]=new Xi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ci[n]=new Xi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ci[n]=new Xi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ci[n]=new Xi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ci[n]=new Xi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ci[n]=new Xi(n,5,!1,n.toLowerCase(),null,!1,!1)});var QM=/[\-:]([a-z])/g;function qM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(QM,qM);ci[e]=new Xi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(QM,qM);ci[e]=new Xi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(QM,qM);ci[e]=new Xi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ci[n]=new Xi(n,1,!1,n.toLowerCase(),null,!1,!1)});ci.xlinkHref=new Xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ci[n]=new Xi(n,1,!1,n.toLowerCase(),null,!0,!0)});function eE(n,e,t,r){var i=ci.hasOwnProperty(e)?ci[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q9(e,t,i,r)&&(t=null),r||i===null?Y9(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var bl=LO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mv=Symbol.for("react.element"),Ed=Symbol.for("react.portal"),Cd=Symbol.for("react.fragment"),tE=Symbol.for("react.strict_mode"),Kb=Symbol.for("react.profiler"),kO=Symbol.for("react.provider"),OO=Symbol.for("react.context"),nE=Symbol.for("react.forward_ref"),Jb=Symbol.for("react.suspense"),Yb=Symbol.for("react.suspense_list"),rE=Symbol.for("react.memo"),ql=Symbol.for("react.lazy"),UO=Symbol.for("react.offscreen"),WP=Symbol.iterator;function Pp(n){return n===null||typeof n!="object"?null:(n=WP&&n[WP]||n["@@iterator"],typeof n=="function"?n:null)}var ar=Object.assign,Bw;function Sm(n){if(Bw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Bw=e&&e[1]||""}return`
`+Bw+n}var Iw=!1;function Dw(n,e){if(!n||Iw)return"";Iw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Iw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Sm(n):""}function q9(n){switch(n.tag){case 5:return Sm(n.type);case 16:return Sm("Lazy");case 13:return Sm("Suspense");case 19:return Sm("SuspenseList");case 0:case 2:case 15:return n=Dw(n.type,!1),n;case 11:return n=Dw(n.type.render,!1),n;case 1:return n=Dw(n.type,!0),n;default:return""}}function Zb(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cd:return"Fragment";case Ed:return"Portal";case Kb:return"Profiler";case tE:return"StrictMode";case Jb:return"Suspense";case Yb:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case OO:return(n.displayName||"Context")+".Consumer";case kO:return(n._context.displayName||"Context")+".Provider";case nE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rE:return e=n.displayName||null,e!==null?e:Zb(n.type)||"Memo";case ql:e=n._payload,n=n._init;try{return Zb(n(e))}catch{}}return null}function eV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zb(e);case 8:return e===tE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function NO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tV(n){var e=NO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ev(n){n._valueTracker||(n._valueTracker=tV(n))}function zO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=NO(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function P1(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Qb(n,e){var t=e.checked;return ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function jP(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Cu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GO(n,e){e=e.checked,e!=null&&eE(n,"checked",e,!1)}function qb(n,e){GO(n,e);var t=Cu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?e2(n,e.type,t):e.hasOwnProperty("defaultValue")&&e2(n,e.type,Cu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function $P(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function e2(n,e,t){(e!=="number"||P1(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var bm=Array.isArray;function Yd(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Cu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function t2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ot(91));return ar({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function XP(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ot(92));if(bm(t)){if(1<t.length)throw Error(ot(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Cu(t)}}function HO(n,e){var t=Cu(e.value),r=Cu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function KP(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function VO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function n2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?VO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cv,WO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Cv=Cv||document.createElement("div"),Cv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ug(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nV=["Webkit","ms","Moz","O"];Object.keys(Bm).forEach(function(n){nV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bm[e]=Bm[n]})});function jO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bm.hasOwnProperty(n)&&Bm[n]?(""+e).trim():e+"px"}function $O(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=jO(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var rV=ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r2(n,e){if(e){if(rV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ot(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ot(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ot(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ot(62))}}function i2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s2=null;function iE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var o2=null,Zd=null,Qd=null;function JP(n){if(n=qg(n)){if(typeof o2!="function")throw Error(ot(280));var e=n.stateNode;e&&(e=H_(e),o2(n.stateNode,n.type,e))}}function XO(n){Zd?Qd?Qd.push(n):Qd=[n]:Zd=n}function KO(){if(Zd){var n=Zd,e=Qd;if(Qd=Zd=null,JP(n),e)for(n=0;n<e.length;n++)JP(e[n])}}function JO(n,e){return n(e)}function YO(){}var Lw=!1;function ZO(n,e,t){if(Lw)return n(e,t);Lw=!0;try{return JO(n,e,t)}finally{Lw=!1,(Zd!==null||Qd!==null)&&(YO(),KO())}}function cg(n,e){var t=n.stateNode;if(t===null)return null;var r=H_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ot(231,e,typeof t));return t}var a2=!1;if(dl)try{var Rp={};Object.defineProperty(Rp,"passive",{get:function(){a2=!0}}),window.addEventListener("test",Rp,Rp),window.removeEventListener("test",Rp,Rp)}catch{a2=!1}function iV(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Im=!1,R1=null,B1=!1,l2=null,sV={onError:function(n){Im=!0,R1=n}};function oV(n,e,t,r,i,s,o,a,l){Im=!1,R1=null,iV.apply(sV,arguments)}function aV(n,e,t,r,i,s,o,a,l){if(oV.apply(this,arguments),Im){if(Im){var u=R1;Im=!1,R1=null}else throw Error(ot(198));B1||(B1=!0,l2=u)}}function Mf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function QO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function YP(n){if(Mf(n)!==n)throw Error(ot(188))}function lV(n){var e=n.alternate;if(!e){if(e=Mf(n),e===null)throw Error(ot(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return YP(i),n;if(s===r)return YP(i),e;s=s.sibling}throw Error(ot(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ot(189))}}if(t.alternate!==r)throw Error(ot(190))}if(t.tag!==3)throw Error(ot(188));return t.stateNode.current===t?n:e}function qO(n){return n=lV(n),n!==null?e4(n):null}function e4(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=e4(n);if(e!==null)return e;n=n.sibling}return null}var t4=Bs.unstable_scheduleCallback,ZP=Bs.unstable_cancelCallback,uV=Bs.unstable_shouldYield,cV=Bs.unstable_requestPaint,wr=Bs.unstable_now,fV=Bs.unstable_getCurrentPriorityLevel,sE=Bs.unstable_ImmediatePriority,n4=Bs.unstable_UserBlockingPriority,I1=Bs.unstable_NormalPriority,dV=Bs.unstable_LowPriority,r4=Bs.unstable_IdlePriority,U_=null,pa=null;function hV(n){if(pa&&typeof pa.onCommitFiberRoot=="function")try{pa.onCommitFiberRoot(U_,n,void 0,(n.current.flags&128)===128)}catch{}}var Oo=Math.clz32?Math.clz32:gV,pV=Math.log,mV=Math.LN2;function gV(n){return n>>>=0,n===0?32:31-(pV(n)/mV|0)|0}var Tv=64,Pv=4194304;function Am(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function D1(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Am(a):(s&=o,s!==0&&(r=Am(s)))}else o=t&~i,o!==0?r=Am(o):s!==0&&(r=Am(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Oo(e),i=1<<t,r|=n[t],e&=~i;return r}function vV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yV(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Oo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=vV(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function u2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function i4(){var n=Tv;return Tv<<=1,!(Tv&4194240)&&(Tv=64),n}function Fw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Zg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Oo(e),n[e]=t}function _V(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Oo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function oE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Oo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var wn=0;function s4(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var o4,aE,a4,l4,u4,c2=!1,Rv=[],fu=null,du=null,hu=null,fg=new Map,dg=new Map,nu=[],xV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QP(n,e){switch(n){case"focusin":case"focusout":fu=null;break;case"dragenter":case"dragleave":du=null;break;case"mouseover":case"mouseout":hu=null;break;case"pointerover":case"pointerout":fg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(e.pointerId)}}function Bp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qg(e),e!==null&&aE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function wV(n,e,t,r,i){switch(e){case"focusin":return fu=Bp(fu,n,e,t,r,i),!0;case"dragenter":return du=Bp(du,n,e,t,r,i),!0;case"mouseover":return hu=Bp(hu,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return fg.set(s,Bp(fg.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,dg.set(s,Bp(dg.get(s)||null,n,e,t,r,i)),!0}return!1}function c4(n){var e=zc(n.target);if(e!==null){var t=Mf(e);if(t!==null){if(e=t.tag,e===13){if(e=QO(t),e!==null){n.blockedOn=e,u4(n.priority,function(){a4(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function e1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=f2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);s2=r,t.target.dispatchEvent(r),s2=null}else return e=qg(t),e!==null&&aE(e),n.blockedOn=t,!1;e.shift()}return!0}function qP(n,e,t){e1(n)&&t.delete(e)}function SV(){c2=!1,fu!==null&&e1(fu)&&(fu=null),du!==null&&e1(du)&&(du=null),hu!==null&&e1(hu)&&(hu=null),fg.forEach(qP),dg.forEach(qP)}function Ip(n,e){n.blockedOn===e&&(n.blockedOn=null,c2||(c2=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,SV)))}function hg(n){function e(i){return Ip(i,n)}if(0<Rv.length){Ip(Rv[0],n);for(var t=1;t<Rv.length;t++){var r=Rv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(fu!==null&&Ip(fu,n),du!==null&&Ip(du,n),hu!==null&&Ip(hu,n),fg.forEach(e),dg.forEach(e),t=0;t<nu.length;t++)r=nu[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<nu.length&&(t=nu[0],t.blockedOn===null);)c4(t),t.blockedOn===null&&nu.shift()}var qd=bl.ReactCurrentBatchConfig,L1=!0;function bV(n,e,t,r){var i=wn,s=qd.transition;qd.transition=null;try{wn=1,lE(n,e,t,r)}finally{wn=i,qd.transition=s}}function AV(n,e,t,r){var i=wn,s=qd.transition;qd.transition=null;try{wn=4,lE(n,e,t,r)}finally{wn=i,qd.transition=s}}function lE(n,e,t,r){if(L1){var i=f2(n,e,t,r);if(i===null)jw(n,e,r,F1,t),QP(n,r);else if(wV(i,n,e,t,r))r.stopPropagation();else if(QP(n,r),e&4&&-1<xV.indexOf(n)){for(;i!==null;){var s=qg(i);if(s!==null&&o4(s),s=f2(n,e,t,r),s===null&&jw(n,e,r,F1,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else jw(n,e,r,null,t)}}var F1=null;function f2(n,e,t,r){if(F1=null,n=iE(r),n=zc(n),n!==null)if(e=Mf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=QO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return F1=n,null}function f4(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fV()){case sE:return 1;case n4:return 4;case I1:case dV:return 16;case r4:return 536870912;default:return 16}default:return 16}}var iu=null,uE=null,t1=null;function d4(){if(t1)return t1;var n,e=uE,t=e.length,r,i="value"in iu?iu.value:iu.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return t1=i.slice(n,1<r?1-r:void 0)}function n1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Bv(){return!0}function eR(){return!1}function Fs(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bv:eR,this.isPropagationStopped=eR,this}return ar(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Bv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Bv)},persist:function(){},isPersistent:Bv}),e}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cE=Fs(kh),Qg=ar({},kh,{view:0,detail:0}),MV=Fs(Qg),kw,Ow,Dp,N_=ar({},Qg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dp&&(Dp&&n.type==="mousemove"?(kw=n.screenX-Dp.screenX,Ow=n.screenY-Dp.screenY):Ow=kw=0,Dp=n),kw)},movementY:function(n){return"movementY"in n?n.movementY:Ow}}),tR=Fs(N_),EV=ar({},N_,{dataTransfer:0}),CV=Fs(EV),TV=ar({},Qg,{relatedTarget:0}),Uw=Fs(TV),PV=ar({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),RV=Fs(PV),BV=ar({},kh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),IV=Fs(BV),DV=ar({},kh,{data:0}),nR=Fs(DV),LV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=kV[n])?!!e[n]:!1}function fE(){return OV}var UV=ar({},Qg,{key:function(n){if(n.key){var e=LV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=n1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fE,charCode:function(n){return n.type==="keypress"?n1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?n1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NV=Fs(UV),zV=ar({},N_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rR=Fs(zV),GV=ar({},Qg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fE}),HV=Fs(GV),VV=ar({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),WV=Fs(VV),jV=ar({},N_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$V=Fs(jV),XV=[9,13,27,32],dE=dl&&"CompositionEvent"in window,Dm=null;dl&&"documentMode"in document&&(Dm=document.documentMode);var KV=dl&&"TextEvent"in window&&!Dm,h4=dl&&(!dE||Dm&&8<Dm&&11>=Dm),iR=String.fromCharCode(32),sR=!1;function p4(n,e){switch(n){case"keyup":return XV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Td=!1;function JV(n,e){switch(n){case"compositionend":return m4(e);case"keypress":return e.which!==32?null:(sR=!0,iR);case"textInput":return n=e.data,n===iR&&sR?null:n;default:return null}}function YV(n,e){if(Td)return n==="compositionend"||!dE&&p4(n,e)?(n=d4(),t1=uE=iu=null,Td=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h4&&e.locale!=="ko"?null:e.data;default:return null}}var ZV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!ZV[n.type]:e==="textarea"}function g4(n,e,t,r){XO(r),e=k1(e,"onChange"),0<e.length&&(t=new cE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Lm=null,pg=null;function QV(n){C4(n,0)}function z_(n){var e=Bd(n);if(zO(e))return n}function qV(n,e){if(n==="change")return e}var v4=!1;if(dl){var Nw;if(dl){var zw="oninput"in document;if(!zw){var aR=document.createElement("div");aR.setAttribute("oninput","return;"),zw=typeof aR.oninput=="function"}Nw=zw}else Nw=!1;v4=Nw&&(!document.documentMode||9<document.documentMode)}function lR(){Lm&&(Lm.detachEvent("onpropertychange",y4),pg=Lm=null)}function y4(n){if(n.propertyName==="value"&&z_(pg)){var e=[];g4(e,pg,n,iE(n)),ZO(QV,e)}}function eW(n,e,t){n==="focusin"?(lR(),Lm=e,pg=t,Lm.attachEvent("onpropertychange",y4)):n==="focusout"&&lR()}function tW(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return z_(pg)}function nW(n,e){if(n==="click")return z_(e)}function rW(n,e){if(n==="input"||n==="change")return z_(e)}function iW(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Go=typeof Object.is=="function"?Object.is:iW;function mg(n,e){if(Go(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Xb.call(e,i)||!Go(n[i],e[i]))return!1}return!0}function uR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cR(n,e){var t=uR(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=uR(t)}}function _4(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_4(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function x4(){for(var n=window,e=P1();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=P1(n.document)}return e}function hE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function sW(n){var e=x4(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_4(t.ownerDocument.documentElement,t)){if(r!==null&&hE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=cR(t,s);var o=cR(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var oW=dl&&"documentMode"in document&&11>=document.documentMode,Pd=null,d2=null,Fm=null,h2=!1;function fR(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;h2||Pd==null||Pd!==P1(r)||(r=Pd,"selectionStart"in r&&hE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fm&&mg(Fm,r)||(Fm=r,r=k1(d2,"onSelect"),0<r.length&&(e=new cE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Pd)))}function Iv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Rd={animationend:Iv("Animation","AnimationEnd"),animationiteration:Iv("Animation","AnimationIteration"),animationstart:Iv("Animation","AnimationStart"),transitionend:Iv("Transition","TransitionEnd")},Gw={},w4={};dl&&(w4=document.createElement("div").style,"AnimationEvent"in window||(delete Rd.animationend.animation,delete Rd.animationiteration.animation,delete Rd.animationstart.animation),"TransitionEvent"in window||delete Rd.transitionend.transition);function G_(n){if(Gw[n])return Gw[n];if(!Rd[n])return n;var e=Rd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in w4)return Gw[n]=e[t];return n}var S4=G_("animationend"),b4=G_("animationiteration"),A4=G_("animationstart"),M4=G_("transitionend"),E4=new Map,dR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hu(n,e){E4.set(n,e),Af(e,[n])}for(var Hw=0;Hw<dR.length;Hw++){var Vw=dR[Hw],aW=Vw.toLowerCase(),lW=Vw[0].toUpperCase()+Vw.slice(1);Hu(aW,"on"+lW)}Hu(S4,"onAnimationEnd");Hu(b4,"onAnimationIteration");Hu(A4,"onAnimationStart");Hu("dblclick","onDoubleClick");Hu("focusin","onFocus");Hu("focusout","onBlur");Hu(M4,"onTransitionEnd");dh("onMouseEnter",["mouseout","mouseover"]);dh("onMouseLeave",["mouseout","mouseover"]);dh("onPointerEnter",["pointerout","pointerover"]);dh("onPointerLeave",["pointerout","pointerover"]);Af("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Af("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Af("onBeforeInput",["compositionend","keypress","textInput","paste"]);Af("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Af("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Af("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mm));function hR(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,aV(r,e,void 0,n),n.currentTarget=null}function C4(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hR(i,a,u),s=l}}}if(B1)throw n=l2,B1=!1,l2=null,n}function On(n,e){var t=e[y2];t===void 0&&(t=e[y2]=new Set);var r=n+"__bubble";t.has(r)||(T4(e,n,2,!1),t.add(r))}function Ww(n,e,t){var r=0;e&&(r|=4),T4(t,n,r,e)}var Dv="_reactListening"+Math.random().toString(36).slice(2);function gg(n){if(!n[Dv]){n[Dv]=!0,FO.forEach(function(t){t!=="selectionchange"&&(uW.has(t)||Ww(t,!1,n),Ww(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Dv]||(e[Dv]=!0,Ww("selectionchange",!1,e))}}function T4(n,e,t,r){switch(f4(e)){case 1:var i=bV;break;case 4:i=AV;break;default:i=lE}t=i.bind(null,e,t,n),i=void 0,!a2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function jw(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ZO(function(){var u=s,c=iE(t),f=[];e:{var d=E4.get(n);if(d!==void 0){var m=cE,g=n;switch(n){case"keypress":if(n1(t)===0)break e;case"keydown":case"keyup":m=NV;break;case"focusin":g="focus",m=Uw;break;case"focusout":g="blur",m=Uw;break;case"beforeblur":case"afterblur":m=Uw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=CV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HV;break;case S4:case b4:case A4:m=RV;break;case M4:m=WV;break;case"scroll":m=MV;break;case"wheel":m=$V;break;case"copy":case"cut":case"paste":m=IV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rR}var v=(e&4)!==0,y=!v&&n==="scroll",_=v?d!==null?d+"Capture":null:d;v=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,_!==null&&(S=cg(x,_),S!=null&&v.push(vg(x,S,w)))),y)break;x=x.return}0<v.length&&(d=new m(d,g,null,t,c),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&t!==s2&&(g=t.relatedTarget||t.fromElement)&&(zc(g)||g[hl]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=u,g=g?zc(g):null,g!==null&&(y=Mf(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=tR,S="onMouseLeave",_="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(v=rR,S="onPointerLeave",_="onPointerEnter",x="pointer"),y=m==null?d:Bd(m),w=g==null?d:Bd(g),d=new v(S,x+"leave",m,t,c),d.target=y,d.relatedTarget=w,S=null,zc(c)===u&&(v=new v(_,x+"enter",g,t,c),v.target=w,v.relatedTarget=y,S=v),y=S,m&&g)t:{for(v=m,_=g,x=0,w=v;w;w=Yf(w))x++;for(w=0,S=_;S;S=Yf(S))w++;for(;0<x-w;)v=Yf(v),x--;for(;0<w-x;)_=Yf(_),w--;for(;x--;){if(v===_||_!==null&&v===_.alternate)break t;v=Yf(v),_=Yf(_)}v=null}else v=null;m!==null&&pR(f,d,m,v,!1),g!==null&&y!==null&&pR(f,y,g,v,!0)}}e:{if(d=u?Bd(u):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var T=qV;else if(oR(d))if(v4)T=rW;else{T=tW;var E=eW}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=nW);if(T&&(T=T(n,u))){g4(f,T,t,c);break e}E&&E(n,d,u),n==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&e2(d,"number",d.value)}switch(E=u?Bd(u):window,n){case"focusin":(oR(E)||E.contentEditable==="true")&&(Pd=E,d2=u,Fm=null);break;case"focusout":Fm=d2=Pd=null;break;case"mousedown":h2=!0;break;case"contextmenu":case"mouseup":case"dragend":h2=!1,fR(f,t,c);break;case"selectionchange":if(oW)break;case"keydown":case"keyup":fR(f,t,c)}var R;if(dE)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Td?p4(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(h4&&t.locale!=="ko"&&(Td||b!=="onCompositionStart"?b==="onCompositionEnd"&&Td&&(R=d4()):(iu=c,uE="value"in iu?iu.value:iu.textContent,Td=!0)),E=k1(u,b),0<E.length&&(b=new nR(b,n,null,t,c),f.push({event:b,listeners:E}),R?b.data=R:(R=m4(t),R!==null&&(b.data=R)))),(R=KV?JV(n,t):YV(n,t))&&(u=k1(u,"onBeforeInput"),0<u.length&&(c=new nR("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=R))}C4(f,e)})}function vg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function k1(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cg(n,t),s!=null&&r.unshift(vg(n,s,i)),s=cg(n,e),s!=null&&r.push(vg(n,s,i))),n=n.return}return r}function Yf(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function pR(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=cg(t,s),l!=null&&o.unshift(vg(t,l,a))):i||(l=cg(t,s),l!=null&&o.push(vg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var cW=/\r\n?/g,fW=/\u0000|\uFFFD/g;function mR(n){return(typeof n=="string"?n:""+n).replace(cW,`
`).replace(fW,"")}function Lv(n,e,t){if(e=mR(e),mR(n)!==e&&t)throw Error(ot(425))}function O1(){}var p2=null,m2=null;function g2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v2=typeof setTimeout=="function"?setTimeout:void 0,dW=typeof clearTimeout=="function"?clearTimeout:void 0,gR=typeof Promise=="function"?Promise:void 0,hW=typeof queueMicrotask=="function"?queueMicrotask:typeof gR<"u"?function(n){return gR.resolve(null).then(n).catch(pW)}:v2;function pW(n){setTimeout(function(){throw n})}function $w(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),hg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);hg(e)}function pu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function vR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Oh=Math.random().toString(36).slice(2),ca="__reactFiber$"+Oh,yg="__reactProps$"+Oh,hl="__reactContainer$"+Oh,y2="__reactEvents$"+Oh,mW="__reactListeners$"+Oh,gW="__reactHandles$"+Oh;function zc(n){var e=n[ca];if(e)return e;for(var t=n.parentNode;t;){if(e=t[hl]||t[ca]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=vR(n);n!==null;){if(t=n[ca])return t;n=vR(n)}return e}n=t,t=n.parentNode}return null}function qg(n){return n=n[ca]||n[hl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Bd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ot(33))}function H_(n){return n[yg]||null}var _2=[],Id=-1;function Vu(n){return{current:n}}function Gn(n){0>Id||(n.current=_2[Id],_2[Id]=null,Id--)}function Dn(n,e){Id++,_2[Id]=n.current,n.current=e}var Tu={},Ci=Vu(Tu),is=Vu(!1),ff=Tu;function hh(n,e){var t=n.type.contextTypes;if(!t)return Tu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ss(n){return n=n.childContextTypes,n!=null}function U1(){Gn(is),Gn(Ci)}function yR(n,e,t){if(Ci.current!==Tu)throw Error(ot(168));Dn(Ci,e),Dn(is,t)}function P4(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ot(108,eV(n)||"Unknown",i));return ar({},t,r)}function N1(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Tu,ff=Ci.current,Dn(Ci,n),Dn(is,is.current),!0}function _R(n,e,t){var r=n.stateNode;if(!r)throw Error(ot(169));t?(n=P4(n,e,ff),r.__reactInternalMemoizedMergedChildContext=n,Gn(is),Gn(Ci),Dn(Ci,n)):Gn(is),Dn(is,t)}var Ka=null,V_=!1,Xw=!1;function R4(n){Ka===null?Ka=[n]:Ka.push(n)}function vW(n){V_=!0,R4(n)}function Wu(){if(!Xw&&Ka!==null){Xw=!0;var n=0,e=wn;try{var t=Ka;for(wn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ka=null,V_=!1}catch(i){throw Ka!==null&&(Ka=Ka.slice(n+1)),t4(sE,Wu),i}finally{wn=e,Xw=!1}}return null}var Dd=[],Ld=0,z1=null,G1=0,to=[],no=0,df=null,el=1,tl="";function Rc(n,e){Dd[Ld++]=G1,Dd[Ld++]=z1,z1=n,G1=e}function B4(n,e,t){to[no++]=el,to[no++]=tl,to[no++]=df,df=n;var r=el;n=tl;var i=32-Oo(r)-1;r&=~(1<<i),t+=1;var s=32-Oo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,el=1<<32-Oo(e)+i|t<<i|r,tl=s+n}else el=1<<s|t<<i|r,tl=n}function pE(n){n.return!==null&&(Rc(n,1),B4(n,1,0))}function mE(n){for(;n===z1;)z1=Dd[--Ld],Dd[Ld]=null,G1=Dd[--Ld],Dd[Ld]=null;for(;n===df;)df=to[--no],to[no]=null,tl=to[--no],to[no]=null,el=to[--no],to[no]=null}var Ts=null,Cs=null,$n=!1,Lo=null;function I4(n,e){var t=oo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function xR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ts=n,Cs=pu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ts=n,Cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=df!==null?{id:el,overflow:tl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=oo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ts=n,Cs=null,!0):!1;default:return!1}}function x2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function w2(n){if($n){var e=Cs;if(e){var t=e;if(!xR(n,e)){if(x2(n))throw Error(ot(418));e=pu(t.nextSibling);var r=Ts;e&&xR(n,e)?I4(r,t):(n.flags=n.flags&-4097|2,$n=!1,Ts=n)}}else{if(x2(n))throw Error(ot(418));n.flags=n.flags&-4097|2,$n=!1,Ts=n}}}function wR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ts=n}function Fv(n){if(n!==Ts)return!1;if(!$n)return wR(n),$n=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!g2(n.type,n.memoizedProps)),e&&(e=Cs)){if(x2(n))throw D4(),Error(ot(418));for(;e;)I4(n,e),e=pu(e.nextSibling)}if(wR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ot(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cs=pu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cs=null}}else Cs=Ts?pu(n.stateNode.nextSibling):null;return!0}function D4(){for(var n=Cs;n;)n=pu(n.nextSibling)}function ph(){Cs=Ts=null,$n=!1}function gE(n){Lo===null?Lo=[n]:Lo.push(n)}var yW=bl.ReactCurrentBatchConfig;function Io(n,e){if(n&&n.defaultProps){e=ar({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var H1=Vu(null),V1=null,Fd=null,vE=null;function yE(){vE=Fd=V1=null}function _E(n){var e=H1.current;Gn(H1),n._currentValue=e}function S2(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function eh(n,e){V1=n,vE=Fd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ns=!0),n.firstContext=null)}function mo(n){var e=n._currentValue;if(vE!==n)if(n={context:n,memoizedValue:e,next:null},Fd===null){if(V1===null)throw Error(ot(308));Fd=n,V1.dependencies={lanes:0,firstContext:n}}else Fd=Fd.next=n;return e}var Gc=null;function xE(n){Gc===null?Gc=[n]:Gc.push(n)}function L4(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,xE(e)):(t.next=i.next,i.next=t),e.interleaved=t,pl(n,r)}function pl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var eu=!1;function wE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F4(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function il(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mu(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,pn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pl(n,t)}return i=r.interleaved,i===null?(e.next=e,xE(r)):(e.next=i.next,i.next=e),r.interleaved=e,pl(n,t)}function r1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,oE(n,t)}}function SR(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function W1(n,e,t,r){var i=n.updateQueue;eu=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,m=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(d=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(m,f,d):g,d==null)break e;f=ar({},f,d);break e;case 2:eu=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pf|=o,n.lanes=o,n.memoizedState=f}}function bR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ot(191,i));i.call(r)}}}var k4=new LO.Component().refs;function b2(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:ar({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var W_={isMounted:function(n){return(n=n._reactInternals)?Mf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Wi(),i=vu(n),s=il(r,i);s.payload=e,t!=null&&(s.callback=t),e=mu(n,s,i),e!==null&&(Uo(e,n,i,r),r1(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Wi(),i=vu(n),s=il(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=mu(n,s,i),e!==null&&(Uo(e,n,i,r),r1(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Wi(),r=vu(n),i=il(t,r);i.tag=2,e!=null&&(i.callback=e),e=mu(n,i,r),e!==null&&(Uo(e,n,r,t),r1(e,n,r))}};function AR(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!mg(t,r)||!mg(i,s):!0}function O4(n,e,t){var r=!1,i=Tu,s=e.contextType;return typeof s=="object"&&s!==null?s=mo(s):(i=ss(e)?ff:Ci.current,r=e.contextTypes,s=(r=r!=null)?hh(n,i):Tu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=W_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function MR(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&W_.enqueueReplaceState(e,e.state,null)}function A2(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=k4,wE(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mo(s):(s=ss(e)?ff:Ci.current,i.context=hh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(b2(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&W_.enqueueReplaceState(i,i.state,null),W1(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Lp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ot(309));var r=t.stateNode}if(!r)throw Error(ot(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===k4&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ot(284));if(!t._owner)throw Error(ot(290,n))}return n}function kv(n,e){throw n=Object.prototype.toString.call(e),Error(ot(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ER(n){var e=n._init;return e(n._payload)}function U4(n){function e(_,x){if(n){var w=_.deletions;w===null?(_.deletions=[x],_.flags|=16):w.push(x)}}function t(_,x){if(!n)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=yu(_,x),_.index=0,_.sibling=null,_}function s(_,x,w){return _.index=w,n?(w=_.alternate,w!==null?(w=w.index,w<x?(_.flags|=2,x):w):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,x,w,S){return x===null||x.tag!==6?(x=eS(w,_.mode,S),x.return=_,x):(x=i(x,w),x.return=_,x)}function l(_,x,w,S){var T=w.type;return T===Cd?c(_,x,w.props.children,S,w.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ql&&ER(T)===x.type)?(S=i(x,w.props),S.ref=Lp(_,x,w),S.return=_,S):(S=u1(w.type,w.key,w.props,null,_.mode,S),S.ref=Lp(_,x,w),S.return=_,S)}function u(_,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=tS(w,_.mode,S),x.return=_,x):(x=i(x,w.children||[]),x.return=_,x)}function c(_,x,w,S,T){return x===null||x.tag!==7?(x=qc(w,_.mode,S,T),x.return=_,x):(x=i(x,w),x.return=_,x)}function f(_,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=eS(""+x,_.mode,w),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mv:return w=u1(x.type,x.key,x.props,null,_.mode,w),w.ref=Lp(_,null,x),w.return=_,w;case Ed:return x=tS(x,_.mode,w),x.return=_,x;case ql:var S=x._init;return f(_,S(x._payload),w)}if(bm(x)||Pp(x))return x=qc(x,_.mode,w,null),x.return=_,x;kv(_,x)}return null}function d(_,x,w,S){var T=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(_,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mv:return w.key===T?l(_,x,w,S):null;case Ed:return w.key===T?u(_,x,w,S):null;case ql:return T=w._init,d(_,x,T(w._payload),S)}if(bm(w)||Pp(w))return T!==null?null:c(_,x,w,S,null);kv(_,w)}return null}function m(_,x,w,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(w)||null,a(x,_,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Mv:return _=_.get(S.key===null?w:S.key)||null,l(x,_,S,T);case Ed:return _=_.get(S.key===null?w:S.key)||null,u(x,_,S,T);case ql:var E=S._init;return m(_,x,w,E(S._payload),T)}if(bm(S)||Pp(S))return _=_.get(w)||null,c(x,_,S,T,null);kv(x,S)}return null}function g(_,x,w,S){for(var T=null,E=null,R=x,b=x=0,M=null;R!==null&&b<w.length;b++){R.index>b?(M=R,R=null):M=R.sibling;var C=d(_,R,w[b],S);if(C===null){R===null&&(R=M);break}n&&R&&C.alternate===null&&e(_,R),x=s(C,x,b),E===null?T=C:E.sibling=C,E=C,R=M}if(b===w.length)return t(_,R),$n&&Rc(_,b),T;if(R===null){for(;b<w.length;b++)R=f(_,w[b],S),R!==null&&(x=s(R,x,b),E===null?T=R:E.sibling=R,E=R);return $n&&Rc(_,b),T}for(R=r(_,R);b<w.length;b++)M=m(R,_,b,w[b],S),M!==null&&(n&&M.alternate!==null&&R.delete(M.key===null?b:M.key),x=s(M,x,b),E===null?T=M:E.sibling=M,E=M);return n&&R.forEach(function(L){return e(_,L)}),$n&&Rc(_,b),T}function v(_,x,w,S){var T=Pp(w);if(typeof T!="function")throw Error(ot(150));if(w=T.call(w),w==null)throw Error(ot(151));for(var E=T=null,R=x,b=x=0,M=null,C=w.next();R!==null&&!C.done;b++,C=w.next()){R.index>b?(M=R,R=null):M=R.sibling;var L=d(_,R,C.value,S);if(L===null){R===null&&(R=M);break}n&&R&&L.alternate===null&&e(_,R),x=s(L,x,b),E===null?T=L:E.sibling=L,E=L,R=M}if(C.done)return t(_,R),$n&&Rc(_,b),T;if(R===null){for(;!C.done;b++,C=w.next())C=f(_,C.value,S),C!==null&&(x=s(C,x,b),E===null?T=C:E.sibling=C,E=C);return $n&&Rc(_,b),T}for(R=r(_,R);!C.done;b++,C=w.next())C=m(R,_,b,C.value,S),C!==null&&(n&&C.alternate!==null&&R.delete(C.key===null?b:C.key),x=s(C,x,b),E===null?T=C:E.sibling=C,E=C);return n&&R.forEach(function(D){return e(_,D)}),$n&&Rc(_,b),T}function y(_,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Cd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mv:e:{for(var T=w.key,E=x;E!==null;){if(E.key===T){if(T=w.type,T===Cd){if(E.tag===7){t(_,E.sibling),x=i(E,w.props.children),x.return=_,_=x;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ql&&ER(T)===E.type){t(_,E.sibling),x=i(E,w.props),x.ref=Lp(_,E,w),x.return=_,_=x;break e}t(_,E);break}else e(_,E);E=E.sibling}w.type===Cd?(x=qc(w.props.children,_.mode,S,w.key),x.return=_,_=x):(S=u1(w.type,w.key,w.props,null,_.mode,S),S.ref=Lp(_,x,w),S.return=_,_=S)}return o(_);case Ed:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){t(_,x.sibling),x=i(x,w.children||[]),x.return=_,_=x;break e}else{t(_,x);break}else e(_,x);x=x.sibling}x=tS(w,_.mode,S),x.return=_,_=x}return o(_);case ql:return E=w._init,y(_,x,E(w._payload),S)}if(bm(w))return g(_,x,w,S);if(Pp(w))return v(_,x,w,S);kv(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(t(_,x.sibling),x=i(x,w),x.return=_,_=x):(t(_,x),x=eS(w,_.mode,S),x.return=_,_=x),o(_)):t(_,x)}return y}var mh=U4(!0),N4=U4(!1),e0={},ma=Vu(e0),_g=Vu(e0),xg=Vu(e0);function Hc(n){if(n===e0)throw Error(ot(174));return n}function SE(n,e){switch(Dn(xg,e),Dn(_g,n),Dn(ma,e0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:n2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=n2(e,n)}Gn(ma),Dn(ma,e)}function gh(){Gn(ma),Gn(_g),Gn(xg)}function z4(n){Hc(xg.current);var e=Hc(ma.current),t=n2(e,n.type);e!==t&&(Dn(_g,n),Dn(ma,t))}function bE(n){_g.current===n&&(Gn(ma),Gn(_g))}var er=Vu(0);function j1(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kw=[];function AE(){for(var n=0;n<Kw.length;n++)Kw[n]._workInProgressVersionPrimary=null;Kw.length=0}var i1=bl.ReactCurrentDispatcher,Jw=bl.ReactCurrentBatchConfig,hf=0,sr=null,kr=null,Zr=null,$1=!1,km=!1,wg=0,_W=0;function gi(){throw Error(ot(321))}function ME(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Go(n[t],e[t]))return!1;return!0}function EE(n,e,t,r,i,s){if(hf=s,sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,i1.current=n===null||n.memoizedState===null?bW:AW,n=t(r,i),km){s=0;do{if(km=!1,wg=0,25<=s)throw Error(ot(301));s+=1,Zr=kr=null,e.updateQueue=null,i1.current=MW,n=t(r,i)}while(km)}if(i1.current=X1,e=kr!==null&&kr.next!==null,hf=0,Zr=kr=sr=null,$1=!1,e)throw Error(ot(300));return n}function CE(){var n=wg!==0;return wg=0,n}function la(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?sr.memoizedState=Zr=n:Zr=Zr.next=n,Zr}function go(){if(kr===null){var n=sr.alternate;n=n!==null?n.memoizedState:null}else n=kr.next;var e=Zr===null?sr.memoizedState:Zr.next;if(e!==null)Zr=e,kr=n;else{if(n===null)throw Error(ot(310));kr=n,n={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Zr===null?sr.memoizedState=Zr=n:Zr=Zr.next=n}return Zr}function Sg(n,e){return typeof e=="function"?e(n):e}function Yw(n){var e=go(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=n;var r=kr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((hf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,sr.lanes|=c,pf|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Go(r,e.memoizedState)||(ns=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,sr.lanes|=s,pf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Zw(n){var e=go(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Go(s,e.memoizedState)||(ns=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function G4(){}function H4(n,e){var t=sr,r=go(),i=e(),s=!Go(r.memoizedState,i);if(s&&(r.memoizedState=i,ns=!0),r=r.queue,TE(j4.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Zr!==null&&Zr.memoizedState.tag&1){if(t.flags|=2048,bg(9,W4.bind(null,t,r,i,e),void 0,null),ei===null)throw Error(ot(349));hf&30||V4(t,e,i)}return i}function V4(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function W4(n,e,t,r){e.value=t,e.getSnapshot=r,$4(e)&&X4(n)}function j4(n,e,t){return t(function(){$4(e)&&X4(n)})}function $4(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Go(n,t)}catch{return!0}}function X4(n){var e=pl(n,1);e!==null&&Uo(e,n,1,-1)}function CR(n){var e=la();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:n},e.queue=n,n=n.dispatch=SW.bind(null,sr,n),[e.memoizedState,n]}function bg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function K4(){return go().memoizedState}function s1(n,e,t,r){var i=la();sr.flags|=n,i.memoizedState=bg(1|e,t,void 0,r===void 0?null:r)}function j_(n,e,t,r){var i=go();r=r===void 0?null:r;var s=void 0;if(kr!==null){var o=kr.memoizedState;if(s=o.destroy,r!==null&&ME(r,o.deps)){i.memoizedState=bg(e,t,s,r);return}}sr.flags|=n,i.memoizedState=bg(1|e,t,s,r)}function TR(n,e){return s1(8390656,8,n,e)}function TE(n,e){return j_(2048,8,n,e)}function J4(n,e){return j_(4,2,n,e)}function Y4(n,e){return j_(4,4,n,e)}function Z4(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Q4(n,e,t){return t=t!=null?t.concat([n]):null,j_(4,4,Z4.bind(null,e,n),t)}function PE(){}function q4(n,e){var t=go();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ME(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function eU(n,e){var t=go();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ME(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function tU(n,e,t){return hf&21?(Go(t,e)||(t=i4(),sr.lanes|=t,pf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ns=!0),n.memoizedState=t)}function xW(n,e){var t=wn;wn=t!==0&&4>t?t:4,n(!0);var r=Jw.transition;Jw.transition={};try{n(!1),e()}finally{wn=t,Jw.transition=r}}function nU(){return go().memoizedState}function wW(n,e,t){var r=vu(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rU(n))iU(e,t);else if(t=L4(n,e,t,r),t!==null){var i=Wi();Uo(t,n,r,i),sU(t,e,r)}}function SW(n,e,t){var r=vu(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rU(n))iU(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Go(a,o)){var l=e.interleaved;l===null?(i.next=i,xE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=L4(n,e,i,r),t!==null&&(i=Wi(),Uo(t,n,r,i),sU(t,e,r))}}function rU(n){var e=n.alternate;return n===sr||e!==null&&e===sr}function iU(n,e){km=$1=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function sU(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,oE(n,t)}}var X1={readContext:mo,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},bW={readContext:mo,useCallback:function(n,e){return la().memoizedState=[n,e===void 0?null:e],n},useContext:mo,useEffect:TR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,s1(4194308,4,Z4.bind(null,e,n),t)},useLayoutEffect:function(n,e){return s1(4194308,4,n,e)},useInsertionEffect:function(n,e){return s1(4,2,n,e)},useMemo:function(n,e){var t=la();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=la();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=wW.bind(null,sr,n),[r.memoizedState,n]},useRef:function(n){var e=la();return n={current:n},e.memoizedState=n},useState:CR,useDebugValue:PE,useDeferredValue:function(n){return la().memoizedState=n},useTransition:function(){var n=CR(!1),e=n[0];return n=xW.bind(null,n[1]),la().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=sr,i=la();if($n){if(t===void 0)throw Error(ot(407));t=t()}else{if(t=e(),ei===null)throw Error(ot(349));hf&30||V4(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,TR(j4.bind(null,r,s,n),[n]),r.flags|=2048,bg(9,W4.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=la(),e=ei.identifierPrefix;if($n){var t=tl,r=el;t=(r&~(1<<32-Oo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=wg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=_W++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},AW={readContext:mo,useCallback:q4,useContext:mo,useEffect:TE,useImperativeHandle:Q4,useInsertionEffect:J4,useLayoutEffect:Y4,useMemo:eU,useReducer:Yw,useRef:K4,useState:function(){return Yw(Sg)},useDebugValue:PE,useDeferredValue:function(n){var e=go();return tU(e,kr.memoizedState,n)},useTransition:function(){var n=Yw(Sg)[0],e=go().memoizedState;return[n,e]},useMutableSource:G4,useSyncExternalStore:H4,useId:nU,unstable_isNewReconciler:!1},MW={readContext:mo,useCallback:q4,useContext:mo,useEffect:TE,useImperativeHandle:Q4,useInsertionEffect:J4,useLayoutEffect:Y4,useMemo:eU,useReducer:Zw,useRef:K4,useState:function(){return Zw(Sg)},useDebugValue:PE,useDeferredValue:function(n){var e=go();return kr===null?e.memoizedState=n:tU(e,kr.memoizedState,n)},useTransition:function(){var n=Zw(Sg)[0],e=go().memoizedState;return[n,e]},useMutableSource:G4,useSyncExternalStore:H4,useId:nU,unstable_isNewReconciler:!1};function vh(n,e){try{var t="",r=e;do t+=q9(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Qw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function M2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var EW=typeof WeakMap=="function"?WeakMap:Map;function oU(n,e,t){t=il(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){J1||(J1=!0,F2=r),M2(n,e)},t}function aU(n,e,t){t=il(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){M2(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){M2(n,e),typeof r!="function"&&(gu===null?gu=new Set([this]):gu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function PR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new EW;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=zW.bind(null,n,e,t),e.then(n,n))}function RR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function BR(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=il(-1,1),e.tag=2,mu(t,e,1))),t.lanes|=1),n)}var CW=bl.ReactCurrentOwner,ns=!1;function Gi(n,e,t,r){e.child=n===null?N4(e,null,t,r):mh(e,n.child,t,r)}function IR(n,e,t,r,i){t=t.render;var s=e.ref;return eh(e,i),r=EE(n,e,t,r,s,i),t=CE(),n!==null&&!ns?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ml(n,e,i)):($n&&t&&pE(e),e.flags|=1,Gi(n,e,r,i),e.child)}function DR(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!OE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,lU(n,e,s,r,i)):(n=u1(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:mg,t(o,r)&&n.ref===e.ref)return ml(n,e,i)}return e.flags|=1,n=yu(s,r),n.ref=e.ref,n.return=e,e.child=n}function lU(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(mg(s,r)&&n.ref===e.ref)if(ns=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(ns=!0);else return e.lanes=n.lanes,ml(n,e,i)}return E2(n,e,t,r,i)}function uU(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Od,As),As|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Dn(Od,As),As|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Dn(Od,As),As|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Dn(Od,As),As|=r;return Gi(n,e,i,t),e.child}function cU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function E2(n,e,t,r,i){var s=ss(t)?ff:Ci.current;return s=hh(e,s),eh(e,i),t=EE(n,e,t,r,s,i),r=CE(),n!==null&&!ns?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ml(n,e,i)):($n&&r&&pE(e),e.flags|=1,Gi(n,e,t,i),e.child)}function LR(n,e,t,r,i){if(ss(t)){var s=!0;N1(e)}else s=!1;if(eh(e,i),e.stateNode===null)o1(n,e),O4(e,t,r),A2(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=mo(u):(u=ss(t)?ff:Ci.current,u=hh(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&MR(e,o,r,u),eu=!1;var d=e.memoizedState;o.state=d,W1(e,r,o,i),l=e.memoizedState,a!==r||d!==l||is.current||eu?(typeof c=="function"&&(b2(e,t,c,r),l=e.memoizedState),(a=eu||AR(e,t,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,F4(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Io(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=mo(l):(l=ss(t)?ff:Ci.current,l=hh(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&MR(e,o,r,l),eu=!1,d=e.memoizedState,o.state=d,W1(e,r,o,i);var g=e.memoizedState;a!==f||d!==g||is.current||eu?(typeof m=="function"&&(b2(e,t,m,r),g=e.memoizedState),(u=eu||AR(e,t,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return C2(n,e,t,r,s,i)}function C2(n,e,t,r,i,s){cU(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_R(e,t,!1),ml(n,e,s);r=e.stateNode,CW.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=mh(e,n.child,null,s),e.child=mh(e,null,a,s)):Gi(n,e,a,s),e.memoizedState=r.state,i&&_R(e,t,!0),e.child}function fU(n){var e=n.stateNode;e.pendingContext?yR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&yR(n,e.context,!1),SE(n,e.containerInfo)}function FR(n,e,t,r,i){return ph(),gE(i),e.flags|=256,Gi(n,e,t,r),e.child}var T2={dehydrated:null,treeContext:null,retryLane:0};function P2(n){return{baseLanes:n,cachePool:null,transitions:null}}function dU(n,e,t){var r=e.pendingProps,i=er.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Dn(er,i&1),n===null)return w2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=K_(o,r,0,null),n=qc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=P2(t),e.memoizedState=T2,n):RE(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return TW(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yu(a,s):(s=qc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?P2(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=T2,r}return s=n.child,n=s.sibling,r=yu(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function RE(n,e){return e=K_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ov(n,e,t,r){return r!==null&&gE(r),mh(e,n.child,null,t),n=RE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function TW(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Qw(Error(ot(422))),Ov(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=K_({mode:"visible",children:r.children},i,0,null),s=qc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mh(e,n.child,null,o),e.child.memoizedState=P2(o),e.memoizedState=T2,s);if(!(e.mode&1))return Ov(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ot(419)),r=Qw(s,r,void 0),Ov(n,e,o,r)}if(a=(o&n.childLanes)!==0,ns||a){if(r=ei,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pl(n,i),Uo(r,n,i,-1))}return kE(),r=Qw(Error(ot(421))),Ov(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=GW.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Cs=pu(i.nextSibling),Ts=e,$n=!0,Lo=null,n!==null&&(to[no++]=el,to[no++]=tl,to[no++]=df,el=n.id,tl=n.overflow,df=e),e=RE(e,r.children),e.flags|=4096,e)}function kR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),S2(n.return,e,t)}function qw(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function hU(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gi(n,e,r.children,t),r=er.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kR(n,t,e);else if(n.tag===19)kR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Dn(er,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&j1(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),qw(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&j1(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}qw(e,!0,t,null,s);break;case"together":qw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function o1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ml(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),pf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ot(153));if(e.child!==null){for(n=e.child,t=yu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=yu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function PW(n,e,t){switch(e.tag){case 3:fU(e),ph();break;case 5:z4(e);break;case 1:ss(e.type)&&N1(e);break;case 4:SE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Dn(H1,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dn(er,er.current&1),e.flags|=128,null):t&e.child.childLanes?dU(n,e,t):(Dn(er,er.current&1),n=ml(n,e,t),n!==null?n.sibling:null);Dn(er,er.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return hU(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dn(er,er.current),r)break;return null;case 22:case 23:return e.lanes=0,uU(n,e,t)}return ml(n,e,t)}var pU,R2,mU,gU;pU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};R2=function(){};mU=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Hc(ma.current);var s=null;switch(t){case"input":i=Qb(n,i),r=Qb(n,r),s=[];break;case"select":i=ar({},i,{value:void 0}),r=ar({},r,{value:void 0}),s=[];break;case"textarea":i=t2(n,i),r=t2(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=O1)}r2(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lg.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lg.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&On("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};gU=function(n,e,t,r){t!==r&&(e.flags|=4)};function Fp(n,e){if(!$n)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function vi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function RW(n,e,t){var r=e.pendingProps;switch(mE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(e),null;case 1:return ss(e.type)&&U1(),vi(e),null;case 3:return r=e.stateNode,gh(),Gn(is),Gn(Ci),AE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Fv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lo!==null&&(U2(Lo),Lo=null))),R2(n,e),vi(e),null;case 5:bE(e);var i=Hc(xg.current);if(t=e.type,n!==null&&e.stateNode!=null)mU(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ot(166));return vi(e),null}if(n=Hc(ma.current),Fv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ca]=e,r[yg]=s,n=(e.mode&1)!==0,t){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(i=0;i<Mm.length;i++)On(Mm[i],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":jP(r,s),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},On("invalid",r);break;case"textarea":XP(r,s),On("invalid",r)}r2(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,n),i=["children",""+a]):lg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",r)}switch(t){case"input":Ev(r),$P(r,s,!0);break;case"textarea":Ev(r),KP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=O1)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=VO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ca]=e,n[yg]=r,pU(n,e,!1,!1),e.stateNode=n;e:{switch(o=i2(t,r),t){case"dialog":On("cancel",n),On("close",n),i=r;break;case"iframe":case"object":case"embed":On("load",n),i=r;break;case"video":case"audio":for(i=0;i<Mm.length;i++)On(Mm[i],n);i=r;break;case"source":On("error",n),i=r;break;case"img":case"image":case"link":On("error",n),On("load",n),i=r;break;case"details":On("toggle",n),i=r;break;case"input":jP(n,r),i=Qb(n,r),On("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=ar({},r,{value:void 0}),On("invalid",n);break;case"textarea":XP(n,r),i=t2(n,r),On("invalid",n);break;default:i=r}r2(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$O(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ug(n,l):typeof l=="number"&&ug(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&On("scroll",n):l!=null&&eE(n,s,l,o))}switch(t){case"input":Ev(n),$P(n,r,!1);break;case"textarea":Ev(n),KP(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Cu(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Yd(n,!!r.multiple,s,!1):r.defaultValue!=null&&Yd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=O1)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vi(e),null;case 6:if(n&&e.stateNode!=null)gU(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ot(166));if(t=Hc(xg.current),Hc(ma.current),Fv(e)){if(r=e.stateNode,t=e.memoizedProps,r[ca]=e,(s=r.nodeValue!==t)&&(n=Ts,n!==null))switch(n.tag){case 3:Lv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Lv(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ca]=e,e.stateNode=r}return vi(e),null;case 13:if(Gn(er),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if($n&&Cs!==null&&e.mode&1&&!(e.flags&128))D4(),ph(),e.flags|=98560,s=!1;else if(s=Fv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ot(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ot(317));s[ca]=e}else ph(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vi(e),s=!1}else Lo!==null&&(U2(Lo),Lo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||er.current&1?Nr===0&&(Nr=3):kE())),e.updateQueue!==null&&(e.flags|=4),vi(e),null);case 4:return gh(),R2(n,e),n===null&&gg(e.stateNode.containerInfo),vi(e),null;case 10:return _E(e.type._context),vi(e),null;case 17:return ss(e.type)&&U1(),vi(e),null;case 19:if(Gn(er),s=e.memoizedState,s===null)return vi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fp(s,!1);else{if(Nr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=j1(n),o!==null){for(e.flags|=128,Fp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Dn(er,er.current&1|2),e.child}n=n.sibling}s.tail!==null&&wr()>yh&&(e.flags|=128,r=!0,Fp(s,!1),e.lanes=4194304)}else{if(!r)if(n=j1(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$n)return vi(e),null}else 2*wr()-s.renderingStartTime>yh&&t!==1073741824&&(e.flags|=128,r=!0,Fp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wr(),e.sibling=null,t=er.current,Dn(er,r?t&1|2:t&1),e):(vi(e),null);case 22:case 23:return FE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?As&1073741824&&(vi(e),e.subtreeFlags&6&&(e.flags|=8192)):vi(e),null;case 24:return null;case 25:return null}throw Error(ot(156,e.tag))}function BW(n,e){switch(mE(e),e.tag){case 1:return ss(e.type)&&U1(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gh(),Gn(is),Gn(Ci),AE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return bE(e),null;case 13:if(Gn(er),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ot(340));ph()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Gn(er),null;case 4:return gh(),null;case 10:return _E(e.type._context),null;case 22:case 23:return FE(),null;case 24:return null;default:return null}}var Uv=!1,wi=!1,IW=typeof WeakSet=="function"?WeakSet:Set,gt=null;function kd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){fr(n,e,r)}else t.current=null}function B2(n,e,t){try{t()}catch(r){fr(n,e,r)}}var OR=!1;function DW(n,e){if(p2=L1,n=x4(),hE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===n)break t;if(d===t&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(m2={focusedElem:n,selectionRange:t},L1=!1,gt=e;gt!==null;)if(e=gt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,gt=n;else for(;gt!==null;){e=gt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Io(e.type,v),y);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(S){fr(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,gt=n;break}gt=e.return}return g=OR,OR=!1,g}function Om(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&B2(e,t,s)}i=i.next}while(i!==r)}}function $_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function I2(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vU(n){var e=n.alternate;e!==null&&(n.alternate=null,vU(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ca],delete e[yg],delete e[y2],delete e[mW],delete e[gW])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yU(n){return n.tag===5||n.tag===3||n.tag===4}function UR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function D2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=O1));else if(r!==4&&(n=n.child,n!==null))for(D2(n,e,t),n=n.sibling;n!==null;)D2(n,e,t),n=n.sibling}function L2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(L2(n,e,t),n=n.sibling;n!==null;)L2(n,e,t),n=n.sibling}var oi=null,Do=!1;function zl(n,e,t){for(t=t.child;t!==null;)_U(n,e,t),t=t.sibling}function _U(n,e,t){if(pa&&typeof pa.onCommitFiberUnmount=="function")try{pa.onCommitFiberUnmount(U_,t)}catch{}switch(t.tag){case 5:wi||kd(t,e);case 6:var r=oi,i=Do;oi=null,zl(n,e,t),oi=r,Do=i,oi!==null&&(Do?(n=oi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):oi.removeChild(t.stateNode));break;case 18:oi!==null&&(Do?(n=oi,t=t.stateNode,n.nodeType===8?$w(n.parentNode,t):n.nodeType===1&&$w(n,t),hg(n)):$w(oi,t.stateNode));break;case 4:r=oi,i=Do,oi=t.stateNode.containerInfo,Do=!0,zl(n,e,t),oi=r,Do=i;break;case 0:case 11:case 14:case 15:if(!wi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&B2(t,e,o),i=i.next}while(i!==r)}zl(n,e,t);break;case 1:if(!wi&&(kd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){fr(t,e,a)}zl(n,e,t);break;case 21:zl(n,e,t);break;case 22:t.mode&1?(wi=(r=wi)||t.memoizedState!==null,zl(n,e,t),wi=r):zl(n,e,t);break;default:zl(n,e,t)}}function NR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new IW),e.forEach(function(r){var i=HW.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ao(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:oi=a.stateNode,Do=!1;break e;case 3:oi=a.stateNode.containerInfo,Do=!0;break e;case 4:oi=a.stateNode.containerInfo,Do=!0;break e}a=a.return}if(oi===null)throw Error(ot(160));_U(s,o,i),oi=null,Do=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){fr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xU(e,n),e=e.sibling}function xU(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ao(e,n),sa(n),r&4){try{Om(3,n,n.return),$_(3,n)}catch(v){fr(n,n.return,v)}try{Om(5,n,n.return)}catch(v){fr(n,n.return,v)}}break;case 1:Ao(e,n),sa(n),r&512&&t!==null&&kd(t,t.return);break;case 5:if(Ao(e,n),sa(n),r&512&&t!==null&&kd(t,t.return),n.flags&32){var i=n.stateNode;try{ug(i,"")}catch(v){fr(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&GO(i,s),i2(a,o);var u=i2(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?$O(i,f):c==="dangerouslySetInnerHTML"?WO(i,f):c==="children"?ug(i,f):eE(i,c,f,u)}switch(a){case"input":qb(i,s);break;case"textarea":HO(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yd(i,!!s.multiple,m,!1):d!==!!s.multiple&&(s.defaultValue!=null?Yd(i,!!s.multiple,s.defaultValue,!0):Yd(i,!!s.multiple,s.multiple?[]:"",!1))}i[yg]=s}catch(v){fr(n,n.return,v)}}break;case 6:if(Ao(e,n),sa(n),r&4){if(n.stateNode===null)throw Error(ot(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){fr(n,n.return,v)}}break;case 3:if(Ao(e,n),sa(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{hg(e.containerInfo)}catch(v){fr(n,n.return,v)}break;case 4:Ao(e,n),sa(n);break;case 13:Ao(e,n),sa(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(DE=wr())),r&4&&NR(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(wi=(u=wi)||c,Ao(e,n),wi=u):Ao(e,n),sa(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(gt=n,c=n.child;c!==null;){for(f=gt=c;gt!==null;){switch(d=gt,m=d.child,d.tag){case 0:case 11:case 14:case 15:Om(4,d,d.return);break;case 1:kd(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){fr(r,t,v)}}break;case 5:kd(d,d.return);break;case 22:if(d.memoizedState!==null){GR(f);continue}}m!==null?(m.return=d,gt=m):GR(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jO("display",o))}catch(v){fr(n,n.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){fr(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ao(e,n),sa(n),r&4&&NR(n);break;case 21:break;default:Ao(e,n),sa(n)}}function sa(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(yU(t)){var r=t;break e}t=t.return}throw Error(ot(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ug(i,""),r.flags&=-33);var s=UR(n);L2(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=UR(n);D2(n,a,o);break;default:throw Error(ot(161))}}catch(l){fr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function LW(n,e,t){gt=n,wU(n)}function wU(n,e,t){for(var r=(n.mode&1)!==0;gt!==null;){var i=gt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Uv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||wi;a=Uv;var u=wi;if(Uv=o,(wi=l)&&!u)for(gt=i;gt!==null;)o=gt,l=o.child,o.tag===22&&o.memoizedState!==null?HR(i):l!==null?(l.return=o,gt=l):HR(i);for(;s!==null;)gt=s,wU(s),s=s.sibling;gt=i,Uv=a,wi=u}zR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,gt=s):zR(n)}}function zR(n){for(;gt!==null;){var e=gt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wi||$_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Io(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&hg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}wi||e.flags&512&&I2(e)}catch(d){fr(e,e.return,d)}}if(e===n){gt=null;break}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}}function GR(n){for(;gt!==null;){var e=gt;if(e===n){gt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,gt=t;break}gt=e.return}}function HR(n){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$_(4,e)}catch(l){fr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){fr(e,i,l)}}var s=e.return;try{I2(e)}catch(l){fr(e,s,l)}break;case 5:var o=e.return;try{I2(e)}catch(l){fr(e,o,l)}}}catch(l){fr(e,e.return,l)}if(e===n){gt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,gt=a;break}gt=e.return}}var FW=Math.ceil,K1=bl.ReactCurrentDispatcher,BE=bl.ReactCurrentOwner,ho=bl.ReactCurrentBatchConfig,pn=0,ei=null,Tr=null,li=0,As=0,Od=Vu(0),Nr=0,Ag=null,pf=0,X_=0,IE=0,Um=null,es=null,DE=0,yh=1/0,ja=null,J1=!1,F2=null,gu=null,Nv=!1,su=null,Y1=0,Nm=0,k2=null,a1=-1,l1=0;function Wi(){return pn&6?wr():a1!==-1?a1:a1=wr()}function vu(n){return n.mode&1?pn&2&&li!==0?li&-li:yW.transition!==null?(l1===0&&(l1=i4()),l1):(n=wn,n!==0||(n=window.event,n=n===void 0?16:f4(n.type)),n):1}function Uo(n,e,t,r){if(50<Nm)throw Nm=0,k2=null,Error(ot(185));Zg(n,t,r),(!(pn&2)||n!==ei)&&(n===ei&&(!(pn&2)&&(X_|=t),Nr===4&&ru(n,li)),os(n,r),t===1&&pn===0&&!(e.mode&1)&&(yh=wr()+500,V_&&Wu()))}function os(n,e){var t=n.callbackNode;yV(n,e);var r=D1(n,n===ei?li:0);if(r===0)t!==null&&ZP(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ZP(t),e===1)n.tag===0?vW(VR.bind(null,n)):R4(VR.bind(null,n)),hW(function(){!(pn&6)&&Wu()}),t=null;else{switch(s4(r)){case 1:t=sE;break;case 4:t=n4;break;case 16:t=I1;break;case 536870912:t=r4;break;default:t=I1}t=PU(t,SU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function SU(n,e){if(a1=-1,l1=0,pn&6)throw Error(ot(327));var t=n.callbackNode;if(th()&&n.callbackNode!==t)return null;var r=D1(n,n===ei?li:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Z1(n,r);else{e=r;var i=pn;pn|=2;var s=AU();(ei!==n||li!==e)&&(ja=null,yh=wr()+500,Qc(n,e));do try{UW();break}catch(a){bU(n,a)}while(1);yE(),K1.current=s,pn=i,Tr!==null?e=0:(ei=null,li=0,e=Nr)}if(e!==0){if(e===2&&(i=u2(n),i!==0&&(r=i,e=O2(n,i))),e===1)throw t=Ag,Qc(n,0),ru(n,r),os(n,wr()),t;if(e===6)ru(n,r);else{if(i=n.current.alternate,!(r&30)&&!kW(i)&&(e=Z1(n,r),e===2&&(s=u2(n),s!==0&&(r=s,e=O2(n,s))),e===1))throw t=Ag,Qc(n,0),ru(n,r),os(n,wr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ot(345));case 2:Bc(n,es,ja);break;case 3:if(ru(n,r),(r&130023424)===r&&(e=DE+500-wr(),10<e)){if(D1(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Wi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=v2(Bc.bind(null,n,es,ja),e);break}Bc(n,es,ja);break;case 4:if(ru(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Oo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FW(r/1960))-r,10<r){n.timeoutHandle=v2(Bc.bind(null,n,es,ja),r);break}Bc(n,es,ja);break;case 5:Bc(n,es,ja);break;default:throw Error(ot(329))}}}return os(n,wr()),n.callbackNode===t?SU.bind(null,n):null}function O2(n,e){var t=Um;return n.current.memoizedState.isDehydrated&&(Qc(n,e).flags|=256),n=Z1(n,e),n!==2&&(e=es,es=t,e!==null&&U2(e)),n}function U2(n){es===null?es=n:es.push.apply(es,n)}function kW(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Go(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ru(n,e){for(e&=~IE,e&=~X_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Oo(e),r=1<<t;n[t]=-1,e&=~r}}function VR(n){if(pn&6)throw Error(ot(327));th();var e=D1(n,0);if(!(e&1))return os(n,wr()),null;var t=Z1(n,e);if(n.tag!==0&&t===2){var r=u2(n);r!==0&&(e=r,t=O2(n,r))}if(t===1)throw t=Ag,Qc(n,0),ru(n,e),os(n,wr()),t;if(t===6)throw Error(ot(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Bc(n,es,ja),os(n,wr()),null}function LE(n,e){var t=pn;pn|=1;try{return n(e)}finally{pn=t,pn===0&&(yh=wr()+500,V_&&Wu())}}function mf(n){su!==null&&su.tag===0&&!(pn&6)&&th();var e=pn;pn|=1;var t=ho.transition,r=wn;try{if(ho.transition=null,wn=1,n)return n()}finally{wn=r,ho.transition=t,pn=e,!(pn&6)&&Wu()}}function FE(){As=Od.current,Gn(Od)}function Qc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,dW(t)),Tr!==null)for(t=Tr.return;t!==null;){var r=t;switch(mE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&U1();break;case 3:gh(),Gn(is),Gn(Ci),AE();break;case 5:bE(r);break;case 4:gh();break;case 13:Gn(er);break;case 19:Gn(er);break;case 10:_E(r.type._context);break;case 22:case 23:FE()}t=t.return}if(ei=n,Tr=n=yu(n.current,null),li=As=e,Nr=0,Ag=null,IE=X_=pf=0,es=Um=null,Gc!==null){for(e=0;e<Gc.length;e++)if(t=Gc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Gc=null}return n}function bU(n,e){do{var t=Tr;try{if(yE(),i1.current=X1,$1){for(var r=sr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$1=!1}if(hf=0,Zr=kr=sr=null,km=!1,wg=0,BE.current=null,t===null||t.return===null){Nr=1,Ag=e,Tr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=li,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=RR(o);if(m!==null){m.flags&=-257,BR(m,o,a,s,e),m.mode&1&&PR(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){PR(s,u,e),kE();break e}l=Error(ot(426))}}else if($n&&a.mode&1){var y=RR(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),BR(y,o,a,s,e),gE(vh(l,a));break e}}s=l=vh(l,a),Nr!==4&&(Nr=2),Um===null?Um=[s]:Um.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=oU(s,l,e);SR(s,_);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gu===null||!gu.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=aU(s,a,e);SR(s,S);break e}}s=s.return}while(s!==null)}EU(t)}catch(T){e=T,Tr===t&&t!==null&&(Tr=t=t.return);continue}break}while(1)}function AU(){var n=K1.current;return K1.current=X1,n===null?X1:n}function kE(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),ei===null||!(pf&268435455)&&!(X_&268435455)||ru(ei,li)}function Z1(n,e){var t=pn;pn|=2;var r=AU();(ei!==n||li!==e)&&(ja=null,Qc(n,e));do try{OW();break}catch(i){bU(n,i)}while(1);if(yE(),pn=t,K1.current=r,Tr!==null)throw Error(ot(261));return ei=null,li=0,Nr}function OW(){for(;Tr!==null;)MU(Tr)}function UW(){for(;Tr!==null&&!uV();)MU(Tr)}function MU(n){var e=TU(n.alternate,n,As);n.memoizedProps=n.pendingProps,e===null?EU(n):Tr=e,BE.current=null}function EU(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=BW(t,e),t!==null){t.flags&=32767,Tr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Nr=6,Tr=null;return}}else if(t=RW(t,e,As),t!==null){Tr=t;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=n}while(e!==null);Nr===0&&(Nr=5)}function Bc(n,e,t){var r=wn,i=ho.transition;try{ho.transition=null,wn=1,NW(n,e,t,r)}finally{ho.transition=i,wn=r}return null}function NW(n,e,t,r){do th();while(su!==null);if(pn&6)throw Error(ot(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ot(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(_V(n,s),n===ei&&(Tr=ei=null,li=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Nv||(Nv=!0,PU(I1,function(){return th(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ho.transition,ho.transition=null;var o=wn;wn=1;var a=pn;pn|=4,BE.current=null,DW(n,t),xU(t,n),sW(m2),L1=!!p2,m2=p2=null,n.current=t,LW(t),cV(),pn=a,wn=o,ho.transition=s}else n.current=t;if(Nv&&(Nv=!1,su=n,Y1=i),s=n.pendingLanes,s===0&&(gu=null),hV(t.stateNode),os(n,wr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(J1)throw J1=!1,n=F2,F2=null,n;return Y1&1&&n.tag!==0&&th(),s=n.pendingLanes,s&1?n===k2?Nm++:(Nm=0,k2=n):Nm=0,Wu(),null}function th(){if(su!==null){var n=s4(Y1),e=ho.transition,t=wn;try{if(ho.transition=null,wn=16>n?16:n,su===null)var r=!1;else{if(n=su,su=null,Y1=0,pn&6)throw Error(ot(331));var i=pn;for(pn|=4,gt=n.current;gt!==null;){var s=gt,o=s.child;if(gt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(gt=u;gt!==null;){var c=gt;switch(c.tag){case 0:case 11:case 15:Om(8,c,s)}var f=c.child;if(f!==null)f.return=c,gt=f;else for(;gt!==null;){c=gt;var d=c.sibling,m=c.return;if(vU(c),c===u){gt=null;break}if(d!==null){d.return=m,gt=d;break}gt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}gt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,gt=o;else e:for(;gt!==null;){if(s=gt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Om(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,gt=_;break e}gt=s.return}}var x=n.current;for(gt=x;gt!==null;){o=gt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,gt=w;else e:for(o=x;gt!==null;){if(a=gt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$_(9,a)}}catch(T){fr(a,a.return,T)}if(a===o){gt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,gt=S;break e}gt=a.return}}if(pn=i,Wu(),pa&&typeof pa.onPostCommitFiberRoot=="function")try{pa.onPostCommitFiberRoot(U_,n)}catch{}r=!0}return r}finally{wn=t,ho.transition=e}}return!1}function WR(n,e,t){e=vh(t,e),e=oU(n,e,1),n=mu(n,e,1),e=Wi(),n!==null&&(Zg(n,1,e),os(n,e))}function fr(n,e,t){if(n.tag===3)WR(n,n,t);else for(;e!==null;){if(e.tag===3){WR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gu===null||!gu.has(r))){n=vh(t,n),n=aU(e,n,1),e=mu(e,n,1),n=Wi(),e!==null&&(Zg(e,1,n),os(e,n));break}}e=e.return}}function zW(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Wi(),n.pingedLanes|=n.suspendedLanes&t,ei===n&&(li&t)===t&&(Nr===4||Nr===3&&(li&130023424)===li&&500>wr()-DE?Qc(n,0):IE|=t),os(n,e)}function CU(n,e){e===0&&(n.mode&1?(e=Pv,Pv<<=1,!(Pv&130023424)&&(Pv=4194304)):e=1);var t=Wi();n=pl(n,e),n!==null&&(Zg(n,e,t),os(n,t))}function GW(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),CU(n,t)}function HW(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ot(314))}r!==null&&r.delete(e),CU(n,t)}var TU;TU=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||is.current)ns=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ns=!1,PW(n,e,t);ns=!!(n.flags&131072)}else ns=!1,$n&&e.flags&1048576&&B4(e,G1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;o1(n,e),n=e.pendingProps;var i=hh(e,Ci.current);eh(e,t),i=EE(null,e,r,n,i,t);var s=CE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ss(r)?(s=!0,N1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wE(e),i.updater=W_,e.stateNode=i,i._reactInternals=e,A2(e,r,n,t),e=C2(null,e,r,!0,s,t)):(e.tag=0,$n&&s&&pE(e),Gi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(o1(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WW(r),n=Io(r,n),i){case 0:e=E2(null,e,r,n,t);break e;case 1:e=LR(null,e,r,n,t);break e;case 11:e=IR(null,e,r,n,t);break e;case 14:e=DR(null,e,r,Io(r.type,n),t);break e}throw Error(ot(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),E2(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),LR(n,e,r,i,t);case 3:e:{if(fU(e),n===null)throw Error(ot(387));r=e.pendingProps,s=e.memoizedState,i=s.element,F4(n,e),W1(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vh(Error(ot(423)),e),e=FR(n,e,r,t,i);break e}else if(r!==i){i=vh(Error(ot(424)),e),e=FR(n,e,r,t,i);break e}else for(Cs=pu(e.stateNode.containerInfo.firstChild),Ts=e,$n=!0,Lo=null,t=N4(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ph(),r===i){e=ml(n,e,t);break e}Gi(n,e,r,t)}e=e.child}return e;case 5:return z4(e),n===null&&w2(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,g2(r,i)?o=null:s!==null&&g2(r,s)&&(e.flags|=32),cU(n,e),Gi(n,e,o,t),e.child;case 6:return n===null&&w2(e),null;case 13:return dU(n,e,t);case 4:return SE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=mh(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),IR(n,e,r,i,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Dn(H1,r._currentValue),r._currentValue=o,s!==null)if(Go(s.value,o)){if(s.children===i.children&&!is.current){e=ml(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=il(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),S2(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ot(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),S2(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eh(e,t),i=mo(i),r=r(i),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return r=e.type,i=Io(r,e.pendingProps),i=Io(r.type,i),DR(n,e,r,i,t);case 15:return lU(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Io(r,i),o1(n,e),e.tag=1,ss(r)?(n=!0,N1(e)):n=!1,eh(e,t),O4(e,r,i),A2(e,r,i,t),C2(null,e,r,!0,n,t);case 19:return hU(n,e,t);case 22:return uU(n,e,t)}throw Error(ot(156,e.tag))};function PU(n,e){return t4(n,e)}function VW(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(n,e,t,r){return new VW(n,e,t,r)}function OE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WW(n){if(typeof n=="function")return OE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===nE)return 11;if(n===rE)return 14}return 2}function yu(n,e){var t=n.alternate;return t===null?(t=oo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function u1(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")OE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Cd:return qc(t.children,i,s,e);case tE:o=8,i|=8;break;case Kb:return n=oo(12,t,e,i|2),n.elementType=Kb,n.lanes=s,n;case Jb:return n=oo(13,t,e,i),n.elementType=Jb,n.lanes=s,n;case Yb:return n=oo(19,t,e,i),n.elementType=Yb,n.lanes=s,n;case UO:return K_(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case kO:o=10;break e;case OO:o=9;break e;case nE:o=11;break e;case rE:o=14;break e;case ql:o=16,r=null;break e}throw Error(ot(130,n==null?n:typeof n,""))}return e=oo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function qc(n,e,t,r){return n=oo(7,n,r,e),n.lanes=t,n}function K_(n,e,t,r){return n=oo(22,n,r,e),n.elementType=UO,n.lanes=t,n.stateNode={isHidden:!1},n}function eS(n,e,t){return n=oo(6,n,null,e),n.lanes=t,n}function tS(n,e,t){return e=oo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function jW(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fw(0),this.expirationTimes=Fw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function UE(n,e,t,r,i,s,o,a,l){return n=new jW(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=oo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wE(s),n}function $W(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ed,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function RU(n){if(!n)return Tu;n=n._reactInternals;e:{if(Mf(n)!==n||n.tag!==1)throw Error(ot(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ot(171))}if(n.tag===1){var t=n.type;if(ss(t))return P4(n,t,e)}return e}function BU(n,e,t,r,i,s,o,a,l){return n=UE(t,r,!0,n,i,s,o,a,l),n.context=RU(null),t=n.current,r=Wi(),i=vu(t),s=il(r,i),s.callback=e??null,mu(t,s,i),n.current.lanes=i,Zg(n,i,r),os(n,r),n}function J_(n,e,t,r){var i=e.current,s=Wi(),o=vu(i);return t=RU(t),e.context===null?e.context=t:e.pendingContext=t,e=il(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=mu(i,e,o),n!==null&&(Uo(n,i,o,s),r1(n,i,o)),o}function Q1(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function NE(n,e){jR(n,e),(n=n.alternate)&&jR(n,e)}function XW(){return null}var IU=typeof reportError=="function"?reportError:function(n){console.error(n)};function zE(n){this._internalRoot=n}Y_.prototype.render=zE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ot(409));J_(n,e,null,null)};Y_.prototype.unmount=zE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;mf(function(){J_(null,n,null,null)}),e[hl]=null}};function Y_(n){this._internalRoot=n}Y_.prototype.unstable_scheduleHydration=function(n){if(n){var e=l4();n={blockedOn:null,target:n,priority:e};for(var t=0;t<nu.length&&e!==0&&e<nu[t].priority;t++);nu.splice(t,0,n),t===0&&c4(n)}};function GE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Z_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $R(){}function KW(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Q1(o);s.call(u)}}var o=BU(e,r,n,0,null,!1,!1,"",$R);return n._reactRootContainer=o,n[hl]=o.current,gg(n.nodeType===8?n.parentNode:n),mf(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Q1(l);a.call(u)}}var l=UE(n,0,!1,null,null,!1,!1,"",$R);return n._reactRootContainer=l,n[hl]=l.current,gg(n.nodeType===8?n.parentNode:n),mf(function(){J_(e,l,t,r)}),l}function Q_(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Q1(o);a.call(l)}}J_(e,o,n,i)}else o=KW(t,e,n,i,r);return Q1(o)}o4=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Am(e.pendingLanes);t!==0&&(oE(e,t|1),os(e,wr()),!(pn&6)&&(yh=wr()+500,Wu()))}break;case 13:mf(function(){var r=pl(n,1);if(r!==null){var i=Wi();Uo(r,n,1,i)}}),NE(n,1)}};aE=function(n){if(n.tag===13){var e=pl(n,134217728);if(e!==null){var t=Wi();Uo(e,n,134217728,t)}NE(n,134217728)}};a4=function(n){if(n.tag===13){var e=vu(n),t=pl(n,e);if(t!==null){var r=Wi();Uo(t,n,e,r)}NE(n,e)}};l4=function(){return wn};u4=function(n,e){var t=wn;try{return wn=n,e()}finally{wn=t}};o2=function(n,e,t){switch(e){case"input":if(qb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=H_(r);if(!i)throw Error(ot(90));zO(r),qb(r,i)}}}break;case"textarea":HO(n,t);break;case"select":e=t.value,e!=null&&Yd(n,!!t.multiple,e,!1)}};JO=LE;YO=mf;var JW={usingClientEntryPoint:!1,Events:[qg,Bd,H_,XO,KO,LE]},kp={findFiberByHostInstance:zc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},YW={bundleType:kp.bundleType,version:kp.version,rendererPackageName:kp.rendererPackageName,rendererConfig:kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qO(n),n===null?null:n.stateNode},findFiberByHostInstance:kp.findFiberByHostInstance||XW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zv.isDisabled&&zv.supportsFiber)try{U_=zv.inject(YW),pa=zv}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JW;Ls.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GE(e))throw Error(ot(200));return $W(n,e,null,t)};Ls.createRoot=function(n,e){if(!GE(n))throw Error(ot(299));var t=!1,r="",i=IU;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=UE(n,1,!1,null,null,t,!1,r,i),n[hl]=e.current,gg(n.nodeType===8?n.parentNode:n),new zE(e)};Ls.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ot(188)):(n=Object.keys(n).join(","),Error(ot(268,n)));return n=qO(e),n=n===null?null:n.stateNode,n};Ls.flushSync=function(n){return mf(n)};Ls.hydrate=function(n,e,t){if(!Z_(e))throw Error(ot(200));return Q_(null,n,e,!0,t)};Ls.hydrateRoot=function(n,e,t){if(!GE(n))throw Error(ot(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=IU;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=BU(e,null,n,1,t??null,i,!1,s,o),n[hl]=e.current,gg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Y_(e)};Ls.render=function(n,e,t){if(!Z_(e))throw Error(ot(200));return Q_(null,n,e,!1,t)};Ls.unmountComponentAtNode=function(n){if(!Z_(n))throw Error(ot(40));return n._reactRootContainer?(mf(function(){Q_(null,null,n,!1,function(){n._reactRootContainer=null,n[hl]=null})}),!0):!1};Ls.unstable_batchedUpdates=LE;Ls.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Z_(t))throw Error(ot(200));if(n==null||n._reactInternals===void 0)throw Error(ot(38));return Q_(n,e,t,!1,r)};Ls.version="18.2.0-next-9e3b772b8-20220608";function DU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DU)}catch(n){console.error(n)}}DU(),BO.exports=Ls;var LU=BO.exports;const FU=$o(LU);var kU,XR=LU;kU=$b.createRoot=XR.createRoot,$b.hydrateRoot=XR.hydrateRoot;const ZW="modulepreload",QW=function(n){return"/stratigemdigital/"+n},KR={},qW=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=QW(s),s in KR)return;KR[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":ZW,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var HE={};Object.defineProperty(HE,"__esModule",{value:!0});HE.parse=o7;HE.serialize=a7;const e7=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t7=/^[\u0021-\u003A\u003C-\u007E]*$/,n7=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r7=/^[\u0020-\u003A\u003D-\u007E]*$/,i7=Object.prototype.toString,s7=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function o7(n,e){const t=new s7,r=n.length;if(r<2)return t;const i=(e==null?void 0:e.decode)||l7;let s=0;do{const o=n.indexOf("=",s);if(o===-1)break;const a=n.indexOf(";",s),l=a===-1?r:a;if(o>l){s=n.lastIndexOf(";",o-1)+1;continue}const u=JR(n,s,o),c=YR(n,o,u),f=n.slice(u,c);if(t[f]===void 0){let d=JR(n,o+1,l),m=YR(n,l,d);const g=i(n.slice(d,m));t[f]=g}s=l+1}while(s<r);return t}function JR(n,e,t){do{const r=n.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function YR(n,e,t){for(;e>t;){const r=n.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function a7(n,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!e7.test(n))throw new TypeError(`argument name is invalid: ${n}`);const i=r(e);if(!t7.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=n+"="+i;if(!t)return s;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);s+="; Max-Age="+t.maxAge}if(t.domain){if(!n7.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);s+="; Domain="+t.domain}if(t.path){if(!r7.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);s+="; Path="+t.path}if(t.expires){if(!u7(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);s+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(s+="; HttpOnly"),t.secure&&(s+="; Secure"),t.partitioned&&(s+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return s}function l7(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function u7(n){return i7.call(n)==="[object Date]"}var ZR="popstate";function c7(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return N2("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Mg(i)}return d7(e,t,null,n)}function or(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f7(){return Math.random().toString(36).substring(2,10)}function QR(n,e){return{usr:n.state,key:n.key,idx:e}}function N2(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Uh(e):e,state:t,key:e&&e.key||r||f7()}}function Mg({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Uh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function d7(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let y=c(),_=y==null?null:y-u;u=y,l&&l({action:a,location:v.location,delta:_})}function d(y,_){a="PUSH";let x=N2(v.location,y,_);t&&t(x,y),u=c()+1;let w=QR(x,u),S=v.createHref(x);try{o.pushState(w,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function m(y,_){a="REPLACE";let x=N2(v.location,y,_);t&&t(x,y),u=c();let w=QR(x,u),S=v.createHref(x);o.replaceState(w,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function g(y){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof y=="string"?y:Mg(y);return x=x.replace(/ $/,"%20"),or(_,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,_)}let v={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ZR,f),l=y,()=>{i.removeEventListener(ZR,f),l=null}},createHref(y){return e(i,y)},createURL:g,encodeLocation(y){let _=g(y);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:m,go(y){return o.go(y)}};return v}function OU(n,e,t="/"){return h7(n,e,t,!1)}function h7(n,e,t,r){let i=typeof e=="string"?Uh(e):e,s=Pu(i.pathname||"/",t);if(s==null)return null;let o=UU(n);p7(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=M7(s);a=b7(o[l],u,r)}return a}function UU(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(or(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=sl([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(or(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),UU(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:w7(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of NU(s.path))i(s,o,l)}),e}function NU(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=NU(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function p7(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:S7(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var m7=/^:[\w-]+$/,g7=3,v7=2,y7=1,_7=10,x7=-2,qR=n=>n==="*";function w7(n,e){let t=n.split("/"),r=t.length;return t.some(qR)&&(r+=x7),e&&(r+=v7),t.filter(i=>!qR(i)).reduce((i,s)=>i+(m7.test(s)?g7:s===""?y7:_7),r)}function S7(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function b7(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",f=q1({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=q1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:sl([s,f.pathname]),pathnameBase:P7(sl([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=sl([s,f.pathnameBase]))}return o}function q1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=A7(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},d)=>{if(c==="*"){let g=a[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return f&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function A7(n,e=!1,t=!0){wa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function M7(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wa(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Pu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function E7(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Uh(n):n;return{pathname:t?t.startsWith("/")?t:C7(t,e):e,search:R7(r),hash:B7(i)}}function C7(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function nS(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T7(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zU(n){let e=T7(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function GU(n,e,t,r=!1){let i;typeof n=="string"?i=Uh(n):(i={...n},or(!i.pathname||!i.pathname.includes("?"),nS("?","pathname","search",i)),or(!i.pathname||!i.pathname.includes("#"),nS("#","pathname","hash",i)),or(!i.search||!i.search.includes("#"),nS("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=E7(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var sl=n=>n.join("/").replace(/\/\/+/g,"/"),P7=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),R7=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,B7=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function I7(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var HU=["POST","PUT","PATCH","DELETE"];new Set(HU);var D7=["GET",...HU];new Set(D7);var Nh=B.createContext(null);Nh.displayName="DataRouter";var q_=B.createContext(null);q_.displayName="DataRouterState";var VU=B.createContext({isTransitioning:!1});VU.displayName="ViewTransition";var L7=B.createContext(new Map);L7.displayName="Fetchers";var F7=B.createContext(null);F7.displayName="Await";var Aa=B.createContext(null);Aa.displayName="Navigation";var t0=B.createContext(null);t0.displayName="Location";var Al=B.createContext({outlet:null,matches:[],isDataRoute:!1});Al.displayName="Route";var VE=B.createContext(null);VE.displayName="RouteError";function k7(n,{relative:e}={}){or(n0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(Aa),{hash:i,pathname:s,search:o}=r0(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:sl([t,s])),r.createHref({pathname:a,search:o,hash:i})}function n0(){return B.useContext(t0)!=null}function Ef(){return or(n0(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(t0).location}var WU="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jU(n){B.useContext(Aa).static||B.useLayoutEffect(n)}function $U(){let{isDataRoute:n}=B.useContext(Al);return n?J7():O7()}function O7(){or(n0(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(Nh),{basename:e,navigator:t}=B.useContext(Aa),{matches:r}=B.useContext(Al),{pathname:i}=Ef(),s=JSON.stringify(zU(r)),o=B.useRef(!1);return jU(()=>{o.current=!0}),B.useCallback((l,u={})=>{if(wa(o.current,WU),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=GU(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:sl([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,n])}B.createContext(null);function r0(n,{relative:e}={}){let{matches:t}=B.useContext(Al),{pathname:r}=Ef(),i=JSON.stringify(zU(t));return B.useMemo(()=>GU(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function U7(n,e){return XU(n,e)}function XU(n,e,t,r){var _;or(n0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=B.useContext(Aa),{matches:s}=B.useContext(Al),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let x=c&&c.path||"";KU(l,!c||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=Ef(),d;if(e){let x=typeof e=="string"?Uh(e):e;or(u==="/"||((_=x.pathname)==null?void 0:_.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),d=x}else d=f;let m=d.pathname||"/",g=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=OU(n,{pathname:g});wa(c||v!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),wa(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=V7(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:sl([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:sl([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,t,r);return e&&y?B.createElement(t0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},y):y}function N7(){let n=K7(),e=I7(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:s},"ErrorBoundary")," or"," ",B.createElement("code",{style:s},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,o)}var z7=B.createElement(N7,null),G7=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(Al.Provider,{value:this.props.routeContext},B.createElement(VE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function H7({routeContext:n,match:e,children:t}){let r=B.useContext(Nh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Al.Provider,{value:n},t)}function V7(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);or(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=t,d=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,d=!1,m=null,g=null;t&&(f=s&&u.route.id?s[u.route.id]:void 0,m=u.route.errorElement||z7,o&&(a<0&&c===0?(KU("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,g=null):a===c&&(d=!0,g=u.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,c+1)),y=()=>{let _;return f?_=m:d?_=g:u.route.Component?_=B.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=l,B.createElement(H7,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:_})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?B.createElement(G7,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}function WE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W7(n){let e=B.useContext(Nh);return or(e,WE(n)),e}function j7(n){let e=B.useContext(q_);return or(e,WE(n)),e}function $7(n){let e=B.useContext(Al);return or(e,WE(n)),e}function jE(n){let e=$7(n),t=e.matches[e.matches.length-1];return or(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function X7(){return jE("useRouteId")}function K7(){var r;let n=B.useContext(VE),e=j7("useRouteError"),t=jE("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function J7(){let{router:n}=W7("useNavigate"),e=jE("useNavigate"),t=B.useRef(!1);return jU(()=>{t.current=!0}),B.useCallback(async(i,s={})=>{wa(t.current,WU),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var eB={};function KU(n,e,t){!e&&!eB[n]&&(eB[n]=!0,wa(!1,t))}B.memo(Y7);function Y7({routes:n,future:e,state:t}){return XU(n,void 0,t,e)}function z2(n){or(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z7({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){or(!n0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=B.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Uh(t));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:d="default"}=t,m=B.useMemo(()=>{let g=Pu(l,o);return g==null?null:{location:{pathname:g,search:u,hash:c,state:f,key:d},navigationType:r}},[o,l,u,c,f,d,r]);return wa(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:B.createElement(Aa.Provider,{value:a},B.createElement(t0.Provider,{children:e,value:m}))}function Q7({children:n,location:e}){return U7(G2(n),e)}function G2(n,e=[]){let t=[];return B.Children.forEach(n,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){t.push.apply(t,G2(r.props.children,s));return}or(r.type===z2,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),or(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=G2(r.props.children,s)),t.push(o)}),t}var c1="get",f1="application/x-www-form-urlencoded";function ex(n){return n!=null&&typeof n.tagName=="string"}function q7(n){return ex(n)&&n.tagName.toLowerCase()==="button"}function ej(n){return ex(n)&&n.tagName.toLowerCase()==="form"}function tj(n){return ex(n)&&n.tagName.toLowerCase()==="input"}function nj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rj(n,e){return n.button===0&&(!e||e==="_self")&&!nj(n)}var Gv=null;function ij(){if(Gv===null)try{new FormData(document.createElement("form"),0),Gv=!1}catch{Gv=!0}return Gv}var sj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rS(n){return n!=null&&!sj.has(n)?(wa(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${f1}"`),null):n}function oj(n,e){let t,r,i,s,o;if(ej(n)){let a=n.getAttribute("action");r=a?Pu(a,e):null,t=n.getAttribute("method")||c1,i=rS(n.getAttribute("enctype"))||f1,s=new FormData(n)}else if(q7(n)||tj(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Pu(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||c1,i=rS(n.getAttribute("formenctype"))||rS(a.getAttribute("enctype"))||f1,s=new FormData(a,n),!ij()){let{name:u,type:c,value:f}=n;if(c==="image"){let d=u?`${u}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else u&&s.append(u,f)}}else{if(ex(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=c1,r=null,i=f1,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function $E(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function aj(n,e){if(n.id in e)return e[n.id];try{let t=await qW(()=>import(n.module),[]);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lj(n){return n!=null&&typeof n.page=="string"}function uj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function cj(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await aj(s,t);return o.links?o.links():[]}return[]}));return pj(r.flat(1).filter(uj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function tB(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function fj(n,e){return dj(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function dj(n){return[...new Set(n)]}function hj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pj(n,e){let t=new Set,r=new Set(e);return n.reduce((i,s)=>{if(e&&!lj(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(hj(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function mj(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function gj(){let n=B.useContext(Nh);return $E(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function vj(){let n=B.useContext(q_);return $E(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var XE=B.createContext(void 0);XE.displayName="FrameworkContext";function JU(){let n=B.useContext(XE);return $E(n,"You must render this element inside a <HydratedRouter> element"),n}function yj(n,e){let t=B.useContext(XE),[r,i]=B.useState(!1),[s,o]=B.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=e,d=B.useRef(null);B.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=_=>{_.forEach(x=>{o(x.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[n]),B.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,d,{}]:[s,d,{onFocus:Op(a,m),onBlur:Op(l,g),onMouseEnter:Op(u,m),onMouseLeave:Op(c,g),onTouchStart:Op(f,m)}]:[!1,d,{}]}function Op(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _j({page:n,...e}){let{router:t}=gj(),r=B.useMemo(()=>OU(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(wj,{page:n,matches:r,...e}):null}function xj(n){let{manifest:e,routeModules:t}=JU(),[r,i]=B.useState([]);return B.useEffect(()=>{let s=!1;return cj(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function wj({page:n,matches:e,...t}){let r=Ef(),{manifest:i,routeModules:s}=JU(),{loaderData:o,matches:a}=vj(),l=B.useMemo(()=>tB(n,e,a,i,r,"data"),[n,e,a,i,r]),u=B.useMemo(()=>tB(n,e,a,i,r,"assets"),[n,e,a,i,r]),c=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(y=>{var x;let _=i.routes[y.route.id];!_||!_.hasLoader||(!l.some(w=>w.route.id===y.route.id)&&y.route.id in o&&((x=s[y.route.id])!=null&&x.shouldRevalidate)||_.hasClientLoader?g=!0:m.add(y.route.id))}),m.size===0)return[];let v=mj(n);return g&&m.size>0&&v.searchParams.set("_routes",e.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[o,r,i,l,e,n,s]),f=B.useMemo(()=>fj(u,i),[u,i]),d=xj(u);return B.createElement(B.Fragment,null,c.map(m=>B.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),f.map(m=>B.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),d.map(({key:m,link:g})=>B.createElement("link",{key:m,...g})))}function Sj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YU&&(window.__reactRouterVersion="7.1.3")}catch{}function bj({basename:n,children:e,window:t}){let r=B.useRef();r.current==null&&(r.current=c7({window:t,v5Compat:!0}));let i=r.current,[s,o]=B.useState({action:i.action,location:i.location}),a=B.useCallback(l=>{B.startTransition(()=>o(l))},[o]);return B.useLayoutEffect(()=>i.listen(a),[i,a]),B.createElement(Z7,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var ZU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QU=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...d},m){let{basename:g}=B.useContext(Aa),v=typeof u=="string"&&ZU.test(u),y,_=!1;if(typeof u=="string"&&v&&(y=u,YU))try{let M=new URL(window.location.href),C=u.startsWith("//")?new URL(M.protocol+u):new URL(u),L=Pu(C.pathname,g);C.origin===M.origin&&L!=null?u=L+C.search+C.hash:_=!0}catch{wa(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=k7(u,{relative:i}),[w,S,T]=yj(r,d),E=Cj(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function R(M){e&&e(M),M.defaultPrevented||E(M)}let b=B.createElement("a",{...d,...T,href:y||x,onClick:_||s?e:R,ref:Sj(m,S),target:l,"data-discover":!v&&t==="render"?"true":void 0});return w&&!v?B.createElement(B.Fragment,null,b,B.createElement(_j,{page:x})):b});QU.displayName="Link";var Aj=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let f=r0(o,{relative:u.relative}),d=Ef(),m=B.useContext(q_),{navigator:g,basename:v}=B.useContext(Aa),y=m!=null&&Ij(f)&&a===!0,_=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,x=d.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(x=x.toLowerCase(),w=w?w.toLowerCase():null,_=_.toLowerCase()),w&&v&&(w=Pu(w,v)||w);const S=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=x===_||!i&&x.startsWith(_)&&x.charAt(S)==="/",E=w!=null&&(w===_||!i&&w.startsWith(_)&&w.charAt(_.length)==="/"),R={isActive:T,isPending:E,isTransitioning:y},b=T?e:void 0,M;typeof r=="function"?M=r(R):M=[r,T?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(R):s;return B.createElement(QU,{...u,"aria-current":b,className:M,ref:c,style:C,to:o,viewTransition:a},typeof l=="function"?l(R):l)});Aj.displayName="NavLink";var Mj=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=c1,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...d},m)=>{let g=Rj(),v=Bj(a,{relative:u}),y=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&ZU.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let S=w.nativeEvent.submitter,T=(S==null?void 0:S.getAttribute("formmethod"))||o;g(S||w.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:f})};return B.createElement("form",{ref:m,method:y,action:v,onSubmit:r?l:x,...d,"data-discover":!_&&n==="render"?"true":void 0})});Mj.displayName="Form";function Ej(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qU(n){let e=B.useContext(Nh);return or(e,Ej(n)),e}function Cj(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=$U(),l=Ef(),u=r0(n,{relative:s});return B.useCallback(c=>{if(rj(c,e)){c.preventDefault();let f=t!==void 0?t:Mg(l)===Mg(u);a(n,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}var Tj=0,Pj=()=>`__${String(++Tj)}__`;function Rj(){let{router:n}=qU("useSubmit"),{basename:e}=B.useContext(Aa),t=X7();return B.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=oj(r,e);if(i.navigate===!1){let c=i.fetcherKey||Pj();await n.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function Bj(n,{relative:e}={}){let{basename:t}=B.useContext(Aa),r=B.useContext(Al);or(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...r0(n||".",{relative:e})},o=Ef();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:sl([t,s.pathname])),Mg(s)}function Ij(n,e={}){let t=B.useContext(VU);or(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qU("useViewTransitionState"),i=r0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Pu(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Pu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return q1(i.pathname,o)!=null||q1(i.pathname,s)!=null}new TextEncoder;function tn(){return tn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tn.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ml="150",Ic={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Dc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},eN=0,H2=1,tN=2,Dj=3,nN=0,tx=1,zm=2,Vc=3,Ho=0,Pr=1,qr=2,Lj=2,ti=0,ef=1,e_=2,V2=3,W2=4,rN=5,Uc=100,iN=101,sN=102,j2=103,$2=104,oN=200,aN=201,lN=202,uN=203,KE=204,JE=205,cN=206,fN=207,dN=208,hN=209,pN=210,mN=0,gN=1,vN=2,t_=3,yN=4,_N=5,xN=6,wN=7,i0=0,SN=1,bN=2,No=0,AN=1,MN=2,EN=3,YE=4,CN=5,Ru=300,gl=301,Bu=302,_h=303,Eg=304,zh=306,Iu=1e3,Nn=1001,xh=1002,bn=1003,Cg=1004,Fj=1004,nh=1005,kj=1005,Kt=1006,nx=1007,Oj=1007,Vo=1008,X2=1008,Hr=1009,ZE=1010,QE=1011,qE=1012,eC=1013,da=1014,Rr=1015,Br=1016,TN=1017,PN=1018,_u=1020,RN=1021,Ur=1023,BN=1024,IN=1025,xu=1026,Du=1027,tC=1028,DN=1029,LN=1030,FN=1031,kN=1033,d1=33776,h1=33777,p1=33778,m1=33779,K2=35840,J2=35841,Y2=35842,Z2=35843,ON=36196,Q2=37492,q2=37496,eA=37808,tA=37809,nA=37810,rA=37811,iA=37812,sA=37813,oA=37814,aA=37815,lA=37816,uA=37817,cA=37818,fA=37819,dA=37820,hA=37821,g1=36492,UN=36283,pA=36284,mA=36285,gA=36286,NN=2200,zN=2201,GN=2202,wh=2300,gf=2301,v1=2302,Wc=2400,jc=2401,Tg=2402,rx=2500,nC=2501,HN=0,rC=1,n_=2,Wo=3e3,Nt=3001,ju=3200,iC=3201,$u=0,VN=1,Uj="",eo="srgb",vl="srgb-linear",sC="display-p3",Nj=0,y1=7680,zj=7681,Gj=7682,Hj=7683,Vj=34055,Wj=34056,jj=5386,$j=512,Xj=513,Kj=514,Jj=515,Yj=516,Zj=517,Qj=518,WN=519,Pg=35044,ol=35048,qj=35040,e$=35045,t$=35049,n$=35041,r$=35046,i$=35050,s$=35042,o$="100",vA="300 es",r_=1035;let xo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const yi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nB=1234567;const tf=Math.PI/180,Rg=180/Math.PI;function Ps(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(yi[n&255]+yi[n>>8&255]+yi[n>>16&255]+yi[n>>24&255]+"-"+yi[e&255]+yi[e>>8&255]+"-"+yi[e>>16&15|64]+yi[e>>24&255]+"-"+yi[t&63|128]+yi[t>>8&255]+"-"+yi[t>>16&255]+yi[t>>24&255]+yi[r&255]+yi[r>>8&255]+yi[r>>16&255]+yi[r>>24&255]).toLowerCase()}function Sr(n,e,t){return Math.max(e,Math.min(t,n))}function oC(n,e){return(n%e+e)%e}function a$(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function l$(n,e,t){return n!==e?(t-n)/(e-n):0}function Gm(n,e,t){return(1-t)*n+t*e}function u$(n,e,t,r){return Gm(n,e,1-Math.exp(-t*r))}function c$(n,e=1){return e-Math.abs(oC(n,e*2)-e)}function f$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function d$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function h$(n,e){return n+Math.floor(Math.random()*(e-n+1))}function p$(n,e){return n+Math.random()*(e-n)}function m$(n){return n*(.5-Math.random())}function g$(n){n!==void 0&&(nB=n);let e=nB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function v$(n){return n*tf}function y$(n){return n*Rg}function yA(n){return(n&n-1)===0&&n!==0}function jN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $N(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function _$(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),d=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*d,a*u);break;case"YZY":n.set(l*d,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*d,a*c,a*u);break;case"XZX":n.set(a*c,l*g,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*g,a*u);break;case"ZYZ":n.set(l*g,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function nl(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function En(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ao={DEG2RAD:tf,RAD2DEG:Rg,generateUUID:Ps,clamp:Sr,euclideanModulo:oC,mapLinear:a$,inverseLerp:l$,lerp:Gm,damp:u$,pingpong:c$,smoothstep:f$,smootherstep:d$,randInt:h$,randFloat:p$,randFloatSpread:m$,seededRandom:g$,degToRad:v$,radToDeg:y$,isPowerOfTwo:yA,ceilPowerOfTwo:jN,floorPowerOfTwo:$N,setQuaternionFromProperEuler:_$,normalize:En,denormalize:nl};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zr{constructor(){zr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],d=r[2],m=r[5],g=r[8],v=i[0],y=i[3],_=i[6],x=i[1],w=i[4],S=i[7],T=i[2],E=i[5],R=i[8];return s[0]=o*v+a*x+l*T,s[3]=o*y+a*w+l*E,s[6]=o*_+a*S+l*R,s[1]=u*v+c*x+f*T,s[4]=u*y+c*w+f*E,s[7]=u*_+c*S+f*R,s[2]=d*v+m*x+g*T,s[5]=d*y+m*w+g*E,s[8]=d*_+m*S+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,d=a*l-c*s,m=u*s-o*l,g=t*f+r*d+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(i*u-c*r)*v,e[2]=(a*r-i*o)*v,e[3]=d*v,e[4]=(c*t-i*l)*v,e[5]=(i*s-a*t)*v,e[6]=m*v,e[7]=(r*l-u*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(iS.makeScale(e,t)),this}rotate(e){return this.premultiply(iS.makeRotation(-e)),this}translate(e,t){return this.premultiply(iS.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iS=new zr;function XN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const x$={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ud(n,e){return new x$[n](e)}function Bg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class Hn{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const d=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(f!==v||l!==d||u!==m||c!==g){let y=1-a;const _=l*d+u*m+c*g+f*v,x=_>=0?1:-1,w=1-_*_;if(w>Number.EPSILON){const T=Math.sqrt(w),E=Math.atan2(T,_*x);y=Math.sin(y*E)/T,a=Math.sin(a*E)/T}const S=a*x;if(l=l*y+d*S,u=u*y+m*S,c=c*y+g*S,f=f*y+v*S,y===1-a){const T=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=T,u*=T,c*=T,f*=T}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],d=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+c*f+l*m-u*d,e[t+1]=l*g+c*d+u*f-a*m,e[t+2]=u*g+c*m+a*d-l*f,e[t+3]=c*g-a*f-l*d-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),d=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=d*c*f+u*m*g,this._y=u*m*f-d*c*g,this._z=u*c*g+d*m*f,this._w=u*c*f-d*m*g;break;case"YXZ":this._x=d*c*f+u*m*g,this._y=u*m*f-d*c*g,this._z=u*c*g-d*m*f,this._w=u*c*f+d*m*g;break;case"ZXY":this._x=d*c*f-u*m*g,this._y=u*m*f+d*c*g,this._z=u*c*g+d*m*f,this._w=u*c*f-d*m*g;break;case"ZYX":this._x=d*c*f-u*m*g,this._y=u*m*f+d*c*g,this._z=u*c*g-d*m*f,this._w=u*c*f+d*m*g;break;case"YZX":this._x=d*c*f+u*m*g,this._y=u*m*f+d*c*g,this._z=u*c*g-d*m*f,this._w=u*c*f-d*m*g;break;case"XZY":this._x=d*c*f-u*m*g,this._y=u*m*f-d*c*g,this._z=u*c*g+d*m*f,this._w=u*c*f+d*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],d=r+a+f;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(c-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,r=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rB.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rB.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,c=l*r+a*t-s*i,f=l*i+s*r-o*t,d=-s*t-o*r-a*i;return this.x=u*l+d*-s+c*-a-f*-o,this.y=c*l+d*-o+f*-s-u*-a,this.z=f*l+d*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return sS.copy(this).projectOnVector(e),this.sub(sS)}reflect(e){return this.sub(sS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sS=new $,rB=new Hn;function rh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const w$=new zr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),S$=new zr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),ou=new $;function b$(n){return n.convertSRGBToLinear(),ou.set(n.r,n.g,n.b).applyMatrix3(S$),n.setRGB(ou.x,ou.y,ou.z)}function A$(n){return ou.set(n.r,n.g,n.b).applyMatrix3(w$),n.setRGB(ou.x,ou.y,ou.z).convertLinearToSRGB()}const M$={[vl]:n=>n,[eo]:n=>n.convertSRGBToLinear(),[sC]:b$},E$={[vl]:n=>n,[eo]:n=>n.convertLinearToSRGB(),[sC]:A$},xi={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return vl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=M$[e],i=E$[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Zf;class aC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zf===void 0&&(Zf=Bg("canvas")),Zf.width=e.width,Zf.height=e.height;const r=Zf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Zf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=rh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(rh(t[r]/255)*255):t[r]=rh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class $c{constructor(e=null){this.isSource=!0,this.uuid=Ps(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(aS(i[o].image)):s.push(aS(i[o]))}else s=aS(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function aS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?aC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let C$=0;class fn extends xo{constructor(e=fn.DEFAULT_IMAGE,t=fn.DEFAULT_MAPPING,r=Nn,i=Nn,s=Kt,o=Vo,a=Ur,l=Hr,u=fn.DEFAULT_ANISOTROPY,c=Wo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C$++}),this.uuid=Ps(),this.name="",this.source=new $c(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ru)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Iu:e.x=e.x-Math.floor(e.x);break;case Nn:e.x=e.x<0?0:1;break;case xh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Iu:e.y=e.y-Math.floor(e.y);break;case Nn:e.y=e.y<0?0:1;break;case xh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}fn.DEFAULT_IMAGE=null;fn.DEFAULT_MAPPING=Ru;fn.DEFAULT_ANISOTROPY=1;class qt{constructor(e=0,t=0,r=0,i=1){qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],d=l[1],m=l[5],g=l[9],v=l[2],y=l[6],_=l[10];if(Math.abs(c-d)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(u+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(u+1)/2,S=(m+1)/2,T=(_+1)/2,E=(c+d)/4,R=(f+v)/4,b=(g+y)/4;return w>S&&w>T?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=E/r,s=R/r):S>T?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=E/i,s=b/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=R/s,i=b/s),this.set(r,i,s,t),this}let x=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(d-c)*(d-c));return Math.abs(x)<.001&&(x=1),this.x=(y-g)/x,this.y=(f-v)/x,this.z=(d-c)/x,this.w=Math.acos((u+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Tn extends xo{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new fn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Kt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $c(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ix extends fn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=bn,this.minFilter=bn,this.wrapR=Nn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class T$ extends Tn{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ix(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class lC extends fn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=bn,this.minFilter=bn,this.wrapR=Nn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class P$ extends Tn{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new lC(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class R$ extends Tn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ma{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],d=e[l+2];c<t&&(t=c),f<r&&(r=f),d<i&&(i=d),c>s&&(s=c),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),d=e.getZ(l);c<t&&(t=c),f<r&&(r=f),d<i&&(i=d),c>s&&(s=c),f>o&&(o=f),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=hc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)hc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(hc)}else r.boundingBox===null&&r.computeBoundingBox(),lS.copy(r.boundingBox),lS.applyMatrix4(e.matrixWorld),this.union(lS);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hc),hc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Up),Hv.subVectors(this.max,Up),Qf.subVectors(e.a,Up),qf.subVectors(e.b,Up),ed.subVectors(e.c,Up),Gl.subVectors(qf,Qf),Hl.subVectors(ed,qf),pc.subVectors(Qf,ed);let t=[0,-Gl.z,Gl.y,0,-Hl.z,Hl.y,0,-pc.z,pc.y,Gl.z,0,-Gl.x,Hl.z,0,-Hl.x,pc.z,0,-pc.x,-Gl.y,Gl.x,0,-Hl.y,Hl.x,0,-pc.y,pc.x,0];return!uS(t,Qf,qf,ed,Hv)||(t=[1,0,0,0,1,0,0,0,1],!uS(t,Qf,qf,ed,Hv))?!1:(Vv.crossVectors(Gl,Hl),t=[Vv.x,Vv.y,Vv.z],uS(t,Qf,qf,ed,Hv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ka[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ka[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ka[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ka[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ka[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ka[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ka[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ka[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ka),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ka=[new $,new $,new $,new $,new $,new $,new $,new $],hc=new $,lS=new Ma,Qf=new $,qf=new $,ed=new $,Gl=new $,Hl=new $,pc=new $,Up=new $,Hv=new $,Vv=new $,mc=new $;function uS(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){mc.fromArray(n,s);const a=i.x*Math.abs(mc.x)+i.y*Math.abs(mc.y)+i.z*Math.abs(mc.z),l=e.dot(mc),u=t.dot(mc),c=r.dot(mc);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const B$=new Ma,Np=new $,cS=new $;let El=class{constructor(e=new $,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):B$.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Np.subVectors(e,this.center);const t=Np.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Np,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Np.copy(e.center).add(cS)),this.expandByPoint(Np.copy(e.center).sub(cS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Oa=new $,fS=new $,Wv=new $,Vl=new $,dS=new $,jv=new $,hS=new $;class Gh{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oa.copy(this.origin).addScaledVector(this.direction,t),Oa.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){fS.copy(e).add(t).multiplyScalar(.5),Wv.copy(t).sub(e).normalize(),Vl.copy(this.origin).sub(fS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Wv),a=Vl.dot(this.direction),l=-Vl.dot(Wv),u=Vl.lengthSq(),c=Math.abs(1-o*o);let f,d,m,g;if(c>0)if(f=o*l-a,d=o*a-l,g=s*c,f>=0)if(d>=-g)if(d<=g){const v=1/c;f*=v,d*=v,m=f*(f+o*d+2*a)+d*(o*f+d+2*l)+u}else d=s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+u;else d=-s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+u;else d<=-g?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+u):d<=g?(f=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+u):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+d*(d+2*l)+u);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),m=-f*f+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(fS).addScaledVector(Wv,d),m}intersectSphere(e,t){Oa.subVectors(e.center,this.origin);const r=Oa.dot(this.direction),i=Oa.dot(Oa)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Oa)!==null}intersectTriangle(e,t,r,i,s){dS.subVectors(t,e),jv.subVectors(r,e),hS.crossVectors(dS,jv);let o=this.direction.dot(hS),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Vl.subVectors(this.origin,e);const l=a*this.direction.dot(jv.crossVectors(Vl,jv));if(l<0)return null;const u=a*this.direction.dot(dS.cross(Vl));if(u<0||l+u>o)return null;const c=-a*Vl.dot(hS);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Et{constructor(){Et.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,u,c,f,d,m,g,v,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=c,_[10]=f,_[14]=d,_[3]=m,_[7]=g,_[11]=v,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Et().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/td.setFromMatrixColumn(e,0).length(),s=1/td.setFromMatrixColumn(e,1).length(),o=1/td.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*c,m=o*f,g=a*c,v=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=m+g*u,t[5]=d-v*u,t[9]=-a*l,t[2]=v-d*u,t[6]=g+m*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*c,m=l*f,g=u*c,v=u*f;t[0]=d+v*a,t[4]=g*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=m*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*c,m=l*f,g=u*c,v=u*f;t[0]=d-v*a,t[4]=-o*f,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*c,t[9]=v-d*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*c,m=o*f,g=a*c,v=a*f;t[0]=l*c,t[4]=g*u-m,t[8]=d*u+v,t[1]=l*f,t[5]=v*u+d,t[9]=m*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*u,g=a*l,v=a*u;t[0]=l*c,t[4]=v-d*f,t[8]=g*f+m,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*f+g,t[10]=d-v*f}else if(e.order==="XZY"){const d=o*l,m=o*u,g=a*l,v=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=d*f+v,t[5]=o*c,t[9]=m*f-g,t[2]=g*f-m,t[6]=a*c,t[10]=v*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(I$,e,D$)}lookAt(e,t,r){const i=this.elements;return Ss.subVectors(e,t),Ss.lengthSq()===0&&(Ss.z=1),Ss.normalize(),Wl.crossVectors(r,Ss),Wl.lengthSq()===0&&(Math.abs(r.z)===1?Ss.x+=1e-4:Ss.z+=1e-4,Ss.normalize(),Wl.crossVectors(r,Ss)),Wl.normalize(),$v.crossVectors(Ss,Wl),i[0]=Wl.x,i[4]=$v.x,i[8]=Ss.x,i[1]=Wl.y,i[5]=$v.y,i[9]=Ss.y,i[2]=Wl.z,i[6]=$v.z,i[10]=Ss.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],d=r[9],m=r[13],g=r[2],v=r[6],y=r[10],_=r[14],x=r[3],w=r[7],S=r[11],T=r[15],E=i[0],R=i[4],b=i[8],M=i[12],C=i[1],L=i[5],D=i[9],z=i[13],F=i[2],H=i[6],G=i[10],te=i[14],V=i[3],K=i[7],j=i[11],J=i[15];return s[0]=o*E+a*C+l*F+u*V,s[4]=o*R+a*L+l*H+u*K,s[8]=o*b+a*D+l*G+u*j,s[12]=o*M+a*z+l*te+u*J,s[1]=c*E+f*C+d*F+m*V,s[5]=c*R+f*L+d*H+m*K,s[9]=c*b+f*D+d*G+m*j,s[13]=c*M+f*z+d*te+m*J,s[2]=g*E+v*C+y*F+_*V,s[6]=g*R+v*L+y*H+_*K,s[10]=g*b+v*D+y*G+_*j,s[14]=g*M+v*z+y*te+_*J,s[3]=x*E+w*C+S*F+T*V,s[7]=x*R+w*L+S*H+T*K,s[11]=x*b+w*D+S*G+T*j,s[15]=x*M+w*z+S*te+T*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],d=e[10],m=e[14],g=e[3],v=e[7],y=e[11],_=e[15];return g*(+s*l*f-i*u*f-s*a*d+r*u*d+i*a*m-r*l*m)+v*(+t*l*m-t*u*d+s*o*d-i*o*m+i*u*c-s*l*c)+y*(+t*u*f-t*a*m-s*o*f+r*o*m+s*a*c-r*u*c)+_*(-i*a*c-t*l*f+t*a*d+i*o*f-r*o*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],m=e[11],g=e[12],v=e[13],y=e[14],_=e[15],x=f*y*u-v*d*u+v*l*m-a*y*m-f*l*_+a*d*_,w=g*d*u-c*y*u-g*l*m+o*y*m+c*l*_-o*d*_,S=c*v*u-g*f*u+g*a*m-o*v*m-c*a*_+o*f*_,T=g*f*l-c*v*l-g*a*d+o*v*d+c*a*y-o*f*y,E=t*x+r*w+i*S+s*T;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/E;return e[0]=x*R,e[1]=(v*d*s-f*y*s-v*i*m+r*y*m+f*i*_-r*d*_)*R,e[2]=(a*y*s-v*l*s+v*i*u-r*y*u-a*i*_+r*l*_)*R,e[3]=(f*l*s-a*d*s-f*i*u+r*d*u+a*i*m-r*l*m)*R,e[4]=w*R,e[5]=(c*y*s-g*d*s+g*i*m-t*y*m-c*i*_+t*d*_)*R,e[6]=(g*l*s-o*y*s-g*i*u+t*y*u+o*i*_-t*l*_)*R,e[7]=(o*d*s-c*l*s+c*i*u-t*d*u-o*i*m+t*l*m)*R,e[8]=S*R,e[9]=(g*f*s-c*v*s-g*r*m+t*v*m+c*r*_-t*f*_)*R,e[10]=(o*v*s-g*a*s+g*r*u-t*v*u-o*r*_+t*a*_)*R,e[11]=(c*a*s-o*f*s-c*r*u+t*f*u+o*r*m-t*a*m)*R,e[12]=T*R,e[13]=(c*v*i-g*f*i+g*r*d-t*v*d-c*r*y+t*f*y)*R,e[14]=(g*a*i-o*v*i-g*r*l+t*v*l+o*r*y-t*a*y)*R,e[15]=(o*f*i-c*a*i+c*r*l-t*f*l-o*r*d+t*a*d)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,d=s*u,m=s*c,g=s*f,v=o*c,y=o*f,_=a*f,x=l*u,w=l*c,S=l*f,T=r.x,E=r.y,R=r.z;return i[0]=(1-(v+_))*T,i[1]=(m+S)*T,i[2]=(g-w)*T,i[3]=0,i[4]=(m-S)*E,i[5]=(1-(d+_))*E,i[6]=(y+x)*E,i[7]=0,i[8]=(g+w)*R,i[9]=(y-x)*R,i[10]=(1-(d+v))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=td.set(i[0],i[1],i[2]).length();const o=td.set(i[4],i[5],i[6]).length(),a=td.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Mo.copy(this);const u=1/s,c=1/o,f=1/a;return Mo.elements[0]*=u,Mo.elements[1]*=u,Mo.elements[2]*=u,Mo.elements[4]*=c,Mo.elements[5]*=c,Mo.elements[6]*=c,Mo.elements[8]*=f,Mo.elements[9]*=f,Mo.elements[10]*=f,t.setFromRotationMatrix(Mo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),c=(t+e)/(t-e),f=(r+i)/(r-i),d=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),c=1/(o-s),f=(t+e)*l,d=(r+i)*u,m=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const td=new $,Mo=new Et,I$=new $(0,0,0),D$=new $(1,1,1),Wl=new $,$v=new $,Ss=new $,iB=new Et,sB=new Hn;class Fr{constructor(e=0,t=0,r=0,i=Fr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Sr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return iB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iB,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sB.setFromEuler(this),this.setFromQuaternion(sB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fr.DEFAULT_ORDER="XYZ";class nf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let L$=0;const oB=new $,nd=new Hn,Ua=new Et,Xv=new $,zp=new $,F$=new $,k$=new Hn,aB=new $(1,0,0),lB=new $(0,1,0),uB=new $(0,0,1),O$={type:"added"},cB={type:"removed"};class dn extends xo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:L$++}),this.uuid=Ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DEFAULT_UP.clone();const e=new $,t=new Fr,r=new Hn,i=new $(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Et},normalMatrix:{value:new zr}}),this.matrix=new Et,this.matrixWorld=new Et,this.matrixAutoUpdate=dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new nf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return nd.setFromAxisAngle(e,t),this.quaternion.multiply(nd),this}rotateOnWorldAxis(e,t){return nd.setFromAxisAngle(e,t),this.quaternion.premultiply(nd),this}rotateX(e){return this.rotateOnAxis(aB,e)}rotateY(e){return this.rotateOnAxis(lB,e)}rotateZ(e){return this.rotateOnAxis(uB,e)}translateOnAxis(e,t){return oB.copy(e).applyQuaternion(this.quaternion),this.position.add(oB.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(aB,e)}translateY(e){return this.translateOnAxis(lB,e)}translateZ(e){return this.translateOnAxis(uB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ua.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Xv.copy(e):Xv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),zp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ua.lookAt(zp,Xv,this.up):Ua.lookAt(Xv,zp,this.up),this.quaternion.setFromRotationMatrix(Ua),i&&(Ua.extractRotation(i.matrixWorld),nd.setFromRotationMatrix(Ua),this.quaternion.premultiply(nd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(O$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cB)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(cB)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ua.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ua.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ua),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,e,F$),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,k$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),d=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}dn.DEFAULT_UP=new $(0,1,0);dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Eo=new $,Na=new $,pS=new $,za=new $,rd=new $,id=new $,fB=new $,mS=new $,gS=new $,vS=new $;class io{constructor(e=new $,t=new $,r=new $){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Eo.subVectors(e,t),i.cross(Eo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Eo.subVectors(i,t),Na.subVectors(r,t),pS.subVectors(e,t);const o=Eo.dot(Eo),a=Eo.dot(Na),l=Eo.dot(pS),u=Na.dot(Na),c=Na.dot(pS),f=o*u-a*a;if(f===0)return s.set(-2,-1,-1);const d=1/f,m=(u*l-a*c)*d,g=(o*c-a*l)*d;return s.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,za),za.x>=0&&za.y>=0&&za.x+za.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,za),l.set(0,0),l.addScaledVector(s,za.x),l.addScaledVector(o,za.y),l.addScaledVector(a,za.z),l}static isFrontFacing(e,t,r,i){return Eo.subVectors(r,t),Na.subVectors(e,t),Eo.cross(Na).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),Na.subVectors(this.a,this.b),Eo.cross(Na).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return io.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return io.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return io.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return io.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return io.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;rd.subVectors(i,r),id.subVectors(s,r),mS.subVectors(e,r);const l=rd.dot(mS),u=id.dot(mS);if(l<=0&&u<=0)return t.copy(r);gS.subVectors(e,i);const c=rd.dot(gS),f=id.dot(gS);if(c>=0&&f<=c)return t.copy(i);const d=l*f-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(rd,o);vS.subVectors(e,s);const m=rd.dot(vS),g=id.dot(vS);if(g>=0&&m<=g)return t.copy(s);const v=m*u-l*g;if(v<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(r).addScaledVector(id,a);const y=c*g-m*f;if(y<=0&&f-c>=0&&m-g>=0)return fB.subVectors(s,i),a=(f-c)/(f-c+(m-g)),t.copy(i).addScaledVector(fB,a);const _=1/(y+v+d);return o=v*_,a=d*_,t.copy(r).addScaledVector(rd,o).addScaledVector(id,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let U$=0;class Xn extends xo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:U$++}),this.uuid=Ps(),this.name="",this.type="Material",this.blending=ef,this.side=Ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=KE,this.blendDst=JE,this.blendEquation=Uc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=t_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=y1,this.stencilZFail=y1,this.stencilZPass=y1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ef&&(r.blending=this.blending),this.side!==Ho&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const KN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Co={h:0,s:0,l:0},Kv={h:0,s:0,l:0};function yS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let st=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=eo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=xi.workingColorSpace){return this.r=e,this.g=t,this.b=r,xi.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=xi.workingColorSpace){if(e=oC(e,1),t=Sr(t,0,1),r=Sr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=yS(o,s,e+1/3),this.g=yS(o,s,e),this.b=yS(o,s,e-1/3)}return xi.toWorkingColorSpace(this,i),this}setStyle(e,t=eo){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,xi.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,xi.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,u,c,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,xi.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,xi.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=eo){const r=KN[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rh(e.r),this.g=rh(e.g),this.b=rh(e.b),this}copyLinearToSRGB(e){return this.r=oS(e.r),this.g=oS(e.g),this.b=oS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=eo){return xi.fromWorkingColorSpace(_i.copy(this),e),Sr(_i.r*255,0,255)<<16^Sr(_i.g*255,0,255)<<8^Sr(_i.b*255,0,255)<<0}getHexString(e=eo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xi.workingColorSpace){xi.fromWorkingColorSpace(_i.copy(this),t);const r=_i.r,i=_i.g,s=_i.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=xi.workingColorSpace){return xi.fromWorkingColorSpace(_i.copy(this),t),e.r=_i.r,e.g=_i.g,e.b=_i.b,e}getStyle(e=eo){xi.fromWorkingColorSpace(_i.copy(this),e);const t=_i.r,r=_i.g,i=_i.b;return e!==eo?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${i*255|0})`}offsetHSL(e,t,r){return this.getHSL(Co),Co.h+=e,Co.s+=t,Co.l+=r,this.setHSL(Co.h,Co.s,Co.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Co),e.getHSL(Kv);const r=Gm(Co.h,Kv.h,t),i=Gm(Co.s,Kv.s,t),s=Gm(Co.l,Kv.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _i=new st;st.NAMES=KN;class bi extends Xn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Er=new $,Jv=new De;class sn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Pg,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Jv.fromBufferAttribute(this,t),Jv.applyMatrix3(e),this.setXY(t,Jv.x,Jv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Er.fromBufferAttribute(this,t),Er.applyMatrix3(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Er.fromBufferAttribute(this,t),Er.applyMatrix4(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Er.fromBufferAttribute(this,t),Er.applyNormalMatrix(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Er.fromBufferAttribute(this,t),Er.transformDirection(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nl(t,this.array)),t}setX(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nl(t,this.array)),t}setY(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nl(t,this.array)),t}setW(e,t){return this.normalized&&(t=En(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),r=En(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),r=En(r,this.array),i=En(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=En(t,this.array),r=En(r,this.array),i=En(i,this.array),s=En(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Pg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class N$ extends sn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class z$ extends sn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class G$ extends sn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class H$ extends sn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class uC extends sn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class V$ extends sn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class cC extends sn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class W$ extends sn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class wt extends sn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class j$ extends sn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let $$=0;const Xs=new Et,_S=new dn,sd=new $,bs=new Ma,Gp=new Ma,Yr=new $;class jt extends xo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$$++}),this.uuid=Ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(XN(e)?cC:uC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new zr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xs.makeRotationFromQuaternion(e),this.applyMatrix4(Xs),this}rotateX(e){return Xs.makeRotationX(e),this.applyMatrix4(Xs),this}rotateY(e){return Xs.makeRotationY(e),this.applyMatrix4(Xs),this}rotateZ(e){return Xs.makeRotationZ(e),this.applyMatrix4(Xs),this}translate(e,t,r){return Xs.makeTranslation(e,t,r),this.applyMatrix4(Xs),this}scale(e,t,r){return Xs.makeScale(e,t,r),this.applyMatrix4(Xs),this}lookAt(e){return _S.lookAt(e),_S.updateMatrix(),this.applyMatrix4(_S.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sd).negate(),this.translate(sd.x,sd.y,sd.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ma);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];bs.setFromBufferAttribute(s),this.morphTargetsRelative?(Yr.addVectors(this.boundingBox.min,bs.min),this.boundingBox.expandByPoint(Yr),Yr.addVectors(this.boundingBox.max,bs.max),this.boundingBox.expandByPoint(Yr)):(this.boundingBox.expandByPoint(bs.min),this.boundingBox.expandByPoint(bs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new El);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $,1/0);return}if(e){const r=this.boundingSphere.center;if(bs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Gp.setFromBufferAttribute(a),this.morphTargetsRelative?(Yr.addVectors(bs.min,Gp.min),bs.expandByPoint(Yr),Yr.addVectors(bs.max,Gp.max),bs.expandByPoint(Yr)):(bs.expandByPoint(Gp.min),bs.expandByPoint(Gp.max))}bs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Yr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Yr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Yr.fromBufferAttribute(a,u),l&&(sd.fromBufferAttribute(e,u),Yr.add(sd)),i=Math.max(i,r.distanceToSquared(Yr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new sn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let C=0;C<a;C++)u[C]=new $,c[C]=new $;const f=new $,d=new $,m=new $,g=new De,v=new De,y=new De,_=new $,x=new $;function w(C,L,D){f.fromArray(i,C*3),d.fromArray(i,L*3),m.fromArray(i,D*3),g.fromArray(o,C*2),v.fromArray(o,L*2),y.fromArray(o,D*2),d.sub(f),m.sub(f),v.sub(g),y.sub(g);const z=1/(v.x*y.y-y.x*v.y);isFinite(z)&&(_.copy(d).multiplyScalar(y.y).addScaledVector(m,-v.y).multiplyScalar(z),x.copy(m).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(z),u[C].add(_),u[L].add(_),u[D].add(_),c[C].add(x),c[L].add(x),c[D].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let C=0,L=S.length;C<L;++C){const D=S[C],z=D.start,F=D.count;for(let H=z,G=z+F;H<G;H+=3)w(r[H+0],r[H+1],r[H+2])}const T=new $,E=new $,R=new $,b=new $;function M(C){R.fromArray(s,C*3),b.copy(R);const L=u[C];T.copy(L),T.sub(R.multiplyScalar(R.dot(L))).normalize(),E.crossVectors(b,L);const z=E.dot(c[C])<0?-1:1;l[C*4]=T.x,l[C*4+1]=T.y,l[C*4+2]=T.z,l[C*4+3]=z}for(let C=0,L=S.length;C<L;++C){const D=S[C],z=D.start,F=D.count;for(let H=z,G=z+F;H<G;H+=3)M(r[H+0]),M(r[H+1]),M(r[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new sn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,m=r.count;d<m;d++)r.setXYZ(d,0,0,0);const i=new $,s=new $,o=new $,a=new $,l=new $,u=new $,c=new $,f=new $;if(e)for(let d=0,m=e.count;d<m;d+=3){const g=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,y),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,m=t.count;d<m;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Yr.fromBufferAttribute(e,t),Yr.normalize(),e.setXYZ(t,Yr.x,Yr.y,Yr.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,d=new u.constructor(l.length*c);let m=0,g=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*c;for(let _=0;_<c;_++)d[g++]=u[m++]}return new sn(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const d=u[c],m=e(d,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,d=u.length;f<d;f++){const m=u[f];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let d=0,m=f.length;d<m;d++)c.push(f[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dB=new Et,oa=new Gh,Yv=new El,hB=new $,Hp=new $,Vp=new $,Wp=new $,xS=new $,Zv=new $,Qv=new De,qv=new De,ey=new De,wS=new $,ty=new $;class Ln extends dn{constructor(e=new jt,t=new bi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Zv.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(xS.fromBufferAttribute(f,e),o?Zv.addScaledVector(xS,c):Zv.addScaledVector(xS.sub(t),c))}t.add(Zv)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Yv.copy(r.boundingSphere),Yv.applyMatrix4(s),oa.copy(e.ray).recast(e.near),Yv.containsPoint(oa.origin)===!1&&(oa.intersectSphere(Yv,hB)===null||oa.origin.distanceToSquared(hB)>(e.far-e.near)**2))||(dB.copy(s).invert(),oa.copy(e.ray).applyMatrix4(dB),r.boundingBox!==null&&oa.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv2,f=r.groups,d=r.drawRange;if(a!==null)if(Array.isArray(i))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=i[v.materialIndex],_=Math.max(v.start,d.start),x=Math.min(a.count,Math.min(v.start+v.count,d.start+d.count));for(let w=_,S=x;w<S;w+=3){const T=a.getX(w),E=a.getX(w+1),R=a.getX(w+2);o=ny(this,y,e,oa,u,c,T,E,R),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,d.start),g=Math.min(a.count,d.start+d.count);for(let v=m,y=g;v<y;v+=3){const _=a.getX(v),x=a.getX(v+1),w=a.getX(v+2);o=ny(this,i,e,oa,u,c,_,x,w),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,g=f.length;m<g;m++){const v=f[m],y=i[v.materialIndex],_=Math.max(v.start,d.start),x=Math.min(l.count,Math.min(v.start+v.count,d.start+d.count));for(let w=_,S=x;w<S;w+=3){const T=w,E=w+1,R=w+2;o=ny(this,y,e,oa,u,c,T,E,R),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,d.start),g=Math.min(l.count,d.start+d.count);for(let v=m,y=g;v<y;v+=3){const _=v,x=v+1,w=v+2;o=ny(this,i,e,oa,u,c,_,x,w),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}}function X$(n,e,t,r,i,s,o,a){let l;if(e.side===Pr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Ho,a),l===null)return null;ty.copy(a),ty.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(ty);return u<t.near||u>t.far?null:{distance:u,point:ty.clone(),object:n}}function ny(n,e,t,r,i,s,o,a,l){n.getVertexPosition(o,Hp),n.getVertexPosition(a,Vp),n.getVertexPosition(l,Wp);const u=X$(n,e,t,r,Hp,Vp,Wp,wS);if(u){i&&(Qv.fromBufferAttribute(i,o),qv.fromBufferAttribute(i,a),ey.fromBufferAttribute(i,l),u.uv=io.getUV(wS,Hp,Vp,Wp,Qv,qv,ey,new De)),s&&(Qv.fromBufferAttribute(s,o),qv.fromBufferAttribute(s,a),ey.fromBufferAttribute(s,l),u.uv2=io.getUV(wS,Hp,Vp,Wp,Qv,qv,ey,new De));const c={a:o,b:a,c:l,normal:new $,materialIndex:0};io.getNormal(Hp,Vp,Wp,c.normal),u.face=c}return u}class Xu extends jt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let d=0,m=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new wt(u,3)),this.setAttribute("normal",new wt(c,3)),this.setAttribute("uv",new wt(f,2));function g(v,y,_,x,w,S,T,E,R,b,M){const C=S/R,L=T/b,D=S/2,z=T/2,F=E/2,H=R+1,G=b+1;let te=0,V=0;const K=new $;for(let j=0;j<G;j++){const J=j*L-z;for(let W=0;W<H;W++){const ne=W*C-D;K[v]=ne*x,K[y]=J*w,K[_]=F,u.push(K.x,K.y,K.z),K[v]=0,K[y]=0,K[_]=E>0?1:-1,c.push(K.x,K.y,K.z),f.push(W/R),f.push(1-j/b),te+=1}}for(let j=0;j<b;j++)for(let J=0;J<R;J++){const W=d+J+H*j,ne=d+J+H*(j+1),ue=d+(J+1)+H*(j+1),q=d+(J+1)+H*j;l.push(W,ne,q),l.push(ne,ue,q),V+=6}a.addGroup(m,V,M),m+=V,d+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ni(n){const e={};for(let t=0;t<n.length;t++){const r=Sh(n[t]);for(const i in r)e[i]=r[i]}return e}function K$(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function JN(n){return n.getRenderTarget()===null&&n.outputEncoding===Nt?eo:vl}const fC={clone:Sh,merge:Ni};var J$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pr extends Xn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=J$,this.fragmentShader=Y$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sh(e.uniforms),this.uniformsGroups=K$(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Hh extends dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Et,this.projectionMatrix=new Et,this.projectionMatrixInverse=new Et}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Un=class extends Hh{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Rg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(tf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Rg*2*Math.atan(Math.tan(tf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(tf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const od=-90,ad=1;class dC extends dn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Un(od,ad,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Un(od,ad,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Un(od,ad,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Un(od,ad,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Un(od,ad,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new Un(od,ad,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),f=e.toneMapping,d=e.xr.enabled;e.toneMapping=No,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class s0 extends fn{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:gl,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class sx extends Tn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new s0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Kt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Xu(5,5,5),s=new pr({name:"CubemapFromEquirect",uniforms:Sh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Pr,blending:ti});s.uniforms.tEquirect.value=t;const o=new Ln(i,s),a=t.minFilter;return t.minFilter===Vo&&(t.minFilter=Kt),new dC(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const SS=new $,Z$=new $,Q$=new zr;class Ja{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=SS.subVectors(r,t).cross(Z$.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(SS),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Q$.getNormalMatrix(e),i=this.coplanarPoint(SS).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ld=new El,ry=new $;class ox{constructor(e=new Ja,t=new Ja,r=new Ja,i=new Ja,s=new Ja,o=new Ja){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],m=r[9],g=r[10],v=r[11],y=r[12],_=r[13],x=r[14],w=r[15];return t[0].setComponents(a-i,f-l,v-d,w-y).normalize(),t[1].setComponents(a+i,f+l,v+d,w+y).normalize(),t[2].setComponents(a+s,f+u,v+m,w+_).normalize(),t[3].setComponents(a-s,f-u,v-m,w-_).normalize(),t[4].setComponents(a-o,f-c,v-g,w-x).normalize(),t[5].setComponents(a+o,f+c,v+g,w+x).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),ld.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ld)}intersectsSprite(e){return ld.center.set(0,0,0),ld.radius=.7071067811865476,ld.applyMatrix4(e.matrixWorld),this.intersectsSphere(ld)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(ry.x=i.normal.x>0?e.max.x:e.min.x,ry.y=i.normal.y>0?e.max.y:e.min.y,ry.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ry)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function YN(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function q$(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,d=u.usage,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,d),u.onUploadCallback();let g;if(f instanceof Float32Array)g=5126;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(f instanceof Int16Array)g=5122;else if(f instanceof Uint32Array)g=5125;else if(f instanceof Int32Array)g=5124;else if(f instanceof Int8Array)g=5120;else if(f instanceof Uint8Array)g=5121;else if(f instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const d=c.array,m=c.updateRange;n.bindBuffer(f,u),m.count===-1?n.bufferSubData(f,0,d):(t?n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d,m.offset,m.count):n.bufferSubData(f,m.offset*d.BYTES_PER_ELEMENT,d.subarray(m.offset,m.offset+m.count)),m.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:o,remove:a,update:l}}class Xo extends jt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,d=t/l,m=[],g=[],v=[],y=[];for(let _=0;_<c;_++){const x=_*d-o;for(let w=0;w<u;w++){const S=w*f-s;g.push(S,-x,0),v.push(0,0,1),y.push(w/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let x=0;x<a;x++){const w=x+u*_,S=x+u*(_+1),T=x+1+u*(_+1),E=x+1+u*_;m.push(w,S,E),m.push(S,T,E)}this.setIndex(m),this.setAttribute("position",new wt(g,3)),this.setAttribute("normal",new wt(v,3)),this.setAttribute("uv",new wt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xo(e.width,e.height,e.widthSegments,e.heightSegments)}}var eX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,tX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nX=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,rX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sX=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oX="vec3 transformed = vec3( position );",aX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lX=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,uX=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cX=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fX=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,yX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_X=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,xX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wX=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,AX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,MX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EX="gl_FragColor = linearToOutputTexel( gl_FragColor );",CX=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,TX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,RX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,BX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,IX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,DX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,LX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,FX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,kX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,OX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,UX=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,NX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zX=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,GX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,HX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,VX=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,WX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$X=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,XX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,KX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,JX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,YX=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ZX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,QX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,qX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,nK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,rK=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,iK=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aK=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lK=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uK=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cK=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,fK=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,dK=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hK=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,pK=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vK=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yK=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,_K=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,xK=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,wK=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,SK=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bK=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,AK=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,MK=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,EK=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,CK=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,TK=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PK=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,RK=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BK=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,IK=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DK=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,LK=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FK=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,kK=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,OK=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,UK=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,NK=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zK=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,GK=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,HK=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VK=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,WK=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,jK=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,$K=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,XK=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,KK=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,JK=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,YK=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,ZK=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const QK=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qK=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,iJ=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,oJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,aJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dJ=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_J=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,CJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TJ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,RJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Xt={alphamap_fragment:eX,alphamap_pars_fragment:tX,alphatest_fragment:nX,alphatest_pars_fragment:rX,aomap_fragment:iX,aomap_pars_fragment:sX,begin_vertex:oX,beginnormal_vertex:aX,bsdfs:lX,iridescence_fragment:uX,bumpmap_pars_fragment:cX,clipping_planes_fragment:fX,clipping_planes_pars_fragment:dX,clipping_planes_pars_vertex:hX,clipping_planes_vertex:pX,color_fragment:mX,color_pars_fragment:gX,color_pars_vertex:vX,color_vertex:yX,common:_X,cube_uv_reflection_fragment:xX,defaultnormal_vertex:wX,displacementmap_pars_vertex:SX,displacementmap_vertex:bX,emissivemap_fragment:AX,emissivemap_pars_fragment:MX,encodings_fragment:EX,encodings_pars_fragment:CX,envmap_fragment:TX,envmap_common_pars_fragment:PX,envmap_pars_fragment:RX,envmap_pars_vertex:BX,envmap_physical_pars_fragment:VX,envmap_vertex:IX,fog_vertex:DX,fog_pars_vertex:LX,fog_fragment:FX,fog_pars_fragment:kX,gradientmap_pars_fragment:OX,lightmap_fragment:UX,lightmap_pars_fragment:NX,lights_lambert_fragment:zX,lights_lambert_pars_fragment:GX,lights_pars_begin:HX,lights_toon_fragment:WX,lights_toon_pars_fragment:jX,lights_phong_fragment:$X,lights_phong_pars_fragment:XX,lights_physical_fragment:KX,lights_physical_pars_fragment:JX,lights_fragment_begin:YX,lights_fragment_maps:ZX,lights_fragment_end:QX,logdepthbuf_fragment:qX,logdepthbuf_pars_fragment:eK,logdepthbuf_pars_vertex:tK,logdepthbuf_vertex:nK,map_fragment:rK,map_pars_fragment:iK,map_particle_fragment:sK,map_particle_pars_fragment:oK,metalnessmap_fragment:aK,metalnessmap_pars_fragment:lK,morphcolor_vertex:uK,morphnormal_vertex:cK,morphtarget_pars_vertex:fK,morphtarget_vertex:dK,normal_fragment_begin:hK,normal_fragment_maps:pK,normal_pars_fragment:mK,normal_pars_vertex:gK,normal_vertex:vK,normalmap_pars_fragment:yK,clearcoat_normal_fragment_begin:_K,clearcoat_normal_fragment_maps:xK,clearcoat_pars_fragment:wK,iridescence_pars_fragment:SK,output_fragment:bK,packing:AK,premultiplied_alpha_fragment:MK,project_vertex:EK,dithering_fragment:CK,dithering_pars_fragment:TK,roughnessmap_fragment:PK,roughnessmap_pars_fragment:RK,shadowmap_pars_fragment:BK,shadowmap_pars_vertex:IK,shadowmap_vertex:DK,shadowmask_pars_fragment:LK,skinbase_vertex:FK,skinning_pars_vertex:kK,skinning_vertex:OK,skinnormal_vertex:UK,specularmap_fragment:NK,specularmap_pars_fragment:zK,tonemapping_fragment:GK,tonemapping_pars_fragment:HK,transmission_fragment:VK,transmission_pars_fragment:WK,uv_pars_fragment:jK,uv_pars_vertex:$K,uv_vertex:XK,uv2_pars_fragment:KK,uv2_pars_vertex:JK,uv2_vertex:YK,worldpos_vertex:ZK,background_vert:QK,background_frag:qK,backgroundCube_vert:eJ,backgroundCube_frag:tJ,cube_vert:nJ,cube_frag:rJ,depth_vert:iJ,depth_frag:sJ,distanceRGBA_vert:oJ,distanceRGBA_frag:aJ,equirect_vert:lJ,equirect_frag:uJ,linedashed_vert:cJ,linedashed_frag:fJ,meshbasic_vert:dJ,meshbasic_frag:hJ,meshlambert_vert:pJ,meshlambert_frag:mJ,meshmatcap_vert:gJ,meshmatcap_frag:vJ,meshnormal_vert:yJ,meshnormal_frag:_J,meshphong_vert:xJ,meshphong_frag:wJ,meshphysical_vert:SJ,meshphysical_frag:bJ,meshtoon_vert:AJ,meshtoon_frag:MJ,points_vert:EJ,points_frag:CJ,shadow_vert:TJ,shadow_frag:PJ,sprite_vert:RJ,sprite_frag:BJ},ct={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zr},uv2Transform:{value:new zr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zr}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zr}}},Fo={basic:{uniforms:Ni([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:Ni([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new st(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:Ni([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:Ni([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:Ni([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new st(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:Ni([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:Ni([ct.points,ct.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:Ni([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:Ni([ct.common,ct.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:Ni([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:Ni([ct.sprite,ct.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new zr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xt.backgroundCube_vert,fragmentShader:Xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:Ni([ct.common,ct.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:Ni([ct.lights,ct.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};Fo.physical={uniforms:Ni([Fo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new De(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};const iy={r:0,b:0,g:0};function IJ(n,e,t,r,i,s,o){const a=new st(0);let l=s===!0?0:1,u,c,f=null,d=0,m=null;function g(y,_){let x=!1,w=_.isScene===!0?_.background:null;w&&w.isTexture&&(w=(_.backgroundBlurriness>0?t:e).get(w));const S=n.xr,T=S.getSession&&S.getSession();T&&T.environmentBlendMode==="additive"&&(w=null),w===null?v(a,l):w&&w.isColor&&(v(w,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===zh)?(c===void 0&&(c=new Ln(new Xu(1,1,1),new pr({name:"BackgroundCubeMaterial",uniforms:Sh(Fo.backgroundCube.uniforms),vertexShader:Fo.backgroundCube.vertexShader,fragmentShader:Fo.backgroundCube.fragmentShader,side:Pr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,R,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=w.encoding!==Nt,(f!==w||d!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,d=w.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Ln(new Xo(2,2),new pr({name:"BackgroundMaterial",uniforms:Sh(Fo.background.uniforms),vertexShader:Fo.background.vertexShader,fragmentShader:Fo.background.fragmentShader,side:Ho,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=w.encoding!==Nt,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||d!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,d=w.version,m=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,_){y.getRGB(iy,JN(n)),r.buffers.color.setClear(iy.r,iy.g,iy.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(y,_=1){a.set(y),l=_,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(a,l)},render:g}}function DJ(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let u=l,c=!1;function f(F,H,G,te,V){let K=!1;if(o){const j=v(te,G,H);u!==j&&(u=j,m(u.object)),K=_(F,te,G,V),K&&x(F,te,G,V)}else{const j=H.wireframe===!0;(u.geometry!==te.id||u.program!==G.id||u.wireframe!==j)&&(u.geometry=te.id,u.program=G.id,u.wireframe=j,K=!0)}V!==null&&t.update(V,34963),(K||c)&&(c=!1,b(F,H,G,te),V!==null&&n.bindBuffer(34963,t.get(V).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(F){return r.isWebGL2?n.bindVertexArray(F):s.bindVertexArrayOES(F)}function g(F){return r.isWebGL2?n.deleteVertexArray(F):s.deleteVertexArrayOES(F)}function v(F,H,G){const te=G.wireframe===!0;let V=a[F.id];V===void 0&&(V={},a[F.id]=V);let K=V[H.id];K===void 0&&(K={},V[H.id]=K);let j=K[te];return j===void 0&&(j=y(d()),K[te]=j),j}function y(F){const H=[],G=[],te=[];for(let V=0;V<i;V++)H[V]=0,G[V]=0,te[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:G,attributeDivisors:te,object:F,attributes:{},index:null}}function _(F,H,G,te){const V=u.attributes,K=H.attributes;let j=0;const J=G.getAttributes();for(const W in J)if(J[W].location>=0){const ue=V[W];let q=K[W];if(q===void 0&&(W==="instanceMatrix"&&F.instanceMatrix&&(q=F.instanceMatrix),W==="instanceColor"&&F.instanceColor&&(q=F.instanceColor)),ue===void 0||ue.attribute!==q||q&&ue.data!==q.data)return!0;j++}return u.attributesNum!==j||u.index!==te}function x(F,H,G,te){const V={},K=H.attributes;let j=0;const J=G.getAttributes();for(const W in J)if(J[W].location>=0){let ue=K[W];ue===void 0&&(W==="instanceMatrix"&&F.instanceMatrix&&(ue=F.instanceMatrix),W==="instanceColor"&&F.instanceColor&&(ue=F.instanceColor));const q={};q.attribute=ue,ue&&ue.data&&(q.data=ue.data),V[W]=q,j++}u.attributes=V,u.attributesNum=j,u.index=te}function w(){const F=u.newAttributes;for(let H=0,G=F.length;H<G;H++)F[H]=0}function S(F){T(F,0)}function T(F,H){const G=u.newAttributes,te=u.enabledAttributes,V=u.attributeDivisors;G[F]=1,te[F]===0&&(n.enableVertexAttribArray(F),te[F]=1),V[F]!==H&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,H),V[F]=H)}function E(){const F=u.newAttributes,H=u.enabledAttributes;for(let G=0,te=H.length;G<te;G++)H[G]!==F[G]&&(n.disableVertexAttribArray(G),H[G]=0)}function R(F,H,G,te,V,K){r.isWebGL2===!0&&(G===5124||G===5125)?n.vertexAttribIPointer(F,H,G,V,K):n.vertexAttribPointer(F,H,G,te,V,K)}function b(F,H,G,te){if(r.isWebGL2===!1&&(F.isInstancedMesh||te.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const V=te.attributes,K=G.getAttributes(),j=H.defaultAttributeValues;for(const J in K){const W=K[J];if(W.location>=0){let ne=V[J];if(ne===void 0&&(J==="instanceMatrix"&&F.instanceMatrix&&(ne=F.instanceMatrix),J==="instanceColor"&&F.instanceColor&&(ne=F.instanceColor)),ne!==void 0){const ue=ne.normalized,q=ne.itemSize,pe=t.get(ne);if(pe===void 0)continue;const me=pe.buffer,se=pe.type,N=pe.bytesPerElement;if(ne.isInterleavedBufferAttribute){const X=ne.data,Z=X.stride,ee=ne.offset;if(X.isInstancedInterleavedBuffer){for(let ie=0;ie<W.locationSize;ie++)T(W.location+ie,X.meshPerAttribute);F.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let ie=0;ie<W.locationSize;ie++)S(W.location+ie);n.bindBuffer(34962,me);for(let ie=0;ie<W.locationSize;ie++)R(W.location+ie,q/W.locationSize,se,ue,Z*N,(ee+q/W.locationSize*ie)*N)}else{if(ne.isInstancedBufferAttribute){for(let X=0;X<W.locationSize;X++)T(W.location+X,ne.meshPerAttribute);F.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let X=0;X<W.locationSize;X++)S(W.location+X);n.bindBuffer(34962,me);for(let X=0;X<W.locationSize;X++)R(W.location+X,q/W.locationSize,se,ue,q*N,q/W.locationSize*X*N)}}else if(j!==void 0){const ue=j[J];if(ue!==void 0)switch(ue.length){case 2:n.vertexAttrib2fv(W.location,ue);break;case 3:n.vertexAttrib3fv(W.location,ue);break;case 4:n.vertexAttrib4fv(W.location,ue);break;default:n.vertexAttrib1fv(W.location,ue)}}}}E()}function M(){D();for(const F in a){const H=a[F];for(const G in H){const te=H[G];for(const V in te)g(te[V].object),delete te[V];delete H[G]}delete a[F]}}function C(F){if(a[F.id]===void 0)return;const H=a[F.id];for(const G in H){const te=H[G];for(const V in te)g(te[V].object),delete te[V];delete H[G]}delete a[F.id]}function L(F){for(const H in a){const G=a[H];if(G[F.id]===void 0)continue;const te=G[F.id];for(const V in te)g(te[V].object),delete te[V];delete G[F.id]}}function D(){z(),c=!0,u!==l&&(u=l,m(u.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:D,resetDefaultState:z,dispose:M,releaseStatesOfGeometry:C,releaseStatesOfProgram:L,initAttributes:w,enableAttribute:S,disableUnusedAttributes:E}}function LJ(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,f){if(f===0)return;let d,m;if(i)d=n,m="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](s,u,c,f),t.update(c,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function FJ(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(34930),d=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),v=n.getParameter(34921),y=n.getParameter(36347),_=n.getParameter(36348),x=n.getParameter(36349),w=d>0,S=o||e.has("OES_texture_float"),T=w&&S,E=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:x,vertexTextures:w,floatFragmentTextures:S,floatVertexTextures:T,maxSamples:E}}function kJ(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Ja,a=new zr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const m=f.length!==0||d||r!==0||i;return i=d,r=f.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=c(f,d,0)},this.setState=function(f,d,m){const g=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,_=n.get(f);if(!i||g===null||g.length===0||s&&!y)s?c(null):u();else{const x=s?0:r,w=x*4;let S=_.clippingState||null;l.value=S,S=c(g,d,w,m);for(let T=0;T!==w;++T)S[T]=t[T];_.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,m,g){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const _=m+v*4,x=d.matrixWorldInverse;a.getNormalMatrix(x),(y===null||y.length<_)&&(y=new Float32Array(_));for(let w=0,S=m;w!==v;++w,S+=4)o.copy(f[w]).applyMatrix4(x,a),o.normal.toArray(y,S),y[S+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function OJ(n){let e=new WeakMap;function t(o,a){return a===_h?o.mapping=gl:a===Eg&&(o.mapping=Bu),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===_h||a===Eg)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new sx(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class po extends Hh{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Nd=4,pB=[.125,.215,.35,.446,.526,.582],Nc=20,bS=new po,mB=new st;let AS=null;const Lc=(1+Math.sqrt(5))/2,ud=1/Lc,gB=[new $(1,1,1),new $(-1,1,1),new $(1,1,-1),new $(-1,1,-1),new $(0,Lc,ud),new $(0,Lc,-ud),new $(ud,0,Lc),new $(-ud,0,Lc),new $(Lc,ud,0),new $(-Lc,ud,0)];class _A{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){AS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_B(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=yB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AS),e.scissorTest=!1,sy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===gl||e.mapping===Bu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AS=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Kt,minFilter:Kt,generateMipmaps:!1,type:Br,format:Ur,encoding:Wo,depthBuffer:!1},i=vB(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=vB(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=UJ(s)),this._blurMaterial=NJ(s,e,t)}return i}_compileMaterial(e){const t=new Ln(this._lodPlanes[0],e);this._renderer.compile(t,bS)}_sceneToCubeUV(e,t,r,i){const a=new Un(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(mB),c.toneMapping=No,c.autoClear=!1;const m=new bi({name:"PMREM.Background",side:Pr,depthWrite:!1,depthTest:!1}),g=new Ln(new Xu,m);let v=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,v=!0):(m.color.copy(mB),v=!0);for(let _=0;_<6;_++){const x=_%3;x===0?(a.up.set(0,l[_],0),a.lookAt(u[_],0,0)):x===1?(a.up.set(0,0,l[_]),a.lookAt(0,u[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,u[_]));const w=this._cubeSize;sy(i,x*w,_>2?w:0,w,w),c.setRenderTarget(i),v&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===gl||e.mapping===Bu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=_B()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=yB());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ln(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;sy(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,bS)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=gB[(i-1)%gB.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Ln(this._lodPlanes[i],u),d=u.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Nc-1),v=s/g,y=isFinite(s)?1+Math.floor(c*v):Nc;y>Nc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Nc}`);const _=[];let x=0;for(let R=0;R<Nc;++R){const b=R/v,M=Math.exp(-b*b/2);_.push(M),R===0?x+=M:R<y&&(x+=2*M)}for(let R=0;R<_.length;R++)_[R]=_[R]/x;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=_,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:w}=this;d.dTheta.value=g,d.mipInt.value=w-r;const S=this._sizeLods[i],T=3*S*(i>w-Nd?i-w+Nd:0),E=4*(this._cubeSize-S);sy(t,T,E,3*S,2*S),l.setRenderTarget(t),l.render(f,bS)}}function UJ(n){const e=[],t=[],r=[];let i=n;const s=n-Nd+1+pB.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Nd?l=pB[o-n+Nd-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,g=6,v=3,y=2,_=1,x=new Float32Array(v*g*m),w=new Float32Array(y*g*m),S=new Float32Array(_*g*m);for(let E=0;E<m;E++){const R=E%3*2/3-1,b=E>2?0:-1,M=[R,b,0,R+2/3,b,0,R+2/3,b+1,0,R,b,0,R+2/3,b+1,0,R,b+1,0];x.set(M,v*g*E),w.set(d,y*g*E);const C=[E,E,E,E,E,E];S.set(C,_*g*E)}const T=new jt;T.setAttribute("position",new sn(x,v)),T.setAttribute("uv",new sn(w,y)),T.setAttribute("faceIndex",new sn(S,_)),e.push(T),i>Nd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function vB(n,e,t){const r=new Tn(n,e,t);return r.texture.mapping=zh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function sy(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function NJ(n,e,t){const r=new Float32Array(Nc),i=new $(0,1,0);return new pr({name:"SphericalGaussianBlur",defines:{n:Nc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:hC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function yB(){return new pr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function _B(){return new pr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function hC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zJ(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===_h||l===Eg,c=l===gl||l===Bu;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new _A(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new _A(n));const d=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function GJ(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function HJ(n,e,t,r){const i={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete i[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const g in d)e.update(d[g],34962);const m=f.morphAttributes;for(const g in m){const v=m[g];for(let y=0,_=v.length;y<_;y++)e.update(v[y],34962)}}function u(f){const d=[],m=f.index,g=f.attributes.position;let v=0;if(m!==null){const x=m.array;v=m.version;for(let w=0,S=x.length;w<S;w+=3){const T=x[w+0],E=x[w+1],R=x[w+2];d.push(T,E,E,R,R,T)}}else{const x=g.array;v=g.version;for(let w=0,S=x.length/3-1;w<S;w+=3){const T=w+0,E=w+1,R=w+2;d.push(T,E,E,R,R,T)}}const y=new(XN(d)?cC:uC)(d,1);y.version=v;const _=s.get(f);_&&e.remove(_),s.set(f,y)}function c(f){const d=s.get(f);if(d){const m=f.index;m!==null&&d.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function VJ(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,l;function u(d){a=d.type,l=d.bytesPerElement}function c(d,m){n.drawElements(s,m,a,d*l),t.update(m,s,1)}function f(d,m,g){if(g===0)return;let v,y;if(i)v=n,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,m,a,d*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f}function WJ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function jJ(n,e){return n[0]-e[0]}function $J(n,e){return Math.abs(e[1])-Math.abs(n[1])}function XJ(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new qt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=g!==void 0?g.length:0;let y=s.get(c);if(y===void 0||y.count!==v){let H=function(){z.dispose(),s.delete(c),c.removeEventListener("dispose",H)};var m=H;y!==void 0&&y.texture.dispose();const w=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],R=c.morphAttributes.normal||[],b=c.morphAttributes.color||[];let M=0;w===!0&&(M=1),S===!0&&(M=2),T===!0&&(M=3);let C=c.attributes.position.count*M,L=1;C>e.maxTextureSize&&(L=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const D=new Float32Array(C*L*4*v),z=new ix(D,C,L,v);z.type=Rr,z.needsUpdate=!0;const F=M*4;for(let G=0;G<v;G++){const te=E[G],V=R[G],K=b[G],j=C*L*4*G;for(let J=0;J<te.count;J++){const W=J*F;w===!0&&(o.fromBufferAttribute(te,J),D[j+W+0]=o.x,D[j+W+1]=o.y,D[j+W+2]=o.z,D[j+W+3]=0),S===!0&&(o.fromBufferAttribute(V,J),D[j+W+4]=o.x,D[j+W+5]=o.y,D[j+W+6]=o.z,D[j+W+7]=0),T===!0&&(o.fromBufferAttribute(K,J),D[j+W+8]=o.x,D[j+W+9]=o.y,D[j+W+10]=o.z,D[j+W+11]=K.itemSize===4?o.w:1)}}y={count:v,texture:z,size:new De(C,L)},s.set(c,y),c.addEventListener("dispose",H)}let _=0;for(let w=0;w<d.length;w++)_+=d[w];const x=c.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",x),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const g=d===void 0?0:d.length;let v=r[c.id];if(v===void 0||v.length!==g){v=[];for(let S=0;S<g;S++)v[S]=[S,0];r[c.id]=v}for(let S=0;S<g;S++){const T=v[S];T[0]=S,T[1]=d[S]}v.sort($J);for(let S=0;S<8;S++)S<g&&v[S][1]?(a[S][0]=v[S][0],a[S][1]=v[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(jJ);const y=c.morphAttributes.position,_=c.morphAttributes.normal;let x=0;for(let S=0;S<8;S++){const T=a[S],E=T[0],R=T[1];E!==Number.MAX_SAFE_INTEGER&&R?(y&&c.getAttribute("morphTarget"+S)!==y[E]&&c.setAttribute("morphTarget"+S,y[E]),_&&c.getAttribute("morphNormal"+S)!==_[E]&&c.setAttribute("morphNormal"+S,_[E]),i[S]=R,x+=R):(y&&c.hasAttribute("morphTarget"+S)===!0&&c.deleteAttribute("morphTarget"+S),_&&c.hasAttribute("morphNormal"+S)===!0&&c.deleteAttribute("morphNormal"+S),i[S]=0)}const w=c.morphTargetsRelative?1:1-x;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function KJ(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const ZN=new fn,QN=new ix,qN=new lC,ez=new s0,xB=[],wB=[],SB=new Float32Array(16),bB=new Float32Array(9),AB=new Float32Array(4);function Vh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=xB[i];if(s===void 0&&(s=new Float32Array(i),xB[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Vr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Wr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function ax(n,e){let t=wB[e];t===void 0&&(t=new Int32Array(e),wB[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function JJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function YJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2fv(this.addr,e),Wr(t,e)}}function ZJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vr(t,e))return;n.uniform3fv(this.addr,e),Wr(t,e)}}function QJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4fv(this.addr,e),Wr(t,e)}}function qJ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;AB.set(r),n.uniformMatrix2fv(this.addr,!1,AB),Wr(t,r)}}function eY(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;bB.set(r),n.uniformMatrix3fv(this.addr,!1,bB),Wr(t,r)}}function tY(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;SB.set(r),n.uniformMatrix4fv(this.addr,!1,SB),Wr(t,r)}}function nY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2iv(this.addr,e),Wr(t,e)}}function iY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3iv(this.addr,e),Wr(t,e)}}function sY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4iv(this.addr,e),Wr(t,e)}}function oY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function aY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2uiv(this.addr,e),Wr(t,e)}}function lY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3uiv(this.addr,e),Wr(t,e)}}function uY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4uiv(this.addr,e),Wr(t,e)}}function cY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||ZN,i)}function fY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||qN,i)}function dY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||ez,i)}function hY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||QN,i)}function pY(n){switch(n){case 5126:return JJ;case 35664:return YJ;case 35665:return ZJ;case 35666:return QJ;case 35674:return qJ;case 35675:return eY;case 35676:return tY;case 5124:case 35670:return nY;case 35667:case 35671:return rY;case 35668:case 35672:return iY;case 35669:case 35673:return sY;case 5125:return oY;case 36294:return aY;case 36295:return lY;case 36296:return uY;case 35678:case 36198:case 36298:case 36306:case 35682:return cY;case 35679:case 36299:case 36307:return fY;case 35680:case 36300:case 36308:case 36293:return dY;case 36289:case 36303:case 36311:case 36292:return hY}}function mY(n,e){n.uniform1fv(this.addr,e)}function gY(n,e){const t=Vh(e,this.size,2);n.uniform2fv(this.addr,t)}function vY(n,e){const t=Vh(e,this.size,3);n.uniform3fv(this.addr,t)}function yY(n,e){const t=Vh(e,this.size,4);n.uniform4fv(this.addr,t)}function _Y(n,e){const t=Vh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xY(n,e){const t=Vh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wY(n,e){const t=Vh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function SY(n,e){n.uniform1iv(this.addr,e)}function bY(n,e){n.uniform2iv(this.addr,e)}function AY(n,e){n.uniform3iv(this.addr,e)}function MY(n,e){n.uniform4iv(this.addr,e)}function EY(n,e){n.uniform1uiv(this.addr,e)}function CY(n,e){n.uniform2uiv(this.addr,e)}function TY(n,e){n.uniform3uiv(this.addr,e)}function PY(n,e){n.uniform4uiv(this.addr,e)}function RY(n,e,t){const r=this.cache,i=e.length,s=ax(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||ZN,s[o])}function BY(n,e,t){const r=this.cache,i=e.length,s=ax(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||qN,s[o])}function IY(n,e,t){const r=this.cache,i=e.length,s=ax(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||ez,s[o])}function DY(n,e,t){const r=this.cache,i=e.length,s=ax(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||QN,s[o])}function LY(n){switch(n){case 5126:return mY;case 35664:return gY;case 35665:return vY;case 35666:return yY;case 35674:return _Y;case 35675:return xY;case 35676:return wY;case 5124:case 35670:return SY;case 35667:case 35671:return bY;case 35668:case 35672:return AY;case 35669:case 35673:return MY;case 5125:return EY;case 36294:return CY;case 36295:return TY;case 36296:return PY;case 35678:case 36198:case 36298:case 36306:case 35682:return RY;case 35679:case 36299:case 36307:return BY;case 35680:case 36300:case 36308:case 36293:return IY;case 36289:case 36303:case 36311:case 36292:return DY}}class FY{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=pY(t.type)}}class kY{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=LY(t.type)}}class OY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const MS=/(\w+)(\])?(\[|\.)?/g;function MB(n,e){n.seq.push(e),n.map[e.id]=e}function UY(n,e,t){const r=n.name,i=r.length;for(MS.lastIndex=0;;){const s=MS.exec(r),o=MS.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){MB(t,u===void 0?new FY(a,n,e):new kY(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new OY(a),MB(t,f)),t=f}}}class _1{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);UY(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function EB(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let NY=0;function zY(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function GY(n){switch(n){case Wo:return["Linear","( value )"];case Nt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function CB(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+zY(n.getShaderSource(e),o)}else return i}function HY(n,e){const t=GY(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function VY(n,e){let t;switch(e){case AN:t="Linear";break;case MN:t="Reinhard";break;case EN:t="OptimizedCineon";break;case YE:t="ACESFilmic";break;case CN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function WY(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Em).join(`
`)}function jY(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function $Y(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Em(n){return n!==""}function TB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const XY=/^[ \t]*#include +<([\w\d./]+)>/gm;function xA(n){return n.replace(XY,KY)}function KY(n,e){const t=Xt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return xA(t)}const JY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RB(n){return n.replace(JY,YY)}function YY(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function BB(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ZY(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===tx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===zm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Vc&&(e="SHADOWMAP_TYPE_VSM"),e}function QY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case gl:case Bu:e="ENVMAP_TYPE_CUBE";break;case zh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Bu:e="ENVMAP_MODE_REFRACTION";break}return e}function eZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case i0:e="ENVMAP_BLENDING_MULTIPLY";break;case SN:e="ENVMAP_BLENDING_MIX";break;case bN:e="ENVMAP_BLENDING_ADD";break}return e}function tZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function nZ(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=ZY(t),u=QY(t),c=qY(t),f=eZ(t),d=tZ(t),m=t.isWebGL2?"":WY(t),g=jY(s),v=i.createProgram();let y,_,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[g].filter(Em).join(`
`),y.length>0&&(y+=`
`),_=[m,g].filter(Em).join(`
`),_.length>0&&(_+=`
`)):(y=[BB(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Em).join(`
`),_=[m,BB(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==No?"#define TONE_MAPPING":"",t.toneMapping!==No?Xt.tonemapping_pars_fragment:"",t.toneMapping!==No?VY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xt.encodings_pars_fragment,HY("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Em).join(`
`)),o=xA(o),o=TB(o,t),o=PB(o,t),a=xA(a),a=TB(a,t),a=PB(a,t),o=RB(o),a=RB(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===vA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===vA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const w=x+y+o,S=x+_+a,T=EB(i,35633,w),E=EB(i,35632,S);if(i.attachShader(v,T),i.attachShader(v,E),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),n.debug.checkShaderErrors){const M=i.getProgramInfoLog(v).trim(),C=i.getShaderInfoLog(T).trim(),L=i.getShaderInfoLog(E).trim();let D=!0,z=!0;if(i.getProgramParameter(v,35714)===!1){D=!1;const F=CB(i,T,"vertex"),H=CB(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+`

Program Info Log: `+M+`
`+F+`
`+H)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(C===""||L==="")&&(z=!1);z&&(this.diagnostics={runnable:D,programLog:M,vertexShader:{log:C,prefix:y},fragmentShader:{log:L,prefix:_}})}i.deleteShader(T),i.deleteShader(E);let R;this.getUniforms=function(){return R===void 0&&(R=new _1(i,v)),R};let b;return this.getAttributes=function(){return b===void 0&&(b=$Y(i,v)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=NY++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=E,this}let rZ=0;class iZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new sZ(e),t.set(e,r)),r}}class sZ{constructor(e){this.id=rZ++,this.code=e,this.usedTimes=0}}function oZ(n,e,t,r,i,s,o){const a=new nf,l=new iZ,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(b,M,C,L,D){const z=L.fog,F=D.geometry,H=b.isMeshStandardMaterial?L.environment:null,G=(b.isMeshStandardMaterial?t:e).get(b.envMap||H),te=G&&G.mapping===zh?G.image.height:null,V=g[b.type];b.precision!==null&&(m=i.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const K=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,j=K!==void 0?K.length:0;let J=0;F.morphAttributes.position!==void 0&&(J=1),F.morphAttributes.normal!==void 0&&(J=2),F.morphAttributes.color!==void 0&&(J=3);let W,ne,ue,q;if(V){const Z=Fo[V];W=Z.vertexShader,ne=Z.fragmentShader}else W=b.vertexShader,ne=b.fragmentShader,l.update(b),ue=l.getVertexShaderID(b),q=l.getFragmentShaderID(b);const pe=n.getRenderTarget(),me=b.alphaTest>0,se=b.clearcoat>0,N=b.iridescence>0;return{isWebGL2:c,shaderID:V,shaderName:b.type,vertexShader:W,fragmentShader:ne,defines:b.defines,customVertexShaderID:ue,customFragmentShaderID:q,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:d,outputEncoding:pe===null?n.outputEncoding:pe.isXRRenderTarget===!0?pe.texture.encoding:Wo,map:!!b.map,matcap:!!b.matcap,envMap:!!G,envMapMode:G&&G.mapping,envMapCubeUVHeight:te,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===VN,tangentSpaceNormalMap:b.normalMapType===$u,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===Nt,clearcoat:se,clearcoatMap:se&&!!b.clearcoatMap,clearcoatRoughnessMap:se&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:se&&!!b.clearcoatNormalMap,iridescence:N,iridescenceMap:N&&!!b.iridescenceMap,iridescenceThicknessMap:N&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===ef,alphaMap:!!b.alphaMap,alphaTest:me,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!F.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!z,useFog:b.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:f,skinning:D.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:J,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&C.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:No,useLegacyLights:n.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===qr,flipSided:b.side===Pr,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function y(b){const M=[];if(b.shaderID?M.push(b.shaderID):(M.push(b.customVertexShaderID),M.push(b.customFragmentShaderID)),b.defines!==void 0)for(const C in b.defines)M.push(C),M.push(b.defines[C]);return b.isRawShaderMaterial===!1&&(_(M,b),x(M,b),M.push(n.outputEncoding)),M.push(b.customProgramCacheKey),M.join()}function _(b,M){b.push(M.precision),b.push(M.outputEncoding),b.push(M.envMapMode),b.push(M.envMapCubeUVHeight),b.push(M.combine),b.push(M.vertexUvs),b.push(M.fogExp2),b.push(M.sizeAttenuation),b.push(M.morphTargetsCount),b.push(M.morphAttributeCount),b.push(M.numDirLights),b.push(M.numPointLights),b.push(M.numSpotLights),b.push(M.numSpotLightMaps),b.push(M.numHemiLights),b.push(M.numRectAreaLights),b.push(M.numDirLightShadows),b.push(M.numPointLightShadows),b.push(M.numSpotLightShadows),b.push(M.numSpotLightShadowsWithMaps),b.push(M.shadowMapType),b.push(M.toneMapping),b.push(M.numClippingPlanes),b.push(M.numClipIntersection),b.push(M.depthPacking)}function x(b,M){a.disableAll(),M.isWebGL2&&a.enable(0),M.supportsVertexTextures&&a.enable(1),M.instancing&&a.enable(2),M.instancingColor&&a.enable(3),M.map&&a.enable(4),M.matcap&&a.enable(5),M.envMap&&a.enable(6),M.lightMap&&a.enable(7),M.aoMap&&a.enable(8),M.emissiveMap&&a.enable(9),M.bumpMap&&a.enable(10),M.normalMap&&a.enable(11),M.objectSpaceNormalMap&&a.enable(12),M.tangentSpaceNormalMap&&a.enable(13),M.clearcoat&&a.enable(14),M.clearcoatMap&&a.enable(15),M.clearcoatRoughnessMap&&a.enable(16),M.clearcoatNormalMap&&a.enable(17),M.iridescence&&a.enable(18),M.iridescenceMap&&a.enable(19),M.iridescenceThicknessMap&&a.enable(20),M.displacementMap&&a.enable(21),M.specularMap&&a.enable(22),M.roughnessMap&&a.enable(23),M.metalnessMap&&a.enable(24),M.gradientMap&&a.enable(25),M.alphaMap&&a.enable(26),M.alphaTest&&a.enable(27),M.vertexColors&&a.enable(28),M.vertexAlphas&&a.enable(29),M.vertexUvs&&a.enable(30),M.vertexTangents&&a.enable(31),M.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.useLegacyLights&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.specularIntensityMap&&a.enable(15),M.specularColorMap&&a.enable(16),M.transmission&&a.enable(17),M.transmissionMap&&a.enable(18),M.thicknessMap&&a.enable(19),M.sheen&&a.enable(20),M.sheenColorMap&&a.enable(21),M.sheenRoughnessMap&&a.enable(22),M.decodeVideoTexture&&a.enable(23),M.opaque&&a.enable(24),b.push(a.mask)}function w(b){const M=g[b.type];let C;if(M){const L=Fo[M];C=fC.clone(L.uniforms)}else C=b.uniforms;return C}function S(b,M){let C;for(let L=0,D=u.length;L<D;L++){const z=u[L];if(z.cacheKey===M){C=z,++C.usedTimes;break}}return C===void 0&&(C=new nZ(n,M,b,s),u.push(C)),C}function T(b){if(--b.usedTimes===0){const M=u.indexOf(b);u[M]=u[u.length-1],u.pop(),b.destroy()}}function E(b){l.remove(b)}function R(){l.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:w,acquireProgram:S,releaseProgram:T,releaseShaderCache:E,programs:u,dispose:R}}function aZ(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function lZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function IB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DB(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,d,m,g,v,y){let _=n[e];return _===void 0?(_={id:f.id,object:f,geometry:d,material:m,groupOrder:g,renderOrder:f.renderOrder,z:v,group:y},n[e]=_):(_.id=f.id,_.object=f,_.geometry=d,_.material=m,_.groupOrder=g,_.renderOrder=f.renderOrder,_.z=v,_.group=y),e++,_}function a(f,d,m,g,v,y){const _=o(f,d,m,g,v,y);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function l(f,d,m,g,v,y){const _=o(f,d,m,g,v,y);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function u(f,d){t.length>1&&t.sort(f||lZ),r.length>1&&r.sort(d||IB),i.length>1&&i.sort(d||IB)}function c(){for(let f=e,d=n.length;f<d;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function uZ(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new DB,n.set(r,[o])):i>=s.length?(o=new DB,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function cZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new st};break;case"SpotLight":t={position:new $,direction:new $,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new $,halfWidth:new $,halfHeight:new $};break}return n[e.id]=t,t}}}function fZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let dZ=0;function hZ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function pZ(n,e){const t=new cZ,r=fZ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new $);const s=new $,o=new Et,a=new Et;function l(c,f){let d=0,m=0,g=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let v=0,y=0,_=0,x=0,w=0,S=0,T=0,E=0,R=0,b=0;c.sort(hZ);const M=f===!0?Math.PI:1;for(let L=0,D=c.length;L<D;L++){const z=c[L],F=z.color,H=z.intensity,G=z.distance,te=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=F.r*H*M,m+=F.g*H*M,g+=F.b*H*M;else if(z.isLightProbe)for(let V=0;V<9;V++)i.probe[V].addScaledVector(z.sh.coefficients[V],H);else if(z.isDirectionalLight){const V=t.get(z);if(V.color.copy(z.color).multiplyScalar(z.intensity*M),z.castShadow){const K=z.shadow,j=r.get(z);j.shadowBias=K.bias,j.shadowNormalBias=K.normalBias,j.shadowRadius=K.radius,j.shadowMapSize=K.mapSize,i.directionalShadow[v]=j,i.directionalShadowMap[v]=te,i.directionalShadowMatrix[v]=z.shadow.matrix,S++}i.directional[v]=V,v++}else if(z.isSpotLight){const V=t.get(z);V.position.setFromMatrixPosition(z.matrixWorld),V.color.copy(F).multiplyScalar(H*M),V.distance=G,V.coneCos=Math.cos(z.angle),V.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),V.decay=z.decay,i.spot[_]=V;const K=z.shadow;if(z.map&&(i.spotLightMap[R]=z.map,R++,K.updateMatrices(z),z.castShadow&&b++),i.spotLightMatrix[_]=K.matrix,z.castShadow){const j=r.get(z);j.shadowBias=K.bias,j.shadowNormalBias=K.normalBias,j.shadowRadius=K.radius,j.shadowMapSize=K.mapSize,i.spotShadow[_]=j,i.spotShadowMap[_]=te,E++}_++}else if(z.isRectAreaLight){const V=t.get(z);V.color.copy(F).multiplyScalar(H),V.halfWidth.set(z.width*.5,0,0),V.halfHeight.set(0,z.height*.5,0),i.rectArea[x]=V,x++}else if(z.isPointLight){const V=t.get(z);if(V.color.copy(z.color).multiplyScalar(z.intensity*M),V.distance=z.distance,V.decay=z.decay,z.castShadow){const K=z.shadow,j=r.get(z);j.shadowBias=K.bias,j.shadowNormalBias=K.normalBias,j.shadowRadius=K.radius,j.shadowMapSize=K.mapSize,j.shadowCameraNear=K.camera.near,j.shadowCameraFar=K.camera.far,i.pointShadow[y]=j,i.pointShadowMap[y]=te,i.pointShadowMatrix[y]=z.shadow.matrix,T++}i.point[y]=V,y++}else if(z.isHemisphereLight){const V=t.get(z);V.skyColor.copy(z.color).multiplyScalar(H*M),V.groundColor.copy(z.groundColor).multiplyScalar(H*M),i.hemi[w]=V,w++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_FLOAT_1,i.rectAreaLTC2=ct.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_HALF_1,i.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=m,i.ambient[2]=g;const C=i.hash;(C.directionalLength!==v||C.pointLength!==y||C.spotLength!==_||C.rectAreaLength!==x||C.hemiLength!==w||C.numDirectionalShadows!==S||C.numPointShadows!==T||C.numSpotShadows!==E||C.numSpotMaps!==R)&&(i.directional.length=v,i.spot.length=_,i.rectArea.length=x,i.point.length=y,i.hemi.length=w,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=E+R-b,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=b,C.directionalLength=v,C.pointLength=y,C.spotLength=_,C.rectAreaLength=x,C.hemiLength=w,C.numDirectionalShadows=S,C.numPointShadows=T,C.numSpotShadows=E,C.numSpotMaps=R,i.version=dZ++)}function u(c,f){let d=0,m=0,g=0,v=0,y=0;const _=f.matrixWorldInverse;for(let x=0,w=c.length;x<w;x++){const S=c[x];if(S.isDirectionalLight){const T=i.directional[d];T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(_),d++}else if(S.isSpotLight){const T=i.spot[g];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(_),g++}else if(S.isRectAreaLight){const T=i.rectArea[v];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),a.identity(),o.copy(S.matrixWorld),o.premultiply(_),a.extractRotation(o),T.halfWidth.set(S.width*.5,0,0),T.halfHeight.set(0,S.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),v++}else if(S.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(_),m++}else if(S.isHemisphereLight){const T=i.hemi[y];T.direction.setFromMatrixPosition(S.matrixWorld),T.direction.transformDirection(_),y++}}}return{setup:l,setupView:u,state:i}}function LB(n,e){const t=new pZ(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function mZ(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new LB(n,e),t.set(s,[l])):o>=a.length?(l=new LB(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class lx extends Xn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ju,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ux extends Xn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const gZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function yZ(n,e,t){let r=new ox;const i=new De,s=new De,o=new qt,a=new lx({depthPacking:iC}),l=new ux,u={},c=t.maxTextureSize,f={[Ho]:Pr,[Pr]:Ho,[qr]:qr},d=new pr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:gZ,fragmentShader:vZ}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const g=new jt;g.setAttribute("position",new sn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Ln(g,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tx,this.render=function(S,T,E){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const R=n.getRenderTarget(),b=n.getActiveCubeFace(),M=n.getActiveMipmapLevel(),C=n.state;C.setBlending(ti),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let L=0,D=S.length;L<D;L++){const z=S[L],F=z.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;i.copy(F.mapSize);const H=F.getFrameExtents();if(i.multiply(H),s.copy(F.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/H.x),i.x=s.x*H.x,F.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/H.y),i.y=s.y*H.y,F.mapSize.y=s.y)),F.map===null){const te=this.type!==Vc?{minFilter:bn,magFilter:bn}:{};F.map=new Tn(i.x,i.y,te),F.map.texture.name=z.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const G=F.getViewportCount();for(let te=0;te<G;te++){const V=F.getViewport(te);o.set(s.x*V.x,s.y*V.y,s.x*V.z,s.y*V.w),C.viewport(o),F.updateMatrices(z,te),r=F.getFrustum(),w(T,E,F.camera,z,this.type)}F.isPointLightShadow!==!0&&this.type===Vc&&_(F,E),F.needsUpdate=!1}y.needsUpdate=!1,n.setRenderTarget(R,b,M)};function _(S,T){const E=e.update(v);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,m.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Tn(i.x,i.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(T,null,E,d,v,null),m.uniforms.shadow_pass.value=S.mapPass.texture,m.uniforms.resolution.value=S.mapSize,m.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(T,null,E,m,v,null)}function x(S,T,E,R,b,M){let C=null;const L=E.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(L!==void 0)C=L;else if(C=E.isPointLight===!0?l:a,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const D=C.uuid,z=T.uuid;let F=u[D];F===void 0&&(F={},u[D]=F);let H=F[z];H===void 0&&(H=C.clone(),F[z]=H),C=H}return C.visible=T.visible,C.wireframe=T.wireframe,M===Vc?C.side=T.shadowSide!==null?T.shadowSide:T.side:C.side=T.shadowSide!==null?T.shadowSide:f[T.side],C.alphaMap=T.alphaMap,C.alphaTest=T.alphaTest,C.map=T.map,C.clipShadows=T.clipShadows,C.clippingPlanes=T.clippingPlanes,C.clipIntersection=T.clipIntersection,C.displacementMap=T.displacementMap,C.displacementScale=T.displacementScale,C.displacementBias=T.displacementBias,C.wireframeLinewidth=T.wireframeLinewidth,C.linewidth=T.linewidth,E.isPointLight===!0&&C.isMeshDistanceMaterial===!0&&(C.referencePosition.setFromMatrixPosition(E.matrixWorld),C.nearDistance=R,C.farDistance=b),C}function w(S,T,E,R,b){if(S.visible===!1)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&b===Vc)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,S.matrixWorld);const L=e.update(S),D=S.material;if(Array.isArray(D)){const z=L.groups;for(let F=0,H=z.length;F<H;F++){const G=z[F],te=D[G.materialIndex];if(te&&te.visible){const V=x(S,te,R,E.near,E.far,b);n.renderBufferDirect(E,null,L,V,S,G)}}}else if(D.visible){const z=x(S,D,R,E.near,E.far,b);n.renderBufferDirect(E,null,L,z,S,null)}}const C=S.children;for(let L=0,D=C.length;L<D;L++)w(C[L],T,E,R,b)}}function _Z(n,e,t){const r=t.isWebGL2;function i(){let de=!1;const ae=new qt;let ke=null;const at=new qt(0,0,0,0);return{setMask:function(it){ke!==it&&!de&&(n.colorMask(it,it,it,it),ke=it)},setLocked:function(it){de=it},setClear:function(it,mt,Tt,Pt,_t){_t===!0&&(it*=Pt,mt*=Pt,Tt*=Pt),ae.set(it,mt,Tt,Pt),at.equals(ae)===!1&&(n.clearColor(it,mt,Tt,Pt),at.copy(ae))},reset:function(){de=!1,ke=null,at.set(-1,0,0,0)}}}function s(){let de=!1,ae=null,ke=null,at=null;return{setTest:function(it){it?me(2929):se(2929)},setMask:function(it){ae!==it&&!de&&(n.depthMask(it),ae=it)},setFunc:function(it){if(ke!==it){switch(it){case mN:n.depthFunc(512);break;case gN:n.depthFunc(519);break;case vN:n.depthFunc(513);break;case t_:n.depthFunc(515);break;case yN:n.depthFunc(514);break;case _N:n.depthFunc(518);break;case xN:n.depthFunc(516);break;case wN:n.depthFunc(517);break;default:n.depthFunc(515)}ke=it}},setLocked:function(it){de=it},setClear:function(it){at!==it&&(n.clearDepth(it),at=it)},reset:function(){de=!1,ae=null,ke=null,at=null}}}function o(){let de=!1,ae=null,ke=null,at=null,it=null,mt=null,Tt=null,Pt=null,_t=null;return{setTest:function(At){de||(At?me(2960):se(2960))},setMask:function(At){ae!==At&&!de&&(n.stencilMask(At),ae=At)},setFunc:function(At,Yt,rn){(ke!==At||at!==Yt||it!==rn)&&(n.stencilFunc(At,Yt,rn),ke=At,at=Yt,it=rn)},setOp:function(At,Yt,rn){(mt!==At||Tt!==Yt||Pt!==rn)&&(n.stencilOp(At,Yt,rn),mt=At,Tt=Yt,Pt=rn)},setLocked:function(At){de=At},setClear:function(At){_t!==At&&(n.clearStencil(At),_t=At)},reset:function(){de=!1,ae=null,ke=null,at=null,it=null,mt=null,Tt=null,Pt=null,_t=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,f=new WeakMap;let d={},m={},g=new WeakMap,v=[],y=null,_=!1,x=null,w=null,S=null,T=null,E=null,R=null,b=null,M=!1,C=null,L=null,D=null,z=null,F=null;const H=n.getParameter(35661);let G=!1,te=0;const V=n.getParameter(7938);V.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(V)[1]),G=te>=1):V.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),G=te>=2);let K=null,j={};const J=n.getParameter(3088),W=n.getParameter(2978),ne=new qt().fromArray(J),ue=new qt().fromArray(W);function q(de,ae,ke){const at=new Uint8Array(4),it=n.createTexture();n.bindTexture(de,it),n.texParameteri(de,10241,9728),n.texParameteri(de,10240,9728);for(let mt=0;mt<ke;mt++)n.texImage2D(ae+mt,0,6408,1,1,0,6408,5121,at);return it}const pe={};pe[3553]=q(3553,3553,1),pe[34067]=q(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),me(2929),l.setFunc(t_),Te(!1),Ve(H2),me(2884),ge(ti);function me(de){d[de]!==!0&&(n.enable(de),d[de]=!0)}function se(de){d[de]!==!1&&(n.disable(de),d[de]=!1)}function N(de,ae){return m[de]!==ae?(n.bindFramebuffer(de,ae),m[de]=ae,r&&(de===36009&&(m[36160]=ae),de===36160&&(m[36009]=ae)),!0):!1}function X(de,ae){let ke=v,at=!1;if(de)if(ke=g.get(ae),ke===void 0&&(ke=[],g.set(ae,ke)),de.isWebGLMultipleRenderTargets){const it=de.texture;if(ke.length!==it.length||ke[0]!==36064){for(let mt=0,Tt=it.length;mt<Tt;mt++)ke[mt]=36064+mt;ke.length=it.length,at=!0}}else ke[0]!==36064&&(ke[0]=36064,at=!0);else ke[0]!==1029&&(ke[0]=1029,at=!0);at&&(t.isWebGL2?n.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function Z(de){return y!==de?(n.useProgram(de),y=de,!0):!1}const ee={[Uc]:32774,[iN]:32778,[sN]:32779};if(r)ee[j2]=32775,ee[$2]=32776;else{const de=e.get("EXT_blend_minmax");de!==null&&(ee[j2]=de.MIN_EXT,ee[$2]=de.MAX_EXT)}const ie={[oN]:0,[aN]:1,[lN]:768,[KE]:770,[pN]:776,[dN]:774,[cN]:772,[uN]:769,[JE]:771,[hN]:775,[fN]:773};function ge(de,ae,ke,at,it,mt,Tt,Pt){if(de===ti){_===!0&&(se(3042),_=!1);return}if(_===!1&&(me(3042),_=!0),de!==rN){if(de!==x||Pt!==M){if((w!==Uc||E!==Uc)&&(n.blendEquation(32774),w=Uc,E=Uc),Pt)switch(de){case ef:n.blendFuncSeparate(1,771,1,771);break;case e_:n.blendFunc(1,1);break;case V2:n.blendFuncSeparate(0,769,0,1);break;case W2:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case ef:n.blendFuncSeparate(770,771,1,771);break;case e_:n.blendFunc(770,1);break;case V2:n.blendFuncSeparate(0,769,0,1);break;case W2:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}S=null,T=null,R=null,b=null,x=de,M=Pt}return}it=it||ae,mt=mt||ke,Tt=Tt||at,(ae!==w||it!==E)&&(n.blendEquationSeparate(ee[ae],ee[it]),w=ae,E=it),(ke!==S||at!==T||mt!==R||Tt!==b)&&(n.blendFuncSeparate(ie[ke],ie[at],ie[mt],ie[Tt]),S=ke,T=at,R=mt,b=Tt),x=de,M=!1}function Ce(de,ae){de.side===qr?se(2884):me(2884);let ke=de.side===Pr;ae&&(ke=!ke),Te(ke),de.blending===ef&&de.transparent===!1?ge(ti):ge(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),a.setMask(de.colorWrite);const at=de.stencilWrite;u.setTest(at),at&&(u.setMask(de.stencilWriteMask),u.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),u.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),ze(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?me(32926):se(32926)}function Te(de){C!==de&&(de?n.frontFace(2304):n.frontFace(2305),C=de)}function Ve(de){de!==eN?(me(2884),de!==L&&(de===H2?n.cullFace(1029):de===tN?n.cullFace(1028):n.cullFace(1032))):se(2884),L=de}function Re(de){de!==D&&(G&&n.lineWidth(de),D=de)}function ze(de,ae,ke){de?(me(32823),(z!==ae||F!==ke)&&(n.polygonOffset(ae,ke),z=ae,F=ke)):se(32823)}function je(de){de?me(3089):se(3089)}function be(de){de===void 0&&(de=33984+H-1),K!==de&&(n.activeTexture(de),K=de)}function Q(de,ae,ke){ke===void 0&&(K===null?ke=33984+H-1:ke=K);let at=j[ke];at===void 0&&(at={type:void 0,texture:void 0},j[ke]=at),(at.type!==de||at.texture!==ae)&&(K!==ke&&(n.activeTexture(ke),K=ke),n.bindTexture(de,ae||pe[de]),at.type=de,at.texture=ae)}function O(){const de=j[K];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function we(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ne(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Pe(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function $e(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ge(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Be(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function et(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Xe(de){ne.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),ne.copy(de))}function We(de){ue.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),ue.copy(de))}function ce(de,ae){let ke=f.get(ae);ke===void 0&&(ke=new WeakMap,f.set(ae,ke));let at=ke.get(de);at===void 0&&(at=n.getUniformBlockIndex(ae,de.name),ke.set(de,at))}function Le(de,ae){const at=f.get(ae).get(de);c.get(ae)!==at&&(n.uniformBlockBinding(ae,at,de.__bindingPointIndex),c.set(ae,at))}function Qe(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},K=null,j={},m={},g=new WeakMap,v=[],y=null,_=!1,x=null,w=null,S=null,T=null,E=null,R=null,b=null,M=!1,C=null,L=null,D=null,z=null,F=null,ne.set(0,0,n.canvas.width,n.canvas.height),ue.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:me,disable:se,bindFramebuffer:N,drawBuffers:X,useProgram:Z,setBlending:ge,setMaterial:Ce,setFlipSided:Te,setCullFace:Ve,setLineWidth:Re,setPolygonOffset:ze,setScissorTest:je,activeTexture:be,bindTexture:Q,unbindTexture:O,compressedTexImage2D:fe,compressedTexImage3D:we,texImage2D:et,texImage3D:Ze,updateUBOMapping:ce,uniformBlockBinding:Le,texStorage2D:Be,texStorage3D:rt,texSubImage2D:Ne,texSubImage3D:Pe,compressedTexSubImage2D:$e,compressedTexSubImage3D:Ge,scissor:Xe,viewport:We,reset:Qe}}function xZ(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(Q,O){return _?new OffscreenCanvas(Q,O):Bg("canvas")}function w(Q,O,fe,we){let Ne=1;if((Q.width>we||Q.height>we)&&(Ne=we/Math.max(Q.width,Q.height)),Ne<1||O===!0)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap){const Pe=O?$N:Math.floor,$e=Pe(Ne*Q.width),Ge=Pe(Ne*Q.height);v===void 0&&(v=x($e,Ge));const Be=fe?x($e,Ge):v;return Be.width=$e,Be.height=Ge,Be.getContext("2d").drawImage(Q,0,0,$e,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Q.width+"x"+Q.height+") to ("+$e+"x"+Ge+")."),Be}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Q.width+"x"+Q.height+")."),Q;return Q}function S(Q){return yA(Q.width)&&yA(Q.height)}function T(Q){return a?!1:Q.wrapS!==Nn||Q.wrapT!==Nn||Q.minFilter!==bn&&Q.minFilter!==Kt}function E(Q,O){return Q.generateMipmaps&&O&&Q.minFilter!==bn&&Q.minFilter!==Kt}function R(Q){n.generateMipmap(Q)}function b(Q,O,fe,we,Ne=!1){if(a===!1)return O;if(Q!==null){if(n[Q]!==void 0)return n[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Pe=O;return O===6403&&(fe===5126&&(Pe=33326),fe===5131&&(Pe=33325),fe===5121&&(Pe=33321)),O===33319&&(fe===5126&&(Pe=33328),fe===5131&&(Pe=33327),fe===5121&&(Pe=33323)),O===6408&&(fe===5126&&(Pe=34836),fe===5131&&(Pe=34842),fe===5121&&(Pe=we===Nt&&Ne===!1?35907:32856),fe===32819&&(Pe=32854),fe===32820&&(Pe=32855)),(Pe===33325||Pe===33326||Pe===33327||Pe===33328||Pe===34842||Pe===34836)&&e.get("EXT_color_buffer_float"),Pe}function M(Q,O,fe){return E(Q,fe)===!0||Q.isFramebufferTexture&&Q.minFilter!==bn&&Q.minFilter!==Kt?Math.log2(Math.max(O.width,O.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?O.mipmaps.length:1}function C(Q){return Q===bn||Q===Cg||Q===nh?9728:9729}function L(Q){const O=Q.target;O.removeEventListener("dispose",L),z(O),O.isVideoTexture&&g.delete(O)}function D(Q){const O=Q.target;O.removeEventListener("dispose",D),H(O)}function z(Q){const O=r.get(Q);if(O.__webglInit===void 0)return;const fe=Q.source,we=y.get(fe);if(we){const Ne=we[O.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&F(Q),Object.keys(we).length===0&&y.delete(fe)}r.remove(Q)}function F(Q){const O=r.get(Q);n.deleteTexture(O.__webglTexture);const fe=Q.source,we=y.get(fe);delete we[O.__cacheKey],o.memory.textures--}function H(Q){const O=Q.texture,fe=r.get(Q),we=r.get(O);if(we.__webglTexture!==void 0&&(n.deleteTexture(we.__webglTexture),o.memory.textures--),Q.depthTexture&&Q.depthTexture.dispose(),Q.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++)n.deleteFramebuffer(fe.__webglFramebuffer[Ne]),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[Ne]);else{if(n.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let Ne=0;Ne<fe.__webglColorRenderbuffer.length;Ne++)fe.__webglColorRenderbuffer[Ne]&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer[Ne]);fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(Q.isWebGLMultipleRenderTargets)for(let Ne=0,Pe=O.length;Ne<Pe;Ne++){const $e=r.get(O[Ne]);$e.__webglTexture&&(n.deleteTexture($e.__webglTexture),o.memory.textures--),r.remove(O[Ne])}r.remove(O),r.remove(Q)}let G=0;function te(){G=0}function V(){const Q=G;return Q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+l),G+=1,Q}function K(Q){const O=[];return O.push(Q.wrapS),O.push(Q.wrapT),O.push(Q.wrapR||0),O.push(Q.magFilter),O.push(Q.minFilter),O.push(Q.anisotropy),O.push(Q.internalFormat),O.push(Q.format),O.push(Q.type),O.push(Q.generateMipmaps),O.push(Q.premultiplyAlpha),O.push(Q.flipY),O.push(Q.unpackAlignment),O.push(Q.encoding),O.join()}function j(Q,O){const fe=r.get(Q);if(Q.isVideoTexture&&je(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&fe.__version!==Q.version){const we=Q.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(fe,Q,O);return}}t.bindTexture(3553,fe.__webglTexture,33984+O)}function J(Q,O){const fe=r.get(Q);if(Q.version>0&&fe.__version!==Q.version){se(fe,Q,O);return}t.bindTexture(35866,fe.__webglTexture,33984+O)}function W(Q,O){const fe=r.get(Q);if(Q.version>0&&fe.__version!==Q.version){se(fe,Q,O);return}t.bindTexture(32879,fe.__webglTexture,33984+O)}function ne(Q,O){const fe=r.get(Q);if(Q.version>0&&fe.__version!==Q.version){N(fe,Q,O);return}t.bindTexture(34067,fe.__webglTexture,33984+O)}const ue={[Iu]:10497,[Nn]:33071,[xh]:33648},q={[bn]:9728,[Cg]:9984,[nh]:9986,[Kt]:9729,[nx]:9985,[Vo]:9987};function pe(Q,O,fe){if(fe?(n.texParameteri(Q,10242,ue[O.wrapS]),n.texParameteri(Q,10243,ue[O.wrapT]),(Q===32879||Q===35866)&&n.texParameteri(Q,32882,ue[O.wrapR]),n.texParameteri(Q,10240,q[O.magFilter]),n.texParameteri(Q,10241,q[O.minFilter])):(n.texParameteri(Q,10242,33071),n.texParameteri(Q,10243,33071),(Q===32879||Q===35866)&&n.texParameteri(Q,32882,33071),(O.wrapS!==Nn||O.wrapT!==Nn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Q,10240,C(O.magFilter)),n.texParameteri(Q,10241,C(O.minFilter)),O.minFilter!==bn&&O.minFilter!==Kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const we=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===bn||O.minFilter!==nh&&O.minFilter!==Vo||O.type===Rr&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===Br&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf(Q,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function me(Q,O){let fe=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,O.addEventListener("dispose",L));const we=O.source;let Ne=y.get(we);Ne===void 0&&(Ne={},y.set(we,Ne));const Pe=K(O);if(Pe!==Q.__cacheKey){Ne[Pe]===void 0&&(Ne[Pe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),Ne[Pe].usedTimes++;const $e=Ne[Q.__cacheKey];$e!==void 0&&(Ne[Q.__cacheKey].usedTimes--,$e.usedTimes===0&&F(O)),Q.__cacheKey=Pe,Q.__webglTexture=Ne[Pe].texture}return fe}function se(Q,O,fe){let we=3553;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(we=35866),O.isData3DTexture&&(we=32879);const Ne=me(Q,O),Pe=O.source;t.bindTexture(we,Q.__webglTexture,33984+fe);const $e=r.get(Pe);if(Pe.version!==$e.__version||Ne===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const Ge=T(O)&&S(O.image)===!1;let Be=w(O.image,Ge,!1,c);Be=be(O,Be);const rt=S(Be)||a,et=s.convert(O.format,O.encoding);let Ze=s.convert(O.type),Xe=b(O.internalFormat,et,Ze,O.encoding,O.isVideoTexture);pe(we,O,rt);let We;const ce=O.mipmaps,Le=a&&O.isVideoTexture!==!0,Qe=$e.__version===void 0||Ne===!0,de=M(O,Be,rt);if(O.isDepthTexture)Xe=6402,a?O.type===Rr?Xe=36012:O.type===da?Xe=33190:O.type===_u?Xe=35056:Xe=33189:O.type===Rr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===xu&&Xe===6402&&O.type!==qE&&O.type!==da&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=da,Ze=s.convert(O.type)),O.format===Du&&Xe===6402&&(Xe=34041,O.type!==_u&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=_u,Ze=s.convert(O.type))),Qe&&(Le?t.texStorage2D(3553,1,Xe,Be.width,Be.height):t.texImage2D(3553,0,Xe,Be.width,Be.height,0,et,Ze,null));else if(O.isDataTexture)if(ce.length>0&&rt){Le&&Qe&&t.texStorage2D(3553,de,Xe,ce[0].width,ce[0].height);for(let ae=0,ke=ce.length;ae<ke;ae++)We=ce[ae],Le?t.texSubImage2D(3553,ae,0,0,We.width,We.height,et,Ze,We.data):t.texImage2D(3553,ae,Xe,We.width,We.height,0,et,Ze,We.data);O.generateMipmaps=!1}else Le?(Qe&&t.texStorage2D(3553,de,Xe,Be.width,Be.height),t.texSubImage2D(3553,0,0,0,Be.width,Be.height,et,Ze,Be.data)):t.texImage2D(3553,0,Xe,Be.width,Be.height,0,et,Ze,Be.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){Le&&Qe&&t.texStorage3D(35866,de,Xe,ce[0].width,ce[0].height,Be.depth);for(let ae=0,ke=ce.length;ae<ke;ae++)We=ce[ae],O.format!==Ur?et!==null?Le?t.compressedTexSubImage3D(35866,ae,0,0,0,We.width,We.height,Be.depth,et,We.data,0,0):t.compressedTexImage3D(35866,ae,Xe,We.width,We.height,Be.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage3D(35866,ae,0,0,0,We.width,We.height,Be.depth,et,Ze,We.data):t.texImage3D(35866,ae,Xe,We.width,We.height,Be.depth,0,et,Ze,We.data)}else{Le&&Qe&&t.texStorage2D(3553,de,Xe,ce[0].width,ce[0].height);for(let ae=0,ke=ce.length;ae<ke;ae++)We=ce[ae],O.format!==Ur?et!==null?Le?t.compressedTexSubImage2D(3553,ae,0,0,We.width,We.height,et,We.data):t.compressedTexImage2D(3553,ae,Xe,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?t.texSubImage2D(3553,ae,0,0,We.width,We.height,et,Ze,We.data):t.texImage2D(3553,ae,Xe,We.width,We.height,0,et,Ze,We.data)}else if(O.isDataArrayTexture)Le?(Qe&&t.texStorage3D(35866,de,Xe,Be.width,Be.height,Be.depth),t.texSubImage3D(35866,0,0,0,0,Be.width,Be.height,Be.depth,et,Ze,Be.data)):t.texImage3D(35866,0,Xe,Be.width,Be.height,Be.depth,0,et,Ze,Be.data);else if(O.isData3DTexture)Le?(Qe&&t.texStorage3D(32879,de,Xe,Be.width,Be.height,Be.depth),t.texSubImage3D(32879,0,0,0,0,Be.width,Be.height,Be.depth,et,Ze,Be.data)):t.texImage3D(32879,0,Xe,Be.width,Be.height,Be.depth,0,et,Ze,Be.data);else if(O.isFramebufferTexture){if(Qe)if(Le)t.texStorage2D(3553,de,Xe,Be.width,Be.height);else{let ae=Be.width,ke=Be.height;for(let at=0;at<de;at++)t.texImage2D(3553,at,Xe,ae,ke,0,et,Ze,null),ae>>=1,ke>>=1}}else if(ce.length>0&&rt){Le&&Qe&&t.texStorage2D(3553,de,Xe,ce[0].width,ce[0].height);for(let ae=0,ke=ce.length;ae<ke;ae++)We=ce[ae],Le?t.texSubImage2D(3553,ae,0,0,et,Ze,We):t.texImage2D(3553,ae,Xe,et,Ze,We);O.generateMipmaps=!1}else Le?(Qe&&t.texStorage2D(3553,de,Xe,Be.width,Be.height),t.texSubImage2D(3553,0,0,0,et,Ze,Be)):t.texImage2D(3553,0,Xe,et,Ze,Be);E(O,rt)&&R(we),$e.__version=Pe.version,O.onUpdate&&O.onUpdate(O)}Q.__version=O.version}function N(Q,O,fe){if(O.image.length!==6)return;const we=me(Q,O),Ne=O.source;t.bindTexture(34067,Q.__webglTexture,33984+fe);const Pe=r.get(Ne);if(Ne.version!==Pe.__version||we===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const $e=O.isCompressedTexture||O.image[0].isCompressedTexture,Ge=O.image[0]&&O.image[0].isDataTexture,Be=[];for(let ae=0;ae<6;ae++)!$e&&!Ge?Be[ae]=w(O.image[ae],!1,!0,u):Be[ae]=Ge?O.image[ae].image:O.image[ae],Be[ae]=be(O,Be[ae]);const rt=Be[0],et=S(rt)||a,Ze=s.convert(O.format,O.encoding),Xe=s.convert(O.type),We=b(O.internalFormat,Ze,Xe,O.encoding),ce=a&&O.isVideoTexture!==!0,Le=Pe.__version===void 0||we===!0;let Qe=M(O,rt,et);pe(34067,O,et);let de;if($e){ce&&Le&&t.texStorage2D(34067,Qe,We,rt.width,rt.height);for(let ae=0;ae<6;ae++){de=Be[ae].mipmaps;for(let ke=0;ke<de.length;ke++){const at=de[ke];O.format!==Ur?Ze!==null?ce?t.compressedTexSubImage2D(34069+ae,ke,0,0,at.width,at.height,Ze,at.data):t.compressedTexImage2D(34069+ae,ke,We,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?t.texSubImage2D(34069+ae,ke,0,0,at.width,at.height,Ze,Xe,at.data):t.texImage2D(34069+ae,ke,We,at.width,at.height,0,Ze,Xe,at.data)}}}else{de=O.mipmaps,ce&&Le&&(de.length>0&&Qe++,t.texStorage2D(34067,Qe,We,Be[0].width,Be[0].height));for(let ae=0;ae<6;ae++)if(Ge){ce?t.texSubImage2D(34069+ae,0,0,0,Be[ae].width,Be[ae].height,Ze,Xe,Be[ae].data):t.texImage2D(34069+ae,0,We,Be[ae].width,Be[ae].height,0,Ze,Xe,Be[ae].data);for(let ke=0;ke<de.length;ke++){const it=de[ke].image[ae].image;ce?t.texSubImage2D(34069+ae,ke+1,0,0,it.width,it.height,Ze,Xe,it.data):t.texImage2D(34069+ae,ke+1,We,it.width,it.height,0,Ze,Xe,it.data)}}else{ce?t.texSubImage2D(34069+ae,0,0,0,Ze,Xe,Be[ae]):t.texImage2D(34069+ae,0,We,Ze,Xe,Be[ae]);for(let ke=0;ke<de.length;ke++){const at=de[ke];ce?t.texSubImage2D(34069+ae,ke+1,0,0,Ze,Xe,at.image[ae]):t.texImage2D(34069+ae,ke+1,We,Ze,Xe,at.image[ae])}}}E(O,et)&&R(34067),Pe.__version=Ne.version,O.onUpdate&&O.onUpdate(O)}Q.__version=O.version}function X(Q,O,fe,we,Ne){const Pe=s.convert(fe.format,fe.encoding),$e=s.convert(fe.type),Ge=b(fe.internalFormat,Pe,$e,fe.encoding);r.get(O).__hasExternalTextures||(Ne===32879||Ne===35866?t.texImage3D(Ne,0,Ge,O.width,O.height,O.depth,0,Pe,$e,null):t.texImage2D(Ne,0,Ge,O.width,O.height,0,Pe,$e,null)),t.bindFramebuffer(36160,Q),ze(O)?d.framebufferTexture2DMultisampleEXT(36160,we,Ne,r.get(fe).__webglTexture,0,Re(O)):(Ne===3553||Ne>=34069&&Ne<=34074)&&n.framebufferTexture2D(36160,we,Ne,r.get(fe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Z(Q,O,fe){if(n.bindRenderbuffer(36161,Q),O.depthBuffer&&!O.stencilBuffer){let we=33189;if(fe||ze(O)){const Ne=O.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===Rr?we=36012:Ne.type===da&&(we=33190));const Pe=Re(O);ze(O)?d.renderbufferStorageMultisampleEXT(36161,Pe,we,O.width,O.height):n.renderbufferStorageMultisample(36161,Pe,we,O.width,O.height)}else n.renderbufferStorage(36161,we,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,Q)}else if(O.depthBuffer&&O.stencilBuffer){const we=Re(O);fe&&ze(O)===!1?n.renderbufferStorageMultisample(36161,we,35056,O.width,O.height):ze(O)?d.renderbufferStorageMultisampleEXT(36161,we,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,Q)}else{const we=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Ne=0;Ne<we.length;Ne++){const Pe=we[Ne],$e=s.convert(Pe.format,Pe.encoding),Ge=s.convert(Pe.type),Be=b(Pe.internalFormat,$e,Ge,Pe.encoding),rt=Re(O);fe&&ze(O)===!1?n.renderbufferStorageMultisample(36161,rt,Be,O.width,O.height):ze(O)?d.renderbufferStorageMultisampleEXT(36161,rt,Be,O.width,O.height):n.renderbufferStorage(36161,Be,O.width,O.height)}}n.bindRenderbuffer(36161,null)}function ee(Q,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Q),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),j(O.depthTexture,0);const we=r.get(O.depthTexture).__webglTexture,Ne=Re(O);if(O.depthTexture.format===xu)ze(O)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,we,0,Ne):n.framebufferTexture2D(36160,36096,3553,we,0);else if(O.depthTexture.format===Du)ze(O)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,we,0,Ne):n.framebufferTexture2D(36160,33306,3553,we,0);else throw new Error("Unknown depthTexture format")}function ie(Q){const O=r.get(Q),fe=Q.isWebGLCubeRenderTarget===!0;if(Q.depthTexture&&!O.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");ee(O.__webglFramebuffer,Q)}else if(fe){O.__webglDepthbuffer=[];for(let we=0;we<6;we++)t.bindFramebuffer(36160,O.__webglFramebuffer[we]),O.__webglDepthbuffer[we]=n.createRenderbuffer(),Z(O.__webglDepthbuffer[we],Q,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),Z(O.__webglDepthbuffer,Q,!1);t.bindFramebuffer(36160,null)}function ge(Q,O,fe){const we=r.get(Q);O!==void 0&&X(we.__webglFramebuffer,Q,Q.texture,36064,3553),fe!==void 0&&ie(Q)}function Ce(Q){const O=Q.texture,fe=r.get(Q),we=r.get(O);Q.addEventListener("dispose",D),Q.isWebGLMultipleRenderTargets!==!0&&(we.__webglTexture===void 0&&(we.__webglTexture=n.createTexture()),we.__version=O.version,o.memory.textures++);const Ne=Q.isWebGLCubeRenderTarget===!0,Pe=Q.isWebGLMultipleRenderTargets===!0,$e=S(Q)||a;if(Ne){fe.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)fe.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(fe.__webglFramebuffer=n.createFramebuffer(),Pe)if(i.drawBuffers){const Ge=Q.texture;for(let Be=0,rt=Ge.length;Be<rt;Be++){const et=r.get(Ge[Be]);et.__webglTexture===void 0&&(et.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Q.samples>0&&ze(Q)===!1){const Ge=Pe?O:[O];fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let Be=0;Be<Ge.length;Be++){const rt=Ge[Be];fe.__webglColorRenderbuffer[Be]=n.createRenderbuffer(),n.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[Be]);const et=s.convert(rt.format,rt.encoding),Ze=s.convert(rt.type),Xe=b(rt.internalFormat,et,Ze,rt.encoding,Q.isXRRenderTarget===!0),We=Re(Q);n.renderbufferStorageMultisample(36161,We,Xe,Q.width,Q.height),n.framebufferRenderbuffer(36160,36064+Be,36161,fe.__webglColorRenderbuffer[Be])}n.bindRenderbuffer(36161,null),Q.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Z(fe.__webglDepthRenderbuffer,Q,!0)),t.bindFramebuffer(36160,null)}}if(Ne){t.bindTexture(34067,we.__webglTexture),pe(34067,O,$e);for(let Ge=0;Ge<6;Ge++)X(fe.__webglFramebuffer[Ge],Q,O,36064,34069+Ge);E(O,$e)&&R(34067),t.unbindTexture()}else if(Pe){const Ge=Q.texture;for(let Be=0,rt=Ge.length;Be<rt;Be++){const et=Ge[Be],Ze=r.get(et);t.bindTexture(3553,Ze.__webglTexture),pe(3553,et,$e),X(fe.__webglFramebuffer,Q,et,36064+Be,3553),E(et,$e)&&R(3553)}t.unbindTexture()}else{let Ge=3553;(Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(a?Ge=Q.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ge,we.__webglTexture),pe(Ge,O,$e),X(fe.__webglFramebuffer,Q,O,36064,Ge),E(O,$e)&&R(Ge),t.unbindTexture()}Q.depthBuffer&&ie(Q)}function Te(Q){const O=S(Q)||a,fe=Q.isWebGLMultipleRenderTargets===!0?Q.texture:[Q.texture];for(let we=0,Ne=fe.length;we<Ne;we++){const Pe=fe[we];if(E(Pe,O)){const $e=Q.isWebGLCubeRenderTarget?34067:3553,Ge=r.get(Pe).__webglTexture;t.bindTexture($e,Ge),R($e),t.unbindTexture()}}}function Ve(Q){if(a&&Q.samples>0&&ze(Q)===!1){const O=Q.isWebGLMultipleRenderTargets?Q.texture:[Q.texture],fe=Q.width,we=Q.height;let Ne=16384;const Pe=[],$e=Q.stencilBuffer?33306:36096,Ge=r.get(Q),Be=Q.isWebGLMultipleRenderTargets===!0;if(Be)for(let rt=0;rt<O.length;rt++)t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+rt,36161,null),t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+rt,3553,null,0);t.bindFramebuffer(36008,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ge.__webglFramebuffer);for(let rt=0;rt<O.length;rt++){Pe.push(36064+rt),Q.depthBuffer&&Pe.push($e);const et=Ge.__ignoreDepthValues!==void 0?Ge.__ignoreDepthValues:!1;if(et===!1&&(Q.depthBuffer&&(Ne|=256),Q.stencilBuffer&&(Ne|=1024)),Be&&n.framebufferRenderbuffer(36008,36064,36161,Ge.__webglColorRenderbuffer[rt]),et===!0&&(n.invalidateFramebuffer(36008,[$e]),n.invalidateFramebuffer(36009,[$e])),Be){const Ze=r.get(O[rt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ze,0)}n.blitFramebuffer(0,0,fe,we,0,0,fe,we,Ne,9728),m&&n.invalidateFramebuffer(36008,Pe)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Be)for(let rt=0;rt<O.length;rt++){t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+rt,36161,Ge.__webglColorRenderbuffer[rt]);const et=r.get(O[rt]).__webglTexture;t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+rt,3553,et,0)}t.bindFramebuffer(36009,Ge.__webglMultisampledFramebuffer)}}function Re(Q){return Math.min(f,Q.samples)}function ze(Q){const O=r.get(Q);return a&&Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function je(Q){const O=o.render.frame;g.get(Q)!==O&&(g.set(Q,O),Q.update())}function be(Q,O){const fe=Q.encoding,we=Q.format,Ne=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||Q.format===r_||fe!==Wo&&(fe===Nt?a===!1?e.has("EXT_sRGB")===!0&&we===Ur?(Q.format=r_,Q.minFilter=Kt,Q.generateMipmaps=!1):O=aC.sRGBToLinear(O):(we!==Ur||Ne!==Hr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),O}this.allocateTextureUnit=V,this.resetTextureUnits=te,this.setTexture2D=j,this.setTexture2DArray=J,this.setTexture3D=W,this.setTextureCube=ne,this.rebindTextures=ge,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=X,this.useMultisampledRTT=ze}function tz(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Hr)return 5121;if(s===TN)return 32819;if(s===PN)return 32820;if(s===ZE)return 5120;if(s===QE)return 5122;if(s===qE)return 5123;if(s===eC)return 5124;if(s===da)return 5125;if(s===Rr)return 5126;if(s===Br)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===RN)return 6406;if(s===Ur)return 6408;if(s===BN)return 6409;if(s===IN)return 6410;if(s===xu)return 6402;if(s===Du)return 34041;if(s===r_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===tC)return 6403;if(s===DN)return 36244;if(s===LN)return 33319;if(s===FN)return 33320;if(s===kN)return 36249;if(s===d1||s===h1||s===p1||s===m1)if(o===Nt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===d1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===h1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===p1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===m1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===d1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===h1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===p1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===m1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===K2||s===J2||s===Y2||s===Z2)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===K2)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===J2)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Y2)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Z2)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===ON)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Q2||s===q2)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Q2)return o===Nt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===q2)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===eA||s===tA||s===nA||s===rA||s===iA||s===sA||s===oA||s===aA||s===lA||s===uA||s===cA||s===fA||s===dA||s===hA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===eA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===tA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===nA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===rA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===iA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===sA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===oA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===aA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===lA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===uA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===cA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===fA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===dA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===hA)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===g1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===g1)return o===Nt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===UN||s===pA||s===mA||s===gA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===g1)return a.COMPRESSED_RED_RGTC1_EXT;if(s===pA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===mA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===gA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===_u?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class nz extends Un{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ko extends dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wZ={type:"move"};class ES{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ko,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ko,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ko,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,r),_=this._getHandJoint(u,v);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=y.radius),_.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=c.position.distanceTo(f.position),m=.02,g=.005;u.inputState.pinching&&d>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(wZ)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new ko;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class cx extends fn{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:xu,c!==xu&&c!==Du)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===xu&&(r=da),r===void 0&&c===Du&&(r=_u),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:bn,this.minFilter=l!==void 0?l:bn,this.flipY=!1,this.generateMipmaps=!1}}class SZ extends xo{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,d=null,m=null,g=null;const v=t.getContextAttributes();let y=null,_=null;const x=[],w=[],S=new Set,T=new Map,E=new Un;E.layers.enable(1),E.viewport=new qt;const R=new Un;R.layers.enable(2),R.viewport=new qt;const b=[E,R],M=new nz;M.layers.enable(1),M.layers.enable(2);let C=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let ne=x[W];return ne===void 0&&(ne=new ES,x[W]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(W){let ne=x[W];return ne===void 0&&(ne=new ES,x[W]=ne),ne.getGripSpace()},this.getHand=function(W){let ne=x[W];return ne===void 0&&(ne=new ES,x[W]=ne),ne.getHandSpace()};function D(W){const ne=w.indexOf(W.inputSource);if(ne===-1)return;const ue=x[ne];ue!==void 0&&ue.dispatchEvent({type:W.type,data:W.inputSource})}function z(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",F);for(let W=0;W<x.length;W++){const ne=w[W];ne!==null&&(w[W]=null,x[W].disconnect(ne))}C=null,L=null,e.setRenderTarget(y),m=null,d=null,f=null,i=null,_=null,J.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){a=W,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(W){u=W},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(W){if(i=W,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",z),i.addEventListener("inputsourceschange",F),v.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ne={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ne),i.updateRenderState({baseLayer:m}),_=new Tn(m.framebufferWidth,m.framebufferHeight,{format:Ur,type:Hr,encoding:e.outputEncoding,stencilBuffer:v.stencil})}else{let ne=null,ue=null,q=null;v.depth&&(q=v.stencil?35056:33190,ne=v.stencil?Du:xu,ue=v.stencil?_u:da);const pe={colorFormat:32856,depthFormat:q,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(pe),i.updateRenderState({layers:[d]}),_=new Tn(d.textureWidth,d.textureHeight,{format:Ur,type:Hr,depthTexture:new cx(d.textureWidth,d.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0});const me=e.properties.get(_);me.__ignoreDepthValues=d.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),J.setContext(i),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function F(W){for(let ne=0;ne<W.removed.length;ne++){const ue=W.removed[ne],q=w.indexOf(ue);q>=0&&(w[q]=null,x[q].disconnect(ue))}for(let ne=0;ne<W.added.length;ne++){const ue=W.added[ne];let q=w.indexOf(ue);if(q===-1){for(let me=0;me<x.length;me++)if(me>=w.length){w.push(ue),q=me;break}else if(w[me]===null){w[me]=ue,q=me;break}if(q===-1)break}const pe=x[q];pe&&pe.connect(ue)}}const H=new $,G=new $;function te(W,ne,ue){H.setFromMatrixPosition(ne.matrixWorld),G.setFromMatrixPosition(ue.matrixWorld);const q=H.distanceTo(G),pe=ne.projectionMatrix.elements,me=ue.projectionMatrix.elements,se=pe[14]/(pe[10]-1),N=pe[14]/(pe[10]+1),X=(pe[9]+1)/pe[5],Z=(pe[9]-1)/pe[5],ee=(pe[8]-1)/pe[0],ie=(me[8]+1)/me[0],ge=se*ee,Ce=se*ie,Te=q/(-ee+ie),Ve=Te*-ee;ne.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Ve),W.translateZ(Te),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Re=se+Te,ze=N+Te,je=ge-Ve,be=Ce+(q-Ve),Q=X*N/ze*Re,O=Z*N/ze*Re;W.projectionMatrix.makePerspective(je,be,Q,O,Re,ze)}function V(W,ne){ne===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(ne.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(i===null)return;M.near=R.near=E.near=W.near,M.far=R.far=E.far=W.far,(C!==M.near||L!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,L=M.far);const ne=W.parent,ue=M.cameras;V(M,ne);for(let pe=0;pe<ue.length;pe++)V(ue[pe],ne);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),W.matrix.copy(M.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale);const q=W.children;for(let pe=0,me=q.length;pe<me;pe++)q[pe].updateMatrixWorld(!0);ue.length===2?te(M,E,R):M.projectionMatrix.copy(E.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&m===null))return l},this.setFoveation=function(W){l=W,d!==null&&(d.fixedFoveation=W),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=W)},this.getPlanes=function(){return S};let K=null;function j(W,ne){if(c=ne.getViewerPose(u||o),g=ne,c!==null){const ue=c.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let q=!1;ue.length!==M.cameras.length&&(M.cameras.length=0,q=!0);for(let pe=0;pe<ue.length;pe++){const me=ue[pe];let se=null;if(m!==null)se=m.getViewport(me);else{const X=f.getViewSubImage(d,me);se=X.viewport,pe===0&&(e.setRenderTargetTextures(_,X.colorTexture,d.ignoreDepthValues?void 0:X.depthStencilTexture),e.setRenderTarget(_))}let N=b[pe];N===void 0&&(N=new Un,N.layers.enable(pe),N.viewport=new qt,b[pe]=N),N.matrix.fromArray(me.transform.matrix),N.projectionMatrix.fromArray(me.projectionMatrix),N.viewport.set(se.x,se.y,se.width,se.height),pe===0&&M.matrix.copy(N.matrix),q===!0&&M.cameras.push(N)}}for(let ue=0;ue<x.length;ue++){const q=w[ue],pe=x[ue];q!==null&&pe!==void 0&&pe.update(q,ne,u||o)}if(K&&K(W,ne),ne.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ne.detectedPlanes});let ue=null;for(const q of S)ne.detectedPlanes.has(q)||(ue===null&&(ue=[]),ue.push(q));if(ue!==null)for(const q of ue)S.delete(q),T.delete(q),r.dispatchEvent({type:"planeremoved",data:q});for(const q of ne.detectedPlanes)if(!S.has(q))S.add(q),T.set(q,ne.lastChangedTime),r.dispatchEvent({type:"planeadded",data:q});else{const pe=T.get(q);q.lastChangedTime>pe&&(T.set(q,q.lastChangedTime),r.dispatchEvent({type:"planechanged",data:q}))}}g=null}const J=new YN;J.setAnimationLoop(j),this.setAnimationLoop=function(W){K=W},this.dispose=function(){}}}function bZ(n,e){function t(v,y){y.color.getRGB(v.fogColor.value,JN(n)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function r(v,y,_,x,w){y.isMeshBasicMaterial||y.isMeshLambertMaterial?i(v,y):y.isMeshToonMaterial?(i(v,y),c(v,y)):y.isMeshPhongMaterial?(i(v,y),u(v,y)):y.isMeshStandardMaterial?(i(v,y),f(v,y),y.isMeshPhysicalMaterial&&d(v,y,w)):y.isMeshMatcapMaterial?(i(v,y),m(v,y)):y.isMeshDepthMaterial?i(v,y):y.isMeshDistanceMaterial?(i(v,y),g(v,y)):y.isMeshNormalMaterial?i(v,y):y.isLineBasicMaterial?(s(v,y),y.isLineDashedMaterial&&o(v,y)):y.isPointsMaterial?a(v,y,_,x):y.isSpriteMaterial?l(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function i(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Pr&&(v.bumpScale.value*=-1)),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Pr&&v.normalScale.value.negate()),y.specularMap&&(v.specularMap.value=y.specularMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const _=e.get(y).envMap;if(_&&(v.envMap.value=_,v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*S}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity);let x;y.map?x=y.map:y.specularMap?x=y.specularMap:y.displacementMap?x=y.displacementMap:y.normalMap?x=y.normalMap:y.bumpMap?x=y.bumpMap:y.roughnessMap?x=y.roughnessMap:y.metalnessMap?x=y.metalnessMap:y.alphaMap?x=y.alphaMap:y.emissiveMap?x=y.emissiveMap:y.clearcoatMap?x=y.clearcoatMap:y.clearcoatNormalMap?x=y.clearcoatNormalMap:y.clearcoatRoughnessMap?x=y.clearcoatRoughnessMap:y.iridescenceMap?x=y.iridescenceMap:y.iridescenceThicknessMap?x=y.iridescenceThicknessMap:y.specularIntensityMap?x=y.specularIntensityMap:y.specularColorMap?x=y.specularColorMap:y.transmissionMap?x=y.transmissionMap:y.thicknessMap?x=y.thicknessMap:y.sheenColorMap?x=y.sheenColorMap:y.sheenRoughnessMap&&(x=y.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),v.uvTransform.value.copy(x.matrix));let w;y.aoMap?w=y.aoMap:y.lightMap&&(w=y.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uv2Transform.value.copy(w.matrix))}function s(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity}function o(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function a(v,y,_,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*_,v.scale.value=x*.5,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let w;y.map?w=y.map:y.alphaMap&&(w=y.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix))}function l(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let _;y.map?_=y.map:y.alphaMap&&(_=y.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uvTransform.value.copy(_.matrix))}function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function c(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function f(v,y){v.roughness.value=y.roughness,v.metalness.value=y.metalness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function d(v,y,_){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),v.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===Pr&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap)),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap)}function m(v,y){y.matcap&&(v.matcap.value=y.matcap)}function g(v,y){v.referencePosition.value.copy(y.referencePosition),v.nearDistance.value=y.nearDistance,v.farDistance.value=y.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function AZ(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(x,w){const S=w.program;r.uniformBlockBinding(x,S)}function u(x,w){let S=i[x.id];S===void 0&&(g(x),S=c(x),i[x.id]=S,x.addEventListener("dispose",y));const T=w.program;r.updateUBOMapping(x,T);const E=e.render.frame;s[x.id]!==E&&(d(x),s[x.id]=E)}function c(x){const w=f();x.__bindingPointIndex=w;const S=n.createBuffer(),T=x.__size,E=x.usage;return n.bindBuffer(35345,S),n.bufferData(35345,T,E),n.bindBuffer(35345,null),n.bindBufferBase(35345,w,S),S}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(x){const w=i[x.id],S=x.uniforms,T=x.__cache;n.bindBuffer(35345,w);for(let E=0,R=S.length;E<R;E++){const b=S[E];if(m(b,E,T)===!0){const M=b.__offset,C=Array.isArray(b.value)?b.value:[b.value];let L=0;for(let D=0;D<C.length;D++){const z=C[D],F=v(z);typeof z=="number"?(b.__data[0]=z,n.bufferSubData(35345,M+L,b.__data)):z.isMatrix3?(b.__data[0]=z.elements[0],b.__data[1]=z.elements[1],b.__data[2]=z.elements[2],b.__data[3]=z.elements[0],b.__data[4]=z.elements[3],b.__data[5]=z.elements[4],b.__data[6]=z.elements[5],b.__data[7]=z.elements[0],b.__data[8]=z.elements[6],b.__data[9]=z.elements[7],b.__data[10]=z.elements[8],b.__data[11]=z.elements[0]):(z.toArray(b.__data,L),L+=F.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,M,b.__data)}}n.bindBuffer(35345,null)}function m(x,w,S){const T=x.value;if(S[w]===void 0){if(typeof T=="number")S[w]=T;else{const E=Array.isArray(T)?T:[T],R=[];for(let b=0;b<E.length;b++)R.push(E[b].clone());S[w]=R}return!0}else if(typeof T=="number"){if(S[w]!==T)return S[w]=T,!0}else{const E=Array.isArray(S[w])?S[w]:[S[w]],R=Array.isArray(T)?T:[T];for(let b=0;b<E.length;b++){const M=E[b];if(M.equals(R[b])===!1)return M.copy(R[b]),!0}}return!1}function g(x){const w=x.uniforms;let S=0;const T=16;let E=0;for(let R=0,b=w.length;R<b;R++){const M=w[R],C={boundary:0,storage:0},L=Array.isArray(M.value)?M.value:[M.value];for(let D=0,z=L.length;D<z;D++){const F=L[D],H=v(F);C.boundary+=H.boundary,C.storage+=H.storage}if(M.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=S,R>0){E=S%T;const D=T-E;E!==0&&D-C.boundary<0&&(S+=T-E,M.__offset=S)}S+=C.storage}return E=S%T,E>0&&(S+=T-E),x.__size=S,x.__cache={},this}function v(x){const w={boundary:0,storage:0};return typeof x=="number"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function y(x){const w=x.target;w.removeEventListener("dispose",y);const S=o.indexOf(w.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function _(){for(const x in i)n.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:u,dispose:_}}function MZ(){const n=Bg("canvas");return n.style.display="block",n}function o0(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:MZ(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let f=null,d=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Wo,this.useLegacyLights=!0,this.toneMapping=No,this.toneMappingExposure=1;const v=this;let y=!1,_=0,x=0,w=null,S=-1,T=null;const E=new qt,R=new qt;let b=null,M=e.width,C=e.height,L=1,D=null,z=null;const F=new qt(0,0,M,C),H=new qt(0,0,M,C);let G=!1;const te=new ox;let V=!1,K=!1,j=null;const J=new Et,W=new $,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ue(){return w===null?L:1}let q=t;function pe(re,Ee){for(let Fe=0;Fe<re.length;Fe++){const ve=re[Fe],Oe=e.getContext(ve,Ee);if(Oe!==null)return Oe}return null}try{const re={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ml}`),e.addEventListener("webglcontextlost",Ze,!1),e.addEventListener("webglcontextrestored",Xe,!1),e.addEventListener("webglcontextcreationerror",We,!1),q===null){const Ee=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&Ee.shift(),q=pe(Ee,re),q===null)throw pe(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let me,se,N,X,Z,ee,ie,ge,Ce,Te,Ve,Re,ze,je,be,Q,O,fe,we,Ne,Pe,$e,Ge,Be;function rt(){me=new GJ(q),se=new FJ(q,me,n),me.init(se),$e=new tz(q,me,se),N=new _Z(q,me,se),X=new WJ,Z=new aZ,ee=new xZ(q,me,N,Z,se,$e,X),ie=new OJ(v),ge=new zJ(v),Ce=new q$(q,se),Ge=new DJ(q,me,Ce,se),Te=new HJ(q,Ce,X,Ge),Ve=new KJ(q,Te,Ce,X),we=new XJ(q,se,ee),Q=new kJ(Z),Re=new oZ(v,ie,ge,me,se,Ge,Q),ze=new bZ(v,Z),je=new uZ,be=new mZ(me,se),fe=new IJ(v,ie,ge,N,Ve,c,o),O=new yZ(v,Ve,se),Be=new AZ(q,X,se,N),Ne=new LJ(q,me,X,se),Pe=new VJ(q,me,X,se),X.programs=Re.programs,v.capabilities=se,v.extensions=me,v.properties=Z,v.renderLists=je,v.shadowMap=O,v.state=N,v.info=X}rt();const et=new SZ(v,q);this.xr=et,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const re=me.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=me.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(re){re!==void 0&&(L=re,this.setSize(M,C,!1))},this.getSize=function(re){return re.set(M,C)},this.setSize=function(re,Ee,Fe=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=re,C=Ee,e.width=Math.floor(re*L),e.height=Math.floor(Ee*L),Fe===!0&&(e.style.width=re+"px",e.style.height=Ee+"px"),this.setViewport(0,0,re,Ee)},this.getDrawingBufferSize=function(re){return re.set(M*L,C*L).floor()},this.setDrawingBufferSize=function(re,Ee,Fe){M=re,C=Ee,L=Fe,e.width=Math.floor(re*Fe),e.height=Math.floor(Ee*Fe),this.setViewport(0,0,re,Ee)},this.getCurrentViewport=function(re){return re.copy(E)},this.getViewport=function(re){return re.copy(F)},this.setViewport=function(re,Ee,Fe,ve){re.isVector4?F.set(re.x,re.y,re.z,re.w):F.set(re,Ee,Fe,ve),N.viewport(E.copy(F).multiplyScalar(L).floor())},this.getScissor=function(re){return re.copy(H)},this.setScissor=function(re,Ee,Fe,ve){re.isVector4?H.set(re.x,re.y,re.z,re.w):H.set(re,Ee,Fe,ve),N.scissor(R.copy(H).multiplyScalar(L).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(re){N.setScissorTest(G=re)},this.setOpaqueSort=function(re){D=re},this.setTransparentSort=function(re){z=re},this.getClearColor=function(re){return re.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(re=!0,Ee=!0,Fe=!0){let ve=0;re&&(ve|=16384),Ee&&(ve|=256),Fe&&(ve|=1024),q.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ze,!1),e.removeEventListener("webglcontextrestored",Xe,!1),e.removeEventListener("webglcontextcreationerror",We,!1),je.dispose(),be.dispose(),Z.dispose(),ie.dispose(),ge.dispose(),Ve.dispose(),Ge.dispose(),Be.dispose(),Re.dispose(),et.dispose(),et.removeEventListener("sessionstart",ke),et.removeEventListener("sessionend",at),j&&(j.dispose(),j=null),it.stop()};function Ze(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const re=X.autoReset,Ee=O.enabled,Fe=O.autoUpdate,ve=O.needsUpdate,Oe=O.type;rt(),X.autoReset=re,O.enabled=Ee,O.autoUpdate=Fe,O.needsUpdate=ve,O.type=Oe}function We(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function ce(re){const Ee=re.target;Ee.removeEventListener("dispose",ce),Le(Ee)}function Le(re){Qe(re),Z.remove(re)}function Qe(re){const Ee=Z.get(re).programs;Ee!==void 0&&(Ee.forEach(function(Fe){Re.releaseProgram(Fe)}),re.isShaderMaterial&&Re.releaseShaderCache(re))}this.renderBufferDirect=function(re,Ee,Fe,ve,Oe,xt){Ee===null&&(Ee=ne);const U=Oe.isMesh&&Oe.matrixWorld.determinant()<0,Y=kn(re,Ee,Fe,ve,Oe);N.setMaterial(ve,U);let le=Fe.index,_e=1;ve.wireframe===!0&&(le=Te.getWireframeAttribute(Fe),_e=2);const Ae=Fe.drawRange,Me=Fe.attributes.position;let Je=Ae.start*_e,Ke=(Ae.start+Ae.count)*_e;xt!==null&&(Je=Math.max(Je,xt.start*_e),Ke=Math.min(Ke,(xt.start+xt.count)*_e)),le!==null?(Je=Math.max(Je,0),Ke=Math.min(Ke,le.count)):Me!=null&&(Je=Math.max(Je,0),Ke=Math.min(Ke,Me.count));const tt=Ke-Je;if(tt<0||tt===1/0)return;Ge.setup(Oe,ve,Y,Fe,le);let nt,Ye=Ne;if(le!==null&&(nt=Ce.get(le),Ye=Pe,Ye.setIndex(nt)),Oe.isMesh)ve.wireframe===!0?(N.setLineWidth(ve.wireframeLinewidth*ue()),Ye.setMode(1)):Ye.setMode(4);else if(Oe.isLine){let Se=ve.linewidth;Se===void 0&&(Se=1),N.setLineWidth(Se*ue()),Oe.isLineSegments?Ye.setMode(1):Oe.isLineLoop?Ye.setMode(2):Ye.setMode(3)}else Oe.isPoints?Ye.setMode(0):Oe.isSprite&&Ye.setMode(4);if(Oe.isInstancedMesh)Ye.renderInstances(Je,tt,Oe.count);else if(Fe.isInstancedBufferGeometry){const Se=Fe._maxInstanceCount!==void 0?Fe._maxInstanceCount:1/0,Zt=Math.min(Fe.instanceCount,Se);Ye.renderInstances(Je,tt,Zt)}else Ye.render(Je,tt)},this.compile=function(re,Ee){function Fe(ve,Oe,xt){ve.transparent===!0&&ve.side===qr&&ve.forceSinglePass===!1?(ve.side=Pr,ve.needsUpdate=!0,Yt(ve,Oe,xt),ve.side=Ho,ve.needsUpdate=!0,Yt(ve,Oe,xt),ve.side=qr):Yt(ve,Oe,xt)}d=be.get(re),d.init(),g.push(d),re.traverseVisible(function(ve){ve.isLight&&ve.layers.test(Ee.layers)&&(d.pushLight(ve),ve.castShadow&&d.pushShadow(ve))}),d.setupLights(v.useLegacyLights),re.traverse(function(ve){const Oe=ve.material;if(Oe)if(Array.isArray(Oe))for(let xt=0;xt<Oe.length;xt++){const U=Oe[xt];Fe(U,re,ve)}else Fe(Oe,re,ve)}),g.pop(),d=null};let de=null;function ae(re){de&&de(re)}function ke(){it.stop()}function at(){it.start()}const it=new YN;it.setAnimationLoop(ae),typeof self<"u"&&it.setContext(self),this.setAnimationLoop=function(re){de=re,et.setAnimationLoop(re),re===null?it.stop():it.start()},et.addEventListener("sessionstart",ke),et.addEventListener("sessionend",at),this.render=function(re,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(Ee),Ee=et.getCamera()),re.isScene===!0&&re.onBeforeRender(v,re,Ee,w),d=be.get(re,g.length),d.init(),g.push(d),J.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),te.setFromProjectionMatrix(J),K=this.localClippingEnabled,V=Q.init(this.clippingPlanes,K),f=je.get(re,m.length),f.init(),m.push(f),mt(re,Ee,0,v.sortObjects),f.finish(),v.sortObjects===!0&&f.sort(D,z),V===!0&&Q.beginShadows();const Fe=d.state.shadowsArray;if(O.render(Fe,re,Ee),V===!0&&Q.endShadows(),this.info.autoReset===!0&&this.info.reset(),fe.render(f,re),d.setupLights(v.useLegacyLights),Ee.isArrayCamera){const ve=Ee.cameras;for(let Oe=0,xt=ve.length;Oe<xt;Oe++){const U=ve[Oe];Tt(f,re,U,U.viewport)}}else Tt(f,re,Ee);w!==null&&(ee.updateMultisampleRenderTarget(w),ee.updateRenderTargetMipmap(w)),re.isScene===!0&&re.onAfterRender(v,re,Ee),Ge.resetDefaultState(),S=-1,T=null,g.pop(),g.length>0?d=g[g.length-1]:d=null,m.pop(),m.length>0?f=m[m.length-1]:f=null};function mt(re,Ee,Fe,ve){if(re.visible===!1)return;if(re.layers.test(Ee.layers)){if(re.isGroup)Fe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Ee);else if(re.isLight)d.pushLight(re),re.castShadow&&d.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||te.intersectsSprite(re)){ve&&W.setFromMatrixPosition(re.matrixWorld).applyMatrix4(J);const U=Ve.update(re),Y=re.material;Y.visible&&f.push(re,U,Y,Fe,W.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(re.isSkinnedMesh&&re.skeleton.frame!==X.render.frame&&(re.skeleton.update(),re.skeleton.frame=X.render.frame),!re.frustumCulled||te.intersectsObject(re))){ve&&W.setFromMatrixPosition(re.matrixWorld).applyMatrix4(J);const U=Ve.update(re),Y=re.material;if(Array.isArray(Y)){const le=U.groups;for(let _e=0,Ae=le.length;_e<Ae;_e++){const Me=le[_e],Je=Y[Me.materialIndex];Je&&Je.visible&&f.push(re,U,Je,Fe,W.z,Me)}}else Y.visible&&f.push(re,U,Y,Fe,W.z,null)}}const xt=re.children;for(let U=0,Y=xt.length;U<Y;U++)mt(xt[U],Ee,Fe,ve)}function Tt(re,Ee,Fe,ve){const Oe=re.opaque,xt=re.transmissive,U=re.transparent;d.setupLightsView(Fe),V===!0&&Q.setGlobalState(v.clippingPlanes,Fe),xt.length>0&&Pt(Oe,Ee,Fe),ve&&N.viewport(E.copy(ve)),Oe.length>0&&_t(Oe,Ee,Fe),xt.length>0&&_t(xt,Ee,Fe),U.length>0&&_t(U,Ee,Fe),N.buffers.depth.setTest(!0),N.buffers.depth.setMask(!0),N.buffers.color.setMask(!0),N.setPolygonOffset(!1)}function Pt(re,Ee,Fe){const ve=se.isWebGL2;j===null&&(j=new Tn(1024,1024,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?Br:Hr,minFilter:Vo,samples:ve&&s===!0?4:0}));const Oe=v.getRenderTarget();v.setRenderTarget(j),v.clear();const xt=v.toneMapping;v.toneMapping=No,_t(re,Ee,Fe),v.toneMapping=xt,ee.updateMultisampleRenderTarget(j),ee.updateRenderTargetMipmap(j),v.setRenderTarget(Oe)}function _t(re,Ee,Fe){const ve=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Oe=0,xt=re.length;Oe<xt;Oe++){const U=re[Oe],Y=U.object,le=U.geometry,_e=ve===null?U.material:ve,Ae=U.group;Y.layers.test(Fe.layers)&&At(Y,Ee,Fe,le,_e,Ae)}}function At(re,Ee,Fe,ve,Oe,xt){re.onBeforeRender(v,Ee,Fe,ve,Oe,xt),re.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Oe.onBeforeRender(v,Ee,Fe,ve,re,xt),Oe.transparent===!0&&Oe.side===qr&&Oe.forceSinglePass===!1?(Oe.side=Pr,Oe.needsUpdate=!0,v.renderBufferDirect(Fe,Ee,ve,Oe,re,xt),Oe.side=Ho,Oe.needsUpdate=!0,v.renderBufferDirect(Fe,Ee,ve,Oe,re,xt),Oe.side=qr):v.renderBufferDirect(Fe,Ee,ve,Oe,re,xt),re.onAfterRender(v,Ee,Fe,ve,Oe,xt)}function Yt(re,Ee,Fe){Ee.isScene!==!0&&(Ee=ne);const ve=Z.get(re),Oe=d.state.lights,xt=d.state.shadowsArray,U=Oe.state.version,Y=Re.getParameters(re,Oe.state,xt,Ee,Fe),le=Re.getProgramCacheKey(Y);let _e=ve.programs;ve.environment=re.isMeshStandardMaterial?Ee.environment:null,ve.fog=Ee.fog,ve.envMap=(re.isMeshStandardMaterial?ge:ie).get(re.envMap||ve.environment),_e===void 0&&(re.addEventListener("dispose",ce),_e=new Map,ve.programs=_e);let Ae=_e.get(le);if(Ae!==void 0){if(ve.currentProgram===Ae&&ve.lightsStateVersion===U)return rn(re,Y),Ae}else Y.uniforms=Re.getUniforms(re),re.onBuild(Fe,Y,v),re.onBeforeCompile(Y,v),Ae=Re.acquireProgram(Y,le),_e.set(le,Ae),ve.uniforms=Y.uniforms;const Me=ve.uniforms;(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(Me.clippingPlanes=Q.uniform),rn(re,Y),ve.needsLights=jr(re),ve.lightsStateVersion=U,ve.needsLights&&(Me.ambientLightColor.value=Oe.state.ambient,Me.lightProbe.value=Oe.state.probe,Me.directionalLights.value=Oe.state.directional,Me.directionalLightShadows.value=Oe.state.directionalShadow,Me.spotLights.value=Oe.state.spot,Me.spotLightShadows.value=Oe.state.spotShadow,Me.rectAreaLights.value=Oe.state.rectArea,Me.ltc_1.value=Oe.state.rectAreaLTC1,Me.ltc_2.value=Oe.state.rectAreaLTC2,Me.pointLights.value=Oe.state.point,Me.pointLightShadows.value=Oe.state.pointShadow,Me.hemisphereLights.value=Oe.state.hemi,Me.directionalShadowMap.value=Oe.state.directionalShadowMap,Me.directionalShadowMatrix.value=Oe.state.directionalShadowMatrix,Me.spotShadowMap.value=Oe.state.spotShadowMap,Me.spotLightMatrix.value=Oe.state.spotLightMatrix,Me.spotLightMap.value=Oe.state.spotLightMap,Me.pointShadowMap.value=Oe.state.pointShadowMap,Me.pointShadowMatrix.value=Oe.state.pointShadowMatrix);const Je=Ae.getUniforms(),Ke=_1.seqWithValue(Je.seq,Me);return ve.currentProgram=Ae,ve.uniformsList=Ke,Ae}function rn(re,Ee){const Fe=Z.get(re);Fe.outputEncoding=Ee.outputEncoding,Fe.instancing=Ee.instancing,Fe.skinning=Ee.skinning,Fe.morphTargets=Ee.morphTargets,Fe.morphNormals=Ee.morphNormals,Fe.morphColors=Ee.morphColors,Fe.morphTargetsCount=Ee.morphTargetsCount,Fe.numClippingPlanes=Ee.numClippingPlanes,Fe.numIntersection=Ee.numClipIntersection,Fe.vertexAlphas=Ee.vertexAlphas,Fe.vertexTangents=Ee.vertexTangents,Fe.toneMapping=Ee.toneMapping}function kn(re,Ee,Fe,ve,Oe){Ee.isScene!==!0&&(Ee=ne),ee.resetTextureUnits();const xt=Ee.fog,U=ve.isMeshStandardMaterial?Ee.environment:null,Y=w===null?v.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Wo,le=(ve.isMeshStandardMaterial?ge:ie).get(ve.envMap||U),_e=ve.vertexColors===!0&&!!Fe.attributes.color&&Fe.attributes.color.itemSize===4,Ae=!!ve.normalMap&&!!Fe.attributes.tangent,Me=!!Fe.morphAttributes.position,Je=!!Fe.morphAttributes.normal,Ke=!!Fe.morphAttributes.color,tt=ve.toneMapped?v.toneMapping:No,nt=Fe.morphAttributes.position||Fe.morphAttributes.normal||Fe.morphAttributes.color,Ye=nt!==void 0?nt.length:0,Se=Z.get(ve),Zt=d.state.lights;if(V===!0&&(K===!0||re!==T)){const Rt=re===T&&ve.id===S;Q.setState(ve,re,Rt)}let ut=!1;ve.version===Se.__version?(Se.needsLights&&Se.lightsStateVersion!==Zt.state.version||Se.outputEncoding!==Y||Oe.isInstancedMesh&&Se.instancing===!1||!Oe.isInstancedMesh&&Se.instancing===!0||Oe.isSkinnedMesh&&Se.skinning===!1||!Oe.isSkinnedMesh&&Se.skinning===!0||Se.envMap!==le||ve.fog===!0&&Se.fog!==xt||Se.numClippingPlanes!==void 0&&(Se.numClippingPlanes!==Q.numPlanes||Se.numIntersection!==Q.numIntersection)||Se.vertexAlphas!==_e||Se.vertexTangents!==Ae||Se.morphTargets!==Me||Se.morphNormals!==Je||Se.morphColors!==Ke||Se.toneMapping!==tt||se.isWebGL2===!0&&Se.morphTargetsCount!==Ye)&&(ut=!0):(ut=!0,Se.__version=ve.version);let dt=Se.currentProgram;ut===!0&&(dt=Yt(ve,Ee,Oe));let Bt=!1,Ft=!1,$t=!1;const Ct=dt.getUniforms(),St=Se.uniforms;if(N.useProgram(dt.program)&&(Bt=!0,Ft=!0,$t=!0),ve.id!==S&&(S=ve.id,Ft=!0),Bt||T!==re){if(Ct.setValue(q,"projectionMatrix",re.projectionMatrix),se.logarithmicDepthBuffer&&Ct.setValue(q,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),T!==re&&(T=re,Ft=!0,$t=!0),ve.isShaderMaterial||ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshStandardMaterial||ve.envMap){const Rt=Ct.map.cameraPosition;Rt!==void 0&&Rt.setValue(q,W.setFromMatrixPosition(re.matrixWorld))}(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&Ct.setValue(q,"isOrthographic",re.isOrthographicCamera===!0),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial||ve.isShadowMaterial||Oe.isSkinnedMesh)&&Ct.setValue(q,"viewMatrix",re.matrixWorldInverse)}if(Oe.isSkinnedMesh){Ct.setOptional(q,Oe,"bindMatrix"),Ct.setOptional(q,Oe,"bindMatrixInverse");const Rt=Oe.skeleton;Rt&&(se.floatVertexTextures?(Rt.boneTexture===null&&Rt.computeBoneTexture(),Ct.setValue(q,"boneTexture",Rt.boneTexture,ee),Ct.setValue(q,"boneTextureSize",Rt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const kt=Fe.morphAttributes;if((kt.position!==void 0||kt.normal!==void 0||kt.color!==void 0&&se.isWebGL2===!0)&&we.update(Oe,Fe,dt),(Ft||Se.receiveShadow!==Oe.receiveShadow)&&(Se.receiveShadow=Oe.receiveShadow,Ct.setValue(q,"receiveShadow",Oe.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(St.envMap.value=le,St.flipEnvMap.value=le.isCubeTexture&&le.isRenderTargetTexture===!1?-1:1),Ft&&(Ct.setValue(q,"toneMappingExposure",v.toneMappingExposure),Se.needsLights&&ri(St,$t),xt&&ve.fog===!0&&ze.refreshFogUniforms(St,xt),ze.refreshMaterialUniforms(St,ve,L,C,j),_1.upload(q,Se.uniformsList,St,ee)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(_1.upload(q,Se.uniformsList,St,ee),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&Ct.setValue(q,"center",Oe.center),Ct.setValue(q,"modelViewMatrix",Oe.modelViewMatrix),Ct.setValue(q,"normalMatrix",Oe.normalMatrix),Ct.setValue(q,"modelMatrix",Oe.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Rt=ve.uniformsGroups;for(let ln=0,zt=Rt.length;ln<zt;ln++)if(se.isWebGL2){const mn=Rt[ln];Be.update(mn,dt),Be.bind(mn,dt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return dt}function ri(re,Ee){re.ambientLightColor.needsUpdate=Ee,re.lightProbe.needsUpdate=Ee,re.directionalLights.needsUpdate=Ee,re.directionalLightShadows.needsUpdate=Ee,re.pointLights.needsUpdate=Ee,re.pointLightShadows.needsUpdate=Ee,re.spotLights.needsUpdate=Ee,re.spotLightShadows.needsUpdate=Ee,re.rectAreaLights.needsUpdate=Ee,re.hemisphereLights.needsUpdate=Ee}function jr(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(re,Ee,Fe){Z.get(re.texture).__webglTexture=Ee,Z.get(re.depthTexture).__webglTexture=Fe;const ve=Z.get(re);ve.__hasExternalTextures=!0,ve.__hasExternalTextures&&(ve.__autoAllocateDepthBuffer=Fe===void 0,ve.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(re,Ee){const Fe=Z.get(re);Fe.__webglFramebuffer=Ee,Fe.__useDefaultFramebuffer=Ee===void 0},this.setRenderTarget=function(re,Ee=0,Fe=0){w=re,_=Ee,x=Fe;let ve=!0,Oe=null,xt=!1,U=!1;if(re){const le=Z.get(re);le.__useDefaultFramebuffer!==void 0?(N.bindFramebuffer(36160,null),ve=!1):le.__webglFramebuffer===void 0?ee.setupRenderTarget(re):le.__hasExternalTextures&&ee.rebindTextures(re,Z.get(re.texture).__webglTexture,Z.get(re.depthTexture).__webglTexture);const _e=re.texture;(_e.isData3DTexture||_e.isDataArrayTexture||_e.isCompressedArrayTexture)&&(U=!0);const Ae=Z.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Oe=Ae[Ee],xt=!0):se.isWebGL2&&re.samples>0&&ee.useMultisampledRTT(re)===!1?Oe=Z.get(re).__webglMultisampledFramebuffer:Oe=Ae,E.copy(re.viewport),R.copy(re.scissor),b=re.scissorTest}else E.copy(F).multiplyScalar(L).floor(),R.copy(H).multiplyScalar(L).floor(),b=G;if(N.bindFramebuffer(36160,Oe)&&se.drawBuffers&&ve&&N.drawBuffers(re,Oe),N.viewport(E),N.scissor(R),N.setScissorTest(b),xt){const le=Z.get(re.texture);q.framebufferTexture2D(36160,36064,34069+Ee,le.__webglTexture,Fe)}else if(U){const le=Z.get(re.texture),_e=Ee||0;q.framebufferTextureLayer(36160,36064,le.__webglTexture,Fe||0,_e)}S=-1},this.readRenderTargetPixels=function(re,Ee,Fe,ve,Oe,xt,U){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Y=Z.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&U!==void 0&&(Y=Y[U]),Y){N.bindFramebuffer(36160,Y);try{const le=re.texture,_e=le.format,Ae=le.type;if(_e!==Ur&&$e.convert(_e)!==q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Me=Ae===Br&&(me.has("EXT_color_buffer_half_float")||se.isWebGL2&&me.has("EXT_color_buffer_float"));if(Ae!==Hr&&$e.convert(Ae)!==q.getParameter(35738)&&!(Ae===Rr&&(se.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!Me){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=re.width-ve&&Fe>=0&&Fe<=re.height-Oe&&q.readPixels(Ee,Fe,ve,Oe,$e.convert(_e),$e.convert(Ae),xt)}finally{const le=w!==null?Z.get(w).__webglFramebuffer:null;N.bindFramebuffer(36160,le)}}},this.copyFramebufferToTexture=function(re,Ee,Fe=0){const ve=Math.pow(2,-Fe),Oe=Math.floor(Ee.image.width*ve),xt=Math.floor(Ee.image.height*ve);ee.setTexture2D(Ee,0),q.copyTexSubImage2D(3553,Fe,0,0,re.x,re.y,Oe,xt),N.unbindTexture()},this.copyTextureToTexture=function(re,Ee,Fe,ve=0){const Oe=Ee.image.width,xt=Ee.image.height,U=$e.convert(Fe.format),Y=$e.convert(Fe.type);ee.setTexture2D(Fe,0),q.pixelStorei(37440,Fe.flipY),q.pixelStorei(37441,Fe.premultiplyAlpha),q.pixelStorei(3317,Fe.unpackAlignment),Ee.isDataTexture?q.texSubImage2D(3553,ve,re.x,re.y,Oe,xt,U,Y,Ee.image.data):Ee.isCompressedTexture?q.compressedTexSubImage2D(3553,ve,re.x,re.y,Ee.mipmaps[0].width,Ee.mipmaps[0].height,U,Ee.mipmaps[0].data):q.texSubImage2D(3553,ve,re.x,re.y,U,Y,Ee.image),ve===0&&Fe.generateMipmaps&&q.generateMipmap(3553),N.unbindTexture()},this.copyTextureToTexture3D=function(re,Ee,Fe,ve,Oe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xt=re.max.x-re.min.x+1,U=re.max.y-re.min.y+1,Y=re.max.z-re.min.z+1,le=$e.convert(ve.format),_e=$e.convert(ve.type);let Ae;if(ve.isData3DTexture)ee.setTexture3D(ve,0),Ae=32879;else if(ve.isDataArrayTexture)ee.setTexture2DArray(ve,0),Ae=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(37440,ve.flipY),q.pixelStorei(37441,ve.premultiplyAlpha),q.pixelStorei(3317,ve.unpackAlignment);const Me=q.getParameter(3314),Je=q.getParameter(32878),Ke=q.getParameter(3316),tt=q.getParameter(3315),nt=q.getParameter(32877),Ye=Fe.isCompressedTexture?Fe.mipmaps[0]:Fe.image;q.pixelStorei(3314,Ye.width),q.pixelStorei(32878,Ye.height),q.pixelStorei(3316,re.min.x),q.pixelStorei(3315,re.min.y),q.pixelStorei(32877,re.min.z),Fe.isDataTexture||Fe.isData3DTexture?q.texSubImage3D(Ae,Oe,Ee.x,Ee.y,Ee.z,xt,U,Y,le,_e,Ye.data):Fe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(Ae,Oe,Ee.x,Ee.y,Ee.z,xt,U,Y,le,Ye.data)):q.texSubImage3D(Ae,Oe,Ee.x,Ee.y,Ee.z,xt,U,Y,le,_e,Ye),q.pixelStorei(3314,Me),q.pixelStorei(32878,Je),q.pixelStorei(3316,Ke),q.pixelStorei(3315,tt),q.pixelStorei(32877,nt),Oe===0&&ve.generateMipmaps&&q.generateMipmap(Ae),N.unbindTexture()},this.initTexture=function(re){re.isCubeTexture?ee.setTextureCube(re,0):re.isData3DTexture?ee.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?ee.setTexture2DArray(re,0):ee.setTexture2D(re,0),N.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,N.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(o0.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class rz extends o0{}rz.prototype.isWebGL1Renderer=!0;class fx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new st(e),this.density=t}clone(){return new fx(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class dx{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new st(e),this.near=t,this.far=r}clone(){return new dx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class vf extends dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class a0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Pg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ps()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Oi=new $;class Lu{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}setX(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=En(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=nl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=nl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=nl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=nl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),r=En(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),r=En(r,this.array),i=En(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=En(t,this.array),r=En(r,this.array),i=En(i,this.array),s=En(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new sn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class pC extends Xn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cd;const jp=new $,fd=new $,dd=new $,hd=new De,$p=new De,iz=new Et,oy=new $,Xp=new $,ay=new $,FB=new De,CS=new De,kB=new De;class sz extends dn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",cd===void 0){cd=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new a0(t,5);cd.setIndex([0,1,2,0,2,3]),cd.setAttribute("position",new Lu(r,3,0,!1)),cd.setAttribute("uv",new Lu(r,2,3,!1))}this.geometry=cd,this.material=e!==void 0?e:new pC,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fd.setFromMatrixScale(this.matrixWorld),iz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&fd.multiplyScalar(-dd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;ly(oy.set(-.5,-.5,0),dd,o,fd,i,s),ly(Xp.set(.5,-.5,0),dd,o,fd,i,s),ly(ay.set(.5,.5,0),dd,o,fd,i,s),FB.set(0,0),CS.set(1,0),kB.set(1,1);let a=e.ray.intersectTriangle(oy,Xp,ay,!1,jp);if(a===null&&(ly(Xp.set(-.5,.5,0),dd,o,fd,i,s),CS.set(0,1),a=e.ray.intersectTriangle(oy,ay,Xp,!1,jp),a===null))return;const l=e.ray.origin.distanceTo(jp);l<e.near||l>e.far||t.push({distance:l,point:jp.clone(),uv:io.getUV(jp,oy,Xp,ay,FB,CS,kB,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ly(n,e,t,r,i,s){hd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?($p.x=s*hd.x-i*hd.y,$p.y=i*hd.x+s*hd.y):$p.copy(hd),n.copy(e),n.x+=$p.x,n.y+=$p.y,n.applyMatrix4(iz)}const uy=new $,OB=new $;class oz extends dn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){uy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(uy);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){uy.setFromMatrixPosition(e.matrixWorld),OB.setFromMatrixPosition(this.matrixWorld);const r=uy.distanceTo(OB)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const UB=new $,NB=new qt,zB=new qt,EZ=new $,GB=new Et;class mC extends Ln{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Et,this.bindMatrixInverse=new Et}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;NB.fromBufferAttribute(i.attributes.skinIndex,e),zB.fromBufferAttribute(i.attributes.skinWeight,e),UB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zB.getComponent(s);if(o!==0){const a=NB.getComponent(s);GB.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(EZ.copy(UB).applyMatrix4(GB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class hx extends dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rf extends fn{constructor(e=null,t=1,r=1,i,s,o,a,l,u=bn,c=bn,f,d){super(null,o,a,l,u,c,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const HB=new Et,CZ=new Et;class l0{constructor(e=[],t=[]){this.uuid=Ps(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Et)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Et;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:CZ;HB.multiplyMatrices(a,t[s]),HB.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new l0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=jN(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new rf(t,e,e,Ur,Rr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new hx),this.bones.push(o),this.boneInverses.push(new Et().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Fu extends sn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const VB=new Et,WB=new Et,cy=[],TZ=new Et,Kp=new Ln;class gC extends Ln{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Fu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,TZ)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Kp.geometry=this.geometry,Kp.material=this.material,Kp.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,VB),WB.multiplyMatrices(r,VB),Kp.matrixWorld=WB,Kp.raycast(e,cy);for(let o=0,a=cy.length;o<a;o++){const l=cy[o];l.instanceId=s,l.object=this,t.push(l)}cy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Fu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ti extends Xn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jB=new $,$B=new $,XB=new Et,TS=new Gh,fy=new El;class yl extends dn{constructor(e=new jt,t=new Ti){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)jB.fromBufferAttribute(t,i-1),$B.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=jB.distanceTo($B);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),fy.copy(r.boundingSphere),fy.applyMatrix4(i),fy.radius+=s,e.ray.intersectsSphere(fy)===!1)return;XB.copy(i).invert(),TS.copy(e.ray).applyMatrix4(XB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new $,c=new $,f=new $,d=new $,m=this.isLineSegments?2:1,g=r.index,y=r.attributes.position;if(g!==null){const _=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let w=_,S=x-1;w<S;w+=m){const T=g.getX(w),E=g.getX(w+1);if(u.fromBufferAttribute(y,T),c.fromBufferAttribute(y,E),TS.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let w=_,S=x-1;w<S;w+=m){if(u.fromBufferAttribute(y,w),c.fromBufferAttribute(y,w+1),TS.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(d);E<e.near||E>e.far||t.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const KB=new $,JB=new $;class Ko extends yl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)KB.fromBufferAttribute(t,i),JB.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+KB.distanceTo(JB);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vC extends yl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class u0 extends Xn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const YB=new Et,wA=new Gh,dy=new El,hy=new $;let yC=class extends dn{constructor(e=new jt,t=new u0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),dy.copy(r.boundingSphere),dy.applyMatrix4(i),dy.radius+=s,e.ray.intersectsSphere(dy)===!1)return;YB.copy(i).invert(),wA.copy(e.ray).applyMatrix4(YB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const d=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=d,v=m;g<v;g++){const y=u.getX(g);hy.fromBufferAttribute(f,y),ZB(hy,y,l,i,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=d,v=m;g<v;g++)hy.fromBufferAttribute(f,g),ZB(hy,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function ZB(n,e,t,r,i,s,o){const a=wA.distanceSqToPoint(n);if(a<t){const l=new $;wA.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class PZ extends fn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Kt,this.magFilter=s!==void 0?s:Kt,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class RZ extends fn{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=bn,this.minFilter=bn,this.generateMipmaps=!1,this.needsUpdate=!0}}class _C extends fn{constructor(e,t,r,i,s,o,a,l,u,c,f,d){super(null,o,a,l,u,c,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class BZ extends _C{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Nn}}class IZ extends fn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Jo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],d=r[i+1]-c,m=(o-c)/d;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new De:new $);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new $,i=[],s=[],o=[],a=new $,l=new Et;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new $)}s[0]=new $,o[0]=new $;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),d<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Sr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Sr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class px extends Jo{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new De,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,m=u-this.aY;l=d*c-m*f+this.aX,u=d*f+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class az extends px{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function xC(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let d=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+f)+(l-a)/f;d*=c,m*=c,i(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const py=new $,PS=new xC,RS=new xC,BS=new xC;class wC extends Jo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new $){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(py.subVectors(i[0],i[1]).add(i[0]),u=py);const f=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(py.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=py),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(c),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),PS.initNonuniformCatmullRom(u.x,f.x,d.x,c.x,g,v,y),RS.initNonuniformCatmullRom(u.y,f.y,d.y,c.y,g,v,y),BS.initNonuniformCatmullRom(u.z,f.z,d.z,c.z,g,v,y)}else this.curveType==="catmullrom"&&(PS.initCatmullRom(u.x,f.x,d.x,c.x,this.tension),RS.initCatmullRom(u.y,f.y,d.y,c.y,this.tension),BS.initCatmullRom(u.z,f.z,d.z,c.z,this.tension));return r.set(PS.calc(l),RS.calc(l),BS.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new $().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function QB(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function DZ(n,e){const t=1-n;return t*t*e}function LZ(n,e){return 2*(1-n)*n*e}function FZ(n,e){return n*n*e}function Hm(n,e,t,r){return DZ(n,e)+LZ(n,t)+FZ(n,r)}function kZ(n,e){const t=1-n;return t*t*t*e}function OZ(n,e){const t=1-n;return 3*t*t*n*e}function UZ(n,e){return 3*(1-n)*n*n*e}function NZ(n,e){return n*n*n*e}function Vm(n,e,t,r,i){return kZ(n,e)+OZ(n,t)+UZ(n,r)+NZ(n,i)}class SC extends Jo{constructor(e=new De,t=new De,r=new De,i=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vm(e,i.x,s.x,o.x,a.x),Vm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lz extends Jo{constructor(e=new $,t=new $,r=new $,i=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new $){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vm(e,i.x,s.x,o.x,a.x),Vm(e,i.y,s.y,o.y,a.y),Vm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mx extends Jo{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uz extends Jo{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bC extends Jo{constructor(e=new De,t=new De,r=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hm(e,i.x,s.x,o.x),Hm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AC extends Jo{constructor(e=new $,t=new $,r=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new $){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hm(e,i.x,s.x,o.x),Hm(e,i.y,s.y,o.y),Hm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MC extends Jo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(QB(a,l.x,u.x,c.x,f.x),QB(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new De().fromArray(i))}return this}}var EC=Object.freeze({__proto__:null,ArcCurve:az,CatmullRomCurve3:wC,CubicBezierCurve:SC,CubicBezierCurve3:lz,EllipseCurve:px,LineCurve:mx,LineCurve3:uz,QuadraticBezierCurve:bC,QuadraticBezierCurve3:AC,SplineCurve:MC});class cz extends Jo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new mx(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new EC[i.type]().fromJSON(i))}return this}}class Ig extends cz{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new mx(this.currentPoint.clone(),new De(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new bC(this.currentPoint.clone(),new De(e,t),new De(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new SC(this.currentPoint.clone(),new De(e,t),new De(r,i),new De(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new MC(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new px(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Wh extends jt{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Sr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new $,d=new De,m=new $,g=new $,v=new $;let y=0,_=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,_=e[x+1].y-e[x].y,m.x=_*1,m.y=-y,m.z=_*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[x+1].x-e[x].x,_=e[x+1].y-e[x].y,m.x=_*1,m.y=-y,m.z=_*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let x=0;x<=t;x++){const w=r+x*c*i,S=Math.sin(w),T=Math.cos(w);for(let E=0;E<=e.length-1;E++){f.x=e[E].x*S,f.y=e[E].y,f.z=e[E].x*T,o.push(f.x,f.y,f.z),d.x=x/t,d.y=E/(e.length-1),a.push(d.x,d.y);const R=l[3*E+0]*S,b=l[3*E+1],M=l[3*E+0]*T;u.push(R,b,M)}}for(let x=0;x<t;x++)for(let w=0;w<e.length-1;w++){const S=w+x*e.length,T=S,E=S+e.length,R=S+e.length+1,b=S+1;s.push(T,E,b),s.push(R,b,E)}this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("uv",new wt(a,2)),this.setAttribute("normal",new wt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wh(e.points,e.segments,e.phiStart,e.phiLength)}}class c0 extends Wh{constructor(e=1,t=1,r=4,i=8){const s=new Ig;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new c0(e.radius,e.length,e.capSegments,e.radialSegments)}}class f0 extends jt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new $,c=new De;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const m=r+f/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("normal",new wt(a,3)),this.setAttribute("uv",new wt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cf extends jt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],d=[],m=[];let g=0;const v=[],y=r/2;let _=0;x(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new wt(f,3)),this.setAttribute("normal",new wt(d,3)),this.setAttribute("uv",new wt(m,2));function x(){const S=new $,T=new $;let E=0;const R=(t-e)/r;for(let b=0;b<=s;b++){const M=[],C=b/s,L=C*(t-e)+e;for(let D=0;D<=i;D++){const z=D/i,F=z*l+a,H=Math.sin(F),G=Math.cos(F);T.x=L*H,T.y=-C*r+y,T.z=L*G,f.push(T.x,T.y,T.z),S.set(H,R,G).normalize(),d.push(S.x,S.y,S.z),m.push(z,1-C),M.push(g++)}v.push(M)}for(let b=0;b<i;b++)for(let M=0;M<s;M++){const C=v[M][b],L=v[M+1][b],D=v[M+1][b+1],z=v[M][b+1];c.push(C,L,z),c.push(L,D,z),E+=6}u.addGroup(_,E,0),_+=E}function w(S){const T=g,E=new De,R=new $;let b=0;const M=S===!0?e:t,C=S===!0?1:-1;for(let D=1;D<=i;D++)f.push(0,y*C,0),d.push(0,C,0),m.push(.5,.5),g++;const L=g;for(let D=0;D<=i;D++){const F=D/i*l+a,H=Math.cos(F),G=Math.sin(F);R.x=M*G,R.y=y*C,R.z=M*H,f.push(R.x,R.y,R.z),d.push(0,C,0),E.x=H*.5+.5,E.y=G*.5*C+.5,m.push(E.x,E.y),g++}for(let D=0;D<i;D++){const z=T+D,F=L+D;S===!0?c.push(F,F+1,z):c.push(F+1,F,z),b+=3}u.addGroup(_,b,S===!0?1:2),_+=b}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class d0 extends Cf{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new d0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cl extends jt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new wt(s,3)),this.setAttribute("normal",new wt(s.slice(),3)),this.setAttribute("uv",new wt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const w=new $,S=new $,T=new $;for(let E=0;E<t.length;E+=3)m(t[E+0],w),m(t[E+1],S),m(t[E+2],T),l(w,S,T,x)}function l(x,w,S,T){const E=T+1,R=[];for(let b=0;b<=E;b++){R[b]=[];const M=x.clone().lerp(S,b/E),C=w.clone().lerp(S,b/E),L=E-b;for(let D=0;D<=L;D++)D===0&&b===E?R[b][D]=M:R[b][D]=M.clone().lerp(C,D/L)}for(let b=0;b<E;b++)for(let M=0;M<2*(E-b)-1;M++){const C=Math.floor(M/2);M%2===0?(d(R[b][C+1]),d(R[b+1][C]),d(R[b][C])):(d(R[b][C+1]),d(R[b+1][C+1]),d(R[b+1][C]))}}function u(x){const w=new $;for(let S=0;S<s.length;S+=3)w.x=s[S+0],w.y=s[S+1],w.z=s[S+2],w.normalize().multiplyScalar(x),s[S+0]=w.x,s[S+1]=w.y,s[S+2]=w.z}function c(){const x=new $;for(let w=0;w<s.length;w+=3){x.x=s[w+0],x.y=s[w+1],x.z=s[w+2];const S=y(x)/2/Math.PI+.5,T=_(x)/Math.PI+.5;o.push(S,1-T)}g(),f()}function f(){for(let x=0;x<o.length;x+=6){const w=o[x+0],S=o[x+2],T=o[x+4],E=Math.max(w,S,T),R=Math.min(w,S,T);E>.9&&R<.1&&(w<.2&&(o[x+0]+=1),S<.2&&(o[x+2]+=1),T<.2&&(o[x+4]+=1))}}function d(x){s.push(x.x,x.y,x.z)}function m(x,w){const S=x*3;w.x=e[S+0],w.y=e[S+1],w.z=e[S+2]}function g(){const x=new $,w=new $,S=new $,T=new $,E=new De,R=new De,b=new De;for(let M=0,C=0;M<s.length;M+=9,C+=6){x.set(s[M+0],s[M+1],s[M+2]),w.set(s[M+3],s[M+4],s[M+5]),S.set(s[M+6],s[M+7],s[M+8]),E.set(o[C+0],o[C+1]),R.set(o[C+2],o[C+3]),b.set(o[C+4],o[C+5]),T.copy(x).add(w).add(S).divideScalar(3);const L=y(T);v(E,C+0,x,L),v(R,C+2,w,L),v(b,C+4,S,L)}}function v(x,w,S,T){T<0&&x.x===1&&(o[w]=x.x-1),S.x===0&&S.z===0&&(o[w]=T/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function _(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cl(e.vertices,e.indices,e.radius,e.details)}}class h0 extends Cl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new h0(e.radius,e.detail)}}const my=new $,gy=new $,IS=new $,vy=new io;class fz extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(tf*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),d={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:v,b:y,c:_}=vy;if(v.fromBufferAttribute(a,u[0]),y.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),vy.getNormal(IS),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const w=(x+1)%3,S=f[x],T=f[w],E=vy[c[x]],R=vy[c[w]],b=`${S}_${T}`,M=`${T}_${S}`;M in d&&d[M]?(IS.dot(d[M].normal)<=s&&(m.push(E.x,E.y,E.z),m.push(R.x,R.y,R.z)),d[M]=null):b in d||(d[b]={index0:u[x],index1:u[w],normal:IS.clone()})}}for(const g in d)if(d[g]){const{index0:v,index1:y}=d[g];my.fromBufferAttribute(a,v),gy.fromBufferAttribute(a,y),m.push(my.x,my.y,my.z),m.push(gy.x,gy.y,gy.z)}this.setAttribute("position",new wt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class wu extends Ig{constructor(e){super(e),this.uuid=Ps(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Ig().fromJSON(i))}return this}}const zZ={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=dz(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,d,m;if(r&&(s=jZ(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let g=t;g<i;g+=t)f=n[g],d=n[g+1],f<a&&(a=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return Dg(s,o,t,a,l,m,0),o}};function dz(n,e,t,r,i){let s,o;if(i===nQ(n,e,t,r)>0)for(s=e;s<t;s+=r)o=qB(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=qB(s,n[s],n[s+1],o);return o&&gx(o,o.next)&&(Fg(o),o=o.next),o}function yf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(gx(t,t.next)||nr(t.prev,t,t.next)===0)){if(Fg(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Dg(n,e,t,r,i,s,o){if(!n)return;!o&&s&&YZ(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?HZ(n,r,i,s):GZ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Fg(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=VZ(yf(n),e,t),Dg(n,e,t,r,i,s,2)):o===2&&WZ(n,e,t,r,i,s):Dg(yf(n),e,t,r,i,s,1);break}}}function GZ(n){const e=n.prev,t=n,r=n.next;if(nr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let g=r.next;for(;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=f&&g.y<=m&&zd(i,a,s,l,o,u,g.x,g.y)&&nr(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function HZ(n,e,t,r){const i=n.prev,s=n,o=n.next;if(nr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,f=s.y,d=o.y,m=a<l?a<u?a:u:l<u?l:u,g=c<f?c<d?c:d:f<d?f:d,v=a>l?a>u?a:u:l>u?l:u,y=c>f?c>d?c:d:f>d?f:d,_=SA(m,g,e,t,r),x=SA(v,y,e,t,r);let w=n.prevZ,S=n.nextZ;for(;w&&w.z>=_&&S&&S.z<=x;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&zd(a,c,l,f,u,d,w.x,w.y)&&nr(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=m&&S.x<=v&&S.y>=g&&S.y<=y&&S!==i&&S!==o&&zd(a,c,l,f,u,d,S.x,S.y)&&nr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;w&&w.z>=_;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&zd(a,c,l,f,u,d,w.x,w.y)&&nr(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=x;){if(S.x>=m&&S.x<=v&&S.y>=g&&S.y<=y&&S!==i&&S!==o&&zd(a,c,l,f,u,d,S.x,S.y)&&nr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function VZ(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!gx(i,s)&&hz(i,r,r.next,s)&&Lg(i,s)&&Lg(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Fg(r),Fg(r.next),r=n=s),r=r.next}while(r!==n);return yf(r)}function WZ(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&qZ(o,a)){let l=pz(o,a);o=yf(o,o.next),l=yf(l,l.next),Dg(o,e,t,r,i,s,0),Dg(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function jZ(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=dz(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(QZ(u));for(i.sort($Z),s=0;s<i.length;s++)t=XZ(i[s],t);return t}function $Z(n,e){return n.x-e.x}function XZ(n,e){const t=KZ(n,e);if(!t)return e;const r=pz(t,n);return yf(r,r.next),yf(t,t.next)}function KZ(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&zd(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Lg(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&JZ(i,t)))&&(i=t,c=f)),t=t.next;while(t!==a);return i}function JZ(n,e){return nr(n.prev,n,e.prev)<0&&nr(e.next,n,n.next)<0}function YZ(n,e,t,r){let i=n;do i.z===0&&(i.z=SA(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,ZZ(i)}function ZZ(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function SA(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function QZ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function zd(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function qZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!eQ(n,e)&&(Lg(n,e)&&Lg(e,n)&&tQ(n,e)&&(nr(n.prev,n,e.prev)||nr(n,e.prev,e))||gx(n,e)&&nr(n.prev,n,n.next)>0&&nr(e.prev,e,e.next)>0)}function nr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function gx(n,e){return n.x===e.x&&n.y===e.y}function hz(n,e,t,r){const i=_y(nr(n,e,t)),s=_y(nr(n,e,r)),o=_y(nr(t,r,n)),a=_y(nr(t,r,e));return!!(i!==s&&o!==a||i===0&&yy(n,t,e)||s===0&&yy(n,r,e)||o===0&&yy(t,n,r)||a===0&&yy(t,e,r))}function yy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function _y(n){return n>0?1:n<0?-1:0}function eQ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hz(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Lg(n,e){return nr(n.prev,n,n.next)<0?nr(n,e,n.next)>=0&&nr(n,n.prev,e)>=0:nr(n,e,n.prev)<0||nr(n,n.next,e)<0}function tQ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function pz(n,e){const t=new bA(n.i,n.x,n.y),r=new bA(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function qB(n,e,t,r){const i=new bA(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Fg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function bA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nQ(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ga{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ga.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];eI(e),tI(r,e);let o=e.length;t.forEach(eI);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,tI(r,t[l]);const a=zZ.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function eI(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function tI(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class p0 extends jt{constructor(e=new wu([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new wt(i,3)),this.setAttribute("uv",new wt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:rQ;let w,S=!1,T,E,R,b;_&&(w=_.getSpacedPoints(c),S=!0,d=!1,T=_.computeFrenetFrames(c,!1),E=new $,R=new $,b=new $),d||(y=0,m=0,g=0,v=0);const M=a.extractPoints(u);let C=M.shape;const L=M.holes;if(!ga.isClockWise(C)){C=C.reverse();for(let ee=0,ie=L.length;ee<ie;ee++){const ge=L[ee];ga.isClockWise(ge)&&(L[ee]=ge.reverse())}}const z=ga.triangulateShape(C,L),F=C;for(let ee=0,ie=L.length;ee<ie;ee++){const ge=L[ee];C=C.concat(ge)}function H(ee,ie,ge){return ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().addScaledVector(ie,ge)}const G=C.length,te=z.length;function V(ee,ie,ge){let Ce,Te,Ve;const Re=ee.x-ie.x,ze=ee.y-ie.y,je=ge.x-ee.x,be=ge.y-ee.y,Q=Re*Re+ze*ze,O=Re*be-ze*je;if(Math.abs(O)>Number.EPSILON){const fe=Math.sqrt(Q),we=Math.sqrt(je*je+be*be),Ne=ie.x-ze/fe,Pe=ie.y+Re/fe,$e=ge.x-be/we,Ge=ge.y+je/we,Be=(($e-Ne)*be-(Ge-Pe)*je)/(Re*be-ze*je);Ce=Ne+Re*Be-ee.x,Te=Pe+ze*Be-ee.y;const rt=Ce*Ce+Te*Te;if(rt<=2)return new De(Ce,Te);Ve=Math.sqrt(rt/2)}else{let fe=!1;Re>Number.EPSILON?je>Number.EPSILON&&(fe=!0):Re<-Number.EPSILON?je<-Number.EPSILON&&(fe=!0):Math.sign(ze)===Math.sign(be)&&(fe=!0),fe?(Ce=-ze,Te=Re,Ve=Math.sqrt(Q)):(Ce=Re,Te=ze,Ve=Math.sqrt(Q/2))}return new De(Ce/Ve,Te/Ve)}const K=[];for(let ee=0,ie=F.length,ge=ie-1,Ce=ee+1;ee<ie;ee++,ge++,Ce++)ge===ie&&(ge=0),Ce===ie&&(Ce=0),K[ee]=V(F[ee],F[ge],F[Ce]);const j=[];let J,W=K.concat();for(let ee=0,ie=L.length;ee<ie;ee++){const ge=L[ee];J=[];for(let Ce=0,Te=ge.length,Ve=Te-1,Re=Ce+1;Ce<Te;Ce++,Ve++,Re++)Ve===Te&&(Ve=0),Re===Te&&(Re=0),J[Ce]=V(ge[Ce],ge[Ve],ge[Re]);j.push(J),W=W.concat(J)}for(let ee=0;ee<y;ee++){const ie=ee/y,ge=m*Math.cos(ie*Math.PI/2),Ce=g*Math.sin(ie*Math.PI/2)+v;for(let Te=0,Ve=F.length;Te<Ve;Te++){const Re=H(F[Te],K[Te],Ce);me(Re.x,Re.y,-ge)}for(let Te=0,Ve=L.length;Te<Ve;Te++){const Re=L[Te];J=j[Te];for(let ze=0,je=Re.length;ze<je;ze++){const be=H(Re[ze],J[ze],Ce);me(be.x,be.y,-ge)}}}const ne=g+v;for(let ee=0;ee<G;ee++){const ie=d?H(C[ee],W[ee],ne):C[ee];S?(R.copy(T.normals[0]).multiplyScalar(ie.x),E.copy(T.binormals[0]).multiplyScalar(ie.y),b.copy(w[0]).add(R).add(E),me(b.x,b.y,b.z)):me(ie.x,ie.y,0)}for(let ee=1;ee<=c;ee++)for(let ie=0;ie<G;ie++){const ge=d?H(C[ie],W[ie],ne):C[ie];S?(R.copy(T.normals[ee]).multiplyScalar(ge.x),E.copy(T.binormals[ee]).multiplyScalar(ge.y),b.copy(w[ee]).add(R).add(E),me(b.x,b.y,b.z)):me(ge.x,ge.y,f/c*ee)}for(let ee=y-1;ee>=0;ee--){const ie=ee/y,ge=m*Math.cos(ie*Math.PI/2),Ce=g*Math.sin(ie*Math.PI/2)+v;for(let Te=0,Ve=F.length;Te<Ve;Te++){const Re=H(F[Te],K[Te],Ce);me(Re.x,Re.y,f+ge)}for(let Te=0,Ve=L.length;Te<Ve;Te++){const Re=L[Te];J=j[Te];for(let ze=0,je=Re.length;ze<je;ze++){const be=H(Re[ze],J[ze],Ce);S?me(be.x,be.y+w[c-1].y,w[c-1].x+ge):me(be.x,be.y,f+ge)}}}ue(),q();function ue(){const ee=i.length/3;if(d){let ie=0,ge=G*ie;for(let Ce=0;Ce<te;Ce++){const Te=z[Ce];se(Te[2]+ge,Te[1]+ge,Te[0]+ge)}ie=c+y*2,ge=G*ie;for(let Ce=0;Ce<te;Ce++){const Te=z[Ce];se(Te[0]+ge,Te[1]+ge,Te[2]+ge)}}else{for(let ie=0;ie<te;ie++){const ge=z[ie];se(ge[2],ge[1],ge[0])}for(let ie=0;ie<te;ie++){const ge=z[ie];se(ge[0]+G*c,ge[1]+G*c,ge[2]+G*c)}}r.addGroup(ee,i.length/3-ee,0)}function q(){const ee=i.length/3;let ie=0;pe(F,ie),ie+=F.length;for(let ge=0,Ce=L.length;ge<Ce;ge++){const Te=L[ge];pe(Te,ie),ie+=Te.length}r.addGroup(ee,i.length/3-ee,1)}function pe(ee,ie){let ge=ee.length;for(;--ge>=0;){const Ce=ge;let Te=ge-1;Te<0&&(Te=ee.length-1);for(let Ve=0,Re=c+y*2;Ve<Re;Ve++){const ze=G*Ve,je=G*(Ve+1),be=ie+Ce+ze,Q=ie+Te+ze,O=ie+Te+je,fe=ie+Ce+je;N(be,Q,O,fe)}}}function me(ee,ie,ge){l.push(ee),l.push(ie),l.push(ge)}function se(ee,ie,ge){X(ee),X(ie),X(ge);const Ce=i.length/3,Te=x.generateTopUV(r,i,Ce-3,Ce-2,Ce-1);Z(Te[0]),Z(Te[1]),Z(Te[2])}function N(ee,ie,ge,Ce){X(ee),X(ie),X(Ce),X(ie),X(ge),X(Ce);const Te=i.length/3,Ve=x.generateSideWallUV(r,i,Te-6,Te-3,Te-2,Te-1);Z(Ve[0]),Z(Ve[1]),Z(Ve[3]),Z(Ve[1]),Z(Ve[2]),Z(Ve[3])}function X(ee){i.push(l[ee*3+0]),i.push(l[ee*3+1]),i.push(l[ee*3+2])}function Z(ee){s.push(ee.x),s.push(ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return iQ(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new EC[i.type]().fromJSON(i)),new p0(r,e.options)}}const rQ={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new De(s,o),new De(a,l),new De(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],d=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[s*3],y=e[s*3+1],_=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new De(o,1-l),new De(u,1-f),new De(d,1-g),new De(v,1-_)]:[new De(a,1-l),new De(c,1-f),new De(m,1-g),new De(y,1-_)]}};function iQ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jh extends Cl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jh(e.radius,e.detail)}}class $h extends Cl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $h(e.radius,e.detail)}}class m0 extends jt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const d=(t-e)/i,m=new $,g=new De;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const _=s+y/r*o;m.x=f*Math.cos(_),m.y=f*Math.sin(_),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,c.push(g.x,g.y)}f+=d}for(let v=0;v<i;v++){const y=v*(r+1);for(let _=0;_<r;_++){const x=_+y,w=x,S=x+r+1,T=x+r+2,E=x+1;a.push(w,S,E),a.push(S,T,E)}}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(u,3)),this.setAttribute("uv",new wt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class g0 extends jt{constructor(e=new wu([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new wt(i,3)),this.setAttribute("normal",new wt(s,3)),this.setAttribute("uv",new wt(o,2));function u(c){const f=i.length/3,d=c.extractPoints(t);let m=d.shape;const g=d.holes;ga.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,_=g.length;y<_;y++){const x=g[y];ga.isClockWise(x)===!0&&(g[y]=x.reverse())}const v=ga.triangulateShape(m,g);for(let y=0,_=g.length;y<_;y++){const x=g[y];m=m.concat(x)}for(let y=0,_=m.length;y<_;y++){const x=m[y];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let y=0,_=v.length;y<_;y++){const x=v[y],w=x[0]+f,S=x[1]+f,T=x[2]+f;r.push(w,S,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return sQ(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new g0(r,e.curveSegments)}}function sQ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Xh extends jt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new $,d=new $,m=[],g=[],v=[],y=[];for(let _=0;_<=r;_++){const x=[],w=_/r;let S=0;_==0&&o==0?S=.5/t:_==r&&l==Math.PI&&(S=-.5/t);for(let T=0;T<=t;T++){const E=T/t;f.x=-e*Math.cos(i+E*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(i+E*s)*Math.sin(o+w*a),g.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),y.push(E+S,1-w),x.push(u++)}c.push(x)}for(let _=0;_<r;_++)for(let x=0;x<t;x++){const w=c[_][x+1],S=c[_][x],T=c[_+1][x],E=c[_+1][x+1];(_!==0||o>0)&&m.push(w,S,E),(_!==r-1||l<Math.PI)&&m.push(S,T,E)}this.setIndex(m),this.setAttribute("position",new wt(g,3)),this.setAttribute("normal",new wt(v,3)),this.setAttribute("uv",new wt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class v0 extends Cl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v0(e.radius,e.detail)}}class y0 extends jt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new $,f=new $,d=new $;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const v=g/i*s,y=m/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(v),f.y=(e+t*Math.cos(y))*Math.sin(v),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(f,c).normalize(),l.push(d.x,d.y,d.z),u.push(g/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const v=(i+1)*m+g-1,y=(i+1)*(m-1)+g-1,_=(i+1)*(m-1)+g,x=(i+1)*m+g;o.push(v,y,x),o.push(y,_,x)}this.setIndex(o),this.setAttribute("position",new wt(a,3)),this.setAttribute("normal",new wt(l,3)),this.setAttribute("uv",new wt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class _0 extends jt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new $,d=new $,m=new $,g=new $,v=new $,y=new $,_=new $;for(let w=0;w<=r;++w){const S=w/r*s*Math.PI*2;x(S,s,o,e,m),x(S+.01,s,o,e,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize();for(let T=0;T<=i;++T){const E=T/i*Math.PI*2,R=-t*Math.cos(E),b=t*Math.sin(E);f.x=m.x+(R*_.x+b*v.x),f.y=m.y+(R*_.y+b*v.y),f.z=m.z+(R*_.z+b*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,m).normalize(),u.push(d.x,d.y,d.z),c.push(w/r),c.push(T/i)}}for(let w=1;w<=r;w++)for(let S=1;S<=i;S++){const T=(i+1)*(w-1)+(S-1),E=(i+1)*w+(S-1),R=(i+1)*w+S,b=(i+1)*(w-1)+S;a.push(T,E,b),a.push(E,R,b)}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(u,3)),this.setAttribute("uv",new wt(c,2));function x(w,S,T,E,R){const b=Math.cos(w),M=Math.sin(w),C=T/S*w,L=Math.cos(C);R.x=E*(2+L)*.5*b,R.y=E*(2+L)*M*.5,R.z=E*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class x0 extends jt{constructor(e=new AC(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new $,l=new $,u=new De;let c=new $;const f=[],d=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new wt(f,3)),this.setAttribute("normal",new wt(d,3)),this.setAttribute("uv",new wt(m,2));function v(){for(let w=0;w<t;w++)y(w);y(s===!1?t:0),x(),_()}function y(w){c=e.getPointAt(w/t,c);const S=o.normals[w],T=o.binormals[w];for(let E=0;E<=i;E++){const R=E/i*Math.PI*2,b=Math.sin(R),M=-Math.cos(R);l.x=M*S.x+b*T.x,l.y=M*S.y+b*T.y,l.z=M*S.z+b*T.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function _(){for(let w=1;w<=t;w++)for(let S=1;S<=i;S++){const T=(i+1)*(w-1)+(S-1),E=(i+1)*w+(S-1),R=(i+1)*w+S,b=(i+1)*(w-1)+S;g.push(T,E,b),g.push(E,R,b)}}function x(){for(let w=0;w<=t;w++)for(let S=0;S<=i;S++)u.x=w/t,u.y=S/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new x0(new EC[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mz extends jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new $,s=new $;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],d=f.start,m=f.count;for(let g=d,v=d+m;g<v;g+=3)for(let y=0;y<3;y++){const _=a.getX(g+y),x=a.getX(g+(y+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,x),nI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),nI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function nI(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var rI=Object.freeze({__proto__:null,BoxGeometry:Xu,CapsuleGeometry:c0,CircleGeometry:f0,ConeGeometry:d0,CylinderGeometry:Cf,DodecahedronGeometry:h0,EdgesGeometry:fz,ExtrudeGeometry:p0,IcosahedronGeometry:jh,LatheGeometry:Wh,OctahedronGeometry:$h,PlaneGeometry:Xo,PolyhedronGeometry:Cl,RingGeometry:m0,ShapeGeometry:g0,SphereGeometry:Xh,TetrahedronGeometry:v0,TorusGeometry:y0,TorusKnotGeometry:_0,TubeGeometry:x0,WireframeGeometry:mz});class gz extends Xn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new st(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vz extends pr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Kh extends Xn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ks extends Kh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Sr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class CC extends Xn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TC extends Xn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new st(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class PC extends Xn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class RC extends Xn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yz extends Xn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new st(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$u,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _z extends Ti{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qs(n,e,t){return BC(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Xc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function xz(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function AA(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function IC(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function oQ(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],d=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*i;if(!(g<t||g>=r)){f.push(u.times[m]);for(let v=0;v<c;++v)d.push(u.values[m*c+v])}}f.length!==0&&(u.times=Xc(f,u.times.constructor),u.values=Xc(d,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function aQ(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let d=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=c,x=f-c;v=qs(a.values,_,x)}else if(s>=a.times[g]){const _=g*f+c,x=_+f-c;v=qs(a.values,_,x)}else{const _=a.createInterpolant(),x=c,w=f-c;_.evaluate(s),v=qs(_.resultBuffer,x,w)}l==="quaternion"&&new Hn().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let _=0;_<y;++_){const x=_*m+d;if(l==="quaternion")Hn.multiplyQuaternionsFlat(u.values,x,v,0,u.values,x);else{const w=m-d*2;for(let S=0;S<w;++S)u.values[x+S]-=v[S]}}}return n.blendMode=nC,n}const lQ={arraySlice:qs,convertArray:Xc,isTypedArray:BC,getKeyframeOrder:xz,sortedArray:AA,flattenJSON:IC,subclip:oQ,makeClipAdditive:aQ};class Jh{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wz extends Jh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Wc,endingEnd:Wc}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case jc:s=e,a=2*t-r;break;case Tg:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case jc:o=e,l=2*r-t;break;case Tg:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),v=g*g,y=v*g,_=-d*y+2*d*v-d*g,x=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*g+1,w=(-1-m)*y+(1.5+m)*v+.5*g,S=m*y-m*v;for(let T=0;T!==a;++T)s[T]=_*o[c+T]+x*o[u+T]+w*o[l+T]+S*o[f+T];return s}}class DC extends Jh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let d=0;d!==a;++d)s[d]=o[u+d]*f+o[l+d]*c;return s}}class Sz extends Jh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Yo{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xc(t,this.TimeBufferType),this.values=Xc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Xc(e.times,Array),values:Xc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Sz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wh:t=this.InterpolantFactoryMethodDiscrete;break;case gf:t=this.InterpolantFactoryMethodLinear;break;case v1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wh;case this.InterpolantFactoryMethodLinear:return gf;case this.InterpolantFactoryMethodSmooth:return v1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qs(r,s,o),this.values=qs(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&BC(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=qs(this.times),t=qs(this.values),r=this.getValueSize(),i=this.getInterpolation()===v1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,d=f-r,m=f+r;for(let g=0;g!==r;++g){const v=t[f+g];if(v!==t[d+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,d=o*r;for(let m=0;m!==r;++m)t[d+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=qs(e,0,o),this.values=qs(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=qs(this.times,0),t=qs(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Yo.prototype.TimeBufferType=Float32Array;Yo.prototype.ValueBufferType=Float32Array;Yo.prototype.DefaultInterpolation=gf;class Tf extends Yo{}Tf.prototype.ValueTypeName="bool";Tf.prototype.ValueBufferType=Array;Tf.prototype.DefaultInterpolation=wh;Tf.prototype.InterpolantFactoryMethodLinear=void 0;Tf.prototype.InterpolantFactoryMethodSmooth=void 0;class LC extends Yo{}LC.prototype.ValueTypeName="color";class _f extends Yo{}_f.prototype.ValueTypeName="number";class bz extends Jh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Hn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class ku extends Yo{InterpolantFactoryMethodLinear(e){return new bz(this.times,this.values,this.getValueSize(),e)}}ku.prototype.ValueTypeName="quaternion";ku.prototype.DefaultInterpolation=gf;ku.prototype.InterpolantFactoryMethodSmooth=void 0;class Pf extends Yo{}Pf.prototype.ValueTypeName="string";Pf.prototype.ValueBufferType=Array;Pf.prototype.DefaultInterpolation=wh;Pf.prototype.InterpolantFactoryMethodLinear=void 0;Pf.prototype.InterpolantFactoryMethodSmooth=void 0;class xf extends Yo{}xf.prototype.ValueTypeName="vector";class bh{constructor(e,t=-1,r,i=rx){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ps(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(cQ(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Yo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=xz(l);l=AA(l,1,c),u=AA(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new _f(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let d=i[f];d||(i[f]=d=[]),d.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,m,g,v){if(m.length!==0){const y=[],_=[];IC(m,y,_,g),y.length!==0&&v.push(new f(d,y,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const d=u[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let v=0;v<d[g].morphTargets.length;v++)m[d[g].morphTargets[v]]=-1;for(const v in m){const y=[],_=[];for(let x=0;x!==d[g].morphTargets.length;++x){const w=d[g];y.push(w.time),_.push(w.morphTarget===v?1:0)}i.push(new _f(".morphTargetInfluence["+v+"]",y,_))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(xf,m+".position",d,"pos",i),r(ku,m+".quaternion",d,"rot",i),r(xf,m+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uQ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _f;case"vector":case"vector2":case"vector3":case"vector4":return xf;case"color":return LC;case"quaternion":return ku;case"bool":case"boolean":return Tf;case"string":return Pf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cQ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=uQ(n.type);if(n.times===void 0){const t=[],r=[];IC(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const wf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class vx{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,d=u.length;f<d;f+=2){const m=u[f],g=u[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return g}return null}}}const Gd=new vx;class Pi{constructor(e){this.manager=e!==void 0?e:Gd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ga={};class fQ extends Error{constructor(e,t){super(e),this.response=t}}class ui extends Pi{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=wf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ga[e]!==void 0){Ga[e].push({onLoad:t,onProgress:r,onError:i});return}Ga[e]=[],Ga[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Ga[e],f=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=d?parseInt(d):0,g=m!==0;let v=0;const y=new ReadableStream({start(_){x();function x(){f.read().then(({done:w,value:S})=>{if(w)_.close();else{v+=S.byteLength;const T=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let E=0,R=c.length;E<R;E++){const b=c[E];b.onProgress&&b.onProgress(T)}_.enqueue(S),x()}})}}});return new Response(y)}else throw new fQ(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(d);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{wf.add(e,u);const c=Ga[e];delete Ga[e];for(let f=0,d=c.length;f<d;f++){const m=c[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=Ga[e];if(c===void 0)throw this.manager.itemError(e),u;delete Ga[e];for(let f=0,d=c.length;f<d;f++){const m=c[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class dQ extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ui(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=bh.parse(e[r]);t.push(i)}return t}}class hQ extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new _C,l=new ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(d){const m=s.parse(d,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Kt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)c(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+v]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Kt),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class kg extends Pi{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Bg("img");function l(){c(),wf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Az extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=new s0,o=new kg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class FC extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new rf,a=new ui(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Nn,o.wrapT=u.wrapT!==void 0?u.wrapT:Nn,o.magFilter=u.magFilter!==void 0?u.magFilter:Kt,o.minFilter=u.minFilter!==void 0?u.minFilter:Kt,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Vo),u.mipmapCount===1&&(o.minFilter=Kt),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class Mz extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=new fn,o=new kg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Ku extends dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Ez extends Ku{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DS=new Et,iI=new $,sI=new $;class kC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new Et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ox,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;iI.setFromMatrixPosition(e.matrixWorld),t.position.copy(iI),sI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sI),t.updateMatrixWorld(),DS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DS),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(DS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pQ extends kC{constructor(){super(new Un(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Rg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class OC extends Ku{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new pQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const oI=new Et,Jp=new $,LS=new $;class mQ extends kC{constructor(){super(new Un(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Jp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Jp),LS.copy(r.position),LS.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(LS),r.updateMatrixWorld(),i.makeTranslation(-Jp.x,-Jp.y,-Jp.z),oI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oI)}}class UC extends Ku{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new mQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gQ extends kC{constructor(){super(new po(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class NC extends Ku{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.shadow=new gQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Cz extends Ku{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Tz extends Ku{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Pz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class yx extends Ku{constructor(e=new Pz,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class _x extends Pi{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=_x.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new st().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new st().setHex(o.value);break;case"v2":i.uniforms[s].value=new De().fromArray(o.value);break;case"v3":i.uniforms[s].value=new $().fromArray(o.value);break;case"v4":i.uniforms[s].value=new qt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new zr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Et().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:gz,SpriteMaterial:pC,RawShaderMaterial:vz,ShaderMaterial:pr,PointsMaterial:u0,MeshPhysicalMaterial:ks,MeshStandardMaterial:Kh,MeshPhongMaterial:CC,MeshToonMaterial:TC,MeshNormalMaterial:PC,MeshLambertMaterial:RC,MeshDepthMaterial:lx,MeshDistanceMaterial:ux,MeshBasicMaterial:bi,MeshMatcapMaterial:yz,LineDashedMaterial:_z,LineBasicMaterial:Ti,Material:Xn};return new t[e]}}class Su{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zC extends jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Rz extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,g){if(t[g]!==void 0)return t[g];const y=m.interleavedBuffers[g],_=s(m,y.buffer),x=Ud(y.type,_),w=new a0(x,y.stride);return w.uuid=y.uuid,t[g]=w,w}function s(m,g){if(r[g]!==void 0)return r[g];const y=m.arrayBuffers[g],_=new Uint32Array(y).buffer;return r[g]=_,_}const o=e.isInstancedBufferGeometry?new zC:new jt,a=e.data.index;if(a!==void 0){const m=Ud(a.type,a.array);o.setIndex(new sn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const y=i(e.data,g.data);v=new Lu(y,g.itemSize,g.offset,g.normalized)}else{const y=Ud(g.type,g.array),_=g.isInstancedBufferAttribute?Fu:sn;v=new _(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),o.setAttribute(m,v)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],v=[];for(let y=0,_=g.length;y<_;y++){const x=g[y];let w;if(x.isInterleavedBufferAttribute){const S=i(e.data,x.data);w=new Lu(S,x.itemSize,x.offset,x.normalized)}else{const S=Ud(x.type,x.array);w=new sn(S,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),v.push(w)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,g=f.length;m!==g;++m){const v=f[m];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new $;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new El(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class vQ extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Su.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ui(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Su.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ui(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new wu().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new l0().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Rz;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in rI?a=rI[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new _x;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=bh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Ud(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new vx(t);s=new kg(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],d=f.url;if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const y=d[g],_=a(y);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new rf(_.data,_.width,_.height)))}i[f.uuid]=new $c(m)}else{const m=a(f.url);i[f.uuid]=new $c(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Ud(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new kg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,d=u.length;f<d;f++){const m=u[f],g=await s(m);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new rf(g.data,g.width,g.height)))}r[l.uuid]=new $c(c)}else{const c=await s(l.url);r[l.uuid]=new $c(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new s0,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new rf:c=new fn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,yQ)),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],aI),c.wrapT=r(a.wrap[1],aI)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,lI)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,lI)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const y=d[g];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,f;switch(e.type){case"Scene":o=new vf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new st(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new dx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new fx(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Un(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new po(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Cz(e.color,e.intensity);break;case"DirectionalLight":o=new NC(e.color,e.intensity);break;case"PointLight":o=new UC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Tz(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new OC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ez(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new yx().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new mC(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new Ln(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const d=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new gC(c,f,d),o.instanceMatrix=new Fu(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Fu(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new oz;break;case"Line":o=new yl(a(e.geometry),l(e.material));break;case"LineLoop":o=new vC(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ko(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new yC(a(e.geometry),l(e.material));break;case"Sprite":o=new sz(l(e.material));break;case"Group":o=new ko;break;case"Bone":o=new hx;break;default:o=new dn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const g=d[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const g=d[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const yQ={UVMapping:Ru,CubeReflectionMapping:gl,CubeRefractionMapping:Bu,EquirectangularReflectionMapping:_h,EquirectangularRefractionMapping:Eg,CubeUVReflectionMapping:zh},aI={RepeatWrapping:Iu,ClampToEdgeWrapping:Nn,MirroredRepeatWrapping:xh},lI={NearestFilter:bn,NearestMipmapNearestFilter:Cg,NearestMipmapLinearFilter:nh,LinearFilter:Kt,LinearMipmapNearestFilter:nx,LinearMipmapLinearFilter:Vo};class Bz extends Pi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){wf.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let xy;class GC{static getContext(){return xy===void 0&&(xy=new(window.AudioContext||window.webkitAudioContext)),xy}static setContext(e){xy=e}}class _Q extends Pi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ui(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);GC.getContext().decodeAudioData(l,function(c){t(c)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class xQ extends yx{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new st().set(e),s=new st().set(t),o=new $(i.r,i.g,i.b),a=new $(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class wQ extends yx{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new st().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const uI=new Et,cI=new Et,gc=new Et;class SQ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Un,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Un,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,gc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(tf*t.fov*.5)/t.zoom;let a,l;cI.elements[12]=-i,uI.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,gc.elements[0]=2*t.near/(l-a),gc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gc),a=-o*t.aspect-s,l=o*t.aspect-s,gc.elements[0]=2*t.near/(l-a),gc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uI)}}class HC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fI(){return(typeof performance>"u"?Date:performance).now()}const vc=new $,dI=new Hn,bQ=new $,yc=new $;class AQ extends dn{constructor(){super(),this.type="AudioListener",this.context=GC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vc,dI,bQ),yc.set(0,0,-1).applyQuaternion(dI),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vc.x,i),t.positionY.linearRampToValueAtTime(vc.y,i),t.positionZ.linearRampToValueAtTime(vc.z,i),t.forwardX.linearRampToValueAtTime(yc.x,i),t.forwardY.linearRampToValueAtTime(yc.y,i),t.forwardZ.linearRampToValueAtTime(yc.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(vc.x,vc.y,vc.z),t.setOrientation(yc.x,yc.y,yc.z,r.x,r.y,r.z)}}class Iz extends dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const _c=new $,hI=new Hn,MQ=new $,xc=new $;class EQ extends Iz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_c,hI,MQ),xc.set(0,0,1).applyQuaternion(hI);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_c.x,r),t.positionY.linearRampToValueAtTime(_c.y,r),t.positionZ.linearRampToValueAtTime(_c.z,r),t.orientationX.linearRampToValueAtTime(xc.x,r),t.orientationY.linearRampToValueAtTime(xc.y,r),t.orientationZ.linearRampToValueAtTime(xc.z,r)}else t.setPosition(_c.x,_c.y,_c.z),t.setOrientation(xc.x,xc.y,xc.z)}}class CQ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class Dz{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Hn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Hn.multiplyQuaternionsFlat(e,o,e,t,e,r),Hn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const VC="\\[\\]\\.:\\/",TQ=new RegExp("["+VC+"]","g"),WC="[^"+VC+"]",PQ="[^"+VC.replace("\\.","")+"]",RQ=/((?:WC+[\/:])*)/.source.replace("WC",WC),BQ=/(WCOD+)?/.source.replace("WCOD",PQ),IQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WC),DQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WC),LQ=new RegExp("^"+RQ+BQ+IQ+DQ+"$"),FQ=["material","materials","bones","map"];class kQ{constructor(e,t,r){const i=r||cn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class cn{constructor(e,t,r){this.path=t,this.parsedPath=r||cn.parseTrackName(t),this.node=cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new cn.Composite(e,t,r):new cn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TQ,"")}static parseTrackName(e){const t=LQ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);FQ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=cn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}cn.Composite=kQ;cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};cn.prototype.GetterByBindingType=[cn.prototype._getValue_direct,cn.prototype._getValue_array,cn.prototype._getValue_arrayElement,cn.prototype._getValue_toArray];cn.prototype.SetterByBindingTypeAndVersioning=[[cn.prototype._setValue_direct,cn.prototype._setValue_direct_setNeedsUpdate,cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_array,cn.prototype._setValue_array_setNeedsUpdate,cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_arrayElement,cn.prototype._setValue_arrayElement_setNeedsUpdate,cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_fromArray,cn.prototype._setValue_fromArray_setNeedsUpdate,cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class OQ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ps(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],m=d.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(d);for(let v=0,y=o;v!==y;++v)s[v].push(new cn(d,r[v],i[v]))}else if(g<u){a=e[g];const v=--u,y=e[v];t[y.uuid]=g,e[g]=y,t[m]=v,e[v]=d;for(let _=0,x=o;_!==x;++_){const w=s[_],S=w[v];let T=w[g];w[g]=S,T===void 0&&(T=new cn(d,r[_],i[_])),w[v]=T}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,d=e[f];t[d.uuid]=c,e[c]=d,t[u]=f,e[f]=l;for(let m=0,g=i;m!==g;++m){const v=r[m],y=v[f],_=v[c];v[c]=y,v[f]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const d=--s,m=e[d],g=--o,v=e[g];t[m.uuid]=f,e[f]=m,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,_=i;y!==_;++y){const x=r[y],w=x[d],S=x[g];x[f]=w,x[d]=S,x.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let g=0,v=i;g!==v;++g){const y=r[g];y[f]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let d=c,m=l.length;d!==m;++d){const g=l[d];f[d]=new cn(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class UQ{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Wc,endingEnd:Wc};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case nC:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case rx:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===GN;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===NN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=jc,i.endingEnd=jc):(e?i.endingStart=this.zeroSlopeAtStart?jc:Wc:i.endingStart=Tg,t?i.endingEnd=this.zeroSlopeAtEnd?jc:Wc:i.endingEnd=Tg)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const NQ=new Float32Array(1);class zQ extends xo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const d=i[f],m=d.name;let g=c[m];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;g=new Dz(cn.create(r,m,v),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new DC(new Float32Array(2),new Float32Array(2),1,NQ),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?bh.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=rx),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new UQ(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?bh.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pt{constructor(e){this.value=e}clone(){return new pt(this.value.clone===void 0?this.value:this.value.clone())}}let GQ=0;class HQ extends xo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:GQ++}),this.name="",this.usage=Pg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class VQ extends a0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WQ{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class jC{constructor(e,t,r=0,i=1/0){this.ray=new Gh(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new nf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return MA(e,this,r,t),r.sort(pI),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)MA(e[i],this,r,t);return r.sort(pI),r}}function pI(n,e){return n.distance-e.distance}function MA(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)MA(i[s],e,t,!0)}}class i_{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class jQ{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const mI=new De;class $Q{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=mI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mI).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gI=new $,wy=new $;class XQ{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){gI.subVectors(e,this.start),wy.subVectors(this.end,this.start);const r=wy.dot(wy);let s=wy.dot(gI)/r;return t&&(s=Sr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vI=new $;class KQ extends dn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new jt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new wt(i,3));const s=new Ti({fog:!1,toneMapped:!1});this.cone=new Ko(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),vI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jl=new $,Sy=new Et,FS=new Et;class JQ extends Ko{constructor(e){const t=Lz(e),r=new jt,i=[],s=[],o=new st(0,0,1),a=new st(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new wt(i,3)),r.setAttribute("color",new wt(s,3));const l=new Ti({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");FS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Sy.multiplyMatrices(FS,a.matrixWorld),jl.setFromMatrixPosition(Sy),i.setXYZ(o,jl.x,jl.y,jl.z),Sy.multiplyMatrices(FS,a.parent.matrixWorld),jl.setFromMatrixPosition(Sy),i.setXYZ(o+1,jl.x,jl.y,jl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lz(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Lz(n.children[t]));return e}class YQ extends Ln{constructor(e,t,r){const i=new Xh(t,4,2),s=new bi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ZQ=new $,yI=new st,_I=new st;class QQ extends dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new $h(t);i.rotateY(Math.PI*.5),this.material=new bi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new sn(o,3)),this.add(new Ln(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");yI.copy(this.light.color),_I.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?yI:_I;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ZQ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class qQ extends Ko{constructor(e=10,t=10,r=4473924,i=8947848){r=new st(r),i=new st(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let d=0,m=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=d===s?r:i;v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3,v.toArray(u,m),m+=3}const c=new jt;c.setAttribute("position",new wt(l,3)),c.setAttribute("color",new wt(u,3));const f=new Ti({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class eq extends Ko{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new st(s),o=new st(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),m=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,g);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const d=f&1?s:o,m=e-e/r*f;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m;a.push(y,0,_),l.push(d.r,d.g,d.b),v=(g+1)/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m,a.push(y,0,_),l.push(d.r,d.g,d.b)}}const u=new jt;u.setAttribute("position",new wt(a,3)),u.setAttribute("color",new wt(l,3));const c=new Ti({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xI=new $,by=new $,wI=new $;class tq extends dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new jt;i.setAttribute("position",new wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ti({fog:!1,toneMapped:!1});this.lightPlane=new yl(i,s),this.add(this.lightPlane),i=new jt,i.setAttribute("position",new wt([0,0,0,0,0,1],3)),this.targetLine=new yl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xI.setFromMatrixPosition(this.light.matrixWorld),by.setFromMatrixPosition(this.light.target.matrixWorld),wI.subVectors(by,xI),this.lightPlane.lookAt(by),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(by),this.targetLine.scale.z=wI.length()}}const Ay=new $,cr=new Hh;class nq extends Ko{constructor(e){const t=new jt,r=new Ti({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new wt(i,3)),t.setAttribute("color",new wt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new st(16755200),c=new st(16711680),f=new st(43775),d=new st(16777215),m=new st(3355443);this.setColors(u,c,f,d,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;cr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_r("c",t,e,cr,0,0,-1),_r("t",t,e,cr,0,0,1),_r("n1",t,e,cr,-r,-i,-1),_r("n2",t,e,cr,r,-i,-1),_r("n3",t,e,cr,-r,i,-1),_r("n4",t,e,cr,r,i,-1),_r("f1",t,e,cr,-r,-i,1),_r("f2",t,e,cr,r,-i,1),_r("f3",t,e,cr,-r,i,1),_r("f4",t,e,cr,r,i,1),_r("u1",t,e,cr,r*.7,i*1.1,-1),_r("u2",t,e,cr,-r*.7,i*1.1,-1),_r("u3",t,e,cr,0,i*2,-1),_r("cf1",t,e,cr,-r,0,1),_r("cf2",t,e,cr,r,0,1),_r("cf3",t,e,cr,0,-i,1),_r("cf4",t,e,cr,0,i,1),_r("cn1",t,e,cr,-r,0,-1),_r("cn2",t,e,cr,r,0,-1),_r("cn3",t,e,cr,0,-i,-1),_r("cn4",t,e,cr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _r(n,e,t,r,i,s,o){Ay.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],Ay.x,Ay.y,Ay.z)}}const My=new Ma;class rq extends Ko{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new jt;s.setIndex(new sn(r,1)),s.setAttribute("position",new sn(i,3)),super(s,new Ti({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&My.setFromObject(this.object),My.isEmpty())return;const t=My.min,r=My.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iq extends Ko{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new jt;s.setIndex(new sn(r,1)),s.setAttribute("position",new wt(i,3)),super(s,new Ti({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class sq extends yl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new jt;o.setAttribute("position",new wt(s,3)),o.computeBoundingSphere(),super(o,new Ti({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new jt;l.setAttribute("position",new wt(a,3)),l.computeBoundingSphere(),this.add(new Ln(l,new bi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const SI=new $;let Ey,kS;class oq extends dn{constructor(e=new $(0,0,1),t=new $(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ey===void 0&&(Ey=new jt,Ey.setAttribute("position",new wt([0,0,0,0,1,0],3)),kS=new Cf(0,.5,1,5,1),kS.translate(0,-.5,0)),this.position.copy(t),this.line=new yl(Ey,new Ti({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ln(kS,new bi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{SI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(SI,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aq extends Ko{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new jt;i.setAttribute("position",new wt(t,3)),i.setAttribute("color",new wt(r,3));const s=new Ti({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new st,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lq{constructor(){this.type="ShapePath",this.color=new st,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ig,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const x=[];for(let w=0,S=_.length;w<S;w++){const T=_[w],E=new wu;E.curves=T.curves,x.push(E)}return x}function r(_,x){const w=x.length;let S=!1;for(let T=w-1,E=0;E<w;T=E++){let R=x[T],b=x[E],M=b.x-R.x,C=b.y-R.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(R=x[E],M=-M,b=x[T],C=-C),_.y<R.y||_.y>b.y)continue;if(_.y===R.y){if(_.x===R.x)return!0}else{const L=C*(_.x-R.x)-M*(_.y-R.y);if(L===0)return!0;if(L<0)continue;S=!S}}else{if(_.y!==R.y)continue;if(b.x<=_.x&&_.x<=R.x||R.x<=_.x&&_.x<=b.x)return!0}}return S}const i=ga.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new wu,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],d=[];let m=[],g=0,v;d[g]=void 0,m[g]=[];for(let _=0,x=s.length;_<x;_++)a=s[_],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!c&&d[g]&&g++,d[g]={s:new wu,p:v},d[g].s.curves=a.curves,c&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!d[0])return t(s);if(d.length>1){let _=!1,x=0;for(let w=0,S=d.length;w<S;w++)f[w]=[];for(let w=0,S=d.length;w<S;w++){const T=m[w];for(let E=0;E<T.length;E++){const R=T[E];let b=!0;for(let M=0;M<d.length;M++)r(R.p,d[M].p)&&(w!==M&&x++,b?(b=!1,f[M].push(R)):_=!0);b&&f[w].push(R)}}x>0&&_===!1&&(m=f)}let y;for(let _=0,x=d.length;_<x;_++){l=d[_].s,u.push(l),y=m[_];for(let w=0,S=y.length;w<S;w++)l.holes.push(y[w].h)}return u}}const Za=uq();function uq(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function cq(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Sr(n,-65504,65504),Za.floatView[0]=n;const e=Za.uint32View[0],t=e>>23&511;return Za.baseTable[t]+((e&8388607)>>Za.shiftTable[t])}function fq(n){const e=n>>10;return Za.uint32View[0]=Za.mantissaTable[Za.offsetTable[e]+(n&1023)]+Za.exponentTable[e],Za.floatView[0]}const Kc={toHalfFloat:cq,fromHalfFloat:fq};class dq extends Xu{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class hq extends c0{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class pq extends f0{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class mq extends d0{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class gq extends Cf{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class vq extends h0{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class yq extends p0{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class _q extends jh{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class xq extends Wh{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class wq extends $h{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Sq extends Xo{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class bq extends Cl{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class Aq extends m0{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class Mq extends g0{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class Eq extends Xh{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class Cq extends v0{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Tq extends y0{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class Pq extends _0{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class Rq extends x0{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ml}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ml);const EA=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:YE,AddEquation:Uc,AddOperation:bN,AdditiveAnimationBlendMode:nC,AdditiveBlending:e_,AlphaFormat:RN,AlwaysDepth:gN,AlwaysStencilFunc:WN,AmbientLight:Cz,AmbientLightProbe:wQ,AnimationClip:bh,AnimationLoader:dQ,AnimationMixer:zQ,AnimationObjectGroup:OQ,AnimationUtils:lQ,ArcCurve:az,ArrayCamera:nz,ArrowHelper:oq,Audio:Iz,AudioAnalyser:CQ,AudioContext:GC,AudioListener:AQ,AudioLoader:_Q,AxesHelper:aq,BackSide:Pr,BasicDepthPacking:ju,BasicShadowMap:nN,Bone:hx,BooleanKeyframeTrack:Tf,Box2:$Q,Box3:Ma,Box3Helper:iq,BoxBufferGeometry:dq,BoxGeometry:Xu,BoxHelper:rq,BufferAttribute:sn,BufferGeometry:jt,BufferGeometryLoader:Rz,ByteType:ZE,Cache:wf,Camera:Hh,CameraHelper:nq,CanvasTexture:IZ,CapsuleBufferGeometry:hq,CapsuleGeometry:c0,CatmullRomCurve3:wC,CineonToneMapping:EN,CircleBufferGeometry:pq,CircleGeometry:f0,ClampToEdgeWrapping:Nn,Clock:HC,Color:st,ColorKeyframeTrack:LC,ColorManagement:xi,CompressedArrayTexture:BZ,CompressedTexture:_C,CompressedTextureLoader:hQ,ConeBufferGeometry:mq,ConeGeometry:d0,CubeCamera:dC,CubeReflectionMapping:gl,CubeRefractionMapping:Bu,CubeTexture:s0,CubeTextureLoader:Az,CubeUVReflectionMapping:zh,CubicBezierCurve:SC,CubicBezierCurve3:lz,CubicInterpolant:wz,CullFaceBack:H2,CullFaceFront:tN,CullFaceFrontBack:Dj,CullFaceNone:eN,Curve:Jo,CurvePath:cz,CustomBlending:rN,CustomToneMapping:CN,CylinderBufferGeometry:gq,CylinderGeometry:Cf,Cylindrical:jQ,Data3DTexture:lC,DataArrayTexture:ix,DataTexture:rf,DataTextureLoader:FC,DataUtils:Kc,DecrementStencilOp:Hj,DecrementWrapStencilOp:Wj,DefaultLoadingManager:Gd,DepthFormat:xu,DepthStencilFormat:Du,DepthTexture:cx,DirectionalLight:NC,DirectionalLightHelper:tq,DiscreteInterpolant:Sz,DisplayP3ColorSpace:sC,DodecahedronBufferGeometry:vq,DodecahedronGeometry:h0,DoubleSide:qr,DstAlphaFactor:cN,DstColorFactor:dN,DynamicCopyUsage:i$,DynamicDrawUsage:ol,DynamicReadUsage:t$,EdgesGeometry:fz,EllipseCurve:px,EqualDepth:yN,EqualStencilFunc:Kj,EquirectangularReflectionMapping:_h,EquirectangularRefractionMapping:Eg,Euler:Fr,EventDispatcher:xo,ExtrudeBufferGeometry:yq,ExtrudeGeometry:p0,FileLoader:ui,Float16BufferAttribute:W$,Float32BufferAttribute:wt,Float64BufferAttribute:j$,FloatType:Rr,Fog:dx,FogExp2:fx,FramebufferTexture:RZ,FrontSide:Ho,Frustum:ox,GLBufferAttribute:WQ,GLSL1:o$,GLSL3:vA,GreaterDepth:xN,GreaterEqualDepth:_N,GreaterEqualStencilFunc:Qj,GreaterStencilFunc:Yj,GridHelper:qQ,Group:ko,HalfFloatType:Br,HemisphereLight:Ez,HemisphereLightHelper:QQ,HemisphereLightProbe:xQ,IcosahedronBufferGeometry:_q,IcosahedronGeometry:jh,ImageBitmapLoader:Bz,ImageLoader:kg,ImageUtils:aC,IncrementStencilOp:Gj,IncrementWrapStencilOp:Vj,InstancedBufferAttribute:Fu,InstancedBufferGeometry:zC,InstancedInterleavedBuffer:VQ,InstancedMesh:gC,Int16BufferAttribute:H$,Int32BufferAttribute:V$,Int8BufferAttribute:N$,IntType:eC,InterleavedBuffer:a0,InterleavedBufferAttribute:Lu,Interpolant:Jh,InterpolateDiscrete:wh,InterpolateLinear:gf,InterpolateSmooth:v1,InvertStencilOp:jj,KeepStencilOp:y1,KeyframeTrack:Yo,LOD:oz,LatheBufferGeometry:xq,LatheGeometry:Wh,Layers:nf,LessDepth:vN,LessEqualDepth:t_,LessEqualStencilFunc:Jj,LessStencilFunc:Xj,Light:Ku,LightProbe:yx,Line:yl,Line3:XQ,LineBasicMaterial:Ti,LineCurve:mx,LineCurve3:uz,LineDashedMaterial:_z,LineLoop:vC,LineSegments:Ko,LinearEncoding:Wo,LinearFilter:Kt,LinearInterpolant:DC,LinearMipMapLinearFilter:X2,LinearMipMapNearestFilter:Oj,LinearMipmapLinearFilter:Vo,LinearMipmapNearestFilter:nx,LinearSRGBColorSpace:vl,LinearToneMapping:AN,Loader:Pi,LoaderUtils:Su,LoadingManager:vx,LoopOnce:NN,LoopPingPong:GN,LoopRepeat:zN,LuminanceAlphaFormat:IN,LuminanceFormat:BN,MOUSE:Ic,Material:Xn,MaterialLoader:_x,MathUtils:ao,Matrix3:zr,Matrix4:Et,MaxEquation:$2,Mesh:Ln,MeshBasicMaterial:bi,MeshDepthMaterial:lx,MeshDistanceMaterial:ux,MeshLambertMaterial:RC,MeshMatcapMaterial:yz,MeshNormalMaterial:PC,MeshPhongMaterial:CC,MeshPhysicalMaterial:ks,MeshStandardMaterial:Kh,MeshToonMaterial:TC,MinEquation:j2,MirroredRepeatWrapping:xh,MixOperation:SN,MultiplyBlending:W2,MultiplyOperation:i0,NearestFilter:bn,NearestMipMapLinearFilter:kj,NearestMipMapNearestFilter:Fj,NearestMipmapLinearFilter:nh,NearestMipmapNearestFilter:Cg,NeverDepth:mN,NeverStencilFunc:$j,NoBlending:ti,NoColorSpace:Uj,NoToneMapping:No,NormalAnimationBlendMode:rx,NormalBlending:ef,NotEqualDepth:wN,NotEqualStencilFunc:Zj,NumberKeyframeTrack:_f,Object3D:dn,ObjectLoader:vQ,ObjectSpaceNormalMap:VN,OctahedronBufferGeometry:wq,OctahedronGeometry:$h,OneFactor:aN,OneMinusDstAlphaFactor:fN,OneMinusDstColorFactor:hN,OneMinusSrcAlphaFactor:JE,OneMinusSrcColorFactor:uN,OrthographicCamera:po,PCFShadowMap:tx,PCFSoftShadowMap:zm,PMREMGenerator:_A,Path:Ig,PerspectiveCamera:Un,Plane:Ja,PlaneBufferGeometry:Sq,PlaneGeometry:Xo,PlaneHelper:sq,PointLight:UC,PointLightHelper:YQ,Points:yC,PointsMaterial:u0,PolarGridHelper:eq,PolyhedronBufferGeometry:bq,PolyhedronGeometry:Cl,PositionalAudio:EQ,PropertyBinding:cn,PropertyMixer:Dz,QuadraticBezierCurve:bC,QuadraticBezierCurve3:AC,Quaternion:Hn,QuaternionKeyframeTrack:ku,QuaternionLinearInterpolant:bz,RED_GREEN_RGTC2_Format:mA,RED_RGTC1_Format:UN,REVISION:Ml,RGBADepthPacking:iC,RGBAFormat:Ur,RGBAIntegerFormat:kN,RGBA_ASTC_10x10_Format:fA,RGBA_ASTC_10x5_Format:lA,RGBA_ASTC_10x6_Format:uA,RGBA_ASTC_10x8_Format:cA,RGBA_ASTC_12x10_Format:dA,RGBA_ASTC_12x12_Format:hA,RGBA_ASTC_4x4_Format:eA,RGBA_ASTC_5x4_Format:tA,RGBA_ASTC_5x5_Format:nA,RGBA_ASTC_6x5_Format:rA,RGBA_ASTC_6x6_Format:iA,RGBA_ASTC_8x5_Format:sA,RGBA_ASTC_8x6_Format:oA,RGBA_ASTC_8x8_Format:aA,RGBA_BPTC_Format:g1,RGBA_ETC2_EAC_Format:q2,RGBA_PVRTC_2BPPV1_Format:Z2,RGBA_PVRTC_4BPPV1_Format:Y2,RGBA_S3TC_DXT1_Format:h1,RGBA_S3TC_DXT3_Format:p1,RGBA_S3TC_DXT5_Format:m1,RGB_ETC1_Format:ON,RGB_ETC2_Format:Q2,RGB_PVRTC_2BPPV1_Format:J2,RGB_PVRTC_4BPPV1_Format:K2,RGB_S3TC_DXT1_Format:d1,RGFormat:LN,RGIntegerFormat:FN,RawShaderMaterial:vz,Ray:Gh,Raycaster:jC,RectAreaLight:Tz,RedFormat:tC,RedIntegerFormat:DN,ReinhardToneMapping:MN,RepeatWrapping:Iu,ReplaceStencilOp:zj,ReverseSubtractEquation:sN,RingBufferGeometry:Aq,RingGeometry:m0,SIGNED_RED_GREEN_RGTC2_Format:gA,SIGNED_RED_RGTC1_Format:pA,SRGBColorSpace:eo,Scene:vf,ShaderChunk:Xt,ShaderLib:Fo,ShaderMaterial:pr,ShadowMaterial:gz,Shape:wu,ShapeBufferGeometry:Mq,ShapeGeometry:g0,ShapePath:lq,ShapeUtils:ga,ShortType:QE,Skeleton:l0,SkeletonHelper:JQ,SkinnedMesh:mC,Source:$c,Sphere:El,SphereBufferGeometry:Eq,SphereGeometry:Xh,Spherical:i_,SphericalHarmonics3:Pz,SplineCurve:MC,SpotLight:OC,SpotLightHelper:KQ,Sprite:sz,SpriteMaterial:pC,SrcAlphaFactor:KE,SrcAlphaSaturateFactor:pN,SrcColorFactor:lN,StaticCopyUsage:r$,StaticDrawUsage:Pg,StaticReadUsage:e$,StereoCamera:SQ,StreamCopyUsage:s$,StreamDrawUsage:qj,StreamReadUsage:n$,StringKeyframeTrack:Pf,SubtractEquation:iN,SubtractiveBlending:V2,TOUCH:Dc,TangentSpaceNormalMap:$u,TetrahedronBufferGeometry:Cq,TetrahedronGeometry:v0,Texture:fn,TextureLoader:Mz,TorusBufferGeometry:Tq,TorusGeometry:y0,TorusKnotBufferGeometry:Pq,TorusKnotGeometry:_0,Triangle:io,TriangleFanDrawMode:n_,TriangleStripDrawMode:rC,TrianglesDrawMode:HN,TubeBufferGeometry:Rq,TubeGeometry:x0,TwoPassDoubleSide:Lj,UVMapping:Ru,Uint16BufferAttribute:uC,Uint32BufferAttribute:cC,Uint8BufferAttribute:z$,Uint8ClampedBufferAttribute:G$,Uniform:pt,UniformsGroup:HQ,UniformsLib:ct,UniformsUtils:fC,UnsignedByteType:Hr,UnsignedInt248Type:_u,UnsignedIntType:da,UnsignedShort4444Type:TN,UnsignedShort5551Type:PN,UnsignedShortType:qE,VSMShadowMap:Vc,Vector2:De,Vector3:$,Vector4:qt,VectorKeyframeTrack:xf,VideoTexture:PZ,WebGL1Renderer:rz,WebGL3DRenderTarget:P$,WebGLArrayRenderTarget:T$,WebGLCubeRenderTarget:sx,WebGLMultipleRenderTargets:R$,WebGLRenderTarget:Tn,WebGLRenderer:o0,WebGLUtils:tz,WireframeGeometry:mz,WrapAroundEnding:Tg,ZeroCurvatureEnding:Wc,ZeroFactor:oN,ZeroSlopeEnding:jc,ZeroStencilOp:Nj,_SRGBAFormat:r_,sRGBEncoding:Nt},Symbol.toStringTag,{value:"Module"}));var Fz={exports:{}},Rf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Rf.ConcurrentRoot=1;Rf.ContinuousEventPriority=4;Rf.DefaultEventPriority=16;Rf.DiscreteEventPriority=1;Rf.IdleEventPriority=536870912;Rf.LegacyRoot=0;Fz.exports=Rf;var Hd=Fz.exports;function Bq(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),t.forEach(m=>m(e,d))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function m(){const g=c(e);if(!f(d,g)){const v=d;u(d=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const Iq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),bI=Iq?B.useEffect:B.useLayoutEffect;function $C(n){const e=typeof n=="function"?Bq(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=B.useReducer(y=>y+1,0),o=e.getState(),a=B.useRef(o),l=B.useRef(r),u=B.useRef(i),c=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=r(o));let d,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(d=r(o),m=!i(f.current,d)),bI(()=>{m&&(f.current=d),a.current=o,l.current=r,u.current=i,c.current=!1});const g=B.useRef(o);bI(()=>{const y=()=>{try{const x=e.getState(),w=l.current(x);u.current(f.current,w)||(a.current=x,f.current=w,s())}catch{c.current=!0,s()}},_=e.subscribe(y);return e.getState()!==g.current&&y(),_},[]);const v=m?d:f.current;return B.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var kz={exports:{}},Oz={exports:{}},Uz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,K){var j=V.length;V.push(K);e:for(;0<j;){var J=j-1>>>1,W=V[J];if(0<i(W,K))V[J]=K,V[j]=W,j=J;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var K=V[0],j=V.pop();if(j!==K){V[0]=j;e:for(var J=0,W=V.length,ne=W>>>1;J<ne;){var ue=2*(J+1)-1,q=V[ue],pe=ue+1,me=V[pe];if(0>i(q,j))pe<W&&0>i(me,q)?(V[J]=me,V[pe]=j,J=pe):(V[J]=q,V[ue]=j,J=ue);else if(pe<W&&0>i(me,j))V[J]=me,V[pe]=j,J=pe;else break e}}return K}function i(V,K){var j=V.sortIndex-K.sortIndex;return j!==0?j:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=V)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function S(V){if(v=!1,w(V),!g)if(t(l)!==null)g=!0,G(T);else{var K=t(u);K!==null&&te(S,K.startTime-V)}}function T(V,K){g=!1,v&&(v=!1,_(b),b=-1),m=!0;var j=d;try{for(w(K),f=t(l);f!==null&&(!(f.expirationTime>K)||V&&!L());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var W=J(f.expirationTime<=K);K=n.unstable_now(),typeof W=="function"?f.callback=W:f===t(l)&&r(l),w(K)}else r(l);f=t(l)}if(f!==null)var ne=!0;else{var ue=t(u);ue!==null&&te(S,ue.startTime-K),ne=!1}return ne}finally{f=null,d=j,m=!1}}var E=!1,R=null,b=-1,M=5,C=-1;function L(){return!(n.unstable_now()-C<M)}function D(){if(R!==null){var V=n.unstable_now();C=V;var K=!0;try{K=R(!0,V)}finally{K?z():(E=!1,R=null)}}else E=!1}var z;if(typeof x=="function")z=function(){x(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=D,z=function(){H.postMessage(null)}}else z=function(){y(D,0)};function G(V){R=V,E||(E=!0,z())}function te(V,K){b=y(function(){V(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,G(T))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(d){case 1:case 2:case 3:var K=3;break;default:K=d}var j=d;d=K;try{return V()}finally{d=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=d;d=V;try{return K()}finally{d=j}},n.unstable_scheduleCallback=function(V,K,j){var J=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,V={id:c++,callback:K,priorityLevel:V,startTime:j,expirationTime:W,sortIndex:-1},j>J?(V.sortIndex=j,e(u,V),t(l)===null&&V===t(u)&&(v?(_(b),b=-1):v=!0,te(S,j-J))):(V.sortIndex=W,e(l,V),g||m||(g=!0,G(T))),V},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(V){var K=d;return function(){var j=d;d=K;try{return V.apply(this,arguments)}finally{d=j}}}})(Uz);Oz.exports=Uz;var CA=Oz.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dq=function(e){var t={},r=B,i=CA,s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,A=1;A<arguments.length;A++)p+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),T=Symbol.iterator;function E(h){return h===null||typeof h!="object"?null:(h=T&&h[T]||h["@@iterator"],typeof h=="function"?h:null)}function R(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case g:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case v:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case x:return p=h.displayName||null,p!==null?p:R(h.type)||"Memo";case w:p=h._payload,h=h._init;try{return R(h(p))}catch{}}return null}function b(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function M(h){var p=h,A=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(A=p.return),h=p.return;while(h)}return p.tag===3?A:null}function C(h){if(M(h)!==h)throw Error(o(188))}function L(h){var p=h.alternate;if(!p){if(p=M(h),p===null)throw Error(o(188));return p!==h?null:h}for(var A=h,P=p;;){var I=A.return;if(I===null)break;var k=I.alternate;if(k===null){if(P=I.return,P!==null){A=P;continue}break}if(I.child===k.child){for(k=I.child;k;){if(k===A)return C(I),h;if(k===P)return C(I),p;k=k.sibling}throw Error(o(188))}if(A.return!==P.return)A=I,P=k;else{for(var oe=!1,ye=I.child;ye;){if(ye===A){oe=!0,A=I,P=k;break}if(ye===P){oe=!0,P=I,A=k;break}ye=ye.sibling}if(!oe){for(ye=k.child;ye;){if(ye===A){oe=!0,A=k,P=I;break}if(ye===P){oe=!0,P=k,A=I;break}ye=ye.sibling}if(!oe)throw Error(o(189))}}if(A.alternate!==P)throw Error(o(190))}if(A.tag!==3)throw Error(o(188));return A.stateNode.current===A?h:p}function D(h){return h=L(h),h!==null?z(h):null}function z(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=z(h);if(p!==null)return p;h=h.sibling}return null}function F(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=F(h);if(p!==null)return p}h=h.sibling}return null}var H=Array.isArray,G=e.getPublicInstance,te=e.getRootHostContext,V=e.getChildHostContext,K=e.prepareForCommit,j=e.resetAfterCommit,J=e.createInstance,W=e.appendInitialChild,ne=e.finalizeInitialChildren,ue=e.prepareUpdate,q=e.shouldSetTextContent,pe=e.createTextInstance,me=e.scheduleTimeout,se=e.cancelTimeout,N=e.noTimeout,X=e.isPrimaryRenderer,Z=e.supportsMutation,ee=e.supportsPersistence,ie=e.supportsHydration,ge=e.getInstanceFromNode,Ce=e.preparePortalMount,Te=e.getCurrentEventPriority,Ve=e.detachDeletedInstance,Re=e.supportsMicrotasks,ze=e.scheduleMicrotask,je=e.supportsTestSelectors,be=e.findFiberRoot,Q=e.getBoundingRect,O=e.getTextContent,fe=e.isHiddenSubtree,we=e.matchAccessibilityRole,Ne=e.setFocusIfFocusable,Pe=e.setupIntersectionObserver,$e=e.appendChild,Ge=e.appendChildToContainer,Be=e.commitTextUpdate,rt=e.commitMount,et=e.commitUpdate,Ze=e.insertBefore,Xe=e.insertInContainerBefore,We=e.removeChild,ce=e.removeChildFromContainer,Le=e.resetTextContent,Qe=e.hideInstance,de=e.hideTextInstance,ae=e.unhideInstance,ke=e.unhideTextInstance,at=e.clearContainer,it=e.cloneInstance,mt=e.createContainerChildSet,Tt=e.appendChildToContainerChildSet,Pt=e.finalizeContainerChildren,_t=e.replaceContainerChildren,At=e.cloneHiddenInstance,Yt=e.cloneHiddenTextInstance,rn=e.canHydrateInstance,kn=e.canHydrateTextInstance,ri=e.canHydrateSuspenseInstance,jr=e.isSuspenseInstancePending,re=e.isSuspenseInstanceFallback,Ee=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,ve=e.getFirstHydratableChild,Oe=e.getFirstHydratableChildWithinContainer,xt=e.getFirstHydratableChildWithinSuspenseInstance,U=e.hydrateInstance,Y=e.hydrateTextInstance,le=e.hydrateSuspenseInstance,_e=e.getNextHydratableInstanceAfterSuspenseInstance,Ae=e.commitHydratedContainer,Me=e.commitHydratedSuspenseInstance,Je=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,tt=e.shouldDeleteUnhydratedTailInstances,nt=e.didNotMatchHydratedContainerTextInstance,Ye=e.didNotMatchHydratedTextInstance,Se;function Zt(h){if(Se===void 0)try{throw Error()}catch(A){var p=A.stack.trim().match(/\n( *(at )?)/);Se=p&&p[1]||""}return`
`+Se+h}var ut=!1;function dt(h,p){if(!h||ut)return"";ut=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(lt){var P=lt}Reflect.construct(h,[],p)}else{try{p.call()}catch(lt){P=lt}h.call(p.prototype)}else{try{throw Error()}catch(lt){P=lt}h()}}catch(lt){if(lt&&P&&typeof lt.stack=="string"){for(var I=lt.stack.split(`
`),k=P.stack.split(`
`),oe=I.length-1,ye=k.length-1;1<=oe&&0<=ye&&I[oe]!==k[ye];)ye--;for(;1<=oe&&0<=ye;oe--,ye--)if(I[oe]!==k[ye]){if(oe!==1||ye!==1)do if(oe--,ye--,0>ye||I[oe]!==k[ye]){var He=`
`+I[oe].replace(" at new "," at ");return h.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",h.displayName)),He}while(1<=oe&&0<=ye);break}}}finally{ut=!1,Error.prepareStackTrace=A}return(h=h?h.displayName||h.name:"")?Zt(h):""}var Bt=Object.prototype.hasOwnProperty,Ft=[],$t=-1;function Ct(h){return{current:h}}function St(h){0>$t||(h.current=Ft[$t],Ft[$t]=null,$t--)}function kt(h,p){$t++,Ft[$t]=h.current,h.current=p}var Rt={},ln=Ct(Rt),zt=Ct(!1),mn=Rt;function lr(h,p){var A=h.type.contextTypes;if(!A)return Rt;var P=h.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var I={},k;for(k in A)I[k]=p[k];return P&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=I),I}function Vn(h){return h=h.childContextTypes,h!=null}function Wn(){St(zt),St(ln)}function un(h,p,A){if(ln.current!==Rt)throw Error(o(168));kt(ln,p),kt(zt,A)}function Kn(h,p,A){var P=h.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return A;P=P.getChildContext();for(var I in P)if(!(I in p))throw Error(o(108,b(h)||"Unknown",I));return s({},A,P)}function hn(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Rt,mn=ln.current,kt(ln,h),kt(zt,zt.current),!0}function Gt(h,p,A){var P=h.stateNode;if(!P)throw Error(o(169));A?(h=Kn(h,p,mn),P.__reactInternalMemoizedMergedChildContext=h,St(zt),St(ln),kt(ln,h)):St(zt),kt(zt,A)}var Pn=Math.clz32?Math.clz32:ps,Ki=Math.log,mr=Math.LN2;function ps(h){return h>>>=0,h===0?32:31-(Ki(h)/mr|0)|0}var Ea=64,Ca=4194304;function Ta(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Qu(h,p){var A=h.pendingLanes;if(A===0)return 0;var P=0,I=h.suspendedLanes,k=h.pingedLanes,oe=A&268435455;if(oe!==0){var ye=oe&~I;ye!==0?P=Ta(ye):(k&=oe,k!==0&&(P=Ta(k)))}else oe=A&~I,oe!==0?P=Ta(oe):k!==0&&(P=Ta(k));if(P===0)return 0;if(p!==0&&p!==P&&!(p&I)&&(I=P&-P,k=p&-p,I>=k||I===16&&(k&4194240)!==0))return p;if(P&4&&(P|=A&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=P;0<p;)A=31-Pn(p),I=1<<A,P|=h[A],p&=~I;return P}function F0(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sp(h,p){for(var A=h.suspendedLanes,P=h.pingedLanes,I=h.expirationTimes,k=h.pendingLanes;0<k;){var oe=31-Pn(k),ye=1<<oe,He=I[oe];He===-1?(!(ye&A)||ye&P)&&(I[oe]=F0(ye,p)):He<=p&&(h.expiredLanes|=ye),k&=~ye}}function Pa(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function kf(h){for(var p=[],A=0;31>A;A++)p.push(h);return p}function qo(h,p,A){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Pn(p),h[p]=A}function Rl(h,p){var A=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var P=h.eventTimes;for(h=h.expirationTimes;0<A;){var I=31-Pn(A),k=1<<I;p[I]=0,P[I]=-1,h[I]=-1,A&=~k}}function ea(h,p){var A=h.entangledLanes|=p;for(h=h.entanglements;A;){var P=31-Pn(A),I=1<<P;I&p|h[P]&p&&(h[P]|=p),A&=~I}}var en=0;function op(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Ra=i.unstable_scheduleCallback,Of=i.unstable_cancelCallback,ap=i.unstable_shouldYield,k0=i.unstable_requestPaint,Jn=i.unstable_now,qu=i.unstable_ImmediatePriority,O0=i.unstable_UserBlockingPriority,Bi=i.unstable_NormalPriority,lp=i.unstable_IdlePriority,ec=null,ms=null;function up(h){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(ec,h,void 0,(h.current.flags&128)===128)}catch{}}function U0(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var gs=typeof Object.is=="function"?Object.is:U0,Ii=null,ta=!1,Ns=!1;function cp(h){Ii===null?Ii=[h]:Ii.push(h)}function fp(h){ta=!0,cp(h)}function Ji(){if(!Ns&&Ii!==null){Ns=!0;var h=0,p=en;try{var A=Ii;for(en=1;h<A.length;h++){var P=A[h];do P=P(!0);while(P!==null)}Ii=null,ta=!1}catch(I){throw Ii!==null&&(Ii=Ii.slice(h+1)),Ra(qu,Ji),I}finally{en=p,Ns=!1}}return null}var tc=a.ReactCurrentBatchConfig;function nc(h,p){if(gs(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var A=Object.keys(h),P=Object.keys(p);if(A.length!==P.length)return!1;for(P=0;P<A.length;P++){var I=A[P];if(!Bt.call(p,I)||!gs(h[I],p[I]))return!1}return!0}function rc(h){switch(h.tag){case 5:return Zt(h.type);case 16:return Zt("Lazy");case 13:return Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 2:case 15:return h=dt(h.type,!1),h;case 11:return h=dt(h.type.render,!1),h;case 1:return h=dt(h.type,!0),h;default:return""}}function Di(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var A in h)p[A]===void 0&&(p[A]=h[A]);return p}return p}var $r=Ct(null),Uf=null,So=null,Bl=null;function Nf(){Bl=So=Uf=null}function N0(h,p,A){X?(kt($r,p._currentValue),p._currentValue=A):(kt($r,p._currentValue2),p._currentValue2=A)}function Xr(h){var p=$r.current;St($r),X?h._currentValue=p:h._currentValue2=p}function Li(h,p,A){for(;h!==null;){var P=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),h===A)break;h=h.return}}function gr(h,p){Uf=h,Bl=So=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(xs=!0),h.firstContext=null)}function vr(h){var p=X?h._currentValue:h._currentValue2;if(Bl!==h)if(h={context:h,memoizedValue:p,next:null},So===null){if(Uf===null)throw Error(o(308));So=h,Uf.dependencies={lanes:0,firstContext:h}}else So=So.next=h;return p}var vs=null,Il=!1;function Ox(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d3(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ba(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function Dl(h,p){var A=h.updateQueue;A!==null&&(A=A.shared,Ar!==null&&h.mode&1&&!(Qt&2)?(h=A.interleaved,h===null?(p.next=p,vs===null?vs=[A]:vs.push(A)):(p.next=h.next,h.next=p),A.interleaved=p):(h=A.pending,h===null?p.next=p:(p.next=h.next,h.next=p),A.pending=p))}function z0(h,p,A){if(p=p.updateQueue,p!==null&&(p=p.shared,(A&4194240)!==0)){var P=p.lanes;P&=h.pendingLanes,A|=P,p.lanes=A,ea(h,A)}}function h3(h,p){var A=h.updateQueue,P=h.alternate;if(P!==null&&(P=P.updateQueue,A===P)){var I=null,k=null;if(A=A.firstBaseUpdate,A!==null){do{var oe={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};k===null?I=k=oe:k=k.next=oe,A=A.next}while(A!==null);k===null?I=k=p:k=k.next=p}else I=k=p;A={baseState:P.baseState,firstBaseUpdate:I,lastBaseUpdate:k,shared:P.shared,effects:P.effects},h.updateQueue=A;return}h=A.lastBaseUpdate,h===null?A.firstBaseUpdate=p:h.next=p,A.lastBaseUpdate=p}function G0(h,p,A,P){var I=h.updateQueue;Il=!1;var k=I.firstBaseUpdate,oe=I.lastBaseUpdate,ye=I.shared.pending;if(ye!==null){I.shared.pending=null;var He=ye,lt=He.next;He.next=null,oe===null?k=lt:oe.next=lt,oe=He;var vt=h.alternate;vt!==null&&(vt=vt.updateQueue,ye=vt.lastBaseUpdate,ye!==oe&&(ye===null?vt.firstBaseUpdate=lt:ye.next=lt,vt.lastBaseUpdate=He))}if(k!==null){var Ht=I.baseState;oe=0,vt=lt=He=null,ye=k;do{var It=ye.lane,An=ye.eventTime;if((P&It)===It){vt!==null&&(vt=vt.next={eventTime:An,lane:0,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null});e:{var Mt=h,mi=ye;switch(It=p,An=A,mi.tag){case 1:if(Mt=mi.payload,typeof Mt=="function"){Ht=Mt.call(An,Ht,It);break e}Ht=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=mi.payload,It=typeof Mt=="function"?Mt.call(An,Ht,It):Mt,It==null)break e;Ht=s({},Ht,It);break e;case 2:Il=!0}}ye.callback!==null&&ye.lane!==0&&(h.flags|=64,It=I.effects,It===null?I.effects=[ye]:It.push(ye))}else An={eventTime:An,lane:It,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},vt===null?(lt=vt=An,He=Ht):vt=vt.next=An,oe|=It;if(ye=ye.next,ye===null){if(ye=I.shared.pending,ye===null)break;It=ye,ye=It.next,It.next=null,I.lastBaseUpdate=It,I.shared.pending=null}}while(1);if(vt===null&&(He=Ht),I.baseState=He,I.firstBaseUpdate=lt,I.lastBaseUpdate=vt,p=I.shared.interleaved,p!==null){I=p;do oe|=I.lane,I=I.next;while(I!==p)}else k===null&&(I.shared.lanes=0);Kf|=oe,h.lanes=oe,h.memoizedState=Ht}}function p3(h,p,A){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var P=h[p],I=P.callback;if(I!==null){if(P.callback=null,P=A,typeof I!="function")throw Error(o(191,I));I.call(P)}}}var m3=new r.Component().refs;function Ux(h,p,A,P){p=h.memoizedState,A=A(P,p),A=A==null?p:s({},p,A),h.memoizedState=A,h.lanes===0&&(h.updateQueue.baseState=A)}var H0={isMounted:function(h){return(h=h._reactInternals)?M(h)===h:!1},enqueueSetState:function(h,p,A){h=h._reactInternals;var P=ki(),I=kl(h),k=Ba(P,I);k.payload=p,A!=null&&(k.callback=A),Dl(h,k),p=Ws(h,I,P),p!==null&&z0(p,h,I)},enqueueReplaceState:function(h,p,A){h=h._reactInternals;var P=ki(),I=kl(h),k=Ba(P,I);k.tag=1,k.payload=p,A!=null&&(k.callback=A),Dl(h,k),p=Ws(h,I,P),p!==null&&z0(p,h,I)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var A=ki(),P=kl(h),I=Ba(A,P);I.tag=2,p!=null&&(I.callback=p),Dl(h,I),p=Ws(h,P,A),p!==null&&z0(p,h,P)}};function g3(h,p,A,P,I,k,oe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(P,k,oe):p.prototype&&p.prototype.isPureReactComponent?!nc(A,P)||!nc(I,k):!0}function v3(h,p,A){var P=!1,I=Rt,k=p.contextType;return typeof k=="object"&&k!==null?k=vr(k):(I=Vn(p)?mn:ln.current,P=p.contextTypes,k=(P=P!=null)?lr(h,I):Rt),p=new p(A,k),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=H0,h.stateNode=p,p._reactInternals=h,P&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=I,h.__reactInternalMemoizedMaskedChildContext=k),p}function y3(h,p,A,P){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(A,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(A,P),p.state!==h&&H0.enqueueReplaceState(p,p.state,null)}function Nx(h,p,A,P){var I=h.stateNode;I.props=A,I.state=h.memoizedState,I.refs=m3,Ox(h);var k=p.contextType;typeof k=="object"&&k!==null?I.context=vr(k):(k=Vn(p)?mn:ln.current,I.context=lr(h,k)),I.state=h.memoizedState,k=p.getDerivedStateFromProps,typeof k=="function"&&(Ux(h,p,k,A),I.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(p=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),p!==I.state&&H0.enqueueReplaceState(I,I.state,null),G0(h,A,I,P),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308)}var zf=[],Gf=0,V0=null,W0=0,zs=[],Gs=0,ic=null,Ia=1,Da="";function sc(h,p){zf[Gf++]=W0,zf[Gf++]=V0,V0=h,W0=p}function _3(h,p,A){zs[Gs++]=Ia,zs[Gs++]=Da,zs[Gs++]=ic,ic=h;var P=Ia;h=Da;var I=32-Pn(P)-1;P&=~(1<<I),A+=1;var k=32-Pn(p)+I;if(30<k){var oe=I-I%5;k=(P&(1<<oe)-1).toString(32),P>>=oe,I-=oe,Ia=1<<32-Pn(p)+I|A<<I|P,Da=k+h}else Ia=1<<k|A<<I|P,Da=h}function zx(h){h.return!==null&&(sc(h,1),_3(h,1,0))}function Gx(h){for(;h===V0;)V0=zf[--Gf],zf[Gf]=null,W0=zf[--Gf],zf[Gf]=null;for(;h===ic;)ic=zs[--Gs],zs[Gs]=null,Da=zs[--Gs],zs[Gs]=null,Ia=zs[--Gs],zs[Gs]=null}var ys=null,_s=null,jn=!1,dp=!1,bo=null;function x3(h,p){var A=js(5,null,null,0);A.elementType="DELETED",A.stateNode=p,A.return=h,p=h.deletions,p===null?(h.deletions=[A],h.flags|=16):p.push(A)}function w3(h,p){switch(h.tag){case 5:return p=rn(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,ys=h,_s=ve(p),!0):!1;case 6:return p=kn(p,h.pendingProps),p!==null?(h.stateNode=p,ys=h,_s=null,!0):!1;case 13:if(p=ri(p),p!==null){var A=ic!==null?{id:Ia,overflow:Da}:null;return h.memoizedState={dehydrated:p,treeContext:A,retryLane:1073741824},A=js(18,null,null,0),A.stateNode=p,A.return=h,h.child=A,ys=h,_s=null,!0}return!1;default:return!1}}function Hx(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Vx(h){if(jn){var p=_s;if(p){var A=p;if(!w3(h,p)){if(Hx(h))throw Error(o(418));p=Fe(A);var P=ys;p&&w3(h,p)?x3(P,A):(h.flags=h.flags&-4097|2,jn=!1,ys=h)}}else{if(Hx(h))throw Error(o(418));h.flags=h.flags&-4097|2,jn=!1,ys=h}}}function S3(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ys=h}function hp(h){if(!ie||h!==ys)return!1;if(!jn)return S3(h),jn=!0,!1;if(h.tag!==3&&(h.tag!==5||tt(h.type)&&!q(h.type,h.memoizedProps))){var p=_s;if(p){if(Hx(h)){for(h=_s;h;)h=Fe(h);throw Error(o(418))}for(;p;)x3(h,p),p=Fe(p)}}if(S3(h),h.tag===13){if(!ie)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));_s=_e(h)}else _s=ys?Fe(h.stateNode):null;return!0}function Hf(){ie&&(_s=ys=null,dp=jn=!1)}function Wx(h){bo===null?bo=[h]:bo.push(h)}function pp(h,p,A){if(h=A.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(o(309));var P=A.stateNode}if(!P)throw Error(o(147,h));var I=P,k=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===k?p.ref:(p=function(oe){var ye=I.refs;ye===m3&&(ye=I.refs={}),oe===null?delete ye[k]:ye[k]=oe},p._stringRef=k,p)}if(typeof h!="string")throw Error(o(284));if(!A._owner)throw Error(o(290,h))}return h}function j0(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function b3(h){var p=h._init;return p(h._payload)}function A3(h){function p(Ie,xe){if(h){var Ue=Ie.deletions;Ue===null?(Ie.deletions=[xe],Ie.flags|=16):Ue.push(xe)}}function A(Ie,xe){if(!h)return null;for(;xe!==null;)p(Ie,xe),xe=xe.sibling;return null}function P(Ie,xe){for(Ie=new Map;xe!==null;)xe.key!==null?Ie.set(xe.key,xe):Ie.set(xe.index,xe),xe=xe.sibling;return Ie}function I(Ie,xe){return Ie=Ul(Ie,xe),Ie.index=0,Ie.sibling=null,Ie}function k(Ie,xe,Ue){return Ie.index=Ue,h?(Ue=Ie.alternate,Ue!==null?(Ue=Ue.index,Ue<xe?(Ie.flags|=2,xe):Ue):(Ie.flags|=2,xe)):(Ie.flags|=1048576,xe)}function oe(Ie){return h&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ye(Ie,xe,Ue,ht){return xe===null||xe.tag!==6?(xe=Cw(Ue,Ie.mode,ht),xe.return=Ie,xe):(xe=I(xe,Ue),xe.return=Ie,xe)}function He(Ie,xe,Ue,ht){var bt=Ue.type;return bt===c?vt(Ie,xe,Ue.props.children,ht,Ue.key):xe!==null&&(xe.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===w&&b3(bt)===xe.type)?(ht=I(xe,Ue.props),ht.ref=pp(Ie,xe,Ue),ht.return=Ie,ht):(ht=Sv(Ue.type,Ue.key,Ue.props,null,Ie.mode,ht),ht.ref=pp(Ie,xe,Ue),ht.return=Ie,ht)}function lt(Ie,xe,Ue,ht){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ue.containerInfo||xe.stateNode.implementation!==Ue.implementation?(xe=Tw(Ue,Ie.mode,ht),xe.return=Ie,xe):(xe=I(xe,Ue.children||[]),xe.return=Ie,xe)}function vt(Ie,xe,Ue,ht,bt){return xe===null||xe.tag!==7?(xe=dc(Ue,Ie.mode,ht,bt),xe.return=Ie,xe):(xe=I(xe,Ue),xe.return=Ie,xe)}function Ht(Ie,xe,Ue){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=Cw(""+xe,Ie.mode,Ue),xe.return=Ie,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return Ue=Sv(xe.type,xe.key,xe.props,null,Ie.mode,Ue),Ue.ref=pp(Ie,null,xe),Ue.return=Ie,Ue;case u:return xe=Tw(xe,Ie.mode,Ue),xe.return=Ie,xe;case w:var ht=xe._init;return Ht(Ie,ht(xe._payload),Ue)}if(H(xe)||E(xe))return xe=dc(xe,Ie.mode,Ue,null),xe.return=Ie,xe;j0(Ie,xe)}return null}function It(Ie,xe,Ue,ht){var bt=xe!==null?xe.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return bt!==null?null:ye(Ie,xe,""+Ue,ht);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:return Ue.key===bt?He(Ie,xe,Ue,ht):null;case u:return Ue.key===bt?lt(Ie,xe,Ue,ht):null;case w:return bt=Ue._init,It(Ie,xe,bt(Ue._payload),ht)}if(H(Ue)||E(Ue))return bt!==null?null:vt(Ie,xe,Ue,ht,null);j0(Ie,Ue)}return null}function An(Ie,xe,Ue,ht,bt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Ie=Ie.get(Ue)||null,ye(xe,Ie,""+ht,bt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return Ie=Ie.get(ht.key===null?Ue:ht.key)||null,He(xe,Ie,ht,bt);case u:return Ie=Ie.get(ht.key===null?Ue:ht.key)||null,lt(xe,Ie,ht,bt);case w:var Jt=ht._init;return An(Ie,xe,Ue,Jt(ht._payload),bt)}if(H(ht)||E(ht))return Ie=Ie.get(Ue)||null,vt(xe,Ie,ht,bt,null);j0(xe,ht)}return null}function Mt(Ie,xe,Ue,ht){for(var bt=null,Jt=null,Vt=xe,gn=xe=0,Jr=null;Vt!==null&&gn<Ue.length;gn++){Vt.index>gn?(Jr=Vt,Vt=null):Jr=Vt.sibling;var vn=It(Ie,Vt,Ue[gn],ht);if(vn===null){Vt===null&&(Vt=Jr);break}h&&Vt&&vn.alternate===null&&p(Ie,Vt),xe=k(vn,xe,gn),Jt===null?bt=vn:Jt.sibling=vn,Jt=vn,Vt=Jr}if(gn===Ue.length)return A(Ie,Vt),jn&&sc(Ie,gn),bt;if(Vt===null){for(;gn<Ue.length;gn++)Vt=Ht(Ie,Ue[gn],ht),Vt!==null&&(xe=k(Vt,xe,gn),Jt===null?bt=Vt:Jt.sibling=Vt,Jt=Vt);return jn&&sc(Ie,gn),bt}for(Vt=P(Ie,Vt);gn<Ue.length;gn++)Jr=An(Vt,Ie,gn,Ue[gn],ht),Jr!==null&&(h&&Jr.alternate!==null&&Vt.delete(Jr.key===null?gn:Jr.key),xe=k(Jr,xe,gn),Jt===null?bt=Jr:Jt.sibling=Jr,Jt=Jr);return h&&Vt.forEach(function(Nl){return p(Ie,Nl)}),jn&&sc(Ie,gn),bt}function mi(Ie,xe,Ue,ht){var bt=E(Ue);if(typeof bt!="function")throw Error(o(150));if(Ue=bt.call(Ue),Ue==null)throw Error(o(151));for(var Jt=bt=null,Vt=xe,gn=xe=0,Jr=null,vn=Ue.next();Vt!==null&&!vn.done;gn++,vn=Ue.next()){Vt.index>gn?(Jr=Vt,Vt=null):Jr=Vt.sibling;var Nl=It(Ie,Vt,vn.value,ht);if(Nl===null){Vt===null&&(Vt=Jr);break}h&&Vt&&Nl.alternate===null&&p(Ie,Vt),xe=k(Nl,xe,gn),Jt===null?bt=Nl:Jt.sibling=Nl,Jt=Nl,Vt=Jr}if(vn.done)return A(Ie,Vt),jn&&sc(Ie,gn),bt;if(Vt===null){for(;!vn.done;gn++,vn=Ue.next())vn=Ht(Ie,vn.value,ht),vn!==null&&(xe=k(vn,xe,gn),Jt===null?bt=vn:Jt.sibling=vn,Jt=vn);return jn&&sc(Ie,gn),bt}for(Vt=P(Ie,Vt);!vn.done;gn++,vn=Ue.next())vn=An(Vt,Ie,gn,vn.value,ht),vn!==null&&(h&&vn.alternate!==null&&Vt.delete(vn.key===null?gn:vn.key),xe=k(vn,xe,gn),Jt===null?bt=vn:Jt.sibling=vn,Jt=vn);return h&&Vt.forEach(function(A9){return p(Ie,A9)}),jn&&sc(Ie,gn),bt}function $s(Ie,xe,Ue,ht){if(typeof Ue=="object"&&Ue!==null&&Ue.type===c&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:e:{for(var bt=Ue.key,Jt=xe;Jt!==null;){if(Jt.key===bt){if(bt=Ue.type,bt===c){if(Jt.tag===7){A(Ie,Jt.sibling),xe=I(Jt,Ue.props.children),xe.return=Ie,Ie=xe;break e}}else if(Jt.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===w&&b3(bt)===Jt.type){A(Ie,Jt.sibling),xe=I(Jt,Ue.props),xe.ref=pp(Ie,Jt,Ue),xe.return=Ie,Ie=xe;break e}A(Ie,Jt);break}else p(Ie,Jt);Jt=Jt.sibling}Ue.type===c?(xe=dc(Ue.props.children,Ie.mode,ht,Ue.key),xe.return=Ie,Ie=xe):(ht=Sv(Ue.type,Ue.key,Ue.props,null,Ie.mode,ht),ht.ref=pp(Ie,xe,Ue),ht.return=Ie,Ie=ht)}return oe(Ie);case u:e:{for(Jt=Ue.key;xe!==null;){if(xe.key===Jt)if(xe.tag===4&&xe.stateNode.containerInfo===Ue.containerInfo&&xe.stateNode.implementation===Ue.implementation){A(Ie,xe.sibling),xe=I(xe,Ue.children||[]),xe.return=Ie,Ie=xe;break e}else{A(Ie,xe);break}else p(Ie,xe);xe=xe.sibling}xe=Tw(Ue,Ie.mode,ht),xe.return=Ie,Ie=xe}return oe(Ie);case w:return Jt=Ue._init,$s(Ie,xe,Jt(Ue._payload),ht)}if(H(Ue))return Mt(Ie,xe,Ue,ht);if(E(Ue))return mi(Ie,xe,Ue,ht);j0(Ie,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,xe!==null&&xe.tag===6?(A(Ie,xe.sibling),xe=I(xe,Ue),xe.return=Ie,Ie=xe):(A(Ie,xe),xe=Cw(Ue,Ie.mode,ht),xe.return=Ie,Ie=xe),oe(Ie)):A(Ie,xe)}return $s}var Vf=A3(!0),M3=A3(!1),mp={},Hs=Ct(mp),gp=Ct(mp),Wf=Ct(mp);function na(h){if(h===mp)throw Error(o(174));return h}function jx(h,p){kt(Wf,p),kt(gp,h),kt(Hs,mp),h=te(p),St(Hs),kt(Hs,h)}function jf(){St(Hs),St(gp),St(Wf)}function E3(h){var p=na(Wf.current),A=na(Hs.current);p=V(A,h.type,p),A!==p&&(kt(gp,h),kt(Hs,p))}function $x(h){gp.current===h&&(St(Hs),St(gp))}var Yn=Ct(0);function $0(h){for(var p=h;p!==null;){if(p.tag===13){var A=p.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||jr(A)||re(A)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Xx=[];function Kx(){for(var h=0;h<Xx.length;h++){var p=Xx[h];X?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Xx.length=0}var X0=a.ReactCurrentDispatcher,Vs=a.ReactCurrentBatchConfig,$f=0,ur=null,di=null,Kr=null,K0=!1,vp=!1,yp=0,JH=0;function hi(){throw Error(o(321))}function Jx(h,p){if(p===null)return!1;for(var A=0;A<p.length&&A<h.length;A++)if(!gs(h[A],p[A]))return!1;return!0}function Yx(h,p,A,P,I,k){if($f=k,ur=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,X0.current=h===null||h.memoizedState===null?qH:e9,h=A(P,I),vp){k=0;do{if(vp=!1,yp=0,25<=k)throw Error(o(301));k+=1,Kr=di=null,p.updateQueue=null,X0.current=t9,h=A(P,I)}while(vp)}if(X0.current=q0,p=di!==null&&di.next!==null,$f=0,Kr=di=ur=null,K0=!1,p)throw Error(o(300));return h}function Zx(){var h=yp!==0;return yp=0,h}function La(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?ur.memoizedState=Kr=h:Kr=Kr.next=h,Kr}function ra(){if(di===null){var h=ur.alternate;h=h!==null?h.memoizedState:null}else h=di.next;var p=Kr===null?ur.memoizedState:Kr.next;if(p!==null)Kr=p,di=h;else{if(h===null)throw Error(o(310));di=h,h={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Kr===null?ur.memoizedState=Kr=h:Kr=Kr.next=h}return Kr}function oc(h,p){return typeof p=="function"?p(h):p}function J0(h){var p=ra(),A=p.queue;if(A===null)throw Error(o(311));A.lastRenderedReducer=h;var P=di,I=P.baseQueue,k=A.pending;if(k!==null){if(I!==null){var oe=I.next;I.next=k.next,k.next=oe}P.baseQueue=I=k,A.pending=null}if(I!==null){k=I.next,P=P.baseState;var ye=oe=null,He=null,lt=k;do{var vt=lt.lane;if(($f&vt)===vt)He!==null&&(He=He.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),P=lt.hasEagerState?lt.eagerState:h(P,lt.action);else{var Ht={lane:vt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};He===null?(ye=He=Ht,oe=P):He=He.next=Ht,ur.lanes|=vt,Kf|=vt}lt=lt.next}while(lt!==null&&lt!==k);He===null?oe=P:He.next=ye,gs(P,p.memoizedState)||(xs=!0),p.memoizedState=P,p.baseState=oe,p.baseQueue=He,A.lastRenderedState=P}if(h=A.interleaved,h!==null){I=h;do k=I.lane,ur.lanes|=k,Kf|=k,I=I.next;while(I!==h)}else I===null&&(A.lanes=0);return[p.memoizedState,A.dispatch]}function Y0(h){var p=ra(),A=p.queue;if(A===null)throw Error(o(311));A.lastRenderedReducer=h;var P=A.dispatch,I=A.pending,k=p.memoizedState;if(I!==null){A.pending=null;var oe=I=I.next;do k=h(k,oe.action),oe=oe.next;while(oe!==I);gs(k,p.memoizedState)||(xs=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),A.lastRenderedState=k}return[k,P]}function C3(){}function T3(h,p){var A=ur,P=ra(),I=p(),k=!gs(P.memoizedState,I);if(k&&(P.memoizedState=I,xs=!0),P=P.queue,xp(B3.bind(null,A,P,h),[h]),P.getSnapshot!==p||k||Kr!==null&&Kr.memoizedState.tag&1){if(A.flags|=2048,_p(9,R3.bind(null,A,P,I,p),void 0,null),Ar===null)throw Error(o(349));$f&30||P3(A,p,I)}return I}function P3(h,p,A){h.flags|=16384,h={getSnapshot:p,value:A},p=ur.updateQueue,p===null?(p={lastEffect:null,stores:null},ur.updateQueue=p,p.stores=[h]):(A=p.stores,A===null?p.stores=[h]:A.push(h))}function R3(h,p,A,P){p.value=A,p.getSnapshot=P,I3(p)&&Ws(h,1,-1)}function B3(h,p,A){return A(function(){I3(p)&&Ws(h,1,-1)})}function I3(h){var p=h.getSnapshot;h=h.value;try{var A=p();return!gs(h,A)}catch{return!0}}function Qx(h){var p=La();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:h},p.queue=h,h=h.dispatch=QH.bind(null,ur,h),[p.memoizedState,h]}function _p(h,p,A,P){return h={tag:h,create:p,destroy:A,deps:P,next:null},p=ur.updateQueue,p===null?(p={lastEffect:null,stores:null},ur.updateQueue=p,p.lastEffect=h.next=h):(A=p.lastEffect,A===null?p.lastEffect=h.next=h:(P=A.next,A.next=h,h.next=P,p.lastEffect=h)),h}function D3(){return ra().memoizedState}function Z0(h,p,A,P){var I=La();ur.flags|=h,I.memoizedState=_p(1|p,A,void 0,P===void 0?null:P)}function Q0(h,p,A,P){var I=ra();P=P===void 0?null:P;var k=void 0;if(di!==null){var oe=di.memoizedState;if(k=oe.destroy,P!==null&&Jx(P,oe.deps)){I.memoizedState=_p(p,A,k,P);return}}ur.flags|=h,I.memoizedState=_p(1|p,A,k,P)}function qx(h,p){return Z0(8390656,8,h,p)}function xp(h,p){return Q0(2048,8,h,p)}function L3(h,p){return Q0(4,2,h,p)}function F3(h,p){return Q0(4,4,h,p)}function k3(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function O3(h,p,A){return A=A!=null?A.concat([h]):null,Q0(4,4,k3.bind(null,p,h),A)}function ew(){}function U3(h,p){var A=ra();p=p===void 0?null:p;var P=A.memoizedState;return P!==null&&p!==null&&Jx(p,P[1])?P[0]:(A.memoizedState=[h,p],h)}function N3(h,p){var A=ra();p=p===void 0?null:p;var P=A.memoizedState;return P!==null&&p!==null&&Jx(p,P[1])?P[0]:(h=h(),A.memoizedState=[h,p],h)}function YH(h,p){var A=en;en=A!==0&&4>A?A:4,h(!0);var P=Vs.transition;Vs.transition={};try{h(!1),p()}finally{en=A,Vs.transition=P}}function z3(){return ra().memoizedState}function ZH(h,p,A){var P=kl(h);A={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null},G3(h)?H3(p,A):(V3(h,p,A),A=ki(),h=Ws(h,P,A),h!==null&&W3(h,p,P))}function QH(h,p,A){var P=kl(h),I={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null};if(G3(h))H3(p,I);else{V3(h,p,I);var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var oe=p.lastRenderedState,ye=k(oe,A);if(I.hasEagerState=!0,I.eagerState=ye,gs(ye,oe))return}catch{}finally{}A=ki(),h=Ws(h,P,A),h!==null&&W3(h,p,P)}}function G3(h){var p=h.alternate;return h===ur||p!==null&&p===ur}function H3(h,p){vp=K0=!0;var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}function V3(h,p,A){Ar!==null&&h.mode&1&&!(Qt&2)?(h=p.interleaved,h===null?(A.next=A,vs===null?vs=[p]:vs.push(p)):(A.next=h.next,h.next=A),p.interleaved=A):(h=p.pending,h===null?A.next=A:(A.next=h.next,h.next=A),p.pending=A)}function W3(h,p,A){if(A&4194240){var P=p.lanes;P&=h.pendingLanes,A|=P,p.lanes=A,ea(h,A)}}var q0={readContext:vr,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},qH={readContext:vr,useCallback:function(h,p){return La().memoizedState=[h,p===void 0?null:p],h},useContext:vr,useEffect:qx,useImperativeHandle:function(h,p,A){return A=A!=null?A.concat([h]):null,Z0(4194308,4,k3.bind(null,p,h),A)},useLayoutEffect:function(h,p){return Z0(4194308,4,h,p)},useInsertionEffect:function(h,p){return Z0(4,2,h,p)},useMemo:function(h,p){var A=La();return p=p===void 0?null:p,h=h(),A.memoizedState=[h,p],h},useReducer:function(h,p,A){var P=La();return p=A!==void 0?A(p):p,P.memoizedState=P.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},P.queue=h,h=h.dispatch=ZH.bind(null,ur,h),[P.memoizedState,h]},useRef:function(h){var p=La();return h={current:h},p.memoizedState=h},useState:Qx,useDebugValue:ew,useDeferredValue:function(h){var p=Qx(h),A=p[0],P=p[1];return qx(function(){var I=Vs.transition;Vs.transition={};try{P(h)}finally{Vs.transition=I}},[h]),A},useTransition:function(){var h=Qx(!1),p=h[0];return h=YH.bind(null,h[1]),La().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,A){var P=ur,I=La();if(jn){if(A===void 0)throw Error(o(407));A=A()}else{if(A=p(),Ar===null)throw Error(o(349));$f&30||P3(P,p,A)}I.memoizedState=A;var k={value:A,getSnapshot:p};return I.queue=k,qx(B3.bind(null,P,k,h),[h]),P.flags|=2048,_p(9,R3.bind(null,P,k,A,p),void 0,null),A},useId:function(){var h=La(),p=Ar.identifierPrefix;if(jn){var A=Da,P=Ia;A=(P&~(1<<32-Pn(P)-1)).toString(32)+A,p=":"+p+"R"+A,A=yp++,0<A&&(p+="H"+A.toString(32)),p+=":"}else A=JH++,p=":"+p+"r"+A.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},e9={readContext:vr,useCallback:U3,useContext:vr,useEffect:xp,useImperativeHandle:O3,useInsertionEffect:L3,useLayoutEffect:F3,useMemo:N3,useReducer:J0,useRef:D3,useState:function(){return J0(oc)},useDebugValue:ew,useDeferredValue:function(h){var p=J0(oc),A=p[0],P=p[1];return xp(function(){var I=Vs.transition;Vs.transition={};try{P(h)}finally{Vs.transition=I}},[h]),A},useTransition:function(){var h=J0(oc)[0],p=ra().memoizedState;return[h,p]},useMutableSource:C3,useSyncExternalStore:T3,useId:z3,unstable_isNewReconciler:!1},t9={readContext:vr,useCallback:U3,useContext:vr,useEffect:xp,useImperativeHandle:O3,useInsertionEffect:L3,useLayoutEffect:F3,useMemo:N3,useReducer:Y0,useRef:D3,useState:function(){return Y0(oc)},useDebugValue:ew,useDeferredValue:function(h){var p=Y0(oc),A=p[0],P=p[1];return xp(function(){var I=Vs.transition;Vs.transition={};try{P(h)}finally{Vs.transition=I}},[h]),A},useTransition:function(){var h=Y0(oc)[0],p=ra().memoizedState;return[h,p]},useMutableSource:C3,useSyncExternalStore:T3,useId:z3,unstable_isNewReconciler:!1};function tw(h,p){try{var A="",P=p;do A+=rc(P),P=P.return;while(P);var I=A}catch(k){I=`
Error generating stack: `+k.message+`
`+k.stack}return{value:h,source:p,stack:I}}function nw(h,p){try{console.error(p.value)}catch(A){setTimeout(function(){throw A})}}var n9=typeof WeakMap=="function"?WeakMap:Map;function j3(h,p,A){A=Ba(-1,A),A.tag=3,A.payload={element:null};var P=p.value;return A.callback=function(){mv||(mv=!0,xw=P),nw(h,p)},A}function $3(h,p,A){A=Ba(-1,A),A.tag=3;var P=h.type.getDerivedStateFromError;if(typeof P=="function"){var I=p.value;A.payload=function(){return P(I)},A.callback=function(){nw(h,p)}}var k=h.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(A.callback=function(){nw(h,p),typeof P!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),A}function X3(h,p,A){var P=h.pingCache;if(P===null){P=h.pingCache=new n9;var I=new Set;P.set(p,I)}else I=P.get(p),I===void 0&&(I=new Set,P.set(p,I));I.has(A)||(I.add(A),h=g9.bind(null,h,p,A),p.then(h,h))}function K3(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function J3(h,p,A,P,I){return h.mode&1?(h.flags|=65536,h.lanes=I,h):(h===p?h.flags|=65536:(h.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(p=Ba(-1,1),p.tag=2,Dl(A,p))),A.lanes|=1),h)}function ia(h){h.flags|=4}function Y3(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var wp,Sp,ev,tv;if(Z)wp=function(h,p){for(var A=p.child;A!==null;){if(A.tag===5||A.tag===6)W(h,A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},Sp=function(){},ev=function(h,p,A,P,I){if(h=h.memoizedProps,h!==P){var k=p.stateNode,oe=na(Hs.current);A=ue(k,A,h,P,I,oe),(p.updateQueue=A)&&ia(p)}},tv=function(h,p,A,P){A!==P&&ia(p)};else if(ee){wp=function(h,p,A,P){for(var I=p.child;I!==null;){if(I.tag===5){var k=I.stateNode;A&&P&&(k=At(k,I.type,I.memoizedProps,I)),W(h,k)}else if(I.tag===6)k=I.stateNode,A&&P&&(k=Yt(k,I.memoizedProps,I)),W(h,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),wp(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var Z3=function(h,p,A,P){for(var I=p.child;I!==null;){if(I.tag===5){var k=I.stateNode;A&&P&&(k=At(k,I.type,I.memoizedProps,I)),Tt(h,k)}else if(I.tag===6)k=I.stateNode,A&&P&&(k=Yt(k,I.memoizedProps,I)),Tt(h,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),Z3(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};Sp=function(h,p){var A=p.stateNode;if(!Y3(h,p)){h=A.containerInfo;var P=mt(h);Z3(P,p,!1,!1),A.pendingChildren=P,ia(p),Pt(h,P)}},ev=function(h,p,A,P,I){var k=h.stateNode,oe=h.memoizedProps;if((h=Y3(h,p))&&oe===P)p.stateNode=k;else{var ye=p.stateNode,He=na(Hs.current),lt=null;oe!==P&&(lt=ue(ye,A,oe,P,I,He)),h&&lt===null?p.stateNode=k:(k=it(k,lt,A,oe,P,p,h,ye),ne(k,A,P,I,He)&&ia(p),p.stateNode=k,h?ia(p):wp(k,p,!1,!1))}},tv=function(h,p,A,P){A!==P?(h=na(Wf.current),A=na(Hs.current),p.stateNode=pe(P,h,A,p),ia(p)):p.stateNode=h.stateNode}}else Sp=function(){},ev=function(){},tv=function(){};function bp(h,p){if(!jn)switch(h.tailMode){case"hidden":p=h.tail;for(var A=null;p!==null;)p.alternate!==null&&(A=p),p=p.sibling;A===null?h.tail=null:A.sibling=null;break;case"collapsed":A=h.tail;for(var P=null;A!==null;)A.alternate!==null&&(P=A),A=A.sibling;P===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:P.sibling=null}}function pi(h){var p=h.alternate!==null&&h.alternate.child===h.child,A=0,P=0;if(p)for(var I=h.child;I!==null;)A|=I.lanes|I.childLanes,P|=I.subtreeFlags&14680064,P|=I.flags&14680064,I.return=h,I=I.sibling;else for(I=h.child;I!==null;)A|=I.lanes|I.childLanes,P|=I.subtreeFlags,P|=I.flags,I.return=h,I=I.sibling;return h.subtreeFlags|=P,h.childLanes=A,p}function r9(h,p,A){var P=p.pendingProps;switch(Gx(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(p),null;case 1:return Vn(p.type)&&Wn(),pi(p),null;case 3:return P=p.stateNode,jf(),St(zt),St(ln),Kx(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(h===null||h.child===null)&&(hp(p)?ia(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,bo!==null&&(bw(bo),bo=null))),Sp(h,p),pi(p),null;case 5:$x(p),A=na(Wf.current);var I=p.type;if(h!==null&&p.stateNode!=null)ev(h,p,I,P,A),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(o(166));return pi(p),null}if(h=na(Hs.current),hp(p)){if(!ie)throw Error(o(175));h=U(p.stateNode,p.type,p.memoizedProps,A,h,p,!dp),p.updateQueue=h,h!==null&&ia(p)}else{var k=J(I,P,A,h,p);wp(k,p,!1,!1),p.stateNode=k,ne(k,I,P,A,h)&&ia(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return pi(p),null;case 6:if(h&&p.stateNode!=null)tv(h,p,h.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(o(166));if(h=na(Wf.current),A=na(Hs.current),hp(p)){if(!ie)throw Error(o(176));if(h=p.stateNode,P=p.memoizedProps,(A=Y(h,P,p,!dp))&&(I=ys,I!==null))switch(k=(I.mode&1)!==0,I.tag){case 3:nt(I.stateNode.containerInfo,h,P,k);break;case 5:Ye(I.type,I.memoizedProps,I.stateNode,h,P,k)}A&&ia(p)}else p.stateNode=pe(P,h,A,p)}return pi(p),null;case 13:if(St(Yn),P=p.memoizedState,jn&&_s!==null&&p.mode&1&&!(p.flags&128)){for(h=_s;h;)h=Fe(h);return Hf(),p.flags|=98560,p}if(P!==null&&P.dehydrated!==null){if(P=hp(p),h===null){if(!P)throw Error(o(318));if(!ie)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));le(h,p)}else Hf(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return pi(p),null}return bo!==null&&(bw(bo),bo=null),p.flags&128?(p.lanes=A,p):(P=P!==null,A=!1,h===null?hp(p):A=h.memoizedState!==null,P&&!A&&(p.child.flags|=8192,p.mode&1&&(h===null||Yn.current&1?Dr===0&&(Dr=3):Mw())),p.updateQueue!==null&&(p.flags|=4),pi(p),null);case 4:return jf(),Sp(h,p),h===null&&Ce(p.stateNode.containerInfo),pi(p),null;case 10:return Xr(p.type._context),pi(p),null;case 17:return Vn(p.type)&&Wn(),pi(p),null;case 19:if(St(Yn),I=p.memoizedState,I===null)return pi(p),null;if(P=(p.flags&128)!==0,k=I.rendering,k===null)if(P)bp(I,!1);else{if(Dr!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(k=$0(h),k!==null){for(p.flags|=128,bp(I,!1),h=k.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=A,P=p.child;P!==null;)A=P,I=h,A.flags&=14680066,k=A.alternate,k===null?(A.childLanes=0,A.lanes=I,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=k.childLanes,A.lanes=k.lanes,A.child=k.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=k.memoizedProps,A.memoizedState=k.memoizedState,A.updateQueue=k.updateQueue,A.type=k.type,I=k.dependencies,A.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),P=P.sibling;return kt(Yn,Yn.current&1|2),p.child}h=h.sibling}I.tail!==null&&Jn()>_w&&(p.flags|=128,P=!0,bp(I,!1),p.lanes=4194304)}else{if(!P)if(h=$0(k),h!==null){if(p.flags|=128,P=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),bp(I,!0),I.tail===null&&I.tailMode==="hidden"&&!k.alternate&&!jn)return pi(p),null}else 2*Jn()-I.renderingStartTime>_w&&A!==1073741824&&(p.flags|=128,P=!0,bp(I,!1),p.lanes=4194304);I.isBackwards?(k.sibling=p.child,p.child=k):(h=I.last,h!==null?h.sibling=k:p.child=k,I.last=k)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=Jn(),p.sibling=null,h=Yn.current,kt(Yn,P?h&1|2:h&1),p):(pi(p),null);case 22:case 23:return Aw(),P=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==P&&(p.flags|=8192),P&&p.mode&1?ws&1073741824&&(pi(p),Z&&p.subtreeFlags&6&&(p.flags|=8192)):pi(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var i9=a.ReactCurrentOwner,xs=!1;function Fi(h,p,A,P){p.child=h===null?M3(p,null,A,P):Vf(p,h.child,A,P)}function Q3(h,p,A,P,I){A=A.render;var k=p.ref;return gr(p,I),P=Yx(h,p,A,P,k,I),A=Zx(),h!==null&&!xs?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~I,Fa(h,p,I)):(jn&&A&&zx(p),p.flags|=1,Fi(h,p,P,I),p.child)}function q3(h,p,A,P,I){if(h===null){var k=A.type;return typeof k=="function"&&!Ew(k)&&k.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(p.tag=15,p.type=k,eP(h,p,k,P,I)):(h=Sv(A.type,null,P,p,p.mode,I),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,!(h.lanes&I)){var oe=k.memoizedProps;if(A=A.compare,A=A!==null?A:nc,A(oe,P)&&h.ref===p.ref)return Fa(h,p,I)}return p.flags|=1,h=Ul(k,P),h.ref=p.ref,h.return=p,p.child=h}function eP(h,p,A,P,I){if(h!==null&&nc(h.memoizedProps,P)&&h.ref===p.ref)if(xs=!1,(h.lanes&I)!==0)h.flags&131072&&(xs=!0);else return p.lanes=h.lanes,Fa(h,p,I);return rw(h,p,A,P,I)}function tP(h,p,A){var P=p.pendingProps,I=P.children,k=h!==null?h.memoizedState:null;if(P.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},kt(Xf,ws),ws|=A;else if(A&1073741824)p.memoizedState={baseLanes:0,cachePool:null},P=k!==null?k.baseLanes:A,kt(Xf,ws),ws|=P;else return h=k!==null?k.baseLanes|A:A,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,kt(Xf,ws),ws|=h,null;else k!==null?(P=k.baseLanes|A,p.memoizedState=null):P=A,kt(Xf,ws),ws|=P;return Fi(h,p,I,A),p.child}function nP(h,p){var A=p.ref;(h===null&&A!==null||h!==null&&h.ref!==A)&&(p.flags|=512,p.flags|=2097152)}function rw(h,p,A,P,I){var k=Vn(A)?mn:ln.current;return k=lr(p,k),gr(p,I),A=Yx(h,p,A,P,k,I),P=Zx(),h!==null&&!xs?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~I,Fa(h,p,I)):(jn&&P&&zx(p),p.flags|=1,Fi(h,p,A,I),p.child)}function rP(h,p,A,P,I){if(Vn(A)){var k=!0;hn(p)}else k=!1;if(gr(p,I),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),v3(p,A,P),Nx(p,A,P,I),P=!0;else if(h===null){var oe=p.stateNode,ye=p.memoizedProps;oe.props=ye;var He=oe.context,lt=A.contextType;typeof lt=="object"&&lt!==null?lt=vr(lt):(lt=Vn(A)?mn:ln.current,lt=lr(p,lt));var vt=A.getDerivedStateFromProps,Ht=typeof vt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Ht||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ye!==P||He!==lt)&&y3(p,oe,P,lt),Il=!1;var It=p.memoizedState;oe.state=It,G0(p,P,oe,I),He=p.memoizedState,ye!==P||It!==He||zt.current||Il?(typeof vt=="function"&&(Ux(p,A,vt,P),He=p.memoizedState),(ye=Il||g3(p,A,ye,P,It,He,lt))?(Ht||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=He),oe.props=P,oe.state=He,oe.context=lt,P=ye):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{oe=p.stateNode,d3(h,p),ye=p.memoizedProps,lt=p.type===p.elementType?ye:Di(p.type,ye),oe.props=lt,Ht=p.pendingProps,It=oe.context,He=A.contextType,typeof He=="object"&&He!==null?He=vr(He):(He=Vn(A)?mn:ln.current,He=lr(p,He));var An=A.getDerivedStateFromProps;(vt=typeof An=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ye!==Ht||It!==He)&&y3(p,oe,P,He),Il=!1,It=p.memoizedState,oe.state=It,G0(p,P,oe,I);var Mt=p.memoizedState;ye!==Ht||It!==Mt||zt.current||Il?(typeof An=="function"&&(Ux(p,A,An,P),Mt=p.memoizedState),(lt=Il||g3(p,A,lt,P,It,Mt,He)||!1)?(vt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(P,Mt,He),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(P,Mt,He)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||ye===h.memoizedProps&&It===h.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&It===h.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=Mt),oe.props=P,oe.state=Mt,oe.context=He,P=lt):(typeof oe.componentDidUpdate!="function"||ye===h.memoizedProps&&It===h.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ye===h.memoizedProps&&It===h.memoizedState||(p.flags|=1024),P=!1)}return iw(h,p,A,P,k,I)}function iw(h,p,A,P,I,k){nP(h,p);var oe=(p.flags&128)!==0;if(!P&&!oe)return I&&Gt(p,A,!1),Fa(h,p,k);P=p.stateNode,i9.current=p;var ye=oe&&typeof A.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,h!==null&&oe?(p.child=Vf(p,h.child,null,k),p.child=Vf(p,null,ye,k)):Fi(h,p,ye,k),p.memoizedState=P.state,I&&Gt(p,A,!0),p.child}function iP(h){var p=h.stateNode;p.pendingContext?un(h,p.pendingContext,p.pendingContext!==p.context):p.context&&un(h,p.context,!1),jx(h,p.containerInfo)}function sP(h,p,A,P,I){return Hf(),Wx(I),p.flags|=256,Fi(h,p,A,P),p.child}var nv={dehydrated:null,treeContext:null,retryLane:0};function rv(h){return{baseLanes:h,cachePool:null}}function oP(h,p,A){var P=p.pendingProps,I=Yn.current,k=!1,oe=(p.flags&128)!==0,ye;if((ye=oe)||(ye=h!==null&&h.memoizedState===null?!1:(I&2)!==0),ye?(k=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(I|=1),kt(Yn,I&1),h===null)return Vx(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?re(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(I=P.children,h=P.fallback,k?(P=p.mode,k=p.child,I={mode:"hidden",children:I},!(P&1)&&k!==null?(k.childLanes=0,k.pendingProps=I):k=bv(I,P,0,null),h=dc(h,P,A,null),k.return=p,h.return=p,k.sibling=h,p.child=k,p.child.memoizedState=rv(A),p.memoizedState=nv,h):sw(p,I));if(I=h.memoizedState,I!==null){if(ye=I.dehydrated,ye!==null){if(oe)return p.flags&256?(p.flags&=-257,iv(h,p,A,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(k=P.fallback,I=p.mode,P=bv({mode:"visible",children:P.children},I,0,null),k=dc(k,I,A,null),k.flags|=2,P.return=p,k.return=p,P.sibling=k,p.child=P,p.mode&1&&Vf(p,h.child,null,A),p.child.memoizedState=rv(A),p.memoizedState=nv,k);if(!(p.mode&1))p=iv(h,p,A,null);else if(re(ye))p=iv(h,p,A,Error(o(419)));else if(P=(A&h.childLanes)!==0,xs||P){if(P=Ar,P!==null){switch(A&-A){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}P=k&(P.suspendedLanes|A)?0:k,P!==0&&P!==I.retryLane&&(I.retryLane=P,Ws(h,P,-1))}Mw(),p=iv(h,p,A,Error(o(421)))}else jr(ye)?(p.flags|=128,p.child=h.child,p=v9.bind(null,h),Ee(ye,p),p=null):(A=I.treeContext,ie&&(_s=xt(ye),ys=p,jn=!0,bo=null,dp=!1,A!==null&&(zs[Gs++]=Ia,zs[Gs++]=Da,zs[Gs++]=ic,Ia=A.id,Da=A.overflow,ic=p)),p=sw(p,p.pendingProps.children),p.flags|=4096);return p}return k?(P=lP(h,p,P.children,P.fallback,A),k=p.child,I=h.child.memoizedState,k.memoizedState=I===null?rv(A):{baseLanes:I.baseLanes|A,cachePool:null},k.childLanes=h.childLanes&~A,p.memoizedState=nv,P):(A=aP(h,p,P.children,A),p.memoizedState=null,A)}return k?(P=lP(h,p,P.children,P.fallback,A),k=p.child,I=h.child.memoizedState,k.memoizedState=I===null?rv(A):{baseLanes:I.baseLanes|A,cachePool:null},k.childLanes=h.childLanes&~A,p.memoizedState=nv,P):(A=aP(h,p,P.children,A),p.memoizedState=null,A)}function sw(h,p){return p=bv({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function aP(h,p,A,P){var I=h.child;return h=I.sibling,A=Ul(I,{mode:"visible",children:A}),!(p.mode&1)&&(A.lanes=P),A.return=p,A.sibling=null,h!==null&&(P=p.deletions,P===null?(p.deletions=[h],p.flags|=16):P.push(h)),p.child=A}function lP(h,p,A,P,I){var k=p.mode;h=h.child;var oe=h.sibling,ye={mode:"hidden",children:A};return!(k&1)&&p.child!==h?(A=p.child,A.childLanes=0,A.pendingProps=ye,p.deletions=null):(A=Ul(h,ye),A.subtreeFlags=h.subtreeFlags&14680064),oe!==null?P=Ul(oe,P):(P=dc(P,k,I,null),P.flags|=2),P.return=p,A.return=p,A.sibling=P,p.child=A,P}function iv(h,p,A,P){return P!==null&&Wx(P),Vf(p,h.child,null,A),h=sw(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function uP(h,p,A){h.lanes|=p;var P=h.alternate;P!==null&&(P.lanes|=p),Li(h.return,p,A)}function ow(h,p,A,P,I){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:A,tailMode:I}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=P,k.tail=A,k.tailMode=I)}function cP(h,p,A){var P=p.pendingProps,I=P.revealOrder,k=P.tail;if(Fi(h,p,P.children,A),P=Yn.current,P&2)P=P&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&uP(h,A,p);else if(h.tag===19)uP(h,A,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}P&=1}if(kt(Yn,P),!(p.mode&1))p.memoizedState=null;else switch(I){case"forwards":for(A=p.child,I=null;A!==null;)h=A.alternate,h!==null&&$0(h)===null&&(I=A),A=A.sibling;A=I,A===null?(I=p.child,p.child=null):(I=A.sibling,A.sibling=null),ow(p,!1,I,A,k);break;case"backwards":for(A=null,I=p.child,p.child=null;I!==null;){if(h=I.alternate,h!==null&&$0(h)===null){p.child=I;break}h=I.sibling,I.sibling=A,A=I,I=h}ow(p,!0,A,null,k);break;case"together":ow(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Fa(h,p,A){if(h!==null&&(p.dependencies=h.dependencies),Kf|=p.lanes,!(A&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,A=Ul(h,h.pendingProps),p.child=A,A.return=p;h.sibling!==null;)h=h.sibling,A=A.sibling=Ul(h,h.pendingProps),A.return=p;A.sibling=null}return p.child}function s9(h,p,A){switch(p.tag){case 3:iP(p),Hf();break;case 5:E3(p);break;case 1:Vn(p.type)&&hn(p);break;case 4:jx(p,p.stateNode.containerInfo);break;case 10:N0(p,p.type._context,p.memoizedProps.value);break;case 13:var P=p.memoizedState;if(P!==null)return P.dehydrated!==null?(kt(Yn,Yn.current&1),p.flags|=128,null):A&p.child.childLanes?oP(h,p,A):(kt(Yn,Yn.current&1),h=Fa(h,p,A),h!==null?h.sibling:null);kt(Yn,Yn.current&1);break;case 19:if(P=(A&p.childLanes)!==0,h.flags&128){if(P)return cP(h,p,A);p.flags|=128}var I=p.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),kt(Yn,Yn.current),P)break;return null;case 22:case 23:return p.lanes=0,tP(h,p,A)}return Fa(h,p,A)}function o9(h,p){switch(Gx(p),p.tag){case 1:return Vn(p.type)&&Wn(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return jf(),St(zt),St(ln),Kx(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return $x(p),null;case 13:if(St(Yn),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Hf()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return St(Yn),null;case 4:return jf(),null;case 10:return Xr(p.type._context),null;case 22:case 23:return Aw(),null;case 24:return null;default:return null}}var sv=!1,ac=!1,a9=typeof WeakSet=="function"?WeakSet:Set,ft=null;function ov(h,p){var A=h.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(P){Qi(h,p,P)}else A.current=null}function aw(h,p,A){try{A()}catch(P){Qi(h,p,P)}}var fP=!1;function l9(h,p){for(K(h.containerInfo),ft=p;ft!==null;)if(h=ft,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,ft=p;else for(;ft!==null;){h=ft;try{var A=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,I=A.memoizedState,k=h.stateNode,oe=k.getSnapshotBeforeUpdate(h.elementType===h.type?P:Di(h.type,P),I);k.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Z&&at(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ye){Qi(h,h.return,ye)}if(p=h.sibling,p!==null){p.return=h.return,ft=p;break}ft=h.return}return A=fP,fP=!1,A}function lc(h,p,A){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var I=P=P.next;do{if((I.tag&h)===h){var k=I.destroy;I.destroy=void 0,k!==void 0&&aw(p,A,k)}I=I.next}while(I!==P)}}function Ap(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var A=p=p.next;do{if((A.tag&h)===h){var P=A.create;A.destroy=P()}A=A.next}while(A!==p)}}function lw(h){var p=h.ref;if(p!==null){var A=h.stateNode;switch(h.tag){case 5:h=G(A);break;default:h=A}typeof p=="function"?p(h):p.current=h}}function dP(h,p,A){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(ec,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var P=h=h.next;do{var I=P,k=I.destroy;I=I.tag,k!==void 0&&(I&2||I&4)&&aw(p,A,k),P=P.next}while(P!==h)}break;case 1:if(ov(p,A),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(oe){Qi(p,A,oe)}break;case 5:ov(p,A);break;case 4:Z?yP(h,p,A):ee&&ee&&(p=p.stateNode.containerInfo,A=mt(p),_t(p,A))}}function hP(h,p,A){for(var P=p;;)if(dP(h,P,A),P.child===null||Z&&P.tag===4){if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function pP(h){var p=h.alternate;p!==null&&(h.alternate=null,pP(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Ve(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function mP(h){return h.tag===5||h.tag===3||h.tag===4}function gP(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||mP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function vP(h){if(Z){e:{for(var p=h.return;p!==null;){if(mP(p))break e;p=p.return}throw Error(o(160))}var A=p;switch(A.tag){case 5:p=A.stateNode,A.flags&32&&(Le(p),A.flags&=-33),A=gP(h),cw(h,A,p);break;case 3:case 4:p=A.stateNode.containerInfo,A=gP(h),uw(h,A,p);break;default:throw Error(o(161))}}}function uw(h,p,A){var P=h.tag;if(P===5||P===6)h=h.stateNode,p?Xe(A,h,p):Ge(A,h);else if(P!==4&&(h=h.child,h!==null))for(uw(h,p,A),h=h.sibling;h!==null;)uw(h,p,A),h=h.sibling}function cw(h,p,A){var P=h.tag;if(P===5||P===6)h=h.stateNode,p?Ze(A,h,p):$e(A,h);else if(P!==4&&(h=h.child,h!==null))for(cw(h,p,A),h=h.sibling;h!==null;)cw(h,p,A),h=h.sibling}function yP(h,p,A){for(var P=p,I=!1,k,oe;;){if(!I){I=P.return;e:for(;;){if(I===null)throw Error(o(160));switch(k=I.stateNode,I.tag){case 5:oe=!1;break e;case 3:k=k.containerInfo,oe=!0;break e;case 4:k=k.containerInfo,oe=!0;break e}I=I.return}I=!0}if(P.tag===5||P.tag===6)hP(h,P,A),oe?ce(k,P.stateNode):We(k,P.stateNode);else if(P.tag===18)oe?Ke(k,P.stateNode):Je(k,P.stateNode);else if(P.tag===4){if(P.child!==null){k=P.stateNode.containerInfo,oe=!0,P.child.return=P,P=P.child;continue}}else if(dP(h,P,A),P.child!==null){P.child.return=P,P=P.child;continue}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return,P.tag===4&&(I=!1)}P.sibling.return=P.return,P=P.sibling}}function fw(h,p){if(Z){switch(p.tag){case 0:case 11:case 14:case 15:lc(3,p,p.return),Ap(3,p),lc(5,p,p.return);return;case 1:return;case 5:var A=p.stateNode;if(A!=null){var P=p.memoizedProps;h=h!==null?h.memoizedProps:P;var I=p.type,k=p.updateQueue;p.updateQueue=null,k!==null&&et(A,k,I,h,P,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));A=p.memoizedProps,Be(p.stateNode,h!==null?h.memoizedProps:A,A);return;case 3:ie&&h!==null&&h.memoizedState.isDehydrated&&Ae(p.stateNode.containerInfo);return;case 12:return;case 13:av(p);return;case 19:av(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:lc(3,p,p.return),Ap(3,p),lc(5,p,p.return);return;case 12:return;case 13:av(p);return;case 19:av(p);return;case 3:ie&&h!==null&&h.memoizedState.isDehydrated&&Ae(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(ee){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,_t(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function av(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var A=h.stateNode;A===null&&(A=h.stateNode=new a9),p.forEach(function(P){var I=y9.bind(null,h,P);A.has(P)||(A.add(P),P.then(I,I))})}}function u9(h,p){for(ft=p;ft!==null;){p=ft;var A=p.deletions;if(A!==null)for(var P=0;P<A.length;P++){var I=A[P];try{var k=h;Z?yP(k,I,p):hP(k,I,p);var oe=I.alternate;oe!==null&&(oe.return=null),I.return=null}catch(bt){Qi(I,p,bt)}}if(A=p.child,p.subtreeFlags&12854&&A!==null)A.return=p,ft=A;else for(;ft!==null;){p=ft;try{var ye=p.flags;if(ye&32&&Z&&Le(p.stateNode),ye&512){var He=p.alternate;if(He!==null){var lt=He.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}if(ye&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var vt=p.alternate;(vt===null||vt.memoizedState===null)&&(yw=Jn())}break;case 22:var Ht=p.memoizedState!==null,It=p.alternate,An=It!==null&&It.memoizedState!==null;if(A=p,Z){e:if(P=A,I=Ht,k=null,Z)for(var Mt=P;;){if(Mt.tag===5){if(k===null){k=Mt;var mi=Mt.stateNode;I?Qe(mi):ae(Mt.stateNode,Mt.memoizedProps)}}else if(Mt.tag===6){if(k===null){var $s=Mt.stateNode;I?de($s):ke($s,Mt.memoizedProps)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===P)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===P)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===P)break e;k===Mt&&(k=null),Mt=Mt.return}k===Mt&&(k=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}if(Ht&&!An&&A.mode&1){ft=A;for(var Ie=A.child;Ie!==null;){for(A=ft=Ie;ft!==null;){P=ft;var xe=P.child;switch(P.tag){case 0:case 11:case 14:case 15:lc(4,P,P.return);break;case 1:ov(P,P.return);var Ue=P.stateNode;if(typeof Ue.componentWillUnmount=="function"){var ht=P.return;try{Ue.props=P.memoizedProps,Ue.state=P.memoizedState,Ue.componentWillUnmount()}catch(bt){Qi(P,ht,bt)}}break;case 5:ov(P,P.return);break;case 22:if(P.memoizedState!==null){wP(A);continue}}xe!==null?(xe.return=P,ft=xe):wP(A)}Ie=Ie.sibling}}}switch(ye&4102){case 2:vP(p),p.flags&=-3;break;case 6:vP(p),p.flags&=-3,fw(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,fw(p.alternate,p);break;case 4:fw(p.alternate,p)}}catch(bt){Qi(p,p.return,bt)}if(A=p.sibling,A!==null){A.return=p.return,ft=A;break}ft=p.return}}}function c9(h,p,A){ft=h,_P(h)}function _P(h,p,A){for(var P=(h.mode&1)!==0;ft!==null;){var I=ft,k=I.child;if(I.tag===22&&P){var oe=I.memoizedState!==null||sv;if(!oe){var ye=I.alternate,He=ye!==null&&ye.memoizedState!==null||ac;ye=sv;var lt=ac;if(sv=oe,(ac=He)&&!lt)for(ft=I;ft!==null;)oe=ft,He=oe.child,oe.tag===22&&oe.memoizedState!==null?SP(I):He!==null?(He.return=oe,ft=He):SP(I);for(;k!==null;)ft=k,_P(k),k=k.sibling;ft=I,sv=ye,ac=lt}xP(h)}else I.subtreeFlags&8772&&k!==null?(k.return=I,ft=k):xP(h)}}function xP(h){for(;ft!==null;){var p=ft;if(p.flags&8772){var A=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:ac||Ap(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!ac)if(A===null)P.componentDidMount();else{var I=p.elementType===p.type?A.memoizedProps:Di(p.type,A.memoizedProps);P.componentDidUpdate(I,A.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var k=p.updateQueue;k!==null&&p3(p,k,P);break;case 3:var oe=p.updateQueue;if(oe!==null){if(A=null,p.child!==null)switch(p.child.tag){case 5:A=G(p.child.stateNode);break;case 1:A=p.child.stateNode}p3(p,oe,A)}break;case 5:var ye=p.stateNode;A===null&&p.flags&4&&rt(ye,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(ie&&p.memoizedState===null){var He=p.alternate;if(He!==null){var lt=He.memoizedState;if(lt!==null){var vt=lt.dehydrated;vt!==null&&Me(vt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ac||p.flags&512&&lw(p)}catch(Ht){Qi(p,p.return,Ht)}}if(p===h){ft=null;break}if(A=p.sibling,A!==null){A.return=p.return,ft=A;break}ft=p.return}}function wP(h){for(;ft!==null;){var p=ft;if(p===h){ft=null;break}var A=p.sibling;if(A!==null){A.return=p.return,ft=A;break}ft=p.return}}function SP(h){for(;ft!==null;){var p=ft;try{switch(p.tag){case 0:case 11:case 15:var A=p.return;try{Ap(4,p)}catch(He){Qi(p,A,He)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var I=p.return;try{P.componentDidMount()}catch(He){Qi(p,I,He)}}var k=p.return;try{lw(p)}catch(He){Qi(p,k,He)}break;case 5:var oe=p.return;try{lw(p)}catch(He){Qi(p,oe,He)}}}catch(He){Qi(p,p.return,He)}if(p===h){ft=null;break}var ye=p.sibling;if(ye!==null){ye.return=p.return,ft=ye;break}ft=p.return}}var lv=0,uv=1,cv=2,fv=3,dv=4;if(typeof Symbol=="function"&&Symbol.for){var Mp=Symbol.for;lv=Mp("selector.component"),uv=Mp("selector.has_pseudo_class"),cv=Mp("selector.role"),fv=Mp("selector.test_id"),dv=Mp("selector.text")}function dw(h){var p=ge(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=be(h),h===null)throw Error(o(362));return h.stateNode.current}function hw(h,p){switch(p.$$typeof){case lv:if(h.type===p.value)return!0;break;case uv:e:{p=p.value,h=[h,0];for(var A=0;A<h.length;){var P=h[A++],I=h[A++],k=p[I];if(P.tag!==5||!fe(P)){for(;k!=null&&hw(P,k);)I++,k=p[I];if(I===p.length){p=!0;break e}else for(P=P.child;P!==null;)h.push(P,I),P=P.sibling}}p=!1}return p;case cv:if(h.tag===5&&we(h.stateNode,p.value))return!0;break;case dv:if((h.tag===5||h.tag===6)&&(h=O(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case fv:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function pw(h){switch(h.$$typeof){case lv:return"<"+(R(h.value)||"Unknown")+">";case uv:return":has("+(pw(h)||"")+")";case cv:return'[role="'+h.value+'"]';case dv:return'"'+h.value+'"';case fv:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function bP(h,p){var A=[];h=[h,0];for(var P=0;P<h.length;){var I=h[P++],k=h[P++],oe=p[k];if(I.tag!==5||!fe(I)){for(;oe!=null&&hw(I,oe);)k++,oe=p[k];if(k===p.length)A.push(I);else for(I=I.child;I!==null;)h.push(I,k),I=I.sibling}}return A}function mw(h,p){if(!je)throw Error(o(363));h=dw(h),h=bP(h,p),p=[],h=Array.from(h);for(var A=0;A<h.length;){var P=h[A++];if(P.tag===5)fe(P)||p.push(P.stateNode);else for(P=P.child;P!==null;)h.push(P),P=P.sibling}return p}var f9=Math.ceil,hv=a.ReactCurrentDispatcher,gw=a.ReactCurrentOwner,yr=a.ReactCurrentBatchConfig,Qt=0,Ar=null,Mr=null,ii=0,ws=0,Xf=Ct(0),Dr=0,Ep=null,Kf=0,pv=0,vw=0,Cp=null,Yi=null,yw=0,_w=1/0;function Jf(){_w=Jn()+500}var mv=!1,xw=null,Ll=null,gv=!1,Fl=null,vv=0,Tp=0,ww=null,yv=-1,_v=0;function ki(){return Qt&6?Jn():yv!==-1?yv:yv=Jn()}function kl(h){return h.mode&1?Qt&2&&ii!==0?ii&-ii:tc.transition!==null?(_v===0&&(h=Ea,Ea<<=1,!(Ea&4194240)&&(Ea=64),_v=h),_v):(h=en,h!==0?h:Te()):1}function Ws(h,p,A){if(50<Tp)throw Tp=0,ww=null,Error(o(185));var P=xv(h,p);return P===null?null:(qo(P,p,A),(!(Qt&2)||P!==Ar)&&(P===Ar&&(!(Qt&2)&&(pv|=p),Dr===4&&Ol(P,ii)),Zi(P,A),p===1&&Qt===0&&!(h.mode&1)&&(Jf(),ta&&Ji())),P)}function xv(h,p){h.lanes|=p;var A=h.alternate;for(A!==null&&(A.lanes|=p),A=h,h=h.return;h!==null;)h.childLanes|=p,A=h.alternate,A!==null&&(A.childLanes|=p),A=h,h=h.return;return A.tag===3?A.stateNode:null}function Zi(h,p){var A=h.callbackNode;sp(h,p);var P=Qu(h,h===Ar?ii:0);if(P===0)A!==null&&Of(A),h.callbackNode=null,h.callbackPriority=0;else if(p=P&-P,h.callbackPriority!==p){if(A!=null&&Of(A),p===1)h.tag===0?fp(MP.bind(null,h)):cp(MP.bind(null,h)),Re?ze(function(){Qt===0&&Ji()}):Ra(qu,Ji),A=null;else{switch(op(P)){case 1:A=qu;break;case 4:A=O0;break;case 16:A=Bi;break;case 536870912:A=lp;break;default:A=Bi}A=LP(A,AP.bind(null,h))}h.callbackPriority=p,h.callbackNode=A}}function AP(h,p){if(yv=-1,_v=0,Qt&6)throw Error(o(327));var A=h.callbackNode;if(fc()&&h.callbackNode!==A)return null;var P=Qu(h,h===Ar?ii:0);if(P===0)return null;if(P&30||P&h.expiredLanes||p)p=wv(h,P);else{p=P;var I=Qt;Qt|=2;var k=TP();(Ar!==h||ii!==p)&&(Jf(),uc(h,p));do try{p9();break}catch(ye){CP(h,ye)}while(1);Nf(),hv.current=k,Qt=I,Mr!==null?p=0:(Ar=null,ii=0,p=Dr)}if(p!==0){if(p===2&&(I=Pa(h),I!==0&&(P=I,p=Sw(h,I))),p===1)throw A=Ep,uc(h,0),Ol(h,P),Zi(h,Jn()),A;if(p===6)Ol(h,P);else{if(I=h.current.alternate,!(P&30)&&!d9(I)&&(p=wv(h,P),p===2&&(k=Pa(h),k!==0&&(P=k,p=Sw(h,k))),p===1))throw A=Ep,uc(h,0),Ol(h,P),Zi(h,Jn()),A;switch(h.finishedWork=I,h.finishedLanes=P,p){case 0:case 1:throw Error(o(345));case 2:cc(h,Yi);break;case 3:if(Ol(h,P),(P&130023424)===P&&(p=yw+500-Jn(),10<p)){if(Qu(h,0)!==0)break;if(I=h.suspendedLanes,(I&P)!==P){ki(),h.pingedLanes|=h.suspendedLanes&I;break}h.timeoutHandle=me(cc.bind(null,h,Yi),p);break}cc(h,Yi);break;case 4:if(Ol(h,P),(P&4194240)===P)break;for(p=h.eventTimes,I=-1;0<P;){var oe=31-Pn(P);k=1<<oe,oe=p[oe],oe>I&&(I=oe),P&=~k}if(P=I,P=Jn()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*f9(P/1960))-P,10<P){h.timeoutHandle=me(cc.bind(null,h,Yi),P);break}cc(h,Yi);break;case 5:cc(h,Yi);break;default:throw Error(o(329))}}}return Zi(h,Jn()),h.callbackNode===A?AP.bind(null,h):null}function Sw(h,p){var A=Cp;return h.current.memoizedState.isDehydrated&&(uc(h,p).flags|=256),h=wv(h,p),h!==2&&(p=Yi,Yi=A,p!==null&&bw(p)),h}function bw(h){Yi===null?Yi=h:Yi.push.apply(Yi,h)}function d9(h){for(var p=h;;){if(p.flags&16384){var A=p.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var P=0;P<A.length;P++){var I=A[P],k=I.getSnapshot;I=I.value;try{if(!gs(k(),I))return!1}catch{return!1}}}if(A=p.child,p.subtreeFlags&16384&&A!==null)A.return=p,p=A;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ol(h,p){for(p&=~vw,p&=~pv,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var A=31-Pn(p),P=1<<A;h[A]=-1,p&=~P}}function MP(h){if(Qt&6)throw Error(o(327));fc();var p=Qu(h,0);if(!(p&1))return Zi(h,Jn()),null;var A=wv(h,p);if(h.tag!==0&&A===2){var P=Pa(h);P!==0&&(p=P,A=Sw(h,P))}if(A===1)throw A=Ep,uc(h,0),Ol(h,p),Zi(h,Jn()),A;if(A===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,cc(h,Yi),Zi(h,Jn()),null}function EP(h){Fl!==null&&Fl.tag===0&&!(Qt&6)&&fc();var p=Qt;Qt|=1;var A=yr.transition,P=en;try{if(yr.transition=null,en=1,h)return h()}finally{en=P,yr.transition=A,Qt=p,!(Qt&6)&&Ji()}}function Aw(){ws=Xf.current,St(Xf)}function uc(h,p){h.finishedWork=null,h.finishedLanes=0;var A=h.timeoutHandle;if(A!==N&&(h.timeoutHandle=N,se(A)),Mr!==null)for(A=Mr.return;A!==null;){var P=A;switch(Gx(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&Wn();break;case 3:jf(),St(zt),St(ln),Kx();break;case 5:$x(P);break;case 4:jf();break;case 13:St(Yn);break;case 19:St(Yn);break;case 10:Xr(P.type._context);break;case 22:case 23:Aw()}A=A.return}if(Ar=h,Mr=h=Ul(h.current,null),ii=ws=p,Dr=0,Ep=null,vw=pv=Kf=0,Yi=Cp=null,vs!==null){for(p=0;p<vs.length;p++)if(A=vs[p],P=A.interleaved,P!==null){A.interleaved=null;var I=P.next,k=A.pending;if(k!==null){var oe=k.next;k.next=I,P.next=oe}A.pending=P}vs=null}return h}function CP(h,p){do{var A=Mr;try{if(Nf(),X0.current=q0,K0){for(var P=ur.memoizedState;P!==null;){var I=P.queue;I!==null&&(I.pending=null),P=P.next}K0=!1}if($f=0,Kr=di=ur=null,vp=!1,yp=0,gw.current=null,A===null||A.return===null){Dr=1,Ep=p,Mr=null;break}e:{var k=h,oe=A.return,ye=A,He=p;if(p=ii,ye.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var lt=He,vt=ye,Ht=vt.tag;if(!(vt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var It=vt.alternate;It?(vt.updateQueue=It.updateQueue,vt.memoizedState=It.memoizedState,vt.lanes=It.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var An=K3(oe);if(An!==null){An.flags&=-257,J3(An,oe,ye,k,p),An.mode&1&&X3(k,lt,p),p=An,He=lt;var Mt=p.updateQueue;if(Mt===null){var mi=new Set;mi.add(He),p.updateQueue=mi}else Mt.add(He);break e}else{if(!(p&1)){X3(k,lt,p),Mw();break e}He=Error(o(426))}}else if(jn&&ye.mode&1){var $s=K3(oe);if($s!==null){!($s.flags&65536)&&($s.flags|=256),J3($s,oe,ye,k,p),Wx(He);break e}}k=He,Dr!==4&&(Dr=2),Cp===null?Cp=[k]:Cp.push(k),He=tw(He,ye),ye=oe;do{switch(ye.tag){case 3:ye.flags|=65536,p&=-p,ye.lanes|=p;var Ie=j3(ye,He,p);h3(ye,Ie);break e;case 1:k=He;var xe=ye.type,Ue=ye.stateNode;if(!(ye.flags&128)&&(typeof xe.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(Ll===null||!Ll.has(Ue)))){ye.flags|=65536,p&=-p,ye.lanes|=p;var ht=$3(ye,k,p);h3(ye,ht);break e}}ye=ye.return}while(ye!==null)}RP(A)}catch(bt){p=bt,Mr===A&&A!==null&&(Mr=A=A.return);continue}break}while(1)}function TP(){var h=hv.current;return hv.current=q0,h===null?q0:h}function Mw(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Ar===null||!(Kf&268435455)&&!(pv&268435455)||Ol(Ar,ii)}function wv(h,p){var A=Qt;Qt|=2;var P=TP();Ar===h&&ii===p||uc(h,p);do try{h9();break}catch(I){CP(h,I)}while(1);if(Nf(),Qt=A,hv.current=P,Mr!==null)throw Error(o(261));return Ar=null,ii=0,Dr}function h9(){for(;Mr!==null;)PP(Mr)}function p9(){for(;Mr!==null&&!ap();)PP(Mr)}function PP(h){var p=DP(h.alternate,h,ws);h.memoizedProps=h.pendingProps,p===null?RP(h):Mr=p,gw.current=null}function RP(h){var p=h;do{var A=p.alternate;if(h=p.return,p.flags&32768){if(A=o9(A,p),A!==null){A.flags&=32767,Mr=A;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Dr=6,Mr=null;return}}else if(A=r9(A,p,ws),A!==null){Mr=A;return}if(p=p.sibling,p!==null){Mr=p;return}Mr=p=h}while(p!==null);Dr===0&&(Dr=5)}function cc(h,p){var A=en,P=yr.transition;try{yr.transition=null,en=1,m9(h,p,A)}finally{yr.transition=P,en=A}return null}function m9(h,p,A){do fc();while(Fl!==null);if(Qt&6)throw Error(o(327));var P=h.finishedWork,I=h.finishedLanes;if(P===null)return null;if(h.finishedWork=null,h.finishedLanes=0,P===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var k=P.lanes|P.childLanes;if(Rl(h,k),h===Ar&&(Mr=Ar=null,ii=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||gv||(gv=!0,LP(Bi,function(){return fc(),null})),k=(P.flags&15990)!==0,P.subtreeFlags&15990||k){k=yr.transition,yr.transition=null;var oe=en;en=1;var ye=Qt;Qt|=4,gw.current=null,l9(h,P),u9(h,P),j(h.containerInfo),h.current=P,c9(P),k0(),Qt=ye,en=oe,yr.transition=k}else h.current=P;if(gv&&(gv=!1,Fl=h,vv=I),k=h.pendingLanes,k===0&&(Ll=null),up(P.stateNode),Zi(h,Jn()),p!==null)for(A=h.onRecoverableError,P=0;P<p.length;P++)A(p[P]);if(mv)throw mv=!1,h=xw,xw=null,h;return vv&1&&h.tag!==0&&fc(),k=h.pendingLanes,k&1?h===ww?Tp++:(Tp=0,ww=h):Tp=0,Ji(),null}function fc(){if(Fl!==null){var h=op(vv),p=yr.transition,A=en;try{if(yr.transition=null,en=16>h?16:h,Fl===null)var P=!1;else{if(h=Fl,Fl=null,vv=0,Qt&6)throw Error(o(331));var I=Qt;for(Qt|=4,ft=h.current;ft!==null;){var k=ft,oe=k.child;if(ft.flags&16){var ye=k.deletions;if(ye!==null){for(var He=0;He<ye.length;He++){var lt=ye[He];for(ft=lt;ft!==null;){var vt=ft;switch(vt.tag){case 0:case 11:case 15:lc(8,vt,k)}var Ht=vt.child;if(Ht!==null)Ht.return=vt,ft=Ht;else for(;ft!==null;){vt=ft;var It=vt.sibling,An=vt.return;if(pP(vt),vt===lt){ft=null;break}if(It!==null){It.return=An,ft=It;break}ft=An}}}var Mt=k.alternate;if(Mt!==null){var mi=Mt.child;if(mi!==null){Mt.child=null;do{var $s=mi.sibling;mi.sibling=null,mi=$s}while(mi!==null)}}ft=k}}if(k.subtreeFlags&2064&&oe!==null)oe.return=k,ft=oe;else e:for(;ft!==null;){if(k=ft,k.flags&2048)switch(k.tag){case 0:case 11:case 15:lc(9,k,k.return)}var Ie=k.sibling;if(Ie!==null){Ie.return=k.return,ft=Ie;break e}ft=k.return}}var xe=h.current;for(ft=xe;ft!==null;){oe=ft;var Ue=oe.child;if(oe.subtreeFlags&2064&&Ue!==null)Ue.return=oe,ft=Ue;else e:for(oe=xe;ft!==null;){if(ye=ft,ye.flags&2048)try{switch(ye.tag){case 0:case 11:case 15:Ap(9,ye)}}catch(bt){Qi(ye,ye.return,bt)}if(ye===oe){ft=null;break e}var ht=ye.sibling;if(ht!==null){ht.return=ye.return,ft=ht;break e}ft=ye.return}}if(Qt=I,Ji(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(ec,h)}catch{}P=!0}return P}finally{en=A,yr.transition=p}}return!1}function BP(h,p,A){p=tw(A,p),p=j3(h,p,1),Dl(h,p),p=ki(),h=xv(h,1),h!==null&&(qo(h,1,p),Zi(h,p))}function Qi(h,p,A){if(h.tag===3)BP(h,h,A);else for(;p!==null;){if(p.tag===3){BP(p,h,A);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Ll===null||!Ll.has(P))){h=tw(A,h),h=$3(p,h,1),Dl(p,h),h=ki(),p=xv(p,1),p!==null&&(qo(p,1,h),Zi(p,h));break}}p=p.return}}function g9(h,p,A){var P=h.pingCache;P!==null&&P.delete(p),p=ki(),h.pingedLanes|=h.suspendedLanes&A,Ar===h&&(ii&A)===A&&(Dr===4||Dr===3&&(ii&130023424)===ii&&500>Jn()-yw?uc(h,0):vw|=A),Zi(h,p)}function IP(h,p){p===0&&(h.mode&1?(p=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):p=1);var A=ki();h=xv(h,p),h!==null&&(qo(h,p,A),Zi(h,A))}function v9(h){var p=h.memoizedState,A=0;p!==null&&(A=p.retryLane),IP(h,A)}function y9(h,p){var A=0;switch(h.tag){case 13:var P=h.stateNode,I=h.memoizedState;I!==null&&(A=I.retryLane);break;case 19:P=h.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(p),IP(h,A)}var DP;DP=function(h,p,A){if(h!==null)if(h.memoizedProps!==p.pendingProps||zt.current)xs=!0;else{if(!(h.lanes&A)&&!(p.flags&128))return xs=!1,s9(h,p,A);xs=!!(h.flags&131072)}else xs=!1,jn&&p.flags&1048576&&_3(p,W0,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var I=lr(p,ln.current);gr(p,A),I=Yx(null,p,P,h,I,A);var k=Zx();return p.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Vn(P)?(k=!0,hn(p)):k=!1,p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Ox(p),I.updater=H0,p.stateNode=I,I._reactInternals=p,Nx(p,P,h,A),p=iw(null,p,P,!0,k,A)):(p.tag=0,jn&&k&&zx(p),Fi(null,p,I,A),p=p.child),p;case 16:P=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,I=P._init,P=I(P._payload),p.type=P,I=p.tag=x9(P),h=Di(P,h),I){case 0:p=rw(null,p,P,h,A);break e;case 1:p=rP(null,p,P,h,A);break e;case 11:p=Q3(null,p,P,h,A);break e;case 14:p=q3(null,p,P,Di(P.type,h),A);break e}throw Error(o(306,P,""))}return p;case 0:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Di(P,I),rw(h,p,P,I,A);case 1:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Di(P,I),rP(h,p,P,I,A);case 3:e:{if(iP(p),h===null)throw Error(o(387));P=p.pendingProps,k=p.memoizedState,I=k.element,d3(h,p),G0(p,P,null,A);var oe=p.memoizedState;if(P=oe.element,ie&&k.isDehydrated)if(k={element:P,isDehydrated:!1,cache:oe.cache,transitions:oe.transitions},p.updateQueue.baseState=k,p.memoizedState=k,p.flags&256){I=Error(o(423)),p=sP(h,p,P,A,I);break e}else if(P!==I){I=Error(o(424)),p=sP(h,p,P,A,I);break e}else for(ie&&(_s=Oe(p.stateNode.containerInfo),ys=p,jn=!0,bo=null,dp=!1),A=M3(p,null,P,A),p.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Hf(),P===I){p=Fa(h,p,A);break e}Fi(h,p,P,A)}p=p.child}return p;case 5:return E3(p),h===null&&Vx(p),P=p.type,I=p.pendingProps,k=h!==null?h.memoizedProps:null,oe=I.children,q(P,I)?oe=null:k!==null&&q(P,k)&&(p.flags|=32),nP(h,p),Fi(h,p,oe,A),p.child;case 6:return h===null&&Vx(p),null;case 13:return oP(h,p,A);case 4:return jx(p,p.stateNode.containerInfo),P=p.pendingProps,h===null?p.child=Vf(p,null,P,A):Fi(h,p,P,A),p.child;case 11:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Di(P,I),Q3(h,p,P,I,A);case 7:return Fi(h,p,p.pendingProps,A),p.child;case 8:return Fi(h,p,p.pendingProps.children,A),p.child;case 12:return Fi(h,p,p.pendingProps.children,A),p.child;case 10:e:{if(P=p.type._context,I=p.pendingProps,k=p.memoizedProps,oe=I.value,N0(p,P,oe),k!==null)if(gs(k.value,oe)){if(k.children===I.children&&!zt.current){p=Fa(h,p,A);break e}}else for(k=p.child,k!==null&&(k.return=p);k!==null;){var ye=k.dependencies;if(ye!==null){oe=k.child;for(var He=ye.firstContext;He!==null;){if(He.context===P){if(k.tag===1){He=Ba(-1,A&-A),He.tag=2;var lt=k.updateQueue;if(lt!==null){lt=lt.shared;var vt=lt.pending;vt===null?He.next=He:(He.next=vt.next,vt.next=He),lt.pending=He}}k.lanes|=A,He=k.alternate,He!==null&&(He.lanes|=A),Li(k.return,A,p),ye.lanes|=A;break}He=He.next}}else if(k.tag===10)oe=k.type===p.type?null:k.child;else if(k.tag===18){if(oe=k.return,oe===null)throw Error(o(341));oe.lanes|=A,ye=oe.alternate,ye!==null&&(ye.lanes|=A),Li(oe,A,p),oe=k.sibling}else oe=k.child;if(oe!==null)oe.return=k;else for(oe=k;oe!==null;){if(oe===p){oe=null;break}if(k=oe.sibling,k!==null){k.return=oe.return,oe=k;break}oe=oe.return}k=oe}Fi(h,p,I.children,A),p=p.child}return p;case 9:return I=p.type,P=p.pendingProps.children,gr(p,A),I=vr(I),P=P(I),p.flags|=1,Fi(h,p,P,A),p.child;case 14:return P=p.type,I=Di(P,p.pendingProps),I=Di(P.type,I),q3(h,p,P,I,A);case 15:return eP(h,p,p.type,p.pendingProps,A);case 17:return P=p.type,I=p.pendingProps,I=p.elementType===P?I:Di(P,I),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Vn(P)?(h=!0,hn(p)):h=!1,gr(p,A),v3(p,P,I),Nx(p,P,I,A),iw(null,p,P,!0,h,A);case 19:return cP(h,p,A);case 22:return tP(h,p,A)}throw Error(o(156,p.tag))};function LP(h,p){return Ra(h,p)}function _9(h,p,A,P){this.tag=h,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(h,p,A,P){return new _9(h,p,A,P)}function Ew(h){return h=h.prototype,!(!h||!h.isReactComponent)}function x9(h){if(typeof h=="function")return Ew(h)?1:0;if(h!=null){if(h=h.$$typeof,h===v)return 11;if(h===x)return 14}return 2}function Ul(h,p){var A=h.alternate;return A===null?(A=js(h.tag,p,h.key,h.mode),A.elementType=h.elementType,A.type=h.type,A.stateNode=h.stateNode,A.alternate=h,h.alternate=A):(A.pendingProps=p,A.type=h.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=h.flags&14680064,A.childLanes=h.childLanes,A.lanes=h.lanes,A.child=h.child,A.memoizedProps=h.memoizedProps,A.memoizedState=h.memoizedState,A.updateQueue=h.updateQueue,p=h.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},A.sibling=h.sibling,A.index=h.index,A.ref=h.ref,A}function Sv(h,p,A,P,I,k){var oe=2;if(P=h,typeof h=="function")Ew(h)&&(oe=1);else if(typeof h=="string")oe=5;else e:switch(h){case c:return dc(A.children,I,k,p);case f:oe=8,I|=8;break;case d:return h=js(12,A,p,I|2),h.elementType=d,h.lanes=k,h;case y:return h=js(13,A,p,I),h.elementType=y,h.lanes=k,h;case _:return h=js(19,A,p,I),h.elementType=_,h.lanes=k,h;case S:return bv(A,I,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:oe=10;break e;case g:oe=9;break e;case v:oe=11;break e;case x:oe=14;break e;case w:oe=16,P=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=js(oe,A,p,I),p.elementType=h,p.type=P,p.lanes=k,p}function dc(h,p,A,P){return h=js(7,h,P,p),h.lanes=A,h}function bv(h,p,A,P){return h=js(22,h,P,p),h.elementType=S,h.lanes=A,h.stateNode={},h}function Cw(h,p,A){return h=js(6,h,null,p),h.lanes=A,h}function Tw(h,p,A){return p=js(4,h.children!==null?h.children:[],h.key,p),p.lanes=A,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function w9(h,p,A,P,I){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=N,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kf(0),this.expirationTimes=kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kf(0),this.identifierPrefix=P,this.onRecoverableError=I,ie&&(this.mutableSourceEagerHydrationData=null)}function FP(h,p,A,P,I,k,oe,ye,He){return h=new w9(h,p,A,ye,He),p===1?(p=1,k===!0&&(p|=8)):p=0,k=js(3,null,null,p),h.current=k,k.stateNode=h,k.memoizedState={element:P,isDehydrated:A,cache:null,transitions:null},Ox(k),h}function kP(h){if(!h)return Rt;h=h._reactInternals;e:{if(M(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Vn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var A=h.type;if(Vn(A))return Kn(h,A,p)}return p}function OP(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=D(p),h===null?null:h.stateNode}function UP(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var A=h.retryLane;h.retryLane=A!==0&&A<p?A:p}}function Pw(h,p){UP(h,p),(h=h.alternate)&&UP(h,p)}function S9(h){return h=D(h),h===null?null:h.stateNode}function b9(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=ki();Ws(h,134217728,p),Pw(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=ki(),A=kl(h);Ws(h,A,p),Pw(h,A)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var A=Ta(p.pendingLanes);A!==0&&(ea(p,A|1),Zi(p,Jn()),!(Qt&6)&&(Jf(),Ji()))}break;case 13:var P=ki();EP(function(){return Ws(h,1,P)}),Pw(h,1)}},t.batchedUpdates=function(h,p){var A=Qt;Qt|=1;try{return h(p)}finally{Qt=A,Qt===0&&(Jf(),ta&&Ji())}},t.createComponentSelector=function(h){return{$$typeof:lv,value:h}},t.createContainer=function(h,p,A,P,I,k,oe){return FP(h,p,!1,null,A,P,I,k,oe)},t.createHasPseudoClassSelector=function(h){return{$$typeof:uv,value:h}},t.createHydrationContainer=function(h,p,A,P,I,k,oe,ye,He){return h=FP(A,P,!0,h,I,k,oe,ye,He),h.context=kP(null),A=h.current,P=ki(),I=kl(A),k=Ba(P,I),k.callback=p??null,Dl(A,k),h.current.lanes=I,qo(h,I,P),Zi(h,P),h},t.createPortal=function(h,p,A){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:P==null?null:""+P,children:h,containerInfo:p,implementation:A}},t.createRoleSelector=function(h){return{$$typeof:cv,value:h}},t.createTestNameSelector=function(h){return{$$typeof:fv,value:h}},t.createTextSelector=function(h){return{$$typeof:dv,value:h}},t.deferredUpdates=function(h){var p=en,A=yr.transition;try{return yr.transition=null,en=16,h()}finally{en=p,yr.transition=A}},t.discreteUpdates=function(h,p,A,P,I){var k=en,oe=yr.transition;try{return yr.transition=null,en=1,h(p,A,P,I)}finally{en=k,yr.transition=oe,Qt===0&&Jf()}},t.findAllNodes=mw,t.findBoundingRects=function(h,p){if(!je)throw Error(o(363));p=mw(h,p),h=[];for(var A=0;A<p.length;A++)h.push(Q(p[A]));for(p=h.length-1;0<p;p--){A=h[p];for(var P=A.x,I=P+A.width,k=A.y,oe=k+A.height,ye=p-1;0<=ye;ye--)if(p!==ye){var He=h[ye],lt=He.x,vt=lt+He.width,Ht=He.y,It=Ht+He.height;if(P>=lt&&k>=Ht&&I<=vt&&oe<=It){h.splice(p,1);break}else if(P!==lt||A.width!==He.width||It<k||Ht>oe){if(!(k!==Ht||A.height!==He.height||vt<P||lt>I)){lt>P&&(He.width+=lt-P,He.x=P),vt<I&&(He.width=I-lt),h.splice(p,1);break}}else{Ht>k&&(He.height+=Ht-k,He.y=k),It<oe&&(He.height=oe-Ht),h.splice(p,1);break}}}return h},t.findHostInstance=OP,t.findHostInstanceWithNoPortals=function(h){return h=L(h),h=h!==null?F(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return OP(h)},t.flushControlled=function(h){var p=Qt;Qt|=1;var A=yr.transition,P=en;try{yr.transition=null,en=1,h()}finally{en=P,yr.transition=A,Qt=p,Qt===0&&(Jf(),Ji())}},t.flushPassiveEffects=fc,t.flushSync=EP,t.focusWithin=function(h,p){if(!je)throw Error(o(363));for(h=dw(h),p=bP(h,p),p=Array.from(p),h=0;h<p.length;){var A=p[h++];if(!fe(A)){if(A.tag===5&&Ne(A.stateNode))return!0;for(A=A.child;A!==null;)p.push(A),A=A.sibling}}return!1},t.getCurrentUpdatePriority=function(){return en},t.getFindAllNodesFailureDescription=function(h,p){if(!je)throw Error(o(363));var A=0,P=[];h=[dw(h),0];for(var I=0;I<h.length;){var k=h[I++],oe=h[I++],ye=p[oe];if((k.tag!==5||!fe(k))&&(hw(k,ye)&&(P.push(pw(ye)),oe++,oe>A&&(A=oe)),oe<p.length))for(k=k.child;k!==null;)h.push(k,oe),k=k.sibling}if(A<p.length){for(h=[];A<p.length;A++)h.push(pw(p[A]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return G(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:S9,findFiberByHostInstance:h.findFiberByHostInstance||b9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{ec=p.inject(h),ms=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,A,P){if(!je)throw Error(o(363));h=mw(h,p);var I=Pe(h,A,P).disconnect;return{disconnect:function(){I()}}},t.registerMutableSourceForHydration=function(h,p){var A=p._getVersion;A=A(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,A]:h.mutableSourceEagerHydrationData.push(p,A)},t.runWithPriority=function(h,p){var A=en;try{return en=h,p()}finally{en=A}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,A,P){var I=p.current,k=ki(),oe=kl(I);return A=kP(A),p.context===null?p.context=A:p.pendingContext=A,p=Ba(k,oe),p.payload={element:h},P=P===void 0?null:P,P!==null&&(p.callback=P),Dl(I,p),h=Ws(I,oe,k),h!==null&&z0(h,I,oe),oe},t};kz.exports=Dq;var Lq=kz.exports;const Fq=$o(Lq);function Nz(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}const Qa=[];function zz(n,e,t=!1,r={}){for(const s of Qa)if(Nz(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,promise:n(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Qa.indexOf(i);s!==-1&&Qa.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Qa.push(i),!t)throw i.promise}const kq=(n,e,t)=>zz(n,e,!1,t),Oq=(n,e,t)=>void zz(n,e,!0,t),Uq=n=>{if(n===void 0||n.length===0)Qa.splice(0,Qa.length);else{const e=Qa.find(t=>Nz(n,t.keys,t.equal));if(e){const t=Qa.indexOf(e);t!==-1&&Qa.splice(t,1)}}};var AI,MI;const Nq=(n,...e)=>e.reduce((t,r)=>t==null?void 0:t[r],n),Sd="ColorManagement"in EA&&Nq(EA,"ColorManagement")||null,Gz=n=>n&&n.isOrthographicCamera,zq=n=>n&&n.hasOwnProperty("current"),w0=typeof window<"u"&&((AI=window.document)!=null&&AI.createElement||((MI=window.navigator)==null?void 0:MI.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function Hz(n){const e=B.useRef(n);return w0(()=>void(e.current=n),[n]),e}function Gq({set:n}){return w0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Vz extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Vz.getDerivedStateFromError=()=>({error:!0});const Wz="__default",EI=new Map,Hq=n=>n&&!!n.memoized&&!!n.changes;function jz(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Yp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},qn={obj:n=>n===Object(n)&&!qn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(qn.str(n)||qn.num(n))return n===e;const s=qn.obj(n);if(s&&r==="reference")return n===e;const o=qn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in i?e:n)if(n[a]!==e[a])return!1;if(qn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Vq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Wq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function bd(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function TA(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const CI=/-\d+$/;function OS(n,e,t){if(qn.str(t)){if(CI.test(t)){const s=t.replace(CI,""),{target:o,key:a}=TA(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=TA(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function TI(n,e,t){var r,i;if(qn.str(t)){const{target:s,key:o}=TA(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function $z(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const f=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(i),m=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],Wz+"remove"])}d.forEach(([v,y])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||qn.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return m.push([v,y,!0,[]]);let x=[];v.includes("-")&&(x=v.split("-")),m.push([v,y,!1,x]);for(const w in i){const S=i[w];w.startsWith(`${v}-`)&&m.push([w,S,!1,w.split("-")])}});const g={...i};return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function US(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=Hq(e)?e:$z(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[m,g,v,y]=u[d],_=n,x=_[m];if(y.length&&(x=y.reduce((w,S)=>w[S],n),!(x&&x.set))){const[w,...S]=y.reverse();_=S.reverse().reduce((T,E)=>T[E],n),m=w}if(g===Wz+"remove")if(_.constructor){let w=EI.get(_.constructor);w||(w=new _.constructor,EI.set(_.constructor,w)),g=w[m]}else g=0;if(v)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof nf)){if(Array.isArray(g))x.fromArray?x.fromArray(g):x.set(...g);else if(x.copy&&g&&g.constructor&&x.constructor===g.constructor)x.copy(g);else if(g!==void 0){const w=x instanceof st;!w&&x.setScalar?x.setScalar(g):x instanceof nf&&g instanceof nf?x.mask=g.mask:x.set(g),!Sd&&!a.linear&&w&&x.convertSRGBToLinear()}}else _[m]=g,!a.linear&&_[m]instanceof fn&&_[m].format===Ur&&_[m].type===Hr&&(_[m].encoding=Nt);Ad(n)}if(s.parent&&a.internal&&n.raycast&&c!==s.eventCount){const d=a.internal.interaction.indexOf(n);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&PA(n),n}function Ad(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function PA(n){n.onUpdate==null||n.onUpdate(n)}function Xz(n,e){n.manual||(Gz(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Cy(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function jq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Hd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hd.ContinuousEventPriority;default:return Hd.DefaultEventPriority}}function Kz(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function $q(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Kz(t.capturedMap,e,r,i)})}function Xq(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,d=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let _=0;_<m.length;_++){const x=Yp(m[_]);x&&(x.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(_){const x=Yp(_);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var w;x.events.compute==null||x.events.compute(l,x,(w=x.previousRoot)==null?void 0:w.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(_,!0):[]}let v=m.flatMap(g).sort((_,x)=>{const w=Yp(_.object),S=Yp(x.object);return!w||!S?_.distance-x.distance:S.events.priority-w.events.priority||_.distance-x.distance}).filter(_=>{const x=Cy(_);return f.has(x)?!1:(f.add(x),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const _ of v){let x=_.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&d.push({..._,eventObject:x}),x=x.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let _ of c.internal.capturedMap.get(l.pointerId).values())f.has(Cy(_.intersection))||d.push(_.intersection);return d}function i(l,u,c,f){const d=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=Yp(g.object)||d,{raycaster:y,pointer:_,camera:x,internal:w}=v,S=new $(_.x,_.y,0).unproject(x),T=C=>{var L,D;return(L=(D=w.capturedMap.get(C))==null?void 0:D.has(g.eventObject))!=null?L:!1},E=C=>{const L={intersection:g,target:u.target};w.capturedMap.has(C)?w.capturedMap.get(C).set(g.eventObject,L):w.capturedMap.set(C,new Map([[g.eventObject,L]])),u.target.setPointerCapture(C)},R=C=>{const L=w.capturedMap.get(C);L&&Kz(w.capturedMap,g.eventObject,L,C)};let b={};for(let C in u){let L=u[C];typeof L!="function"&&(b[C]=L)}let M={...g,...b,pointer:_,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:S,ray:y.ray,camera:x,stopPropagation(){const C="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!C||C.has(g.eventObject))&&(M.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(L=>L.eventObject===g.eventObject))){const L=l.slice(0,l.indexOf(g));s([...L,g])}},target:{hasPointerCapture:T,setPointerCapture:E,releasePointerCapture:R},currentTarget:{hasPointerCapture:T,setPointerCapture:E,releasePointerCapture:R},nativeEvent:u};if(f(M),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const d=c.eventObject.__r3f,m=d==null?void 0:d.handlers;if(u.hovered.delete(Cy(c)),d!=null&&d.eventCount){const g={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))}}return function(c){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=c;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,m?t:void 0),_=g?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=y.map(w=>w.eventObject)),g&&!y.length&&_<=2&&(o(c,d.interaction),f&&f(c)),m&&s(y);function x(w){const S=w.eventObject,T=S.__r3f,E=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const R=Cy(w),b=d.hovered.get(R);b?b.stopped&&w.stopPropagation():(d.hovered.set(R,w),E.onPointerOver==null||E.onPointerOver(w),E.onPointerEnter==null||E.onPointerEnter(w))}E.onPointerMove==null||E.onPointerMove(w)}else{const R=E[l];R?(!g||d.initialHits.includes(S))&&(o(c,d.interaction.filter(b=>!d.initialHits.includes(b))),R(w)):g&&d.initialHits.includes(S)&&o(c,d.interaction.filter(b=>!d.initialHits.includes(b)))}}i(y,c,_,x)}}return{handlePointer:a}}let RA={},S0=n=>void(RA={...RA,...n});function Kq(n,e){function t(c,{args:f=[],attach:d,...m},g){let v=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;y=bd(_,{type:c,root:g,attach:d,primitive:!0})}else{const _=RA[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=bd(new _(...f),{type:c,root:g,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof jt?y.__r3f.attach="geometry":y instanceof Xn&&(y.__r3f.attach="material")),v!=="inject"&&US(y,m),y}function r(c,f){let d=!1;if(f){var m,g;(m=f.__r3f)!=null&&m.attach?OS(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),d=!0),d||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||bd(f,{}),f.__r3f.parent=c,PA(f),Ad(f)}}function i(c,f,d){let m=!1;if(f){var g,v;if((g=f.__r3f)!=null&&g.attach)OS(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const y=c.children.filter(x=>x!==f),_=y.indexOf(d);c.children=[...y.slice(0,_),f,...y.slice(_)],m=!0}m||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||bd(f,{}),f.__r3f.parent=c,PA(f),Ad(f)}}function s(c,f,d=!1){c&&[...c].forEach(m=>o(f,m,d))}function o(c,f,d){if(f){var m,g,v;if(f.__r3f&&(f.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(S=>S!==f)),(g=f.__r3f)!=null&&g.attach)TI(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&$q(f.__r3f.root,f)}const x=(v=f.__r3f)==null?void 0:v.primitive,w=d===void 0?f.dispose!==null&&!x:d;if(!x){var _;s((_=f.__r3f)==null?void 0:_.objects,f,w),s(f.children,f,w)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,x||delete f.__r3f),w&&f.dispose&&f.type!=="Scene"&&CA.unstable_scheduleCallback(CA.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Ad(c)}}function a(c,f,d,m){var g;const v=(g=c.__r3f)==null?void 0:g.parent;if(!v)return;const y=t(f,d,c.__r3f.root);if(c.children){for(const _ of c.children)_.__r3f&&r(y,_);c.children=c.children.filter(_=>!_.__r3f)}c.__r3f.objects.forEach(_=>r(y,_)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=y,_.ref&&(typeof _.ref=="function"?_.ref(y):_.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Fq({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,d)=>{if(!f||!d)return;const m=c.getState().scene;m.__r3f&&i(m,f,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,d,m){if(c.__r3f.primitive&&m.object&&m.object!==c)return[!0];{const{args:g=[],children:v,...y}=m,{args:_=[],children:x,...w}=d;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((T,E)=>T!==_[E]))return[!0];const S=$z(c,y,w,!0);return S.changes.length?[!1,S]:null}},commitUpdate(c,[f,d],m,g,v,y){f?a(c,m,v,y):US(c,d)},commitMount(c,f,d,m){var g;const v=(g=c.__r3f)!=null?g:{};c.raycast&&v.handlers&&v.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>bd(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:d,parent:m}=(f=c.__r3f)!=null?f:{};d&&m&&TI(m,c,d),c.isObject3D&&(c.visible=!1),Ad(c)},unhideInstance(c,f){var d;const{attach:m,parent:g}=(d=c.__r3f)!=null?d:{};m&&g&&OS(g,c,m),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),Ad(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Hd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&qn.fun(performance.now)?performance.now:qn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:qn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:qn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:US}}const Jq=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Jz=n=>!!(n!=null&&n.render),XC=B.createContext(null),Yq=(n,e)=>{const t=$C((a,l)=>{const u=new $,c=new $,f=new $;function d(_=l().camera,x=c,w=l().size){const{width:S,height:T,top:E,left:R}=w,b=S/T;x instanceof $?f.copy(x):f.set(...x);const M=_.getWorldPosition(u).distanceTo(f);if(Gz(_))return{width:S/_.zoom,height:T/_.zoom,top:E,left:R,factor:1,distance:M,aspect:b};{const C=_.fov*Math.PI/180,L=2*Math.tan(C/2)*M,D=L*(S/T);return{width:D,height:L,top:E,left:R,factor:S/D,distance:M,aspect:b}}}let m;const g=_=>a(x=>({performance:{...x.performance,current:_}})),v=new De;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(_=1)=>n(l(),_),advance:(_,x)=>e(_,x,l()),legacy:!1,linear:!1,flat:!1,scene:bd(new vf),controls:null,clock:new HC,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:_=>a(x=>({...x,events:{...x.events,..._}})),setSize:(_,x,w,S,T)=>{const E=l().camera,R={width:_,height:x,top:S||0,left:T||0,updateStyle:w};a(b=>({size:R,viewport:{...b.viewport,...d(E,c,R)}}))},setDpr:_=>a(x=>{const w=jz(_);return{viewport:{...x.viewport,dpr:w,initialDpr:x.viewport.initialDpr||w}}}),setFrameloop:(_="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,_!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,x,w)=>{const S=l().internal;return S.priority=S.priority+(x>0?1:0),S.subscribers.push({ref:_,priority:x,store:w}),S.subscribers=S.subscribers.sort((T,E)=>T.priority-E.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(x>0?1:0),T.subscribers=T.subscribers.filter(E=>E.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l!==i||u.dpr!==s){var d;i=l,s=u.dpr,Xz(a,l),c.setPixelRatio(u.dpr);const m=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Ty,Zq=new Set,Qq=new Set,qq=new Set;function NS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zp(n,e){switch(n){case"before":return NS(Zq,e);case"after":return NS(Qq,e);case"tail":return NS(qq,e)}}let zS,GS;function HS(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),zS=e.internal.subscribers,Ty=0;Ty<zS.length;Ty++)GS=zS[Ty],GS.ref.current(GS.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function eee(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Zp("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=HS(l,i))}if(Zp("after",l),t===0)return Zp("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(f=>o(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,f){if(u&&Zp("before",l),c)HS(l,c,f);else for(const d of n.values())HS(l,d.store.getState());u&&Zp("after",l)}return{loop:s,invalidate:o,advance:a}}function KC(){const n=B.useContext(XC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Bn(n=t=>t,e){return KC()(n,e)}function fi(n,e=0){const t=KC(),r=t.getState().internal.subscribe,i=Hz(n);return w0(()=>r(i,e,t),[e,r,t]),null}function Yz(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Vq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function _l(n,e,t,r){const i=Array.isArray(e)?e:[e],s=kq(Yz(t,r),[n,...i],{equal:qn.equ});return Array.isArray(e)?s:s[0]}_l.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Oq(Yz(t),[n,...r])};_l.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Uq([n,...t])};const Ah=new Map,{invalidate:PI,advance:RI}=eee(Ah),{reconciler:Og,applyProps:Vd}=Kq(Ah,jq),Qp={objects:"shallow",strict:!1},tee=(n,e)=>{const t=typeof n=="function"?n(e):n;return Jz(t)?t:new o0({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function nee(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function ree(n){const e=Ah.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Yq(PI,RI),o=t||Og.createContainer(s,Hd.ConcurrentRoot,null,!1,null,"",i,null);e||Ah.set(n,{fiber:o,store:s});let a,l=!1;return{configure(u={}){let{gl:c,size:f,events:d,onCreated:m,shadows:g=!1,linear:v=!1,flat:y=!1,legacy:_=!1,orthographic:x=!1,frameloop:w="always",dpr:S=[1,2],performance:T,raycaster:E,camera:R,onPointerMissed:b}=u,M=s.getState(),C=M.gl;M.gl||M.set({gl:C=tee(c,n)});let L=M.raycaster;L||M.set({raycaster:L=new jC});const{params:D,...z}=E||{};if(qn.equ(z,L,Qp)||Vd(L,{...z}),qn.equ(D,L.params,Qp)||Vd(L,{params:{...L.params,...D}}),!M.camera){const V=R instanceof Hh,K=V?R:x?new po(0,0,0,0,.1,1e3):new Un(75,0,.1,1e3);V||(K.position.z=5,R&&Vd(K,R),R!=null&&R.rotation||K.lookAt(0,0,0)),M.set({camera:K})}if(!M.xr){const V=(J,W)=>{const ne=s.getState();ne.frameloop!=="never"&&RI(J,!0,ne,W)},K=()=>{const J=s.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?V:null),J.gl.xr.isPresenting||PI(J)},j={connect(){const J=s.getState().gl;J.xr.addEventListener("sessionstart",K),J.xr.addEventListener("sessionend",K)},disconnect(){const J=s.getState().gl;J.xr.removeEventListener("sessionstart",K),J.xr.removeEventListener("sessionend",K)}};C.xr&&j.connect(),M.set({xr:j})}if(C.shadowMap){const V=C.shadowMap.enabled,K=C.shadowMap.type;if(C.shadowMap.enabled=!!g,qn.boo(g))C.shadowMap.type=zm;else if(qn.str(g)){var F;const j={basic:nN,percentage:tx,soft:zm,variance:Vc};C.shadowMap.type=(F=j[g])!=null?F:zm}else qn.obj(g)&&Object.assign(C.shadowMap,g);(V!==C.shadowMap.enabled||K!==C.shadowMap.type)&&(C.shadowMap.needsUpdate=!0)}Sd&&("enabled"in Sd?Sd.enabled=!_:"legacyMode"in Sd&&(Sd.legacyMode=_));const H=v?Wo:Nt,G=y?No:YE;C.outputEncoding!==H&&(C.outputEncoding=H),C.toneMapping!==G&&(C.toneMapping=G),M.legacy!==_&&M.set(()=>({legacy:_})),M.linear!==v&&M.set(()=>({linear:v})),M.flat!==y&&M.set(()=>({flat:y})),c&&!qn.fun(c)&&!Jz(c)&&!qn.equ(c,C,Qp)&&Vd(C,c),d&&!M.events.handlers&&M.set({events:d(s)});const te=nee(n,f);return qn.equ(te,M.size,Qp)||M.setSize(te.width,te.height,te.updateStyle,te.top,te.left),S&&M.viewport.dpr!==jz(S)&&M.setDpr(S),M.frameloop!==w&&M.setFrameloop(w),M.onPointerMissed||M.set({onPointerMissed:b}),T&&!qn.equ(T,M.performance,Qp)&&M.set(V=>({performance:{...V.performance,...T}})),a=m,l=!0,this},render(u){return l||this.configure(),Og.updateContainer(B.createElement(iee,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Zz(n)}}}function iee({store:n,children:e,onCreated:t,rootElement:r}){return w0(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),B.createElement(XC.Provider,{value:n},e)}function Zz(n,e){const t=Ah.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Og.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Wq(i),Ah.delete(n),e&&e(n)}catch{}},500)})}}function see(n,e,t){return B.createElement(oee,{key:e.uuid,children:n,container:e,state:t})}function oee({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=KC(),[a]=B.useState(()=>new jC),[l]=B.useState(()=>new De),u=B.useCallback((f,d)=>{const m={...f};Object.keys(f).forEach(v=>{(Jq.includes(v)||f[v]!==d[v]&&d[v])&&delete m[v]});let g;if(d&&i){const v=d.camera;g=f.viewport.getCurrentViewport(v,new $,i),v!==f.camera&&Xz(v,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...g},...s}},[n]),[c]=B.useState(()=>{const f=o.getState();return $C((m,g)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:g,setEvents:v=>m(y=>({...y,events:{...y.events,...v}}))}))});return B.useEffect(()=>{const f=o.subscribe(d=>c.setState(m=>u(d,m)));return()=>{f(),c.destroy()}},[]),B.useEffect(()=>{c.setState(f=>u(o.getState(),f))},[u]),B.createElement(B.Fragment,null,Og.createPortal(B.createElement(XC.Provider,{value:c},e),c,null))}Og.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});function BA(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}BA.debounce=BA;var aee=BA;const BI=$o(aee);function lee(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=B.useRef(!1);B.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,m,g]=B.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:w,top:S,width:T,height:E,bottom:R,right:b,x:M,y:C}=l.current.element.getBoundingClientRect(),L={left:w,top:S,width:T,height:E,bottom:R,right:b,x:M,y:C};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),f.current&&!dee(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[x,c?BI(x,c):x,u?BI(x,u):x]},[a,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",g,{capture:!0,passive:!0})))}const _=x=>{!x||x===l.current.element||(v(),l.current.element=x,l.current.scrollContainers=Qz(x),y())};return cee(g,!!t),uee(m),B.useEffect(()=>{v(),y()},[t,g,m]),B.useEffect(()=>v,[]),[_,o,d]}function uee(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function cee(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Qz(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Qz(n.parentElement)]}const fee=["x","y","top","bottom","left","right","width","height"],dee=(n,e)=>fee.every(t=>n[t]===e[t]);var hee=Object.defineProperty,pee=Object.defineProperties,mee=Object.getOwnPropertyDescriptors,II=Object.getOwnPropertySymbols,gee=Object.prototype.hasOwnProperty,vee=Object.prototype.propertyIsEnumerable,DI=(n,e,t)=>e in n?hee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,LI=(n,e)=>{for(var t in e||(e={}))gee.call(e,t)&&DI(n,t,e[t]);if(II)for(var t of II(e))vee.call(e,t)&&DI(n,t,e[t]);return n},yee=(n,e)=>pee(n,mee(e));function qz(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=qz(r,e,t);if(i)return i;r=e?null:r.sibling}}function e5(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const JC=e5(B.createContext(null));class t5 extends B.Component{render(){return B.createElement(JC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:_ee,ReactCurrentDispatcher:xee}=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function wee(){const n=B.useContext(JC);if(!n)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{var r;return(r=_ee.current)!=null?r:qz(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function See(){var n,e;const t=wee(),[r]=B.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==JC&&!r.has(s)&&r.set(s,(e=xee.current)==null?void 0:e.readContext(e5(s))),i=i.return}return B.useMemo(()=>Array.from(r.keys()).reduce((s,o)=>a=>B.createElement(s,null,B.createElement(o.Provider,yee(LI({},a),{value:r.get(o)}))),s=>B.createElement(t5,LI({},s))),[r])}const VS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function bee(n){const{handlePointer:e}=Xq(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(VS).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=VS[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=VS[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Aee=B.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=bee,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:x,onPointerMissed:w,onCreated:S,...T},E){B.useMemo(()=>S0(EA),[]);const R=See(),[b,M]=lee({scroll:!0,debounce:{scroll:50,resize:0},...r}),C=B.useRef(null),L=B.useRef(null),[D,z]=B.useState(null);B.useImperativeHandle(E,()=>C.current);const F=Hz(w),[H,G]=B.useState(!1),[te,V]=B.useState(!1);if(H)throw H;if(te)throw te;const K=B.useRef(null);M.width>0&&M.height>0&&D&&(K.current||(K.current=ree(D)),K.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:d,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:x,size:M,onPointerMissed:(...J)=>F.current==null?void 0:F.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(a?zq(a)?a.current:a:L.current),l&&J.setEvents({compute:(W,ne)=>{const ue=W[l+"X"],q=W[l+"Y"];ne.pointer.set(ue/ne.size.width*2-1,-(q/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),S==null||S(J)}}),K.current.render(B.createElement(R,null,B.createElement(Vz,{set:V},B.createElement(B.Suspense,{fallback:B.createElement(Gq,{set:G})},e))))),w0(()=>{z(C.current)},[]),B.useEffect(()=>{if(D)return()=>Zz(D)},[D]);const j=a?"none":"auto";return B.createElement("div",tn({ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...i}},T),B.createElement("div",{ref:b,style:{width:"100%",height:"100%"}},B.createElement("canvas",{ref:C,style:{display:"block"}},t)))}),YC=B.forwardRef(function(e,t){return B.createElement(t5,null,B.createElement(Aee,tn({},e,{ref:t})))}),b0=new $,ZC=new $,Mee=new $,FI=new De;function Eee(n,e,t){const r=b0.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function Cee(n,e){const t=b0.setFromMatrixPosition(n.matrixWorld),r=ZC.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(Mee);return i.angleTo(s)>Math.PI/2}function Tee(n,e,t,r){const i=b0.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),FI.set(s.x,s.y),t.setFromCamera(FI,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function Pee(n,e){if(e instanceof po)return e.zoom;if(e instanceof Un){const t=b0.setFromMatrixPosition(n.matrixWorld),r=ZC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function Ree(n,e,t){if(e instanceof Un||e instanceof po){const r=b0.setFromMatrixPosition(n.matrixWorld),i=ZC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const IA=n=>Math.abs(n)<1e-10?0:n;function n5(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=IA(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const Bee=(n=>e=>n5(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Iee=(n=>(e,t)=>n5(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Dee(n){return n&&typeof n=="object"&&"current"in n}const Lee=B.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:f,onOcclude:d,castShadow:m,receiveShadow:g,material:v,geometry:y,zIndexRange:_=[16777271,0],calculatePosition:x=Eee,as:w="div",wrapperClass:S,pointerEvents:T="auto",...E},R)=>{const{gl:b,camera:M,scene:C,size:L,raycaster:D,events:z,viewport:F}=Bn(),[H]=B.useState(()=>document.createElement(w)),G=B.useRef(),te=B.useRef(null),V=B.useRef(0),K=B.useRef([0,0]),j=B.useRef(null),J=B.useRef(null),W=(a==null?void 0:a.current)||z.connected||b.domElement.parentNode,ne=B.useRef(null),ue=B.useRef(!1),q=B.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&Dee(f[0]),[f]);B.useLayoutEffect(()=>{const X=b.domElement;f&&f==="blending"?(X.style.zIndex=`${Math.floor(_[0]/2)}`,X.style.position="absolute",X.style.pointerEvents="none"):(X.style.zIndex=null,X.style.position=null,X.style.pointerEvents=null)},[f]),B.useLayoutEffect(()=>{if(te.current){const X=G.current=kU(H);if(C.updateMatrixWorld(),c)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Z=x(te.current,M,L);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Z[0]}px,${Z[1]}px,0);transform-origin:0 0;`}return W&&(i?W.prepend(H):W.appendChild(H)),()=>{W&&W.removeChild(H),X.unmount()}}},[W,c]),B.useLayoutEffect(()=>{S&&(H.className=S)},[S]);const pe=B.useMemo(()=>c?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,o,L,c]),me=B.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);B.useLayoutEffect(()=>{if(ue.current=!1,c){var X;(X=G.current)==null||X.render(B.createElement("div",{ref:j,style:pe},B.createElement("div",{ref:J,style:me},B.createElement("div",{ref:R,className:r,style:t,children:n}))))}else{var Z;(Z=G.current)==null||Z.render(B.createElement("div",{ref:R,style:pe,className:r,children:n}))}});const se=B.useRef(!0);fi(X=>{if(te.current){M.updateMatrixWorld(),te.current.updateWorldMatrix(!0,!1);const Z=c?K.current:x(te.current,M,L);if(c||Math.abs(V.current-M.zoom)>e||Math.abs(K.current[0]-Z[0])>e||Math.abs(K.current[1]-Z[1])>e){const ee=Cee(te.current,M);let ie=!1;q&&(Array.isArray(f)?ie=f.map(Ve=>Ve.current):f!=="blending"&&(ie=[C]));const ge=se.current;if(ie){const Ve=Tee(te.current,M,D,ie);se.current=Ve&&!ee}else se.current=!ee;ge!==se.current&&(d?d(!se.current):H.style.display=se.current?"block":"none");const Ce=Math.floor(_[0]/2),Te=f?q?[_[0],Ce]:[Ce-1,0]:_;if(H.style.zIndex=`${Ree(te.current,M,Te)}`,c){const[Ve,Re]=[L.width/2,L.height/2],ze=M.projectionMatrix.elements[5]*Re,{isOrthographicCamera:je,top:be,left:Q,bottom:O,right:fe}=M,we=Bee(M.matrixWorldInverse),Ne=je?`scale(${ze})translate(${IA(-(fe+Q)/2)}px,${IA((be+O)/2)}px)`:`translateZ(${ze}px)`;let Pe=te.current.matrixWorld;u&&(Pe=M.matrixWorldInverse.clone().transpose().copyPosition(Pe).scale(te.current.scale),Pe.elements[3]=Pe.elements[7]=Pe.elements[11]=0,Pe.elements[15]=1),H.style.width=L.width+"px",H.style.height=L.height+"px",H.style.perspective=je?"":`${ze}px`,j.current&&J.current&&(j.current.style.transform=`${Ne}${we}translate(${Ve}px,${Re}px)`,J.current.style.transform=Iee(Pe,1/((l||10)/400)))}else{const Ve=l===void 0?1:Pee(te.current,M)*l;H.style.transform=`translate3d(${Z[0]}px,${Z[1]}px,0) scale(${Ve})`}K.current=Z,V.current=M.zoom}}if(!q&&ne.current&&!ue.current)if(c){if(j.current){const Z=j.current.children[0];if(Z!=null&&Z.clientWidth&&Z!=null&&Z.clientHeight){const{isOrthographicCamera:ee}=M;if(ee||y)E.scale&&(Array.isArray(E.scale)?E.scale instanceof $?ne.current.scale.copy(E.scale.clone().divideScalar(1)):ne.current.scale.set(1/E.scale[0],1/E.scale[1],1/E.scale[2]):ne.current.scale.setScalar(1/E.scale));else{const ie=(l||10)/400,ge=Z.clientWidth*ie,Ce=Z.clientHeight*ie;ne.current.scale.set(ge,Ce,1)}ue.current=!0}}}else{const Z=H.children[0];if(Z!=null&&Z.clientWidth&&Z!=null&&Z.clientHeight){const ee=1/F.factor,ie=Z.clientWidth*ee,ge=Z.clientHeight*ee;ne.current.scale.set(ie,ge,1),ue.current=!0}ne.current.lookAt(X.camera.position)}});const N=B.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return B.createElement("group",tn({},E,{ref:te}),f&&!q&&B.createElement("mesh",{castShadow:m,receiveShadow:g,ref:ne},y||B.createElement("planeGeometry",null),v||B.createElement("shaderMaterial",{side:qr,vertexShader:N.vertexShader,fragmentShader:N.fragmentShader})))}),kI=n=>{let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const d=e;e=c??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,d))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=n(r,i,a);return a},Fee=n=>n?kI(n):kI,kee=n=>n;function Oee(n,e=kee){const t=he.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return he.useDebugValue(t),t}const OI=n=>{const e=Fee(n),t=r=>Oee(e,r);return Object.assign(t,e),t},Uee=n=>n?OI(n):OI;let qp=0;const r5=Uee(n=>(Gd.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-qp)/(r-qp)*100})},Gd.onLoad=()=>{n({active:!1})},Gd.onError=e=>n(t=>({errors:[...t.errors,e]})),Gd.onProgress=(e,t,r)=>{t===r&&(qp=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-qp)/(r-qp)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Nee(n,e,t){return Math.max(e,Math.min(n,t))}const Ai={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function UI(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function NI(n,e,t,r=.15){return r===0?Nee(n,e,t):n<e?-UI(e-n,t-e,r)+e:n>t?+UI(n-t,t-e,r)+t:n}function zee(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[NI(e,s,o,r),NI(t,a,l,i)]}function Gee(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Hee(n){var e=Gee(n,"string");return typeof e=="symbol"?e:String(e)}function qi(n,e,t){return e=Hee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ir(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zI(Object(t),!0).forEach(function(r){qi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const i5={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function GI(n){return n?n[0].toUpperCase()+n.slice(1):""}const Vee=["enter","leave"];function Wee(n=!1,e){return n&&!Vee.includes(e)}function jee(n,e="",t=!1){const r=i5[n],i=r&&r[e]||e;return"on"+GI(n)+GI(i)+(Wee(t,i)?"Capture":"")}const $ee=["gotpointercapture","lostpointercapture"];function Xee(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=$ee.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function Kee(n,e=""){const t=i5[n],r=t&&t[e]||e;return n+r}function xx(n){return"touches"in n}function s5(n){return xx(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Jee(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function Yee(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function o5(n){return xx(n)?Yee(n)[0]:n}function Zee(n){return Jee(n).map(e=>e.identifier)}function WS(n){const e=o5(n);return xx(n)?e.identifier:e.pointerId}function HI(n){const e=o5(n);return[e.clientX,e.clientY]}function Qee(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function s_(n,...e){return typeof n=="function"?n(...e):n}function qee(){}function ete(...n){return n.length===0?qee:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function VI(n,e){return Object.assign({},e,n||{})}const tte=32;class nte{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?s_(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Qee(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const E=t._delta.map(Math.abs);Ai.addTo(t._distance,E)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[E,R]=f;d[0]=c[0]!==!1?E-c[0]:0,d[1]=c[1]!==!1?R-c[1]:0}else d[0]=c[0]!==!1?o-c[0]:0,d[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const m=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=s_(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,y]=t.offset,[[_,x],[w,S]]=t._bounds;t.overflow=[v<_?-1:v>x?1:0,y<w?-1:y>S?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const T=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=zee(t._bounds,t.offset,T),t.delta=Ai.sub(t.offset,m),this.computeMovement(),g&&(!t.last||s>tte)){t.delta=Ai.sub(t.offset,m);const E=t.delta.map(Math.abs);Ai.addTo(t.distance,E),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[E[0]/s,E[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(ir(ir(ir({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function rte([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class ite extends nte{constructor(...e){super(...e),qi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ai.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ai.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[s5(e)]:r.axisThreshold;t.axis=rte(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const ste=n=>n,WI=.15,a5={enabled(n=!0){return n},eventOptions(n,e,t){return ir(ir({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[WI,WI];case!1:return[0,0];default:return Ai.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Ai.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||ste},threshold(n){return Ai.toVector(n,0)}},ote=0,A0=ir(ir({},a5),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=ote){return n},bounds(n={}){if(typeof n=="function")return s=>A0.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),jI={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class ate extends ite{constructor(...e){super(...e),qi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=A0.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=WS(e),r._pointerActive=!0,this.computeValues(HI(e)),this.computeInitial(),t.preventScrollAxis&&s5(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=WS(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=HI(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ai.sub(s,t._values),this.computeValues(s)),Ai.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=WS(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,c]=t._movement,[f,d]=r.swipe.velocity,[m,g]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const y=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);y>f&&Math.abs(u)>m&&(t.swipe[0]=Math.sign(a)),_>d&&Math.abs(c)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,lte(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=jI[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Ai.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in jI&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function lte(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const M0=typeof window<"u"&&window.document&&window.document.createElement;function l5(){return M0&&"ontouchstart"in window}function ute(){return l5()||M0&&window.navigator.maxTouchPoints>1}function cte(){return M0&&"onpointerdown"in window}function fte(){return M0&&"exitPointerLock"in window.document}function dte(){try{return"constructor"in GestureEvent}catch{return!1}}const ro={isBrowser:M0,gesture:dte(),touch:l5(),touchscreen:ute(),pointer:cte(),pointerLock:fte()},hte=250,pte=180,mte=.5,gte=50,vte=250,yte=10,$I={mouse:0,touch:0,pen:8},_te=ir(ir({},A0),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&ro.pointerLock,ro.touch&&t?"touch":this.pointerLock?"mouse":ro.pointer&&!i?"pointer":ro.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?hte:void 0,!(!ro.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Ai.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=mte,distance:e=gte,duration:t=vte}={}){return{velocity:this.transform(Ai.toVector(n)),distance:this.transform(Ai.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return pte;case!1:return 0;default:return n}},axisThreshold(n){return n?ir(ir({},$I),n):$I},keyboardDisplacement(n=yte){return n}});ir(ir({},a5),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!ro.touch&&ro.gesture)return"gesture";if(ro.touch&&r)return"touch";if(ro.touchscreen){if(ro.pointer)return"pointer";if(ro.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=VI(s_(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=VI(s_(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Ai.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});ir(ir({},A0),{},{mouseOnly:(n=!0)=>n});ir(ir({},A0),{},{mouseOnly:(n=!0)=>n});const u5=new Map,DA=new Map;function xte(n){u5.set(n.key,n.engine),DA.set(n.key,n.resolver)}const wte={key:"drag",engine:ate,resolver:_te};function Ste(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function bte(n,e){if(n==null)return{};var t=Ste(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const Ate={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ro.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},Mte=["target","eventOptions","window","enabled","transform"];function x1(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=x1(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function Ete(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=bte(r,Mte);if(t.shared=x1({target:i,eventOptions:s,window:o,enabled:a,transform:l},Ate),e){const c=DA.get(e);t[e]=x1(ir({shared:t.shared},u),c)}else for(const c in u){const f=DA.get(c);f&&(t[c]=x1(ir({shared:t.shared},u[c]),f))}return t}class c5{constructor(e,t){qi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=Kee(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=ir(ir({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Cte{constructor(){qi(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Tte{constructor(e){qi(this,"gestures",new Set),qi(this,"_targetEventStore",new c5(this)),qi(this,"gestureEventStores",{}),qi(this,"gestureTimeoutStores",{}),qi(this,"handlers",{}),qi(this,"config",{}),qi(this,"pointerIds",new Set),qi(this,"touchIds",new Set),qi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Pte(this,e)}setEventIds(e){if(xx(e))return this.touchIds=new Set(Zee(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Ete(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=XI(r,a.eventOptions,!!i);if(a.enabled){const u=u5.get(o);new u(this,e,o).bind(l)}}const s=XI(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](ir(ir({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=ete(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=Xee(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function pd(n,e){n.gestures.add(e),n.gestureEventStores[e]=new c5(n,e),n.gestureTimeoutStores[e]=new Cte}function Pte(n,e){e.drag&&pd(n,"drag"),e.wheel&&pd(n,"wheel"),e.scroll&&pd(n,"scroll"),e.move&&pd(n,"move"),e.pinch&&pd(n,"pinch"),e.hover&&pd(n,"hover")}const XI=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let d=a?r:jee(r,i,c);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)};function Rte(n,e={},t,r){const i=he.useMemo(()=>new Tte(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),he.useEffect(i.effect.bind(i)),he.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Bte(n,e){return xte(wte),Rte({drag:n},e||{},"drag")}function Wm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ite(n,e){if(n){if(typeof n=="string")return LA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LA(n,e)}}function Dte(n){if(Array.isArray(n))return LA(n)}function Lte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(n){return Dte(n)||Lte(n)||Ite(n)||Fte()}new De;new De;function Ote(n,e,t){return Math.max(e,Math.min(t,n))}function Ute(n,e){return Ote(n-Math.floor(n/e)*e,0,e)}function Nte(n,e){var t=Ute(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function f5(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ks=function n(e,t,r){var i=this;f5(this,n),Wm(this,"dot2",function(s,o){return i.x*s+i.y*o}),Wm(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},zte=[new Ks(1,1,0),new Ks(-1,1,0),new Ks(1,-1,0),new Ks(-1,-1,0),new Ks(1,0,1),new Ks(-1,0,1),new Ks(1,0,-1),new Ks(-1,0,-1),new Ks(0,1,1),new Ks(0,-1,1),new Ks(0,1,-1),new Ks(0,-1,-1)],KI=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],JI=new Array(512),YI=new Array(512),Gte=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=KI[t]^e&255:r=KI[t]^e>>8&255,JI[t]=JI[t+256]=r,YI[t]=YI[t+256]=zte[r%12]}};Gte(0);function Hte(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function ZI(n){var e=Hte(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Vte=function n(e){var t=this;f5(this,n),Wm(this,"seed",0),Wm(this,"init",function(r){t.seed=r,t.value=ZI(r)}),Wm(this,"value",ZI(this.seed)),this.init(e)};new Vte(Math.random());var Wte=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*i)/t)},d5=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},jte=function(e){return e},$te={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},Xte={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},Kte={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},Jte={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},Yte={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},Zte={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Gr(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:d5,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;r=Math.max(1e-4,r);var u=2/r,c=o(u*i),f=n[e]-t,d=t,m=s*r;f=Math.min(Math.max(f,-m),m),t=n[e]-f;var g=(n.__damp[l]+u*f)*i;n.__damp[l]=(n.__damp[l]-u*g)*c;var v=t+(f+g)*c;return d-n[e]>0==v>d&&(v=d,n.__damp[l]=(v-d)/i),n[e]=v,!0}var Qte=function(e){return e&&e.isCamera},qte=function(e){return e&&e.isLight},em=new $,QI=new Hn,qI=new Hn,tm=new Et,jS=new $;function ene(n,e,t,r,i,s,o){typeof e=="number"?em.setScalar(e):Array.isArray(e)?em.set(e[0],e[1],e[2]):em.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),jS.setFromMatrixPosition(n.matrixWorld),Qte(n)||qte(n)?tm.lookAt(jS,em,n.up):tm.lookAt(em,jS,n.up),o_(n.quaternion,qI.setFromRotationMatrix(tm),t,r,i,s,o),a&&(tm.extractRotation(a.matrixWorld),QI.setFromRotationMatrix(tm),o_(n.quaternion,qI.copy(n.quaternion).premultiply(QI.invert()),t,r,i,s,o))}function ih(n,e,t,r,i,s,o,a){return Gr(n,e,n[e]+Nte(n[e],t),r,i,s,o,a)}var nm=new De,eD,tD;function tne(n,e,t,r,i,s,o){return typeof e=="number"?nm.setScalar(e):Array.isArray(e)?nm.set(e[0],e[1]):nm.copy(e),eD=Gr(n,"x",nm.x,t,r,i,s,o),tD=Gr(n,"y",nm.y,t,r,i,s,o),eD||tD}var md=new $,nD,rD,iD;function FA(n,e,t,r,i,s,o){return typeof e=="number"?md.setScalar(e):Array.isArray(e)?md.set(e[0],e[1],e[2]):md.copy(e),nD=Gr(n,"x",md.x,t,r,i,s,o),rD=Gr(n,"y",md.y,t,r,i,s,o),iD=Gr(n,"z",md.z,t,r,i,s,o),nD||rD||iD}var wc=new qt,sD,oD,aD,lD;function nne(n,e,t,r,i,s,o){return typeof e=="number"?wc.setScalar(e):Array.isArray(e)?wc.set(e[0],e[1],e[2],e[3]):wc.copy(e),sD=Gr(n,"x",wc.x,t,r,i,s,o),oD=Gr(n,"y",wc.y,t,r,i,s,o),aD=Gr(n,"z",wc.z,t,r,i,s,o),lD=Gr(n,"w",wc.w,t,r,i,s,o),sD||oD||aD||lD}var rm=new Fr,uD,cD,fD;function rne(n,e,t,r,i,s,o){return Array.isArray(e)?rm.set(e[0],e[1],e[2],e[3]):rm.copy(e),uD=ih(n,"x",rm.x,t,r,i,s,o),cD=ih(n,"y",rm.y,t,r,i,s,o),fD=ih(n,"z",rm.z,t,r,i,s,o),uD||cD||fD}var gd=new st,dD,hD,pD;function ine(n,e,t,r,i,s,o){return e instanceof st?gd.copy(e):Array.isArray(e)?gd.setRGB(e[0],e[1],e[2]):gd.set(e),dD=Gr(n,"r",gd.r,t,r,i,s,o),hD=Gr(n,"g",gd.g,t,r,i,s,o),pD=Gr(n,"b",gd.b,t,r,i,s,o),dD||hD||pD}var To=new Hn,Ha=new qt,mD=new qt,im=new qt,gD,vD,yD,_D;function o_(n,e,t,r,i,s,o){var a=n;Array.isArray(e)?To.set(e[0],e[1],e[2],e[3]):To.copy(e);var l=n.dot(To)>0?1:-1;return To.x*=l,To.y*=l,To.z*=l,To.w*=l,gD=Gr(n,"x",To.x,t,r,i,s,o),vD=Gr(n,"y",To.y,t,r,i,s,o),yD=Gr(n,"z",To.z,t,r,i,s,o),_D=Gr(n,"w",To.w,t,r,i,s,o),Ha.set(n.x,n.y,n.z,n.w).normalize(),mD.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),im.copy(Ha).multiplyScalar(mD.dot(Ha)/Ha.dot(Ha)),a.__damp.velocity_x-=im.x,a.__damp.velocity_y-=im.y,a.__damp.velocity_z-=im.z,a.__damp.velocity_w-=im.w,n.set(Ha.x,Ha.y,Ha.z,Ha.w),gD||vD||yD||_D}var sm=new i_,xD,wD,SD;function sne(n,e,t,r,i,s,o){return Array.isArray(e)?sm.set(e[0],e[1],e[2]):sm.copy(e),xD=Gr(n,"radius",sm.radius,t,r,i,s,o),wD=ih(n,"phi",sm.phi,t,r,i,s,o),SD=ih(n,"theta",sm.theta,t,r,i,s,o),xD||wD||SD}var Py=new Et,bD=new $,AD=new Hn,MD=new $,ED,CD,TD;function one(n,e,t,r,i,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new $,rotation:new Hn,scale:new $},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?Py.set.apply(Py,kte(e)):Py.copy(e),Py.decompose(bD,AD,MD),ED=FA(a.__damp.position,bD,t,r,i,s,o),CD=o_(a.__damp.rotation,AD,t,r,i,s,o),TD=FA(a.__damp.scale,MD,t,r,i,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),ED||CD||TD}var PD=Object.freeze({__proto__:null,rsqw:Wte,exp:d5,linear:jte,sine:$te,cubic:Xte,quint:Kte,circ:Jte,quart:Yte,expo:Zte,damp:Gr,dampLookAt:ene,dampAngle:ih,damp2:tne,damp3:FA,damp4:nne,dampE:rne,dampC:ine,dampQ:o_,dampS:sne,dampM:one});const h5=B.createContext(null);function p5(){return B.useContext(h5)}function ane({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:r,pages:i=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,prepend:l=!1,style:u={},children:c}){const{get:f,setEvents:d,gl:m,size:g,invalidate:v,events:y}=Bn(),[_]=B.useState(()=>document.createElement("div")),[x]=B.useState(()=>document.createElement("div")),[w]=B.useState(()=>document.createElement("div")),S=m.domElement.parentNode,T=B.useRef(0),E=B.useMemo(()=>({el:_,eps:n,fill:x,fixed:w,horizontal:r,damping:o,offset:0,delta:0,scroll:T,pages:i,range(M,C,L=0){const D=M-L,z=D+C+L*2;return this.offset<D?0:this.offset>z?1:(this.offset-D)/(z-D)},curve(M,C,L=0){return Math.sin(this.range(M,C,L)*Math.PI)},visible(M,C,L=0){const D=M-L,z=D+C+L*2;return this.offset>=D&&this.offset<=z}}),[n,o,r,i]);B.useEffect(()=>{_.style.position="absolute",_.style.width="100%",_.style.height="100%",_.style[r?"overflowX":"overflowY"]="auto",_.style[r?"overflowY":"overflowX"]="hidden",_.style.top="0px",_.style.left="0px";for(const C in u)_.style[C]=u[C];w.style.position="sticky",w.style.top="0px",w.style.left="0px",w.style.width="100%",w.style.height="100%",w.style.overflow="hidden",_.appendChild(w),x.style.height=r?"100%":`${i*s*100}%`,x.style.width=r?`${i*s*100}%`:"100%",x.style.pointerEvents="none",_.appendChild(x),l?S.prepend(_):S.appendChild(_),_[r?"scrollLeft":"scrollTop"]=1;const b=y.connected||m.domElement;requestAnimationFrame(()=>y.connect==null?void 0:y.connect(_));const M=f().events.compute;return d({compute(C,L){const{left:D,top:z}=S.getBoundingClientRect(),F=C.clientX-D,H=C.clientY-z;L.pointer.set(F/L.size.width*2-1,-(H/L.size.height)*2+1),L.raycaster.setFromCamera(L.pointer,L.camera)}}),()=>{S.removeChild(_),d({compute:M}),y.connect==null||y.connect(b)}},[i,s,r,_,x,w,S]),B.useEffect(()=>{if(y.connected===_){const b=g[r?"width":"height"],M=_[r?"scrollWidth":"scrollHeight"],C=M-b;let L=0,D=!0,z=!0;const F=()=>{if(!(!e||z)&&(v(),L=_[r?"scrollLeft":"scrollTop"],T.current=L/C,t)){if(!D){if(L>=C){const G=1-E.offset;_[r?"scrollLeft":"scrollTop"]=1,T.current=E.offset=-G,D=!0}else if(L<=0){const G=1+E.offset;_[r?"scrollLeft":"scrollTop"]=M,T.current=E.offset=G,D=!0}}D&&setTimeout(()=>D=!1,40)}};_.addEventListener("scroll",F,{passive:!0}),requestAnimationFrame(()=>z=!1);const H=G=>_.scrollLeft+=G.deltaY/2;return r&&_.addEventListener("wheel",H,{passive:!0}),()=>{_.removeEventListener("scroll",F),r&&_.removeEventListener("wheel",H)}}},[_,y,g,t,E,v,r,e]);let R=0;return fi((b,M)=>{R=E.offset,PD.damp(E,"offset",T.current,o,M,a,void 0,n),PD.damp(E,"delta",Math.abs(R-E.offset),o,M,a,void 0,n),E.delta>n&&v()}),B.createElement(h5.Provider,{value:E},c)}let om;function lne(){var n;if(om!==void 0)return om;try{let e;const t=document.createElement("canvas");return om=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),om}catch{return om=!1}}const QC=(()=>parseInt(Ml.replace(/\D+/g,"")))();function RD(n,e){if(e===HN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===n_||e===rC){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===n_)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var so=Uint8Array,au=Uint16Array,kA=Uint32Array,m5=new so([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g5=new so([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),une=new so([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v5=function(n,e){for(var t=new au(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new kA(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},y5=v5(m5,2),_5=y5[0],cne=y5[1];_5[28]=258,cne[258]=28;var fne=v5(g5,0),dne=fne[0],OA=new au(32768);for(var zn=0;zn<32768;++zn){var $l=(zn&43690)>>>1|(zn&21845)<<1;$l=($l&52428)>>>2|($l&13107)<<2,$l=($l&61680)>>>4|($l&3855)<<4,OA[zn]=(($l&65280)>>>8|($l&255)<<8)>>>1}var jm=function(n,e,t){for(var r=n.length,i=0,s=new au(e);i<r;++i)++s[n[i]-1];var o=new au(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new au(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],f=o[n[i]-1]++<<c,d=f|(1<<c)-1;f<=d;++f)a[OA[f]>>>l]=u}else for(a=new au(r),i=0;i<r;++i)n[i]&&(a[i]=OA[o[n[i]-1]++]>>>15-n[i]);return a},E0=new so(288);for(var zn=0;zn<144;++zn)E0[zn]=8;for(var zn=144;zn<256;++zn)E0[zn]=9;for(var zn=256;zn<280;++zn)E0[zn]=7;for(var zn=280;zn<288;++zn)E0[zn]=8;var x5=new so(32);for(var zn=0;zn<32;++zn)x5[zn]=5;var hne=jm(E0,9,1),pne=jm(x5,5,1),$S=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Po=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},XS=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},mne=function(n){return(n/8|0)+(n&7&&1)},gne=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof au?au:n instanceof kA?kA:so)(t-e);return r.set(n.subarray(e,t)),r},vne=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new so(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new so(r*3));var o=function(pe){var me=e.length;if(pe>me){var se=new so(Math.max(me*2,pe));se.set(e),e=se}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,f=t.d,d=t.m,m=t.n,g=r*8;do{if(!c){t.f=a=Po(n,l,1);var v=Po(n,l+1,3);if(l+=3,v)if(v==1)c=hne,f=pne,d=9,m=5;else if(v==2){var w=Po(n,l,31)+257,S=Po(n,l+10,15)+4,T=w+Po(n,l+5,31)+1;l+=14;for(var E=new so(T),R=new so(19),b=0;b<S;++b)R[une[b]]=Po(n,l+b*3,7);l+=S*3;for(var M=$S(R),C=(1<<M)-1,L=jm(R,M,1),b=0;b<T;){var D=L[Po(n,l,C)];l+=D&15;var y=D>>>4;if(y<16)E[b++]=y;else{var z=0,F=0;for(y==16?(F=3+Po(n,l,3),l+=2,z=E[b-1]):y==17?(F=3+Po(n,l,7),l+=3):y==18&&(F=11+Po(n,l,127),l+=7);F--;)E[b++]=z}}var H=E.subarray(0,w),G=E.subarray(w);d=$S(H),m=$S(G),c=jm(H,d,1),f=jm(G,m,1)}else throw"invalid block type";else{var y=mne(l)+4,_=n[y-4]|n[y-3]<<8,x=y+_;if(x>r){if(s)throw"unexpected EOF";break}i&&o(u+_),e.set(n.subarray(y,x),u),t.b=u+=_,t.p=l=x*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var te=(1<<d)-1,V=(1<<m)-1,K=l;;K=l){var z=c[XS(n,l)&te],j=z>>>4;if(l+=z&15,l>g){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(j<256)e[u++]=j;else if(j==256){K=l,c=null;break}else{var J=j-254;if(j>264){var b=j-257,W=m5[b];J=Po(n,l,(1<<W)-1)+_5[b],l+=W}var ne=f[XS(n,l)&V],ue=ne>>>4;if(!ne)throw"invalid distance";l+=ne&15;var G=dne[ue];if(ue>3){var W=g5[ue];G+=XS(n,l)&(1<<W)-1,l+=W}if(l>g){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var q=u+J;u<q;u+=4)e[u]=e[u-G],e[u+1]=e[u+1-G],e[u+2]=e[u+2-G],e[u+3]=e[u+3-G];u=q}}t.l=c,t.p=K,t.b=u,c&&(a=1,t.m=d,t.d=f,t.n=m)}while(!a);return u==e.length?e:gne(e,0,u)},yne=new so(0),_ne=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ry(n,e){return vne((_ne(n),n.subarray(2,-4)),e)}var xne=typeof TextDecoder<"u"&&new TextDecoder,wne=0;try{xne.decode(yne,{stream:!0}),wne=1}catch{}const Sne=n=>n&&n.isCubeTexture;class bne extends Ln{constructor(e,t){var r,i;const s=Sne(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),f=4*u,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${QC>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new jh(1,16),_=new pr({uniforms:v,fragmentShader:g,vertexShader:m,side:qr});super(y,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ane=Object.defineProperty,Mne=(n,e,t)=>e in n?Ane(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ene=(n,e,t)=>(Mne(n,typeof e!="symbol"?e+"":e,t),t);class Cne{constructor(){Ene(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var Tne=Object.defineProperty,Pne=(n,e,t)=>e in n?Tne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dt=(n,e,t)=>(Pne(n,typeof e!="symbol"?e+"":e,t),t);const By=new Gh,BD=new Ja,Rne=Math.cos(70*(Math.PI/180)),ID=(n,e)=>(n%e+e)%e;let Bne=class extends Cne{constructor(e,t){super(),Dt(this,"object"),Dt(this,"domElement"),Dt(this,"enabled",!0),Dt(this,"target",new $),Dt(this,"minDistance",0),Dt(this,"maxDistance",1/0),Dt(this,"minZoom",0),Dt(this,"maxZoom",1/0),Dt(this,"minPolarAngle",0),Dt(this,"maxPolarAngle",Math.PI),Dt(this,"minAzimuthAngle",-1/0),Dt(this,"maxAzimuthAngle",1/0),Dt(this,"enableDamping",!1),Dt(this,"dampingFactor",.05),Dt(this,"enableZoom",!0),Dt(this,"zoomSpeed",1),Dt(this,"enableRotate",!0),Dt(this,"rotateSpeed",1),Dt(this,"enablePan",!0),Dt(this,"panSpeed",1),Dt(this,"screenSpacePanning",!0),Dt(this,"keyPanSpeed",7),Dt(this,"zoomToCursor",!1),Dt(this,"autoRotate",!1),Dt(this,"autoRotateSpeed",2),Dt(this,"reverseOrbit",!1),Dt(this,"reverseHorizontalOrbit",!1),Dt(this,"reverseVerticalOrbit",!1),Dt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Dt(this,"mouseButtons",{LEFT:Ic.ROTATE,MIDDLE:Ic.DOLLY,RIGHT:Ic.PAN}),Dt(this,"touches",{ONE:Dc.ROTATE,TWO:Dc.DOLLY_PAN}),Dt(this,"target0"),Dt(this,"position0"),Dt(this,"zoom0"),Dt(this,"_domElementKeyEvents",null),Dt(this,"getPolarAngle"),Dt(this,"getAzimuthalAngle"),Dt(this,"setPolarAngle"),Dt(this,"setAzimuthalAngle"),Dt(this,"getDistance"),Dt(this,"getZoomScale"),Dt(this,"listenToKeyEvents"),Dt(this,"stopListenToKeyEvents"),Dt(this,"saveState"),Dt(this,"reset"),Dt(this,"update"),Dt(this,"connect"),Dt(this,"dispose"),Dt(this,"dollyIn"),Dt(this,"dollyOut"),Dt(this,"getScale"),Dt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ce=>{let Le=ID(ce,2*Math.PI),Qe=c.phi;Qe<0&&(Qe+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let de=Math.abs(Le-Qe);2*Math.PI-de<de&&(Le<Qe?Le+=2*Math.PI:Qe+=2*Math.PI),f.phi=Le-Qe,r.update()},this.setAzimuthalAngle=ce=>{let Le=ID(ce,2*Math.PI),Qe=c.theta;Qe<0&&(Qe+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let de=Math.abs(Le-Qe);2*Math.PI-de<de&&(Le<Qe?Le+=2*Math.PI:Qe+=2*Math.PI),f.theta=Le-Qe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ce=>{ce.addEventListener("keydown",$e),this._domElementKeyEvents=ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",$e),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const ce=new $,Le=new $(0,1,0),Qe=new Hn().setFromUnitVectors(e.up,Le),de=Qe.clone().invert(),ae=new $,ke=new Hn,at=2*Math.PI;return function(){const mt=r.object.position;Qe.setFromUnitVectors(e.up,Le),de.copy(Qe).invert(),ce.copy(mt).sub(r.target),ce.applyQuaternion(Qe),c.setFromVector3(ce),r.autoRotate&&l===a.NONE&&F(D()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let Tt=r.minAzimuthAngle,Pt=r.maxAzimuthAngle;isFinite(Tt)&&isFinite(Pt)&&(Tt<-Math.PI?Tt+=at:Tt>Math.PI&&(Tt-=at),Pt<-Math.PI?Pt+=at:Pt>Math.PI&&(Pt-=at),Tt<=Pt?c.theta=Math.max(Tt,Math.min(Pt,c.theta)):c.theta=c.theta>(Tt+Pt)/2?Math.max(Tt,c.theta):Math.min(Pt,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&M||r.object.isOrthographicCamera?c.radius=ne(c.radius):c.radius=ne(c.radius*d),ce.setFromSpherical(c),ce.applyQuaternion(de),mt.copy(r.target).add(ce),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let _t=!1;if(r.zoomToCursor&&M){let At=null;if(r.object instanceof Un&&r.object.isPerspectiveCamera){const Yt=ce.length();At=ne(Yt*d);const rn=Yt-At;r.object.position.addScaledVector(R,rn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Yt=new $(b.x,b.y,0);Yt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),_t=!0;const rn=new $(b.x,b.y,0);rn.unproject(r.object),r.object.position.sub(rn).add(Yt),r.object.updateMatrixWorld(),At=ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;At!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(At).add(r.object.position):(By.origin.copy(r.object.position),By.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(By.direction))<Rne?e.lookAt(r.target):(BD.setFromNormalAndCoplanarPoint(r.object.up,r.target),By.intersectPlane(BD,r.target))))}else r.object instanceof po&&r.object.isOrthographicCamera&&(_t=d!==1,_t&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,M=!1,_t||ae.distanceToSquared(r.object.position)>u||8*(1-ke.dot(r.object.quaternion))>u?(r.dispatchEvent(i),ae.copy(r.object.position),ke.copy(r.object.quaternion),_t=!1,!0):!1}})(),this.connect=ce=>{r.domElement=ce,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",rt),r.domElement.addEventListener("pointerdown",Q),r.domElement.addEventListener("pointercancel",fe),r.domElement.addEventListener("wheel",Pe)},this.dispose=()=>{var ce,Le,Qe,de,ae,ke;r.domElement&&(r.domElement.style.touchAction="auto"),(ce=r.domElement)==null||ce.removeEventListener("contextmenu",rt),(Le=r.domElement)==null||Le.removeEventListener("pointerdown",Q),(Qe=r.domElement)==null||Qe.removeEventListener("pointercancel",fe),(de=r.domElement)==null||de.removeEventListener("wheel",Pe),(ae=r.domElement)==null||ae.ownerDocument.removeEventListener("pointermove",O),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointerup",fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",$e)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new i_,f=new i_;let d=1;const m=new $,g=new De,v=new De,y=new De,_=new De,x=new De,w=new De,S=new De,T=new De,E=new De,R=new $,b=new De;let M=!1;const C=[],L={};function D(){return 2*Math.PI/60/60*r.autoRotateSpeed}function z(){return Math.pow(.95,r.zoomSpeed)}function F(ce){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=ce:f.theta-=ce}function H(ce){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=ce:f.phi-=ce}const G=(()=>{const ce=new $;return function(Qe,de){ce.setFromMatrixColumn(de,0),ce.multiplyScalar(-Qe),m.add(ce)}})(),te=(()=>{const ce=new $;return function(Qe,de){r.screenSpacePanning===!0?ce.setFromMatrixColumn(de,1):(ce.setFromMatrixColumn(de,0),ce.crossVectors(r.object.up,ce)),ce.multiplyScalar(Qe),m.add(ce)}})(),V=(()=>{const ce=new $;return function(Qe,de){const ae=r.domElement;if(ae&&r.object instanceof Un&&r.object.isPerspectiveCamera){const ke=r.object.position;ce.copy(ke).sub(r.target);let at=ce.length();at*=Math.tan(r.object.fov/2*Math.PI/180),G(2*Qe*at/ae.clientHeight,r.object.matrix),te(2*de*at/ae.clientHeight,r.object.matrix)}else ae&&r.object instanceof po&&r.object.isOrthographicCamera?(G(Qe*(r.object.right-r.object.left)/r.object.zoom/ae.clientWidth,r.object.matrix),te(de*(r.object.top-r.object.bottom)/r.object.zoom/ae.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function K(ce){r.object instanceof Un&&r.object.isPerspectiveCamera||r.object instanceof po&&r.object.isOrthographicCamera?d=ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(ce){K(d/ce)}function J(ce){K(d*ce)}function W(ce){if(!r.zoomToCursor||!r.domElement)return;M=!0;const Le=r.domElement.getBoundingClientRect(),Qe=ce.clientX-Le.left,de=ce.clientY-Le.top,ae=Le.width,ke=Le.height;b.x=Qe/ae*2-1,b.y=-(de/ke)*2+1,R.set(b.x,b.y,1).unproject(r.object).sub(r.object.position).normalize()}function ne(ce){return Math.max(r.minDistance,Math.min(r.maxDistance,ce))}function ue(ce){g.set(ce.clientX,ce.clientY)}function q(ce){W(ce),S.set(ce.clientX,ce.clientY)}function pe(ce){_.set(ce.clientX,ce.clientY)}function me(ce){v.set(ce.clientX,ce.clientY),y.subVectors(v,g).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(F(2*Math.PI*y.x/Le.clientHeight),H(2*Math.PI*y.y/Le.clientHeight)),g.copy(v),r.update()}function se(ce){T.set(ce.clientX,ce.clientY),E.subVectors(T,S),E.y>0?j(z()):E.y<0&&J(z()),S.copy(T),r.update()}function N(ce){x.set(ce.clientX,ce.clientY),w.subVectors(x,_).multiplyScalar(r.panSpeed),V(w.x,w.y),_.copy(x),r.update()}function X(ce){W(ce),ce.deltaY<0?J(z()):ce.deltaY>0&&j(z()),r.update()}function Z(ce){let Le=!1;switch(ce.code){case r.keys.UP:V(0,r.keyPanSpeed),Le=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),Le=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),Le=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),Le=!0;break}Le&&(ce.preventDefault(),r.update())}function ee(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const ce=.5*(C[0].pageX+C[1].pageX),Le=.5*(C[0].pageY+C[1].pageY);g.set(ce,Le)}}function ie(){if(C.length==1)_.set(C[0].pageX,C[0].pageY);else{const ce=.5*(C[0].pageX+C[1].pageX),Le=.5*(C[0].pageY+C[1].pageY);_.set(ce,Le)}}function ge(){const ce=C[0].pageX-C[1].pageX,Le=C[0].pageY-C[1].pageY,Qe=Math.sqrt(ce*ce+Le*Le);S.set(0,Qe)}function Ce(){r.enableZoom&&ge(),r.enablePan&&ie()}function Te(){r.enableZoom&&ge(),r.enableRotate&&ee()}function Ve(ce){if(C.length==1)v.set(ce.pageX,ce.pageY);else{const Qe=We(ce),de=.5*(ce.pageX+Qe.x),ae=.5*(ce.pageY+Qe.y);v.set(de,ae)}y.subVectors(v,g).multiplyScalar(r.rotateSpeed);const Le=r.domElement;Le&&(F(2*Math.PI*y.x/Le.clientHeight),H(2*Math.PI*y.y/Le.clientHeight)),g.copy(v)}function Re(ce){if(C.length==1)x.set(ce.pageX,ce.pageY);else{const Le=We(ce),Qe=.5*(ce.pageX+Le.x),de=.5*(ce.pageY+Le.y);x.set(Qe,de)}w.subVectors(x,_).multiplyScalar(r.panSpeed),V(w.x,w.y),_.copy(x)}function ze(ce){const Le=We(ce),Qe=ce.pageX-Le.x,de=ce.pageY-Le.y,ae=Math.sqrt(Qe*Qe+de*de);T.set(0,ae),E.set(0,Math.pow(T.y/S.y,r.zoomSpeed)),j(E.y),S.copy(T)}function je(ce){r.enableZoom&&ze(ce),r.enablePan&&Re(ce)}function be(ce){r.enableZoom&&ze(ce),r.enableRotate&&Ve(ce)}function Q(ce){var Le,Qe;r.enabled!==!1&&(C.length===0&&((Le=r.domElement)==null||Le.ownerDocument.addEventListener("pointermove",O),(Qe=r.domElement)==null||Qe.ownerDocument.addEventListener("pointerup",fe)),et(ce),ce.pointerType==="touch"?Ge(ce):we(ce))}function O(ce){r.enabled!==!1&&(ce.pointerType==="touch"?Be(ce):Ne(ce))}function fe(ce){var Le,Qe,de;Ze(ce),C.length===0&&((Le=r.domElement)==null||Le.releasePointerCapture(ce.pointerId),(Qe=r.domElement)==null||Qe.ownerDocument.removeEventListener("pointermove",O),(de=r.domElement)==null||de.ownerDocument.removeEventListener("pointerup",fe)),r.dispatchEvent(o),l=a.NONE}function we(ce){let Le;switch(ce.button){case 0:Le=r.mouseButtons.LEFT;break;case 1:Le=r.mouseButtons.MIDDLE;break;case 2:Le=r.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case Ic.DOLLY:if(r.enableZoom===!1)return;q(ce),l=a.DOLLY;break;case Ic.ROTATE:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enablePan===!1)return;pe(ce),l=a.PAN}else{if(r.enableRotate===!1)return;ue(ce),l=a.ROTATE}break;case Ic.PAN:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enableRotate===!1)return;ue(ce),l=a.ROTATE}else{if(r.enablePan===!1)return;pe(ce),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ne(ce){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;me(ce);break;case a.DOLLY:if(r.enableZoom===!1)return;se(ce);break;case a.PAN:if(r.enablePan===!1)return;N(ce);break}}function Pe(ce){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ce.preventDefault(),r.dispatchEvent(s),X(ce),r.dispatchEvent(o))}function $e(ce){r.enabled===!1||r.enablePan===!1||Z(ce)}function Ge(ce){switch(Xe(ce),C.length){case 1:switch(r.touches.ONE){case Dc.ROTATE:if(r.enableRotate===!1)return;ee(),l=a.TOUCH_ROTATE;break;case Dc.PAN:if(r.enablePan===!1)return;ie(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Dc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ce(),l=a.TOUCH_DOLLY_PAN;break;case Dc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Be(ce){switch(Xe(ce),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ve(ce),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Re(ce),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;je(ce),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;be(ce),r.update();break;default:l=a.NONE}}function rt(ce){r.enabled!==!1&&ce.preventDefault()}function et(ce){C.push(ce)}function Ze(ce){delete L[ce.pointerId];for(let Le=0;Le<C.length;Le++)if(C[Le].pointerId==ce.pointerId){C.splice(Le,1);return}}function Xe(ce){let Le=L[ce.pointerId];Le===void 0&&(Le=new De,L[ce.pointerId]=Le),Le.set(ce.pageX,ce.pageY)}function We(ce){const Le=ce.pointerId===C[0].pointerId?C[1]:C[0];return L[Le.pointerId]}this.dollyIn=(ce=z())=>{J(ce),r.update()},this.dollyOut=(ce=z())=>{j(ce),r.update()},this.getScale=()=>d,this.setScale=ce=>{K(ce),r.update()},this.getZoomScale=()=>z(),t!==void 0&&this.connect(t),this.update()}};function a_(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Jc="srgb",al="srgb-linear",DD=3001,Ine=3e3;class qC extends Pi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new One(t)}),this.register(function(t){return new Une(t)}),this.register(function(t){return new Xne(t)}),this.register(function(t){return new Kne(t)}),this.register(function(t){return new Jne(t)}),this.register(function(t){return new zne(t)}),this.register(function(t){return new Gne(t)}),this.register(function(t){return new Hne(t)}),this.register(function(t){return new Vne(t)}),this.register(function(t){return new kne(t)}),this.register(function(t){return new Wne(t)}),this.register(function(t){return new Nne(t)}),this.register(function(t){return new $ne(t)}),this.register(function(t){return new jne(t)}),this.register(function(t){return new Lne(t)}),this.register(function(t){return new Yne(t)}),this.register(function(t){return new Zne(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Su.extractUrlBase(e);o=Su.resolveURL(u,this.path)}else o=Su.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(a_(new Uint8Array(e.slice(0,4)))===w5){try{o[nn.KHR_BINARY_GLTF]=new Qne(e)}catch(c){i&&i(c);return}s=JSON.parse(o[nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(a_(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new fre(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);c.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(c){case nn.KHR_MATERIALS_UNLIT:o[c]=new Fne;break;case nn.KHR_DRACO_MESH_COMPRESSION:o[c]=new qne(s,this.dracoLoader);break;case nn.KHR_TEXTURE_TRANSFORM:o[c]=new ere;break;case nn.KHR_MESH_QUANTIZATION:o[c]=new tre;break;default:f.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Dne(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Lne{constructor(e){this.parser=e,this.name=nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new st(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],al);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new NC(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new UC(c),u.distance=f;break;case"spot":u=new OC(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,$a(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class Fne{constructor(){this.name=nn.KHR_MATERIALS_UNLIT}getMaterialType(){return bi}extendParams(e,t,r){const i=[];e.color=new st(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],al),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Jc))}return Promise.all(i)}}class kne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class One{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(a,a)}return Promise.all(s)}}class Une{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Nne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class zne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new st(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],al)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Jc)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Gne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Hne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new st().setRGB(a[0],a[1],a[2],al),Promise.all(s)}}class Vne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Wne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new st().setRGB(a[0],a[1],a[2],al),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Jc)),Promise.all(s)}}class jne{constructor(e){this.parser=e,this.name=nn.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class $ne{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ks}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Xne{constructor(e){this.parser=e,this.name=nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Kne{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Jne{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Yne{constructor(e){this.name=nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,d=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,f,d,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(c*f);return o.decodeGltfBuffer(new Uint8Array(m),c,f,d,i.mode,i.filter),m})})}else return null}}class Zne{constructor(e){this.name=nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Zs.TRIANGLES&&u.mode!==Zs.TRIANGLE_STRIP&&u.mode!==Zs.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],d=u[0].count,m=[];for(const g of f){const v=new Et,y=new $,_=new Hn,x=new $(1,1,1),w=new gC(g.geometry,g.material,d);for(let S=0;S<d;S++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,S),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,S),l.SCALE&&x.fromBufferAttribute(l.SCALE,S),w.setMatrixAt(S,v.compose(y,_,x));for(const S in l)if(S==="_COLOR_0"){const T=l[S];w.instanceColor=new Fu(T.array,T.itemSize,T.normalized)}else S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&g.geometry.setAttribute(S,l[S]);dn.prototype.copy.call(w,g),this.parser.assignFinalMaterial(w),m.push(w)}return c.isGroup?(c.clear(),c.add(...m),c):m[0]}))}}const w5="glTF",am=12,LD={JSON:1313821514,BIN:5130562};class Qne{constructor(e){this.name=nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,am);if(this.header={magic:a_(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==w5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-am,i=new DataView(e,am);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===LD.JSON){const l=new Uint8Array(e,am+s,o);this.content=a_(l)}else if(a===LD.BIN){const l=am+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qne{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const f=UA[c]||c.toLowerCase();a[f]=o[c]}for(const c in e.attributes){const f=UA[c]||c.toLowerCase();if(o[c]!==void 0){const d=r.accessors[e.attributes[c]],m=sh[d.componentType];u[f]=m.name,l[f]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(f,d){i.decodeDracoFile(c,function(m){for(const g in m.attributes){const v=m.attributes[g],y=l[g];y!==void 0&&(v.normalized=y)}f(m)},a,u,al,d)})})}}class ere{constructor(){this.name=nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tre{constructor(){this.name=nn.KHR_MESH_QUANTIZATION}}class S5 extends Jh{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-t,f=(r-t)/c,d=f*f,m=d*f,g=e*u,v=g-u,y=-2*m+3*d,_=m-d,x=1-y,w=_-d+f;for(let S=0;S!==a;S++){const T=o[v+S+a],E=o[v+S+l]*c,R=o[g+S+a],b=o[g+S]*c;s[S]=x*T+w*E+y*R+_*b}return s}}const nre=new Hn;class rre extends S5{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return nre.fromArray(s).normalize().toArray(s),s}}const Zs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FD={9728:bn,9729:Kt,9984:Cg,9985:nx,9986:nh,9987:Vo},kD={33071:Nn,33648:xh,10497:Iu},KS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...QC>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Xl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ire={CUBICSPLINE:void 0,LINEAR:gf,STEP:wh},JS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function sre(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Kh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ho})),n.DefaultMaterial}function Sc(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function $a(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ore(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(r){const d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(d)}if(i){const d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(d)}if(s){const d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],d=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function are(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lre(n){let e;const t=n.extensions&&n.extensions[nn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+YS(t.attributes):e=n.indices+":"+YS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+YS(n.targets[r]);return e}function YS(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function NA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ure(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const cre=new Et;class fre{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Dne,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Mz(this.options.manager):this.textureLoader=new Bz(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ui(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Sc(s,a,i),$a(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[nn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Su.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=KS[i.type],a=sh[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new sn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=KS[i.type],u=sh[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,d=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,y;if(m&&m!==f){const _=Math.floor(d/m),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let w=t.cache.get(x);w||(v=new u(a,_*m,i.count*m/c),w=new a0(v,m/c),t.cache.add(x,w)),y=new Lu(w,l,d%m/c,g)}else a===null?v=new u(i.count*l):v=new u(a,d,i.count*l),y=new sn(v,l,g);if(i.sparse!==void 0){const _=KS.SCALAR,x=sh[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,S=i.sparse.values.byteOffset||0,T=new x(o[1],w,i.sparse.count*_),E=new u(o[2],S,i.sparse.count*l);a!==null&&(y=new sn(y.array.slice(),y.itemSize,y.normalized));for(let R=0,b=T.length;R<b;R++){const M=T[R];if(y.setX(M,E[R*l]),l>=2&&y.setY(M,E[R*l+1]),l>=3&&y.setZ(M,E[R*l+2]),l>=4&&y.setW(M,E[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return c.magFilter=FD[d.magFilter]||Kt,c.minFilter=FD[d.minFilter]||Vo,c.wrapS=kD[d.wrapS]||Iu,c.wrapT=kD[d.wrapT]||Iu,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const d=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(d,m){let g=d;t.isImageBitmapLoader===!0&&(g=function(v){const y=new fn(v);y.needsUpdate=!0,d(y)}),t.load(Su.resolveURL(f,s.path),g,void 0,m)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),$a(f,o),f.userData.mimeType=o.mimeType||ure(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[nn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[nn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[nn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===DD?Jc:al),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Jc?DD:Ine),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new u0,Xn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ti,Xn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Kh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[nn.KHR_MATERIALS_UNLIT]){const f=i[nn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new st(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],al),a.opacity=d[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",f.baseColorTexture,Jc)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=qr);const c=s.alphaMode||JS.OPAQUE;if(c===JS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===JS.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==bi&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new De(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==bi&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==bi){const f=s.emissiveFactor;a.emissive=new st().setRGB(f[0],f[1],f[2],al)}return s.emissiveTexture!==void 0&&o!==bi&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Jc)),Promise.all(u).then(function(){const f=new o(a);return s.name&&(f.name=s.name),$a(f,s),t.associations.set(f,{materials:e}),s.extensions&&Sc(i,f,s),f})}createUniqueName(e){const t=cn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return OD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=lre(u),f=i[c];if(f)o.push(f.promise);else{let d;u.extensions&&u.extensions[nn.KHR_DRACO_MESH_COMPRESSION]?d=s(u):d=OD(new jt,u,t),i[c]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?sre(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let m=0,g=c.length;m<g;m++){const v=c[m],y=o[m];let _;const x=u[m];if(y.mode===Zs.TRIANGLES||y.mode===Zs.TRIANGLE_STRIP||y.mode===Zs.TRIANGLE_FAN||y.mode===void 0)_=s.isSkinnedMesh===!0?new mC(v,x):new Ln(v,x),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===Zs.TRIANGLE_STRIP?_.geometry=RD(_.geometry,rC):y.mode===Zs.TRIANGLE_FAN&&(_.geometry=RD(_.geometry,n_));else if(y.mode===Zs.LINES)_=new Ko(v,x);else if(y.mode===Zs.LINE_STRIP)_=new yl(v,x);else if(y.mode===Zs.LINE_LOOP)_=new vC(v,x);else if(y.mode===Zs.POINTS)_=new yC(v,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&are(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),$a(_,s),y.extensions&&Sc(i,_,y),t.assignFinalMaterial(_),f.push(_)}for(let m=0,g=f.length;m<g;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Sc(i,f[0],s),f[0];const d=new ko;s.extensions&&Sc(i,d,s),t.associations.set(d,{meshes:e});for(let m=0,g=f.length;m<g;m++)d.add(f[m]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Un(ao.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new po(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),$a(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const f=o[u];if(f){a.push(f);const d=new Et;s!==null&&d.fromArray(s.array,u*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new l0(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],c=[];for(let f=0,d=i.channels.length;f<d;f++){const m=i.channels[f],g=i.samplers[m.sampler],v=m.target,y=v.node,_=i.parameters!==void 0?i.parameters[g.input]:g.input,x=i.parameters!==void 0?i.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",x)),u.push(g),c.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(f){const d=f[0],m=f[1],g=f[2],v=f[3],y=f[4],_=[];for(let x=0,w=d.length;x<w;x++){const S=d[x],T=m[x],E=g[x],R=v[x],b=y[x];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();const M=r._createAnimationTracks(S,T,E,R,b);if(M)for(let C=0;C<M.length;C++)_.push(M[C])}return new bh(s,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],f=u[1],d=u[2];d!==null&&c.traverse(function(m){m.isSkinnedMesh&&m.bind(d,cre)});for(let m=0,g=f.length;m<g;m++)c.add(f[m]);return c})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new hx:u.length>1?c=new ko:u.length===1?c=u[0]:c=new dn,c!==u[0])for(let f=0,d=u.length;f<d;f++)c.add(u[f]);if(s.name&&(c.userData.name=s.name,c.name=o),$a(c,s),s.extensions&&Sc(r,c,s),s.matrix!==void 0){const f=new Et;f.fromArray(s.matrix),c.applyMatrix4(f)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new ko;r.name&&(s.name=i.createUniqueName(r.name)),$a(s,r),r.extensions&&Sc(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,f=l.length;c<f;c++)s.add(l[c]);const u=c=>{const f=new Map;for(const[d,m]of i.associations)(d instanceof Xn||d instanceof fn)&&f.set(d,m);return c.traverse(d=>{const m=i.associations.get(d);m!=null&&f.set(d,m)}),f};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Xl[s.path]===Xl.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let u;switch(Xl[s.path]){case Xl.weights:u=_f;break;case Xl.rotation:u=ku;break;case Xl.position:case Xl.scale:u=xf;break;default:switch(r.itemSize){case 1:u=_f;break;case 2:case 3:default:u=xf;break}break}const c=i.interpolation!==void 0?ire[i.interpolation]:gf,f=this._getArrayFromAccessor(r);for(let d=0,m=l.length;d<m;d++){const g=new u(l[d]+"."+Xl[s.path],t.array,f,c);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=NA(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof ku?rre:S5;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function dre(n,e,t){const r=e.attributes,i=new Ma;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new $(l[0],l[1],l[2]),new $(u[0],u[1],u[2])),a.normalized){const c=NA(sh[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new $,l=new $;for(let u=0,c=s.length;u<c;u++){const f=s[u];if(f.POSITION!==void 0){const d=t.json.accessors[f.POSITION],m=d.min,g=d.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),d.normalized){const v=NA(sh[d.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new El;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function OD(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=UA[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return $a(n,e),dre(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?ore(n,e.targets,t):n})}class hre extends FC{constructor(e){super(e),this.type=Br}parse(e){const o=function(b,M){switch(b){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(M||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(M||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(M||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(M||""))}},c=`
`,f=function(b,M,C){M=M||1024;let D=b.pos,z=-1,F=0,H="",G=String.fromCharCode.apply(null,new Uint16Array(b.subarray(D,D+128)));for(;0>(z=G.indexOf(c))&&F<M&&D<b.byteLength;)H+=G,F+=G.length,D+=128,G+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(D,D+128)));return-1<z?(C!==!1&&(b.pos+=F+z+1),H+G.slice(0,z)):!1},d=function(b){const M=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let H,G;for((b.pos>=b.byteLength||!(H=f(b)))&&o(1,"no header found"),(G=H.match(M))||o(3,"bad initial token"),F.valid|=1,F.programtype=G[1],F.string+=H+`
`;H=f(b),H!==!1;){if(F.string+=H+`
`,H.charAt(0)==="#"){F.comments+=H+`
`;continue}if((G=H.match(C))&&(F.gamma=parseFloat(G[1])),(G=H.match(L))&&(F.exposure=parseFloat(G[1])),(G=H.match(D))&&(F.valid|=2,F.format=G[1]),(G=H.match(z))&&(F.valid|=4,F.height=parseInt(G[1],10),F.width=parseInt(G[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||o(3,"missing format specifier"),F.valid&4||o(3,"missing image size specifier"),F},m=function(b,M,C){const L=M;if(L<8||L>32767||b[0]!==2||b[1]!==2||b[2]&128)return new Uint8Array(b);L!==(b[2]<<8|b[3])&&o(3,"wrong scanline width");const D=new Uint8Array(4*M*C);D.length||o(4,"unable to allocate buffer space");let z=0,F=0;const H=4*L,G=new Uint8Array(4),te=new Uint8Array(H);let V=C;for(;V>0&&F<b.byteLength;){F+4>b.byteLength&&o(1),G[0]=b[F++],G[1]=b[F++],G[2]=b[F++],G[3]=b[F++],(G[0]!=2||G[1]!=2||(G[2]<<8|G[3])!=L)&&o(3,"bad rgbe scanline format");let K=0,j;for(;K<H&&F<b.byteLength;){j=b[F++];const W=j>128;if(W&&(j-=128),(j===0||K+j>H)&&o(3,"bad scanline data"),W){const ne=b[F++];for(let ue=0;ue<j;ue++)te[K++]=ne}else te.set(b.subarray(F,F+j),K),K+=j,F+=j}const J=L;for(let W=0;W<J;W++){let ne=0;D[z]=te[W+ne],ne+=L,D[z+1]=te[W+ne],ne+=L,D[z+2]=te[W+ne],ne+=L,D[z+3]=te[W+ne],z+=4}V--}return D},g=function(b,M,C,L){const D=b[M+3],z=Math.pow(2,D-128)/255;C[L+0]=b[M+0]*z,C[L+1]=b[M+1]*z,C[L+2]=b[M+2]*z,C[L+3]=1},v=function(b,M,C,L){const D=b[M+3],z=Math.pow(2,D-128)/255;C[L+0]=Kc.toHalfFloat(Math.min(b[M+0]*z,65504)),C[L+1]=Kc.toHalfFloat(Math.min(b[M+1]*z,65504)),C[L+2]=Kc.toHalfFloat(Math.min(b[M+2]*z,65504)),C[L+3]=Kc.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const _=d(y),x=_.width,w=_.height,S=m(y.subarray(y.pos),x,w);let T,E,R;switch(this.type){case Rr:R=S.length/4;const b=new Float32Array(R*4);for(let C=0;C<R;C++)g(S,C*4,b,C*4);T=b,E=Rr;break;case Br:R=S.length/4;const M=new Uint16Array(R*4);for(let C=0;C<R;C++)v(S,C*4,M,C*4);T=M,E=Br;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:w,data:T,header:_.string,gamma:_.gamma,exposure:_.exposure,type:E}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Rr:case Br:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Kt,o.magFilter=Kt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const lm=QC>=152;class pre extends FC{constructor(e){super(e),this.type=Br}parse(e){const M=Math.pow(2.7182818,2.2);function C(U,Y){for(var le=0,_e=0;_e<65536;++_e)(_e==0||U[_e>>3]&1<<(_e&7))&&(Y[le++]=_e);for(var Ae=le-1;le<65536;)Y[le++]=0;return Ae}function L(U){for(var Y=0;Y<16384;Y++)U[Y]={},U[Y].len=0,U[Y].lit=0,U[Y].p=null}const D={l:0,c:0,lc:0};function z(U,Y,le,_e,Ae){for(;le<U;)Y=Y<<8|We(_e,Ae),le+=8;le-=U,D.l=Y>>le&(1<<U)-1,D.c=Y,D.lc=le}const F=new Array(59);function H(U){for(var Y=0;Y<=58;++Y)F[Y]=0;for(var Y=0;Y<65537;++Y)F[U[Y]]+=1;for(var le=0,Y=58;Y>0;--Y){var _e=le+F[Y]>>1;F[Y]=le,le=_e}for(var Y=0;Y<65537;++Y){var Ae=U[Y];Ae>0&&(U[Y]=Ae|F[Ae]++<<6)}}function G(U,Y,le,_e,Ae,Me,Je){for(var Ke=le,tt=0,nt=0;Ae<=Me;Ae++){if(Ke.value-le.value>_e)return!1;z(6,tt,nt,U,Ke);var Ye=D.l;if(tt=D.c,nt=D.lc,Je[Ae]=Ye,Ye==63){if(Ke.value-le.value>_e)throw"Something wrong with hufUnpackEncTable";z(8,tt,nt,U,Ke);var Se=D.l+6;if(tt=D.c,nt=D.lc,Ae+Se>Me+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)Je[Ae++]=0;Ae--}else if(Ye>=59){var Se=Ye-59+2;if(Ae+Se>Me+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)Je[Ae++]=0;Ae--}}H(Je)}function te(U){return U&63}function V(U){return U>>6}function K(U,Y,le,_e){for(;Y<=le;Y++){var Ae=V(U[Y]),Me=te(U[Y]);if(Ae>>Me)throw"Invalid table entry";if(Me>14){var Je=_e[Ae>>Me-14];if(Je.len)throw"Invalid table entry";if(Je.lit++,Je.p){var Ke=Je.p;Je.p=new Array(Je.lit);for(var tt=0;tt<Je.lit-1;++tt)Je.p[tt]=Ke[tt]}else Je.p=new Array(1);Je.p[Je.lit-1]=Y}else if(Me)for(var nt=0,tt=1<<14-Me;tt>0;tt--){var Je=_e[(Ae<<14-Me)+nt];if(Je.len||Je.p)throw"Invalid table entry";Je.len=Me,Je.lit=Y,nt++}}return!0}const j={c:0,lc:0};function J(U,Y,le,_e){U=U<<8|We(le,_e),Y+=8,j.c=U,j.lc=Y}const W={c:0,lc:0};function ne(U,Y,le,_e,Ae,Me,Je,Ke,tt,nt){if(U==Y){_e<8&&(J(le,_e,Ae,Je),le=j.c,_e=j.lc),_e-=8;var Ye=le>>_e,Ye=new Uint8Array([Ye])[0];if(tt.value+Ye>nt)return!1;for(var Se=Ke[tt.value-1];Ye-- >0;)Ke[tt.value++]=Se}else if(tt.value<nt)Ke[tt.value++]=U;else return!1;W.c=le,W.lc=_e}function ue(U){return U&65535}function q(U){var Y=ue(U);return Y>32767?Y-65536:Y}const pe={a:0,b:0};function me(U,Y){var le=q(U),_e=q(Y),Ae=_e,Me=le+(Ae&1)+(Ae>>1),Je=Me,Ke=Me-Ae;pe.a=Je,pe.b=Ke}function se(U,Y){var le=ue(U),_e=ue(Y),Ae=le-(_e>>1)&65535,Me=_e+Ae-32768&65535;pe.a=Me,pe.b=Ae}function N(U,Y,le,_e,Ae,Me,Je){for(var Ke=Je<16384,tt=le>Ae?Ae:le,nt=1,Ye;nt<=tt;)nt<<=1;for(nt>>=1,Ye=nt,nt>>=1;nt>=1;){for(var Se=0,Zt=Se+Me*(Ae-Ye),ut=Me*nt,dt=Me*Ye,Bt=_e*nt,Ft=_e*Ye,$t,Ct,St,kt;Se<=Zt;Se+=dt){for(var Rt=Se,ln=Se+_e*(le-Ye);Rt<=ln;Rt+=Ft){var zt=Rt+Bt,mn=Rt+ut,lr=mn+Bt;Ke?(me(U[Rt+Y],U[mn+Y]),$t=pe.a,St=pe.b,me(U[zt+Y],U[lr+Y]),Ct=pe.a,kt=pe.b,me($t,Ct),U[Rt+Y]=pe.a,U[zt+Y]=pe.b,me(St,kt),U[mn+Y]=pe.a,U[lr+Y]=pe.b):(se(U[Rt+Y],U[mn+Y]),$t=pe.a,St=pe.b,se(U[zt+Y],U[lr+Y]),Ct=pe.a,kt=pe.b,se($t,Ct),U[Rt+Y]=pe.a,U[zt+Y]=pe.b,se(St,kt),U[mn+Y]=pe.a,U[lr+Y]=pe.b)}if(le&nt){var mn=Rt+ut;Ke?me(U[Rt+Y],U[mn+Y]):se(U[Rt+Y],U[mn+Y]),$t=pe.a,U[mn+Y]=pe.b,U[Rt+Y]=$t}}if(Ae&nt)for(var Rt=Se,ln=Se+_e*(le-Ye);Rt<=ln;Rt+=Ft){var zt=Rt+Bt;Ke?me(U[Rt+Y],U[zt+Y]):se(U[Rt+Y],U[zt+Y]),$t=pe.a,U[zt+Y]=pe.b,U[Rt+Y]=$t}Ye=nt,nt>>=1}return Se}function X(U,Y,le,_e,Ae,Me,Je,Ke,tt,nt){for(var Ye=0,Se=0,Zt=Ke,ut=Math.trunc(Ae.value+(Me+7)/8);Ae.value<ut;)for(J(Ye,Se,le,Ae),Ye=j.c,Se=j.lc;Se>=14;){var dt=Ye>>Se-14&16383,Bt=Y[dt];if(Bt.len)Se-=Bt.len,ne(Bt.lit,Je,Ye,Se,le,_e,Ae,tt,nt,Zt),Ye=W.c,Se=W.lc;else{if(!Bt.p)throw"hufDecode issues";var Ft;for(Ft=0;Ft<Bt.lit;Ft++){for(var $t=te(U[Bt.p[Ft]]);Se<$t&&Ae.value<ut;)J(Ye,Se,le,Ae),Ye=j.c,Se=j.lc;if(Se>=$t&&V(U[Bt.p[Ft]])==(Ye>>Se-$t&(1<<$t)-1)){Se-=$t,ne(Bt.p[Ft],Je,Ye,Se,le,_e,Ae,tt,nt,Zt),Ye=W.c,Se=W.lc;break}}if(Ft==Bt.lit)throw"hufDecode issues"}}var Ct=8-Me&7;for(Ye>>=Ct,Se-=Ct;Se>0;){var Bt=Y[Ye<<14-Se&16383];if(Bt.len)Se-=Bt.len,ne(Bt.lit,Je,Ye,Se,le,_e,Ae,tt,nt,Zt),Ye=W.c,Se=W.lc;else throw"hufDecode issues"}return!0}function Z(U,Y,le,_e,Ae,Me){var Je={value:0},Ke=le.value,tt=Xe(Y,le),nt=Xe(Y,le);le.value+=4;var Ye=Xe(Y,le);if(le.value+=4,tt<0||tt>=65537||nt<0||nt>=65537)throw"Something wrong with HUF_ENCSIZE";var Se=new Array(65537),Zt=new Array(16384);L(Zt);var ut=_e-(le.value-Ke);if(G(U,Y,le,ut,tt,nt,Se),Ye>8*(_e-(le.value-Ke)))throw"Something wrong with hufUncompress";K(Se,tt,nt,Zt),X(Se,Zt,U,Y,le,Ye,nt,Me,Ae,Je)}function ee(U,Y,le){for(var _e=0;_e<le;++_e)Y[_e]=U[Y[_e]]}function ie(U){for(var Y=1;Y<U.length;Y++){var le=U[Y-1]+U[Y]-128;U[Y]=le}}function ge(U,Y){for(var le=0,_e=Math.floor((U.length+1)/2),Ae=0,Me=U.length-1;!(Ae>Me||(Y[Ae++]=U[le++],Ae>Me));)Y[Ae++]=U[_e++]}function Ce(U){for(var Y=U.byteLength,le=new Array,_e=0,Ae=new DataView(U);Y>0;){var Me=Ae.getInt8(_e++);if(Me<0){var Je=-Me;Y-=Je+1;for(var Ke=0;Ke<Je;Ke++)le.push(Ae.getUint8(_e++))}else{var Je=Me;Y-=2;for(var tt=Ae.getUint8(_e++),Ke=0;Ke<Je+1;Ke++)le.push(tt)}}return le}function Te(U,Y,le,_e,Ae,Me){var zt=new DataView(Me.buffer),Je=le[U.idx[0]].width,Ke=le[U.idx[0]].height,tt=3,nt=Math.floor(Je/8),Ye=Math.ceil(Je/8),Se=Math.ceil(Ke/8),Zt=Je-(Ye-1)*8,ut=Ke-(Se-1)*8,dt={value:0},Bt=new Array(tt),Ft=new Array(tt),$t=new Array(tt),Ct=new Array(tt),St=new Array(tt);for(let un=0;un<tt;++un)St[un]=Y[U.idx[un]],Bt[un]=un<1?0:Bt[un-1]+Ye*Se,Ft[un]=new Float32Array(64),$t[un]=new Uint16Array(64),Ct[un]=new Uint16Array(Ye*64);for(let un=0;un<Se;++un){var kt=8;un==Se-1&&(kt=ut);var Rt=8;for(let hn=0;hn<Ye;++hn){hn==Ye-1&&(Rt=Zt);for(let Gt=0;Gt<tt;++Gt)$t[Gt].fill(0),$t[Gt][0]=Ae[Bt[Gt]++],Ve(dt,_e,$t[Gt]),Re($t[Gt],Ft[Gt]),ze(Ft[Gt]);je(Ft);for(let Gt=0;Gt<tt;++Gt)be(Ft[Gt],Ct[Gt],hn*64)}let Kn=0;for(let hn=0;hn<tt;++hn){const Gt=le[U.idx[hn]].type;for(let Pn=8*un;Pn<8*un+kt;++Pn){Kn=St[hn][Pn];for(let Ki=0;Ki<nt;++Ki){const mr=Ki*64+(Pn&7)*8;zt.setUint16(Kn+0*2*Gt,Ct[hn][mr+0],!0),zt.setUint16(Kn+1*2*Gt,Ct[hn][mr+1],!0),zt.setUint16(Kn+2*2*Gt,Ct[hn][mr+2],!0),zt.setUint16(Kn+3*2*Gt,Ct[hn][mr+3],!0),zt.setUint16(Kn+4*2*Gt,Ct[hn][mr+4],!0),zt.setUint16(Kn+5*2*Gt,Ct[hn][mr+5],!0),zt.setUint16(Kn+6*2*Gt,Ct[hn][mr+6],!0),zt.setUint16(Kn+7*2*Gt,Ct[hn][mr+7],!0),Kn+=8*2*Gt}}if(nt!=Ye)for(let Pn=8*un;Pn<8*un+kt;++Pn){const Ki=St[hn][Pn]+8*nt*2*Gt,mr=nt*64+(Pn&7)*8;for(let ps=0;ps<Rt;++ps)zt.setUint16(Ki+ps*2*Gt,Ct[hn][mr+ps],!0)}}}for(var ln=new Uint16Array(Je),zt=new DataView(Me.buffer),mn=0;mn<tt;++mn){le[U.idx[mn]].decoded=!0;var lr=le[U.idx[mn]].type;if(le[mn].type==2)for(var Vn=0;Vn<Ke;++Vn){const un=St[mn][Vn];for(var Wn=0;Wn<Je;++Wn)ln[Wn]=zt.getUint16(un+Wn*2*lr,!0);for(var Wn=0;Wn<Je;++Wn)zt.setFloat32(un+Wn*2*lr,ae(ln[Wn]),!0)}}}function Ve(U,Y,le){for(var _e,Ae=1;Ae<64;)_e=Y[U.value],_e==65280?Ae=64:_e>>8==255?Ae+=_e&255:(le[Ae]=_e,Ae++),U.value++}function Re(U,Y){Y[0]=ae(U[0]),Y[1]=ae(U[1]),Y[2]=ae(U[5]),Y[3]=ae(U[6]),Y[4]=ae(U[14]),Y[5]=ae(U[15]),Y[6]=ae(U[27]),Y[7]=ae(U[28]),Y[8]=ae(U[2]),Y[9]=ae(U[4]),Y[10]=ae(U[7]),Y[11]=ae(U[13]),Y[12]=ae(U[16]),Y[13]=ae(U[26]),Y[14]=ae(U[29]),Y[15]=ae(U[42]),Y[16]=ae(U[3]),Y[17]=ae(U[8]),Y[18]=ae(U[12]),Y[19]=ae(U[17]),Y[20]=ae(U[25]),Y[21]=ae(U[30]),Y[22]=ae(U[41]),Y[23]=ae(U[43]),Y[24]=ae(U[9]),Y[25]=ae(U[11]),Y[26]=ae(U[18]),Y[27]=ae(U[24]),Y[28]=ae(U[31]),Y[29]=ae(U[40]),Y[30]=ae(U[44]),Y[31]=ae(U[53]),Y[32]=ae(U[10]),Y[33]=ae(U[19]),Y[34]=ae(U[23]),Y[35]=ae(U[32]),Y[36]=ae(U[39]),Y[37]=ae(U[45]),Y[38]=ae(U[52]),Y[39]=ae(U[54]),Y[40]=ae(U[20]),Y[41]=ae(U[22]),Y[42]=ae(U[33]),Y[43]=ae(U[38]),Y[44]=ae(U[46]),Y[45]=ae(U[51]),Y[46]=ae(U[55]),Y[47]=ae(U[60]),Y[48]=ae(U[21]),Y[49]=ae(U[34]),Y[50]=ae(U[37]),Y[51]=ae(U[47]),Y[52]=ae(U[50]),Y[53]=ae(U[56]),Y[54]=ae(U[59]),Y[55]=ae(U[61]),Y[56]=ae(U[35]),Y[57]=ae(U[36]),Y[58]=ae(U[48]),Y[59]=ae(U[49]),Y[60]=ae(U[57]),Y[61]=ae(U[58]),Y[62]=ae(U[62]),Y[63]=ae(U[63])}function ze(U){const Y=.5*Math.cos(.7853975),le=.5*Math.cos(3.14159/16),_e=.5*Math.cos(3.14159/8),Ae=.5*Math.cos(3*3.14159/16),Me=.5*Math.cos(5*3.14159/16),Je=.5*Math.cos(3*3.14159/8),Ke=.5*Math.cos(7*3.14159/16);for(var tt=new Array(4),nt=new Array(4),Ye=new Array(4),Se=new Array(4),Zt=0;Zt<8;++Zt){var ut=Zt*8;tt[0]=_e*U[ut+2],tt[1]=Je*U[ut+2],tt[2]=_e*U[ut+6],tt[3]=Je*U[ut+6],nt[0]=le*U[ut+1]+Ae*U[ut+3]+Me*U[ut+5]+Ke*U[ut+7],nt[1]=Ae*U[ut+1]-Ke*U[ut+3]-le*U[ut+5]-Me*U[ut+7],nt[2]=Me*U[ut+1]-le*U[ut+3]+Ke*U[ut+5]+Ae*U[ut+7],nt[3]=Ke*U[ut+1]-Me*U[ut+3]+Ae*U[ut+5]-le*U[ut+7],Ye[0]=Y*(U[ut+0]+U[ut+4]),Ye[3]=Y*(U[ut+0]-U[ut+4]),Ye[1]=tt[0]+tt[3],Ye[2]=tt[1]-tt[2],Se[0]=Ye[0]+Ye[1],Se[1]=Ye[3]+Ye[2],Se[2]=Ye[3]-Ye[2],Se[3]=Ye[0]-Ye[1],U[ut+0]=Se[0]+nt[0],U[ut+1]=Se[1]+nt[1],U[ut+2]=Se[2]+nt[2],U[ut+3]=Se[3]+nt[3],U[ut+4]=Se[3]-nt[3],U[ut+5]=Se[2]-nt[2],U[ut+6]=Se[1]-nt[1],U[ut+7]=Se[0]-nt[0]}for(var dt=0;dt<8;++dt)tt[0]=_e*U[16+dt],tt[1]=Je*U[16+dt],tt[2]=_e*U[48+dt],tt[3]=Je*U[48+dt],nt[0]=le*U[8+dt]+Ae*U[24+dt]+Me*U[40+dt]+Ke*U[56+dt],nt[1]=Ae*U[8+dt]-Ke*U[24+dt]-le*U[40+dt]-Me*U[56+dt],nt[2]=Me*U[8+dt]-le*U[24+dt]+Ke*U[40+dt]+Ae*U[56+dt],nt[3]=Ke*U[8+dt]-Me*U[24+dt]+Ae*U[40+dt]-le*U[56+dt],Ye[0]=Y*(U[dt]+U[32+dt]),Ye[3]=Y*(U[dt]-U[32+dt]),Ye[1]=tt[0]+tt[3],Ye[2]=tt[1]-tt[2],Se[0]=Ye[0]+Ye[1],Se[1]=Ye[3]+Ye[2],Se[2]=Ye[3]-Ye[2],Se[3]=Ye[0]-Ye[1],U[0+dt]=Se[0]+nt[0],U[8+dt]=Se[1]+nt[1],U[16+dt]=Se[2]+nt[2],U[24+dt]=Se[3]+nt[3],U[32+dt]=Se[3]-nt[3],U[40+dt]=Se[2]-nt[2],U[48+dt]=Se[1]-nt[1],U[56+dt]=Se[0]-nt[0]}function je(U){for(var Y=0;Y<64;++Y){var le=U[0][Y],_e=U[1][Y],Ae=U[2][Y];U[0][Y]=le+1.5747*Ae,U[1][Y]=le-.1873*_e-.4682*Ae,U[2][Y]=le+1.8556*_e}}function be(U,Y,le){for(var _e=0;_e<64;++_e)Y[le+_e]=Kc.toHalfFloat(Q(U[_e]))}function Q(U){return U<=1?Math.sign(U)*Math.pow(Math.abs(U),2.2):Math.sign(U)*Math.pow(M,Math.abs(U)-1)}function O(U){return new DataView(U.array.buffer,U.offset.value,U.size)}function fe(U){var Y=U.viewer.buffer.slice(U.offset.value,U.offset.value+U.size),le=new Uint8Array(Ce(Y)),_e=new Uint8Array(le.length);return ie(le),ge(le,_e),new DataView(_e.buffer)}function we(U){var Y=U.array.slice(U.offset.value,U.offset.value+U.size),le=Ry(Y),_e=new Uint8Array(le.length);return ie(le),ge(le,_e),new DataView(_e.buffer)}function Ne(U){for(var Y=U.viewer,le={value:U.offset.value},_e=new Uint16Array(U.width*U.scanlineBlockSize*(U.channels*U.type)),Ae=new Uint8Array(8192),Me=0,Je=new Array(U.channels),Ke=0;Ke<U.channels;Ke++)Je[Ke]={},Je[Ke].start=Me,Je[Ke].end=Je[Ke].start,Je[Ke].nx=U.width,Je[Ke].ny=U.lines,Je[Ke].size=U.type,Me+=Je[Ke].nx*Je[Ke].ny*Je[Ke].size;var tt=ke(Y,le),nt=ke(Y,le);if(nt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(tt<=nt)for(var Ke=0;Ke<nt-tt+1;Ke++)Ae[Ke+tt]=ce(Y,le);var Ye=new Uint16Array(65536),Se=C(Ae,Ye),Zt=Xe(Y,le);Z(U.array,Y,le,Zt,_e,Me);for(var Ke=0;Ke<U.channels;++Ke)for(var ut=Je[Ke],dt=0;dt<Je[Ke].size;++dt)N(_e,ut.start+dt,ut.nx,ut.size,ut.ny,ut.nx*ut.size,Se);ee(Ye,_e,Me);for(var Bt=0,Ft=new Uint8Array(_e.buffer.byteLength),$t=0;$t<U.lines;$t++)for(var Ct=0;Ct<U.channels;Ct++){var ut=Je[Ct],St=ut.nx*ut.size,kt=new Uint8Array(_e.buffer,ut.end*2,St*2);Ft.set(kt,Bt),Bt+=St*2,ut.end+=St}return new DataView(Ft.buffer)}function Pe(U){var Y=U.array.slice(U.offset.value,U.offset.value+U.size),le=Ry(Y);const _e=U.lines*U.channels*U.width,Ae=U.type==1?new Uint16Array(_e):new Uint32Array(_e);let Me=0,Je=0;const Ke=new Array(4);for(let tt=0;tt<U.lines;tt++)for(let nt=0;nt<U.channels;nt++){let Ye=0;switch(U.type){case 1:Ke[0]=Me,Ke[1]=Ke[0]+U.width,Me=Ke[1]+U.width;for(let Se=0;Se<U.width;++Se){const Zt=le[Ke[0]++]<<8|le[Ke[1]++];Ye+=Zt,Ae[Je]=Ye,Je++}break;case 2:Ke[0]=Me,Ke[1]=Ke[0]+U.width,Ke[2]=Ke[1]+U.width,Me=Ke[2]+U.width;for(let Se=0;Se<U.width;++Se){const Zt=le[Ke[0]++]<<24|le[Ke[1]++]<<16|le[Ke[2]++]<<8;Ye+=Zt,Ae[Je]=Ye,Je++}break}}return new DataView(Ae.buffer)}function $e(U){var Y=U.viewer,le={value:U.offset.value},_e=new Uint8Array(U.width*U.lines*(U.channels*U.type*2)),Ae={version:Le(Y,le),unknownUncompressedSize:Le(Y,le),unknownCompressedSize:Le(Y,le),acCompressedSize:Le(Y,le),dcCompressedSize:Le(Y,le),rleCompressedSize:Le(Y,le),rleUncompressedSize:Le(Y,le),rleRawSize:Le(Y,le),totalAcUncompressedCount:Le(Y,le),totalDcUncompressedCount:Le(Y,le),acCompression:Le(Y,le)};if(Ae.version<2)throw"EXRLoader.parse: "+Fe.compression+" version "+Ae.version+" is unsupported";for(var Me=new Array,Je=ke(Y,le)-2;Je>0;){var Ke=Ge(Y.buffer,le),tt=ce(Y,le),nt=tt>>2&3,Ye=(tt>>4)-1,Se=new Int8Array([Ye])[0],Zt=ce(Y,le);Me.push({name:Ke,index:Se,type:Zt,compression:nt}),Je-=Ke.length+3}for(var ut=Fe.channels,dt=new Array(U.channels),Bt=0;Bt<U.channels;++Bt){var Ft=dt[Bt]={},$t=ut[Bt];Ft.name=$t.name,Ft.compression=0,Ft.decoded=!1,Ft.type=$t.pixelType,Ft.pLinear=$t.pLinear,Ft.width=U.width,Ft.height=U.lines}for(var Ct={idx:new Array(3)},St=0;St<U.channels;++St)for(var Ft=dt[St],Bt=0;Bt<Me.length;++Bt){var kt=Me[Bt];Ft.name==kt.name&&(Ft.compression=kt.compression,kt.index>=0&&(Ct.idx[kt.index]=St),Ft.offset=St)}if(Ae.acCompressedSize>0)switch(Ae.acCompression){case 0:var zt=new Uint16Array(Ae.totalAcUncompressedCount);Z(U.array,Y,le,Ae.acCompressedSize,zt,Ae.totalAcUncompressedCount);break;case 1:var Rt=U.array.slice(le.value,le.value+Ae.totalAcUncompressedCount),ln=Ry(Rt),zt=new Uint16Array(ln.buffer);le.value+=Ae.totalAcUncompressedCount;break}if(Ae.dcCompressedSize>0){var mn={array:U.array,offset:le,size:Ae.dcCompressedSize},lr=new Uint16Array(we(mn).buffer);le.value+=Ae.dcCompressedSize}if(Ae.rleRawSize>0){var Rt=U.array.slice(le.value,le.value+Ae.rleCompressedSize),ln=Ry(Rt),Vn=Ce(ln.buffer);le.value+=Ae.rleCompressedSize}for(var Wn=0,un=new Array(dt.length),Bt=0;Bt<un.length;++Bt)un[Bt]=new Array;for(var Kn=0;Kn<U.lines;++Kn)for(var hn=0;hn<dt.length;++hn)un[hn].push(Wn),Wn+=dt[hn].width*U.type*2;Te(Ct,un,dt,zt,lr,_e);for(var Bt=0;Bt<dt.length;++Bt){var Ft=dt[Bt];if(!Ft.decoded)switch(Ft.compression){case 2:for(var Gt=0,Pn=0,Kn=0;Kn<U.lines;++Kn){for(var Ki=un[Bt][Gt],mr=0;mr<Ft.width;++mr){for(var ps=0;ps<2*Ft.type;++ps)_e[Ki++]=Vn[Pn+ps*Ft.width*Ft.height];Pn++}Gt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(_e.buffer)}function Ge(U,Y){for(var le=new Uint8Array(U),_e=0;le[Y.value+_e]!=0;)_e+=1;var Ae=new TextDecoder().decode(le.slice(Y.value,Y.value+_e));return Y.value=Y.value+_e+1,Ae}function Be(U,Y,le){var _e=new TextDecoder().decode(new Uint8Array(U).slice(Y.value,Y.value+le));return Y.value=Y.value+le,_e}function rt(U,Y){var le=Ze(U,Y),_e=Xe(U,Y);return[le,_e]}function et(U,Y){var le=Xe(U,Y),_e=Xe(U,Y);return[le,_e]}function Ze(U,Y){var le=U.getInt32(Y.value,!0);return Y.value=Y.value+4,le}function Xe(U,Y){var le=U.getUint32(Y.value,!0);return Y.value=Y.value+4,le}function We(U,Y){var le=U[Y.value];return Y.value=Y.value+1,le}function ce(U,Y){var le=U.getUint8(Y.value);return Y.value=Y.value+1,le}const Le=function(U,Y){let le;return"getBigInt64"in DataView.prototype?le=Number(U.getBigInt64(Y.value,!0)):le=U.getUint32(Y.value+4,!0)+Number(U.getUint32(Y.value,!0)<<32),Y.value+=8,le};function Qe(U,Y){var le=U.getFloat32(Y.value,!0);return Y.value+=4,le}function de(U,Y){return Kc.toHalfFloat(Qe(U,Y))}function ae(U){var Y=(U&31744)>>10,le=U&1023;return(U>>15?-1:1)*(Y?Y===31?le?NaN:1/0:Math.pow(2,Y-15)*(1+le/1024):6103515625e-14*(le/1024))}function ke(U,Y){var le=U.getUint16(Y.value,!0);return Y.value+=2,le}function at(U,Y){return ae(ke(U,Y))}function it(U,Y,le,_e){for(var Ae=le.value,Me=[];le.value<Ae+_e-1;){var Je=Ge(Y,le),Ke=Ze(U,le),tt=ce(U,le);le.value+=3;var nt=Ze(U,le),Ye=Ze(U,le);Me.push({name:Je,pixelType:Ke,pLinear:tt,xSampling:nt,ySampling:Ye})}return le.value+=1,Me}function mt(U,Y){var le=Qe(U,Y),_e=Qe(U,Y),Ae=Qe(U,Y),Me=Qe(U,Y),Je=Qe(U,Y),Ke=Qe(U,Y),tt=Qe(U,Y),nt=Qe(U,Y);return{redX:le,redY:_e,greenX:Ae,greenY:Me,blueX:Je,blueY:Ke,whiteX:tt,whiteY:nt}}function Tt(U,Y){var le=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],_e=ce(U,Y);return le[_e]}function Pt(U,Y){var le=Xe(U,Y),_e=Xe(U,Y),Ae=Xe(U,Y),Me=Xe(U,Y);return{xMin:le,yMin:_e,xMax:Ae,yMax:Me}}function _t(U,Y){var le=["INCREASING_Y"],_e=ce(U,Y);return le[_e]}function At(U,Y){var le=Qe(U,Y),_e=Qe(U,Y);return[le,_e]}function Yt(U,Y){var le=Qe(U,Y),_e=Qe(U,Y),Ae=Qe(U,Y);return[le,_e,Ae]}function rn(U,Y,le,_e,Ae){if(_e==="string"||_e==="stringvector"||_e==="iccProfile")return Be(Y,le,Ae);if(_e==="chlist")return it(U,Y,le,Ae);if(_e==="chromaticities")return mt(U,le);if(_e==="compression")return Tt(U,le);if(_e==="box2i")return Pt(U,le);if(_e==="lineOrder")return _t(U,le);if(_e==="float")return Qe(U,le);if(_e==="v2f")return At(U,le);if(_e==="v3f")return Yt(U,le);if(_e==="int")return Ze(U,le);if(_e==="rational")return rt(U,le);if(_e==="timecode")return et(U,le);if(_e==="preview")return le.value+=Ae,"skipped";le.value+=Ae}function kn(U,Y,le){const _e={};if(U.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";_e.version=U.getUint8(4);const Ae=U.getUint8(5);_e.spec={singleTile:!!(Ae&2),longName:!!(Ae&4),deepFormat:!!(Ae&8),multiPart:!!(Ae&16)},le.value=8;for(var Me=!0;Me;){var Je=Ge(Y,le);if(Je==0)Me=!1;else{var Ke=Ge(Y,le),tt=Xe(U,le),nt=rn(U,Y,le,Ke,tt);nt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ke}'.`):_e[Je]=nt}}if(Ae&-5)throw console.error("EXRHeader:",_e),"THREE.EXRLoader: provided file is currently unsupported.";return _e}function ri(U,Y,le,_e,Ae){const Me={size:0,viewer:Y,array:le,offset:_e,width:U.dataWindow.xMax-U.dataWindow.xMin+1,height:U.dataWindow.yMax-U.dataWindow.yMin+1,channels:U.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:U.channels[0].pixelType,uncompress:null,getter:null,format:null,[lm?"colorSpace":"encoding"]:null};switch(U.compression){case"NO_COMPRESSION":Me.lines=1,Me.uncompress=O;break;case"RLE_COMPRESSION":Me.lines=1,Me.uncompress=fe;break;case"ZIPS_COMPRESSION":Me.lines=1,Me.uncompress=we;break;case"ZIP_COMPRESSION":Me.lines=16,Me.uncompress=we;break;case"PIZ_COMPRESSION":Me.lines=32,Me.uncompress=Ne;break;case"PXR24_COMPRESSION":Me.lines=16,Me.uncompress=Pe;break;case"DWAA_COMPRESSION":Me.lines=32,Me.uncompress=$e;break;case"DWAB_COMPRESSION":Me.lines=256,Me.uncompress=$e;break;default:throw"EXRLoader.parse: "+U.compression+" is unsupported"}if(Me.scanlineBlockSize=Me.lines,Me.type==1)switch(Ae){case Rr:Me.getter=at,Me.inputSize=2;break;case Br:Me.getter=ke,Me.inputSize=2;break}else if(Me.type==2)switch(Ae){case Rr:Me.getter=Qe,Me.inputSize=4;break;case Br:Me.getter=de,Me.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Me.type+" for "+U.compression+".";Me.blockCount=(U.dataWindow.yMax+1)/Me.scanlineBlockSize;for(var Je=0;Je<Me.blockCount;Je++)Le(Y,_e);Me.outputChannels=Me.channels==3?4:Me.channels;const Ke=Me.width*Me.height*Me.outputChannels;switch(Ae){case Rr:Me.byteArray=new Float32Array(Ke),Me.channels<Me.outputChannels&&Me.byteArray.fill(1,0,Ke);break;case Br:Me.byteArray=new Uint16Array(Ke),Me.channels<Me.outputChannels&&Me.byteArray.fill(15360,0,Ke);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ae);break}return Me.bytesPerLine=Me.width*Me.inputSize*Me.channels,Me.outputChannels==4?Me.format=Ur:Me.format=tC,lm?Me.colorSpace="srgb-linear":Me.encoding=3e3,Me}const jr=new DataView(e),re=new Uint8Array(e),Ee={value:0},Fe=kn(jr,e,Ee),ve=ri(Fe,jr,re,Ee,this.type),Oe={value:0},xt={R:0,G:1,B:2,A:3,Y:0};for(let U=0;U<ve.height/ve.scanlineBlockSize;U++){const Y=Xe(jr,Ee);ve.size=Xe(jr,Ee),ve.lines=Y+ve.scanlineBlockSize>ve.height?ve.height-Y:ve.scanlineBlockSize;const _e=ve.size<ve.lines*ve.bytesPerLine?ve.uncompress(ve):O(ve);Ee.value+=ve.size;for(let Ae=0;Ae<ve.scanlineBlockSize;Ae++){const Me=Ae+U*ve.scanlineBlockSize;if(Me>=ve.height)break;for(let Je=0;Je<ve.channels;Je++){const Ke=xt[Fe.channels[Je].name];for(let tt=0;tt<ve.width;tt++){Oe.value=(Ae*(ve.channels*ve.width)+Je*ve.width+tt)*ve.inputSize;const nt=(ve.height-1-Me)*(ve.width*ve.outputChannels)+tt*ve.outputChannels+Ke;ve.byteArray[nt]=ve.getter(_e,Oe)}}}}return{header:Fe,width:ve.width,height:ve.height,data:ve.byteArray,format:ve.format,[lm?"colorSpace":"encoding"]:ve[lm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){lm?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Kt,o.magFilter=Kt,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const ZS=new WeakMap;class mre extends Pi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new ui(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(ZS.has(e)){const l=ZS.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),ZS.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new jt;e.index&&t.setIndex(new sn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new sn(o,a))}return t}_loadLibrary(e,t){const r=new ui(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=gre.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function gre(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,d=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(f,d,m,u),v=g.attributes.map(y=>y.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(m),f.destroy(d)}});break}};function t(o,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let d,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)d=new o.Mesh,m=a.DecodeBufferToMesh(l,d);else if(g===o.POINT_CLOUD)d=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const y in c){const _=self[f[y]];let x,w;if(u.useUniqueIDs)w=c[y],x=a.GetAttributeByUniqueId(d,w);else{if(w=a.GetAttributeId(d,o[c[y]]),w===-1)continue;x=a.GetAttribute(d,w)}v.attributes.push(i(o,a,d,y,_,x))}return g===o.TRIANGULAR_MESH&&(v.index=r(o,a,d)),o.destroy(d),v}function r(o,a,l){const c=l.num_faces()*3,f=c*4,d=o._malloc(f);a.GetTrianglesUInt32Array(l,f,d);const m=new Uint32Array(o.HEAPF32.buffer,d,c).slice();return o._free(d),{array:m,itemSize:1}}function i(o,a,l,u,c,f){const d=f.num_components(),g=l.num_points()*d,v=g*c.BYTES_PER_ELEMENT,y=s(o,c),_=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,f,y,v,_);const x=new c(o.HEAPF32.buffer,_,g).slice();return o._free(_),{name:u,array:x,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Iy;const QS=()=>{if(Iy)return Iy;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const d=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const v=f.charCodeAt(g);d[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<f.length;++g)d[m++]=d[g]<60?r[d[g]]:(d[g]-60)*64+d[++g];return d.buffer.slice(0,m)}function l(f,d,m,g,v,y){const _=s.exports.sbrk,x=m+3&-4,w=_(x*g),S=_(v.length),T=new Uint8Array(s.exports.memory.buffer);T.set(v,S);const E=f(w,m,g,S,v.length);if(E===0&&y&&y(w,x,g),d.set(T.subarray(w,w+m*g)),_(w-_(0)),E!==0)throw new Error(`Malformed buffer data: ${E}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Iy={ready:o,supported:!0,decodeVertexBuffer(f,d,m,g,v){l(s.exports.meshopt_decodeVertexBuffer,f,d,m,g,s.exports[u[v]])},decodeIndexBuffer(f,d,m,g){l(s.exports.meshopt_decodeIndexBuffer,f,d,m,g)},decodeIndexSequence(f,d,m,g){l(s.exports.meshopt_decodeIndexSequence,f,d,m,g)},decodeGltfBuffer(f,d,m,g,v,y){l(s.exports[c[v]],f,d,m,g,s.exports[u[y]])}},Iy};function vre(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!n[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(m){if(m instanceof Error)throw m}),d=n[d.id].value),d}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:c},s(f)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(f){return s(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){s(f)}function c(f){try{var d=n[a].getTransferables&&n[a].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(f,d)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function yre(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var b5=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return b5=function(){return n},n},_re=0,xre=0,qS=!1,$m=Object.create(null),Xm=Object.create(null),zA=Object.create(null);function Yh(n){if((!n||typeof n.init!="function")&&!qS)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId,s=yre(n);i==null&&(i="#default");var o="workerModule"+ ++_re,a=n.name||o,l=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(qS=!0,c=Yh({workerId:i,name:"<"+a+"> function dependency: "+c.name,init:`function(){return (
`+w1(c)+`
)}`}),qS=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function u(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];if(!b5())return s.apply(void 0,c);if(!l){l=UD(i,"registerModule",u.workerModuleData);var d=function(){l=null,Xm[i].delete(d)};(Xm[i]||(Xm[i]=new Set)).add(d)}return l.then(function(m){var g=m.isCallable;if(g)return UD(i,"callModule",{id:o,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:w1(t),getTransferables:r&&w1(r)},u.onMainThread=s,u}function wre(n){Xm[n]&&Xm[n].forEach(function(e){e()}),$m[n]&&($m[n].terminate(),delete $m[n])}function w1(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Sre(n){var e=$m[n];if(!e){var t=w1(vre);e=$m[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=zA[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete zA[s],o(i)}}return e}function UD(n,e,t){return new Promise(function(r,i){var s=++xre;zA[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},Sre(n).postMessage({messageId:s,action:e,data:t})})}function A5(){var n=function(e){function t(K,j,J,W,ne,ue,q,pe){var me=1-q;pe.x=me*me*K+2*me*q*J+q*q*ne,pe.y=me*me*j+2*me*q*W+q*q*ue}function r(K,j,J,W,ne,ue,q,pe,me,se){var N=1-me;se.x=N*N*N*K+3*N*N*me*J+3*N*me*me*ne+me*me*me*q,se.y=N*N*N*j+3*N*N*me*W+3*N*me*me*ue+me*me*me*pe}function i(K,j){for(var J=/([MLQCZ])([^MLQCZ]*)/g,W,ne,ue,q,pe;W=J.exec(K);){var me=W[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(se){return parseFloat(se)});switch(W[1]){case"M":q=ne=me[0],pe=ue=me[1];break;case"L":(me[0]!==q||me[1]!==pe)&&j("L",q,pe,q=me[0],pe=me[1]);break;case"Q":{j("Q",q,pe,q=me[2],pe=me[3],me[0],me[1]);break}case"C":{j("C",q,pe,q=me[4],pe=me[5],me[0],me[1],me[2],me[3]);break}case"Z":(q!==ne||pe!==ue)&&j("L",q,pe,ne,ue);break}}}function s(K,j,J){J===void 0&&(J=16);var W={x:0,y:0};i(K,function(ne,ue,q,pe,me,se,N,X,Z){switch(ne){case"L":j(ue,q,pe,me);break;case"Q":{for(var ee=ue,ie=q,ge=1;ge<J;ge++)t(ue,q,se,N,pe,me,ge/(J-1),W),j(ee,ie,W.x,W.y),ee=W.x,ie=W.y;break}case"C":{for(var Ce=ue,Te=q,Ve=1;Ve<J;Ve++)r(ue,q,se,N,X,Z,pe,me,Ve/(J-1),W),j(Ce,Te,W.x,W.y),Ce=W.x,Te=W.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(K,j){var J=K.getContext?K.getContext("webgl",u):K,W=l.get(J);if(!W){let Ce=function(be){var Q=ue[be];if(!Q&&(Q=ue[be]=J.getExtension(be),!Q))throw new Error(be+" not supported");return Q},Te=function(be,Q){var O=J.createShader(Q);return J.shaderSource(O,be),J.compileShader(O),O},Ve=function(be,Q,O,fe){if(!q[be]){var we={},Ne={},Pe=J.createProgram();J.attachShader(Pe,Te(Q,J.VERTEX_SHADER)),J.attachShader(Pe,Te(O,J.FRAGMENT_SHADER)),J.linkProgram(Pe),q[be]={program:Pe,transaction:function(Ge){J.useProgram(Pe),Ge({setUniform:function(rt,et){for(var Ze=[],Xe=arguments.length-2;Xe-- >0;)Ze[Xe]=arguments[Xe+2];var We=Ne[et]||(Ne[et]=J.getUniformLocation(Pe,et));J["uniform"+rt].apply(J,[We].concat(Ze))},setAttribute:function(rt,et,Ze,Xe,We){var ce=we[rt];ce||(ce=we[rt]={buf:J.createBuffer(),loc:J.getAttribLocation(Pe,rt),data:null}),J.bindBuffer(J.ARRAY_BUFFER,ce.buf),J.vertexAttribPointer(ce.loc,et,J.FLOAT,!1,0,0),J.enableVertexAttribArray(ce.loc),ne?J.vertexAttribDivisor(ce.loc,Xe):Ce("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ce.loc,Xe),We!==ce.data&&(J.bufferData(J.ARRAY_BUFFER,We,Ze),ce.data=We)}})}}}q[be].transaction(fe)},Re=function(be,Q){me++;try{J.activeTexture(J.TEXTURE0+me);var O=pe[be];O||(O=pe[be]=J.createTexture(),J.bindTexture(J.TEXTURE_2D,O),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST)),J.bindTexture(J.TEXTURE_2D,O),Q(O,me)}finally{me--}},ze=function(be,Q,O){var fe=J.createFramebuffer();se.push(fe),J.bindFramebuffer(J.FRAMEBUFFER,fe),J.activeTexture(J.TEXTURE0+Q),J.bindTexture(J.TEXTURE_2D,be),J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,be,0);try{O(fe)}finally{J.deleteFramebuffer(fe),J.bindFramebuffer(J.FRAMEBUFFER,se[--se.length-1]||null)}},je=function(){ue={},q={},pe={},me=-1,se.length=0};var N=Ce,X=Te,Z=Ve,ee=Re,ie=ze,ge=je,ne=typeof WebGL2RenderingContext<"u"&&J instanceof WebGL2RenderingContext,ue={},q={},pe={},me=-1,se=[];J.canvas.addEventListener("webglcontextlost",function(be){je(),be.preventDefault()},!1),l.set(J,W={gl:J,isWebGL2:ne,getExtension:Ce,withProgram:Ve,withTexture:Re,withTextureFramebuffer:ze,handleContextLoss:je})}j(W)}function f(K,j,J,W,ne,ue,q,pe){q===void 0&&(q=15),pe===void 0&&(pe=null),c(K,function(me){var se=me.gl,N=me.withProgram,X=me.withTexture;X("copy",function(Z,ee){se.texImage2D(se.TEXTURE_2D,0,se.RGBA,ne,ue,0,se.RGBA,se.UNSIGNED_BYTE,j),N("copy",o,a,function(ie){var ge=ie.setUniform,Ce=ie.setAttribute;Ce("aUV",2,se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ge("1i","image",ee),se.bindFramebuffer(se.FRAMEBUFFER,pe||null),se.disable(se.BLEND),se.colorMask(q&8,q&4,q&2,q&1),se.viewport(J,W,ne,ue),se.scissor(J,W,ne,ue),se.drawArrays(se.TRIANGLES,0,3)})})})}function d(K,j,J){var W=K.width,ne=K.height;c(K,function(ue){var q=ue.gl,pe=new Uint8Array(W*ne*4);q.readPixels(0,0,W,ne,q.RGBA,q.UNSIGNED_BYTE,pe),K.width=j,K.height=J,f(q,pe,0,0,W,ne)})}var m=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function g(K,j,J,W,ne,ue){ue===void 0&&(ue=1);var q=new Uint8Array(K*j),pe=W[2]-W[0],me=W[3]-W[1],se=[];s(J,function(Ce,Te,Ve,Re){se.push({x1:Ce,y1:Te,x2:Ve,y2:Re,minX:Math.min(Ce,Ve),minY:Math.min(Te,Re),maxX:Math.max(Ce,Ve),maxY:Math.max(Te,Re)})}),se.sort(function(Ce,Te){return Ce.maxX-Te.maxX});for(var N=0;N<K;N++)for(var X=0;X<j;X++){var Z=ie(W[0]+pe*(N+.5)/K,W[1]+me*(X+.5)/j),ee=Math.pow(1-Math.abs(Z)/ne,ue)/2;Z<0&&(ee=1-ee),ee=Math.max(0,Math.min(255,Math.round(ee*255))),q[X*K+N]=ee}return q;function ie(Ce,Te){for(var Ve=1/0,Re=1/0,ze=se.length;ze--;){var je=se[ze];if(je.maxX+Re<=Ce)break;if(Ce+Re>je.minX&&Te-Re<je.maxY&&Te+Re>je.minY){var be=_(Ce,Te,je.x1,je.y1,je.x2,je.y2);be<Ve&&(Ve=be,Re=Math.sqrt(Ve))}}return ge(Ce,Te)&&(Re=-Re),Re}function ge(Ce,Te){for(var Ve=0,Re=se.length;Re--;){var ze=se[Re];if(ze.maxX<=Ce)break;var je=ze.y1>Te!=ze.y2>Te&&Ce<(ze.x2-ze.x1)*(Te-ze.y1)/(ze.y2-ze.y1)+ze.x1;je&&(Ve+=ze.y1<ze.y2?1:-1)}return Ve!==0}}function v(K,j,J,W,ne,ue,q,pe,me,se){ue===void 0&&(ue=1),pe===void 0&&(pe=0),me===void 0&&(me=0),se===void 0&&(se=0),y(K,j,J,W,ne,ue,q,null,pe,me,se)}function y(K,j,J,W,ne,ue,q,pe,me,se,N){ue===void 0&&(ue=1),me===void 0&&(me=0),se===void 0&&(se=0),N===void 0&&(N=0);for(var X=g(K,j,J,W,ne,ue),Z=new Uint8Array(X.length*4),ee=0;ee<X.length;ee++)Z[ee*4+N]=X[ee];f(q,Z,me,se,K,j,1<<3-N,pe)}function _(K,j,J,W,ne,ue){var q=ne-J,pe=ue-W,me=q*q+pe*pe,se=me?Math.max(0,Math.min(1,((K-J)*q+(j-W)*pe)/me)):0,N=K-(J+se*q),X=j-(W+se*pe);return N*N+X*X}var x=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:v,generateIntoFramebuffer:y}),w="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",S="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),R=null,b=!1,M={},C=new WeakMap;function L(K){if(!b&&!H(K))throw new Error("WebGL generation not supported")}function D(K,j,J,W,ne,ue,q){if(ue===void 0&&(ue=1),q===void 0&&(q=null),!q&&(q=R,!q)){var pe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!pe)throw new Error("OffscreenCanvas or DOM canvas not supported");q=R=pe.getContext("webgl",{depth:!1})}L(q);var me=new Uint8Array(K*j*4);c(q,function(Z){var ee=Z.gl,ie=Z.withTexture,ge=Z.withTextureFramebuffer;ie("readable",function(Ce,Te){ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,K,j,0,ee.RGBA,ee.UNSIGNED_BYTE,null),ge(Ce,Te,function(Ve){F(K,j,J,W,ne,ue,ee,Ve,0,0,0),ee.readPixels(0,0,K,j,ee.RGBA,ee.UNSIGNED_BYTE,me)})})});for(var se=new Uint8Array(K*j),N=0,X=0;N<me.length;N+=4)se[X++]=me[N];return se}function z(K,j,J,W,ne,ue,q,pe,me,se){ue===void 0&&(ue=1),pe===void 0&&(pe=0),me===void 0&&(me=0),se===void 0&&(se=0),F(K,j,J,W,ne,ue,q,null,pe,me,se)}function F(K,j,J,W,ne,ue,q,pe,me,se,N){ue===void 0&&(ue=1),me===void 0&&(me=0),se===void 0&&(se=0),N===void 0&&(N=0),L(q);var X=[];s(J,function(Z,ee,ie,ge){X.push(Z,ee,ie,ge)}),X=new Float32Array(X),c(q,function(Z){var ee=Z.gl,ie=Z.isWebGL2,ge=Z.getExtension,Ce=Z.withProgram,Te=Z.withTexture,Ve=Z.withTextureFramebuffer,Re=Z.handleContextLoss;if(Te("rawDistances",function(ze,je){(K!==ze._lastWidth||j!==ze._lastHeight)&&ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,ze._lastWidth=K,ze._lastHeight=j,0,ee.RGBA,ee.UNSIGNED_BYTE,null),Ce("main",w,S,function(be){var Q=be.setAttribute,O=be.setUniform,fe=!ie&&ge("ANGLE_instanced_arrays"),we=!ie&&ge("EXT_blend_minmax");Q("aUV",2,ee.STATIC_DRAW,0,E),Q("aLineSegment",4,ee.DYNAMIC_DRAW,1,X),O.apply(void 0,["4f","uGlyphBounds"].concat(W)),O("1f","uMaxDistance",ne),O("1f","uExponent",ue),Ve(ze,je,function(Ne){ee.enable(ee.BLEND),ee.colorMask(!0,!0,!0,!0),ee.viewport(0,0,K,j),ee.scissor(0,0,K,j),ee.blendFunc(ee.ONE,ee.ONE),ee.blendEquationSeparate(ee.FUNC_ADD,ie?ee.MAX:we.MAX_EXT),ee.clear(ee.COLOR_BUFFER_BIT),ie?ee.drawArraysInstanced(ee.TRIANGLES,0,3,X.length/4):fe.drawArraysInstancedANGLE(ee.TRIANGLES,0,3,X.length/4)})}),Ce("post",o,T,function(be){be.setAttribute("aUV",2,ee.STATIC_DRAW,0,E),be.setUniform("1i","tex",je),ee.bindFramebuffer(ee.FRAMEBUFFER,pe),ee.disable(ee.BLEND),ee.colorMask(N===0,N===1,N===2,N===3),ee.viewport(me,se,K,j),ee.scissor(me,se,K,j),ee.drawArrays(ee.TRIANGLES,0,3)})}),ee.isContextLost())throw Re(),new Error("webgl context lost")})}function H(K){var j=!K||K===R?M:K.canvas||K,J=C.get(j);if(J===void 0){b=!0;var W=null;try{var ne=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ue=D(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,K);J=ue&&ne.length===ue.length&&ue.every(function(q,pe){return q===ne[pe]}),J||(W="bad trial run results",console.info(ne,ue))}catch(q){J=!1,W=q.message}W&&console.warn("WebGL SDF generation not supported:",W),b=!1,C.set(j,J)}return J}var G=Object.freeze({__proto__:null,generate:D,generateIntoCanvas:z,generateIntoFramebuffer:F,isSupported:H});function te(K,j,J,W,ne,ue){ne===void 0&&(ne=Math.max(W[2]-W[0],W[3]-W[1])/2),ue===void 0&&(ue=1);try{return D.apply(G,arguments)}catch(q){return console.info("WebGL SDF generation failed, falling back to JS",q),g.apply(x,arguments)}}function V(K,j,J,W,ne,ue,q,pe,me,se){ne===void 0&&(ne=Math.max(W[2]-W[0],W[3]-W[1])/2),ue===void 0&&(ue=1),pe===void 0&&(pe=0),me===void 0&&(me=0),se===void 0&&(se=0);try{return z.apply(G,arguments)}catch(N){return console.info("WebGL SDF generation failed, falling back to JS",N),v.apply(x,arguments)}}return e.forEachPathCommand=i,e.generate=te,e.generateIntoCanvas=V,e.javascript=x,e.pathToLineSegments=s,e.webgl=G,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function bre(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(Re,ze){r[Re]=1<<ze+1,i[r[Re]]=Re}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function f(){if(!c){c=new Map;var Re=function(je){if(t.hasOwnProperty(je)){var be=0;t[je].split(",").forEach(function(Q){var O=Q.split("+"),fe=O[0],we=O[1];fe=parseInt(fe,36),we=we?parseInt(we,36):0,c.set(be+=fe,r[je]);for(var Ne=0;Ne<we;Ne++)c.set(++be,r[je])})}};for(var ze in t)Re(ze)}}function d(Re){return f(),c.get(Re.codePointAt(0))||r.L}function m(Re){return i[d(Re)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(Re,ze){var je=36,be=0,Q=new Map,O=ze&&new Map,fe;return Re.split(",").forEach(function we(Ne){if(Ne.indexOf("+")!==-1)for(var Pe=+Ne;Pe--;)we(fe);else{fe=Ne;var $e=Ne.split(">"),Ge=$e[0],Be=$e[1];Ge=String.fromCodePoint(be+=parseInt(Ge,je)),Be=String.fromCodePoint(be+=parseInt(Be,je)),Q.set(Ge,Be),ze&&O.set(Be,Ge)}}),{map:Q,reverseMap:O}}var y,_,x;function w(){if(!y){var Re=v(g.pairs,!0),ze=Re.map,je=Re.reverseMap;y=ze,_=je,x=v(g.canonical,!1).map}}function S(Re){return w(),y.get(Re)||null}function T(Re){return w(),_.get(Re)||null}function E(Re){return w(),x.get(Re)||null}var R=r.L,b=r.R,M=r.EN,C=r.ES,L=r.ET,D=r.AN,z=r.CS,F=r.B,H=r.S,G=r.ON,te=r.BN,V=r.NSM,K=r.AL,j=r.LRO,J=r.RLO,W=r.LRE,ne=r.RLE,ue=r.PDF,q=r.LRI,pe=r.RLI,me=r.FSI,se=r.PDI;function N(Re,ze){for(var je=125,be=new Uint32Array(Re.length),Q=0;Q<Re.length;Q++)be[Q]=d(Re[Q]);var O=new Map;function fe(Xr,Li){var gr=be[Xr];be[Xr]=Li,O.set(gr,O.get(gr)-1),gr&a&&O.set(a,O.get(a)-1),O.set(Li,(O.get(Li)||0)+1),Li&a&&O.set(a,(O.get(a)||0)+1)}for(var we=new Uint8Array(Re.length),Ne=new Map,Pe=[],$e=null,Ge=0;Ge<Re.length;Ge++)$e||Pe.push($e={start:Ge,end:Re.length-1,level:ze==="rtl"?1:ze==="ltr"?0:Nf(Ge,!1)}),be[Ge]&F&&($e.end=Ge,$e=null);for(var Be=ne|W|J|j|s|se|ue|F,rt=function(Xr){return Xr+(Xr&1?1:2)},et=function(Xr){return Xr+(Xr&1?2:1)},Ze=0;Ze<Pe.length;Ze++){$e=Pe[Ze];var Xe=[{_level:$e.level,_override:0,_isolate:0}],We=void 0,ce=0,Le=0,Qe=0;O.clear();for(var de=$e.start;de<=$e.end;de++){var ae=be[de];if(We=Xe[Xe.length-1],O.set(ae,(O.get(ae)||0)+1),ae&a&&O.set(a,(O.get(a)||0)+1),ae&Be)if(ae&(ne|W)){we[de]=We._level;var ke=(ae===ne?et:rt)(We._level);ke<=je&&!ce&&!Le?Xe.push({_level:ke,_override:0,_isolate:0}):ce||Le++}else if(ae&(J|j)){we[de]=We._level;var at=(ae===J?et:rt)(We._level);at<=je&&!ce&&!Le?Xe.push({_level:at,_override:ae&J?b:R,_isolate:0}):ce||Le++}else if(ae&s){ae&me&&(ae=Nf(de+1,!0)===1?pe:q),we[de]=We._level,We._override&&fe(de,We._override);var it=(ae===pe?et:rt)(We._level);it<=je&&ce===0&&Le===0?(Qe++,Xe.push({_level:it,_override:0,_isolate:1,_isolInitIndex:de})):ce++}else if(ae&se){if(ce>0)ce--;else if(Qe>0){for(Le=0;!Xe[Xe.length-1]._isolate;)Xe.pop();var mt=Xe[Xe.length-1]._isolInitIndex;mt!=null&&(Ne.set(mt,de),Ne.set(de,mt)),Xe.pop(),Qe--}We=Xe[Xe.length-1],we[de]=We._level,We._override&&fe(de,We._override)}else ae&ue?(ce===0&&(Le>0?Le--:!We._isolate&&Xe.length>1&&(Xe.pop(),We=Xe[Xe.length-1])),we[de]=We._level):ae&F&&(we[de]=$e.level);else we[de]=We._level,We._override&&ae!==te&&fe(de,We._override)}for(var Tt=[],Pt=null,_t=$e.start;_t<=$e.end;_t++){var At=be[_t];if(!(At&l)){var Yt=we[_t],rn=At&s,kn=At===se;Pt&&Yt===Pt._level?(Pt._end=_t,Pt._endsWithIsolInit=rn):Tt.push(Pt={_start:_t,_end:_t,_level:Yt,_startsWithPDI:kn,_endsWithIsolInit:rn})}}for(var ri=[],jr=0;jr<Tt.length;jr++){var re=Tt[jr];if(!re._startsWithPDI||re._startsWithPDI&&!Ne.has(re._start)){for(var Ee=[Pt=re],Fe=void 0;Pt&&Pt._endsWithIsolInit&&(Fe=Ne.get(Pt._end))!=null;)for(var ve=jr+1;ve<Tt.length;ve++)if(Tt[ve]._start===Fe){Ee.push(Pt=Tt[ve]);break}for(var Oe=[],xt=0;xt<Ee.length;xt++)for(var U=Ee[xt],Y=U._start;Y<=U._end;Y++)Oe.push(Y);for(var le=we[Oe[0]],_e=$e.level,Ae=Oe[0]-1;Ae>=0;Ae--)if(!(be[Ae]&l)){_e=we[Ae];break}var Me=Oe[Oe.length-1],Je=we[Me],Ke=$e.level;if(!(be[Me]&s)){for(var tt=Me+1;tt<=$e.end;tt++)if(!(be[tt]&l)){Ke=we[tt];break}}ri.push({_seqIndices:Oe,_sosType:Math.max(_e,le)%2?b:R,_eosType:Math.max(Ke,Je)%2?b:R})}}for(var nt=0;nt<ri.length;nt++){var Ye=ri[nt],Se=Ye._seqIndices,Zt=Ye._sosType,ut=Ye._eosType,dt=we[Se[0]]&1?b:R;if(O.get(V))for(var Bt=0;Bt<Se.length;Bt++){var Ft=Se[Bt];if(be[Ft]&V){for(var $t=Zt,Ct=Bt-1;Ct>=0;Ct--)if(!(be[Se[Ct]]&l)){$t=be[Se[Ct]];break}fe(Ft,$t&(s|se)?G:$t)}}if(O.get(M))for(var St=0;St<Se.length;St++){var kt=Se[St];if(be[kt]&M)for(var Rt=St-1;Rt>=-1;Rt--){var ln=Rt===-1?Zt:be[Se[Rt]];if(ln&o){ln===K&&fe(kt,D);break}}}if(O.get(K))for(var zt=0;zt<Se.length;zt++){var mn=Se[zt];be[mn]&K&&fe(mn,b)}if(O.get(C)||O.get(z))for(var lr=1;lr<Se.length-1;lr++){var Vn=Se[lr];if(be[Vn]&(C|z)){for(var Wn=0,un=0,Kn=lr-1;Kn>=0&&(Wn=be[Se[Kn]],!!(Wn&l));Kn--);for(var hn=lr+1;hn<Se.length&&(un=be[Se[hn]],!!(un&l));hn++);Wn===un&&(be[Vn]===C?Wn===M:Wn&(M|D))&&fe(Vn,Wn)}}if(O.get(M))for(var Gt=0;Gt<Se.length;Gt++){var Pn=Se[Gt];if(be[Pn]&M){for(var Ki=Gt-1;Ki>=0&&be[Se[Ki]]&(L|l);Ki--)fe(Se[Ki],M);for(Gt++;Gt<Se.length&&be[Se[Gt]]&(L|l|M);Gt++)be[Se[Gt]]!==M&&fe(Se[Gt],M)}}if(O.get(L)||O.get(C)||O.get(z))for(var mr=0;mr<Se.length;mr++){var ps=Se[mr];if(be[ps]&(L|C|z)){fe(ps,G);for(var Ea=mr-1;Ea>=0&&be[Se[Ea]]&l;Ea--)fe(Se[Ea],G);for(var Ca=mr+1;Ca<Se.length&&be[Se[Ca]]&l;Ca++)fe(Se[Ca],G)}}if(O.get(M))for(var Ta=0,Qu=Zt;Ta<Se.length;Ta++){var F0=Se[Ta],sp=be[F0];sp&M?Qu===R&&fe(F0,R):sp&o&&(Qu=sp)}if(O.get(a)){var Pa=b|M|D,kf=Pa|R,qo=[];{for(var Rl=[],ea=0;ea<Se.length;ea++)if(be[Se[ea]]&a){var en=Re[Se[ea]],op=void 0;if(S(en)!==null)if(Rl.length<63)Rl.push({char:en,seqIndex:ea});else break;else if((op=T(en))!==null)for(var Ra=Rl.length-1;Ra>=0;Ra--){var Of=Rl[Ra].char;if(Of===op||Of===T(E(en))||S(E(Of))===en){qo.push([Rl[Ra].seqIndex,ea]),Rl.length=Ra;break}}}qo.sort(function(Xr,Li){return Xr[0]-Li[0]})}for(var ap=0;ap<qo.length;ap++){for(var k0=qo[ap],Jn=k0[0],qu=k0[1],O0=!1,Bi=0,lp=Jn+1;lp<qu;lp++){var ec=Se[lp];if(be[ec]&kf){O0=!0;var ms=be[ec]&Pa?b:R;if(ms===dt){Bi=ms;break}}}if(O0&&!Bi){Bi=Zt;for(var up=Jn-1;up>=0;up--){var U0=Se[up];if(be[U0]&kf){var gs=be[U0]&Pa?b:R;gs!==dt?Bi=gs:Bi=dt;break}}}if(Bi){if(be[Se[Jn]]=be[Se[qu]]=Bi,Bi!==dt){for(var Ii=Jn+1;Ii<Se.length;Ii++)if(!(be[Se[Ii]]&l)){d(Re[Se[Ii]])&V&&(be[Se[Ii]]=Bi);break}}if(Bi!==dt){for(var ta=qu+1;ta<Se.length;ta++)if(!(be[Se[ta]]&l)){d(Re[Se[ta]])&V&&(be[Se[ta]]=Bi);break}}}}for(var Ns=0;Ns<Se.length;Ns++)if(be[Se[Ns]]&a){for(var cp=Ns,fp=Ns,Ji=Zt,tc=Ns-1;tc>=0;tc--)if(be[Se[tc]]&l)cp=tc;else{Ji=be[Se[tc]]&Pa?b:R;break}for(var nc=ut,rc=Ns+1;rc<Se.length;rc++)if(be[Se[rc]]&(a|l))fp=rc;else{nc=be[Se[rc]]&Pa?b:R;break}for(var Di=cp;Di<=fp;Di++)be[Se[Di]]=Ji===nc?Ji:dt;Ns=fp}}}for(var $r=$e.start;$r<=$e.end;$r++){var Uf=we[$r],So=be[$r];if(Uf&1?So&(R|M|D)&&we[$r]++:So&b?we[$r]++:So&(D|M)&&(we[$r]+=2),So&l&&(we[$r]=$r===0?$e.level:we[$r-1]),$r===$e.end||d(Re[$r])&(H|F))for(var Bl=$r;Bl>=0&&d(Re[Bl])&u;Bl--)we[Bl]=$e.level}}return{levels:we,paragraphs:Pe};function Nf(Xr,Li){for(var gr=Xr;gr<Re.length;gr++){var vr=be[gr];if(vr&(b|K))return 1;if(vr&(F|R)||Li&&vr===se)return 0;if(vr&s){var vs=N0(gr);gr=vs===-1?Re.length:vs}}return 0}function N0(Xr){for(var Li=1,gr=Xr+1;gr<Re.length;gr++){var vr=be[gr];if(vr&F)break;if(vr&se){if(--Li===0)return gr}else vr&s&&Li++}return-1}}var X="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Z;function ee(){if(!Z){var Re=v(X,!0),ze=Re.map,je=Re.reverseMap;je.forEach(function(be,Q){ze.set(Q,be)}),Z=ze}}function ie(Re){return ee(),Z.get(Re)||null}function ge(Re,ze,je,be){var Q=Re.length;je=Math.max(0,je==null?0:+je),be=Math.min(Q-1,be==null?Q-1:+be);for(var O=new Map,fe=je;fe<=be;fe++)if(ze[fe]&1){var we=ie(Re[fe]);we!==null&&O.set(fe,we)}return O}function Ce(Re,ze,je,be){var Q=Re.length;je=Math.max(0,je==null?0:+je),be=Math.min(Q-1,be==null?Q-1:+be);var O=[];return ze.paragraphs.forEach(function(fe){var we=Math.max(je,fe.start),Ne=Math.min(be,fe.end);if(we<Ne){for(var Pe=ze.levels.slice(we,Ne+1),$e=Ne;$e>=we&&d(Re[$e])&u;$e--)Pe[$e]=fe.level;for(var Ge=fe.level,Be=1/0,rt=0;rt<Pe.length;rt++){var et=Pe[rt];et>Ge&&(Ge=et),et<Be&&(Be=et|1)}for(var Ze=Ge;Ze>=Be;Ze--)for(var Xe=0;Xe<Pe.length;Xe++)if(Pe[Xe]>=Ze){for(var We=Xe;Xe+1<Pe.length&&Pe[Xe+1]>=Ze;)Xe++;Xe>We&&O.push([We+we,Xe+we])}}}),O}function Te(Re,ze,je,be){var Q=Ve(Re,ze,je,be),O=[].concat(Re);return Q.forEach(function(fe,we){O[we]=(ze.levels[fe]&1?ie(Re[fe]):null)||Re[fe]}),O.join("")}function Ve(Re,ze,je,be){for(var Q=Ce(Re,ze,je,be),O=[],fe=0;fe<Re.length;fe++)O[fe]=fe;return Q.forEach(function(we){for(var Ne=we[0],Pe=we[1],$e=O.slice(Ne,Pe+1),Ge=$e.length;Ge--;)O[Pe-Ge]=$e[Ge]}),O}return e.closingToOpeningBracket=T,e.getBidiCharType=d,e.getBidiCharTypeName=m,e.getCanonicalBracket=E,e.getEmbeddingLevels=N,e.getMirroredCharacter=ie,e.getMirroredCharactersMap=ge,e.getReorderSegments=Ce,e.getReorderedIndices=Ve,e.getReorderedString=Te,e.openingToClosingBracket=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const M5=/\bvoid\s+main\s*\(\s*\)\s*{/g;function GA(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=Xt[i];return s?GA(s):r}return n.replace(e,t)}const si=[];for(let n=0;n<256;n++)si[n]=(n<16?"0":"")+n.toString(16);function Are(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(si[n&255]+si[n>>8&255]+si[n>>16&255]+si[n>>24&255]+"-"+si[e&255]+si[e>>8&255]+"-"+si[e>>16&15|64]+si[e>>24&255]+"-"+si[t&63|128]+si[t>>8&255]+"-"+si[t>>16&255]+si[t>>24&255]+si[r&255]+si[r>>8&255]+si[r>>16&255]+si[r>>24&255]).toUpperCase()}const bc=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Mre=Date.now(),ND=new WeakMap,zD=new Map;let Ere=1e10;function HA(n,e){const t=Rre(e);let r=ND.get(n);if(r||ND.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u,c){n.onBeforeCompile.call(this,u,c);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let d=zD[f];if(!d){const m=Cre(this,u,e,t);d=zD[f]=m}u.vertexShader=d.vertexShader,u.fragmentShader=d.fragmentShader,bc(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-Mre}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:n}),Object.defineProperty(c,"id",{value:Ere++}),c.uuid=Are(),c.uniforms=bc({},u.uniforms,e.uniforms),c.defines=bc({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",c.extensions=bc({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:u=>{n.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const c=this.baseMaterial;return u===c||c.isDerivedMaterial&&c.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(bc(this.extensions,u.extensions),bc(this.defines,u.defines),bc(this.uniforms,fC.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=HA(n.isDerivedMaterial?n.getDepthMaterial():new lx({depthPacking:iC}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=HA(n.isDerivedMaterial?n.getDistanceMaterial():new ux,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function Cre(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:m,timeUniform:g}=r;if(s=s||"",o=o||"",a=a||"",u=u||"",c=c||"",f=f||"",(l||m)&&(e=GA(e)),(d||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=GA(t)),m){let v=m({vertexShader:e,fragmentShader:t});e=v.vertexShader,t=v.fragmentShader}if(d){let v=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(v.push(y),"")),f=`${d}
${v.join(`
`)}
${f}`}if(g){const v=`
uniform float ${g};
`;s=v+s,u=v+u}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,y,_,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,_))?y:`troika_${y}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=GD(e,i,s,o,a),t=GD(t,i,u,c,f),{vertexShader:e,fragmentShader:t}}function GD(n,e,t,r,i){return(r||i||t)&&(n=n.replace(M5,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function Tre(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Pre=0;const HD=new Map;function Rre(n){const e=JSON.stringify(n,Tre);let t=HD.get(e);return t==null&&HD.set(e,t=++Pre),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Bre(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var f=s.readUint(o,a);a+=4,u.push(e._readFont(o,f))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],c={_data:i,_offset:a},f={},d=0;d<l;d++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var g=o.readUint(i,s);s+=4;var v=o.readUint(i,s);s+=4,f[m]={offset:g,length:v}}for(d=0;d<u.length;d++){var y=u[d];f[y]&&(c[y.trim()]=e[y.trim()].parse(i,f[y].offset,f[y].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var f=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var d=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,f==s)return d}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},f=s;u.readFixed(i,s),s+=4;var d=u.readUshort(i,s);s+=2;var m=u.readUshort(i,s);s+=2;var g=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,f+d),c.featureList=e._lctf.readFeatureList(i,f+m),c.lookupList=e._lctf.readLookupList(i,f+g,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var d=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+d,o);u.push(m)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var f=u.ltype,d=0;d<c;d++){var m=a.readUshort(i,s);s+=2;var g=o(i,f,l+m,u);u.tabs.push(g)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++)a.push(u+f),a.push(u+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var d=o.readUshort(i,s);for(s+=2,f=0;f<d;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+d);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+d)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.default=e._lctf.readLangSysTable(i,a+u));var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var d=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var d=[];for(c=0;c<f.length-1;c++)d.push(e.CFF.readDict(i,s+f[c],s+f[c+1]));s+=f[f.length-1];var m=d[0],g=[];s=e.CFF.readIndex(i,s,g);var v=[];for(c=0;c<g.length-1;c++)v.push(a.readASCII(i,s+g[c],g[c+1]-g[c]));if(s+=g[g.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,g=[],s=e.CFF.readIndex(i,s,g);var y=[];for(c=0;c<g.length-1;c++)y.push(a.readBytes(i,s+g[c],g[c+1]-g[c]));m.CharStrings=y}if(m.ROS){s=m.FDArray;var _=[];for(s=e.CFF.readIndex(i,s,_),m.FDArray=[],c=0;c<_.length-1;c++){var x=e.CFF.readDict(i,s+_[c],s+_[c+1]);e.CFF._readFDict(i,x,v),m.FDArray.push(x)}s+=_[_.length-1],s=m.FDSelect,m.FDSelect=[];var w=i[s];if(s++,w!=3)throw w;var S=a.readUshort(i,s);for(s+=2,c=0;c<S+1;c++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,v),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var d=0;for(u==1?(d=i[s],s++):(d=a.readUshort(i,s),s+=2),c=0;c<=d;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,f=null,d=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(d=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(d=l-139,c=1),247<=l&&l<=250&&(d=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(d=256*-(l-251)-u-108,c=2),l==255&&(d=a.readInt(i,s+1)/65535,c=5),o.val=d??"o"+f,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,m=null,g=null;c<=20&&(m=c,d=1),c==12&&(m=100*c+f,d=2),c!=19&&c!=20||(m=c,d=2),21<=c&&c<=27&&(m=c,d=1),c==28&&(g=l.readShort(i,s+1),d=3),29<=c&&c<=31&&(m=c,d=1),32<=c&&c<=246&&(g=c-139,d=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,d=2),c==255&&(g=l.readInt(i,s+1)/65535,d=5),u.push(g??"o"+m),s+=d}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,m=null,g=null;if(c==28&&(g=a.readShort(i,s+1),d=3),c==29&&(g=a.readInt(i,s+1),d=5),32<=c&&c<=246&&(g=c-139,d=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,d=2),c==255)throw g=a.readInt(i,s+1)/65535,d=5,"unknown number";if(c==30){var v=[];for(d=1;;){var y=i[s+d];d++;var _=y>>4,x=15&y;if(_!=15&&v.push(_),x!=15&&v.push(x),x==15)break}for(var w="",S=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<v.length;T++)w+=S[v[T]];g=parseFloat(w)}c<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],d=1,c==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(g),s+=d}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var d=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var g=a.readUint(i,s);s+=4;var v="p"+d+"e"+m,y=c.indexOf(g);if(y==-1){var _;y=l.tables.length,c.push(g);var x=a.readUshort(i,g);x==0?_=e.cmap.parse0(i,g):x==4?_=e.cmap.parse4(i,g):x==6?_=e.cmap.parse6(i,g):x==12?_=e.cmap.parse12(i,g):console.debug("unknown format: "+x,d,m,g),l.tables.push(_)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=y}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var f=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,f=o.readUint(i,c+0),d=o.readUint(i,c+4),m=o.readUint(i,c+8);a.groups.push([f,d,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;u.instructions=o.readBytes(a,l,f),l+=f;var d=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<d;c++){var m=a[l];if(l++,u.flags.push(m),(8&m)!=0){var g=a[l];l++;for(var v=0;v<g;v++)u.flags.push(m),c++}}for(u.xs=[],c=0;c<d;c++){var y=(2&u.flags[c])!=0,_=(16&u.flags[c])!=0;y?(u.xs.push(_?a[l]:-a[l]),l++):_?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<d;c++)y=(4&u.flags[c])!=0,_=(32&u.flags[c])!=0,y?(u.ys.push(_?a[l]:-a[l]),l++):_?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var x=0,w=0;for(c=0;c<d;c++)x+=u.xs[c],w+=u.ys[c],u.xs[c]=x,u.ys[c]=w}else{var S;u.parts=[];do{S=o.readUshort(a,l),l+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(T),T.glyphIndex=o.readUshort(a,l),l+=2,1&S){var E=o.readShort(a,l);l+=2;var R=o.readShort(a,l);l+=2}else E=o.readInt8(a,l),l++,R=o.readInt8(a,l),l++;2&S?(T.m.tx=E,T.m.ty=R):(T.p1=E,T.p2=R),8&S?(T.m.a=T.m.d=o.readF2dot14(a,l),l+=2):64&S?(T.m.a=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2):128&S&&(T.m.a=o.readF2dot14(a,l),l+=2,T.m.b=o.readF2dot14(a,l),l+=2,T.m.c=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2)}while(32&S);if(256&S){var b=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<b;c++)u.instr.push(a[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(i,s,o,a){var l=s;s+=4;var u=e._bin.readUshort(i,s);return{glyphClassDef:u===0?null:e._lctf.readClassDef(i,l+u)}},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&c.fmt==1){var d=l.readUshort(i,o);o+=2,d!=0&&(c.pos=e.GPOS.readValueRecord(i,o,d))}else if(s==2&&c.fmt>=1&&c.fmt<=2){d=l.readUshort(i,o),o+=2;var m=l.readUshort(i,o);o+=2;var g=e._lctf.numOfOnes(d),v=e._lctf.numOfOnes(m);if(c.fmt==1){c.pairsets=[];var y=l.readUshort(i,o);o+=2;for(var _=0;_<y;_++){var x=u+l.readUshort(i,o);o+=2;var w=l.readUshort(i,x);x+=2;for(var S=[],T=0;T<w;T++){var E=l.readUshort(i,x);x+=2,d!=0&&(D=e.GPOS.readValueRecord(i,x,d),x+=2*g),m!=0&&(z=e.GPOS.readValueRecord(i,x,m),x+=2*v),S.push({gid2:E,val1:D,val2:z})}c.pairsets.push(S)}}if(c.fmt==2){var R=l.readUshort(i,o);o+=2;var b=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);o+=2;var C=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+R),c.classDef2=e._lctf.readClassDef(i,u+b),c.matrix=[],_=0;_<M;_++){var L=[];for(T=0;T<C;T++){var D=null,z=null;d!=0&&(D=e.GPOS.readValueRecord(i,o,d),o+=2*g),m!=0&&(z=e.GPOS.readValueRecord(i,o,m),o+=2*v),L.push({val1:D,val2:z})}c.matrix.push(L)}}}else if(s==4&&c.fmt==1)c.markCoverage=e._lctf.readCoverage(i,l.readUshort(i,o)+u),c.baseCoverage=e._lctf.readCoverage(i,l.readUshort(i,o+2)+u),c.markClassCount=l.readUshort(i,o+4),c.markArray=e.GPOS.readMarkArray(i,l.readUshort(i,o+6)+u),c.baseArray=e.GPOS.readBaseArray(i,l.readUshort(i,o+8)+u,c.markClassCount);else if(s==6&&c.fmt==1)c.mark1Coverage=e._lctf.readCoverage(i,l.readUshort(i,o)+u),c.mark2Coverage=e._lctf.readCoverage(i,l.readUshort(i,o+2)+u),c.markClassCount=l.readUshort(i,o+4),c.mark1Array=e.GPOS.readMarkArray(i,l.readUshort(i,o+6)+u),c.mark2Array=e.GPOS.readBaseArray(i,l.readUshort(i,o+8)+u,c.markClassCount);else{if(s==9&&c.fmt==1){var F=l.readUshort(i,o);o+=2;var H=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=F;else if(a.ltype!=F)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+H)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(i,s,o){var a=e._bin,l=[],u=s,c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){for(var d=[],m=0;m<o;m++)d.push(e.GPOS.readAnchorRecord(i,u+a.readUshort(i,s))),s+=2;l.push(d)}return l},e.GPOS.readMarkArray=function(i,s){var o=e._bin,a=[],l=s,u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=e.GPOS.readAnchorRecord(i,o.readUshort(i,s+2)+l);f.markClass=o.readUshort(i,s),a.push(f),s+=4}return a},e.GPOS.readAnchorRecord=function(i,s){var o=e._bin,a={};return a.fmt=o.readUshort(i,s),a.x=o.readShort(i,s+2),a.y=o.readShort(i,s+4),a},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var d=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,d),o+=2*c.newg.length}}else if(s==2&&c.fmt==1){d=l.readUshort(i,o),o+=2,c.seqs=[];for(var m=0;m<d;m++){var g=l.readUshort(i,o)+u;o+=2;var v=l.readUshort(i,g);c.seqs.push(l.readUshorts(i,g+2,v))}}else if(s==4)for(c.vals=[],d=l.readUshort(i,o),o+=2,m=0;m<d;m++){var y=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+y))}else if(s==5&&c.fmt==2){if(c.fmt==2){var _=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+_),c.scset=[];var x=l.readUshort(i,o);for(o+=2,m=0;m<x;m++){var w=l.readUshort(i,o);o+=2,c.scset.push(w==0?null:e.GSUB.readSubClassSet(i,u+w))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(m=0;m<3;m++){d=l.readUshort(i,o),o+=2;for(var S=[],T=0;T<d;T++)S.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*T)));o+=2*d,m==0&&(c.backCvg=S),m==1&&(c.inptCvg=S),m==2&&(c.ahedCvg=S)}d=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,d)}}else{if(s==7&&c.fmt==1){var E=l.readUshort(i,o);o+=2;var R=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=E;else if(a.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+R)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},d=0;d<c;d++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,s),s+=4;var d=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(d),g.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(c==0)for(var d=0;d<f;d++)u.push(l.readUshort(i,s+(d<<1))<<1);if(c==1)for(d=0;d<f;d++)u.push(l.readUint(i,s+(d<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,m=0;m<u;m++){var g=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var S,T=f[_],E=d+12*u+w;if(g==0)S=a.readUnicode(i,E,x/2);else if(g==3&&v==0)S=a.readUnicode(i,E,x/2);else if(v==0)S=a.readASCII(i,E,x);else if(v==1)S=a.readUnicode(i,E,x/2);else if(v==3)S=a.readUnicode(i,E,x/2);else{if(g!=1)throw"unknown encoding "+v+", platformID: "+g;S=a.readASCII(i,E,x),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var R="p"+g+","+y.toString(16);l[R]==null&&(l[R]={}),l[R][T!==void 0?T:_]=S,l[R]._lang=y}for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==1033)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==0)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==3084)return l[b];for(var b in l)if(l[b].postScriptName!=null)return l[b];for(var b in l){c=b;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,f=u==l?a:u+1,d=1&i.flags[u],m=1&i.flags[c],g=1&i.flags[f],v=i.xs[u],y=i.ys[u];if(u==a)if(d){if(!m){e.U.P.moveTo(s,v,y);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else m?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+v)/2,(i.ys[c]+y)/2);d?m&&e.U.P.lineTo(s,v,y):g?e.U.P.qcurveTo(s,v,y,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,v,y,(v+i.xs[f])/2,(y+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],m=l.crds[f+1];o.crds.push(d*c.a+m*c.b+c.tx),o.crds.push(d*c.c+m*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,f=o.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[c];else if(o.ltype==4)for(var d=f.vals[c],m=0;m<d.length;m++){var g=d[m],v=g.chain.length;if(!(v>l)){for(var y=!0,_=0,x=0;x<v;x++){for(;i[s+_+(1+x)]==-1;)_++;g.chain[x]!=i[s+_+(1+x)]&&(y=!1)}if(y){for(i[s]=g.nglyph,x=0;x<v+_;x++)i[s+x+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var w=e._lctf.getInterval(f.cDef,i[s]),S=f.cDef[w+2],T=f.scset[S],E=0;E<T.length;E++){var R=T[E],b=R.input;if(!(b.length>l)){for(y=!0,x=0;x<b.length;x++){var M=e._lctf.getInterval(f.cDef,i[s+1+x]);if(w==-1&&f.cDef[M+2]!=b[x]){y=!1;break}}if(y){var C=R.substLookupRecords;for(m=0;m<C.length;m+=2)C[m],C[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var L=f.lookupRec;for(E=0;E<L.length;E+=2){w=L[E];var D=a[L[E+1]];e.U._applySubs(i,s+w,D,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,d=e.U.glyphToPath(i,c),m=0;m<d.crds.length;m+=2)a.crds.push(d.crds[m]+l),a.crds.push(d.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<d.cmds.length;m++)a.cmds.push(d.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,f=s.haveWidth,d=s.width,m=s.open,g=0,v=s.x,y=s.y,_=0,x=0,w=0,S=0,T=0,E=0,R=0,b=0,M=0,C=0,L={val:0,size:0};g<i.length;){e.CFF.getCharString(i,g,L);var D=L.val;if(g+=L.size,D=="o1"||D=="o18")u.length%2!=0&&!f&&(d=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(D=="o3"||D=="o23")u.length%2!=0&&!f&&(d=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(D=="o4")u.length>1&&!f&&(d=u.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),y+=u.pop(),e.U.P.moveTo(l,v,y),m=!0;else if(D=="o5")for(;u.length>0;)v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y);else if(D=="o6"||D=="o7")for(var z=u.length,F=D=="o6",H=0;H<z;H++){var G=u.shift();F?v+=G:y+=G,F=!F,e.U.P.lineTo(l,v,y)}else if(D=="o8"||D=="o24"){z=u.length;for(var te=0;te+6<=z;)_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),S=x+u.shift(),v=w+u.shift(),y=S+u.shift(),e.U.P.curveTo(l,_,x,w,S,v,y),te+=6;D=="o24"&&(v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y))}else{if(D=="o11")break;if(D=="o1234"||D=="o1235"||D=="o1236"||D=="o1237")D=="o1234"&&(x=y,w=(_=v+u.shift())+u.shift(),C=S=x+u.shift(),E=S,b=y,v=(R=(T=(M=w+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,_,x,w,S,M,C),e.U.P.curveTo(l,T,E,R,b,v,y)),D=="o1235"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),S=x+u.shift(),M=w+u.shift(),C=S+u.shift(),T=M+u.shift(),E=C+u.shift(),R=T+u.shift(),b=E+u.shift(),v=R+u.shift(),y=b+u.shift(),u.shift(),e.U.P.curveTo(l,_,x,w,S,M,C),e.U.P.curveTo(l,T,E,R,b,v,y)),D=="o1236"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),C=S=x+u.shift(),E=S,R=(T=(M=w+u.shift())+u.shift())+u.shift(),b=E+u.shift(),v=R+u.shift(),e.U.P.curveTo(l,_,x,w,S,M,C),e.U.P.curveTo(l,T,E,R,b,v,y)),D=="o1237"&&(_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),S=x+u.shift(),M=w+u.shift(),C=S+u.shift(),T=M+u.shift(),E=C+u.shift(),R=T+u.shift(),b=E+u.shift(),Math.abs(R-v)>Math.abs(b-y)?v=R+u.shift():y=b+u.shift(),e.U.P.curveTo(l,_,x,w,S,M,C),e.U.P.curveTo(l,T,E,R,b,v,y));else if(D=="o14"){if(u.length>0&&!f&&(d=u.shift()+o.nominalWidthX,f=!0),u.length==4){var V=u.shift(),K=u.shift(),j=u.shift(),J=u.shift(),W=e.CFF.glyphBySE(o,j),ne=e.CFF.glyphBySE(o,J);e.U._drawCFF(o.CharStrings[W],s,o,a,l),s.x=V,s.y=K,e.U._drawCFF(o.CharStrings[ne],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(D=="o19"||D=="o20")u.length%2!=0&&!f&&(d=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,g+=c+7>>3;else if(D=="o21")u.length>2&&!f&&(d=u.shift()+a.nominalWidthX,f=!0),y+=u.pop(),v+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,y),m=!0;else if(D=="o22")u.length>1&&!f&&(d=u.shift()+a.nominalWidthX,f=!0),v+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,v,y),m=!0;else if(D=="o25"){for(;u.length>6;)v+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,v,y);_=v+u.shift(),x=y+u.shift(),w=_+u.shift(),S=x+u.shift(),v=w+u.shift(),y=S+u.shift(),e.U.P.curveTo(l,_,x,w,S,v,y)}else if(D=="o26")for(u.length%2&&(v+=u.shift());u.length>0;)_=v,x=y+u.shift(),v=w=_+u.shift(),y=(S=x+u.shift())+u.shift(),e.U.P.curveTo(l,_,x,w,S,v,y);else if(D=="o27")for(u.length%2&&(y+=u.shift());u.length>0;)x=y,w=(_=v+u.shift())+u.shift(),S=x+u.shift(),v=w+u.shift(),y=S,e.U.P.curveTo(l,_,x,w,S,v,y);else if(D=="o10"||D=="o29"){var ue=D=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var q=u.pop(),pe=ue.Subrs[q+ue.Bias];s.x=v,s.y=y,s.nStems=c,s.haveWidth=f,s.width=d,s.open=m,e.U._drawCFF(pe,s,o,a,l),v=s.x,y=s.y,c=s.nStems,f=s.haveWidth,d=s.width,m=s.open}}else if(D=="o30"||D=="o31"){var me=u.length,se=(te=0,D=="o31");for(te+=me-(z=-3&me);te<z;)se?(x=y,w=(_=v+u.shift())+u.shift(),y=(S=x+u.shift())+u.shift(),z-te==5?(v=w+u.shift(),te++):v=w,se=!1):(_=v,x=y+u.shift(),w=_+u.shift(),S=x+u.shift(),v=w+u.shift(),z-te==5?(y=S+u.shift(),te++):y=S,se=!0),e.U.P.curveTo(l,_,x,w,S,v,y),te+=4}else{if((D+"").charAt(0)=="o")throw console.debug("Unknown operation: "+D,i),D;u.push(D)}}}s.x=v,s.y=y,s.nStems=c,s.haveWidth=f,s.width=d,s.open=m};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Ire(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(D,z){for(var F=new t(31),H=0;H<31;++H)F[H]=z+=1<<D[H-1];var G=new r(F[30]);for(H=1;H<30;++H)for(var te=F[H];te<F[H+1];++te)G[te]=te-F[H]<<5|H;return[F,G]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=a(s,0)[0],d=new t(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,d[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var v=function(D,z,F){for(var H=D.length,G=0,te=new t(z);G<H;++G)++te[D[G]-1];var V,K=new t(z);for(G=0;G<z;++G)K[G]=K[G-1]+te[G-1]<<1;if(F){V=new t(1<<z);var j=15-z;for(G=0;G<H;++G)if(D[G])for(var J=G<<4|D[G],W=z-D[G],ne=K[D[G]-1]++<<W,ue=ne|(1<<W)-1;ne<=ue;++ne)V[d[ne]>>>j]=J}else for(V=new t(H),G=0;G<H;++G)D[G]&&(V[G]=d[K[D[G]-1]++]>>>15-D[G]);return V},y=new e(288);for(m=0;m<144;++m)y[m]=8;for(m=144;m<256;++m)y[m]=9;for(m=256;m<280;++m)y[m]=7;for(m=280;m<288;++m)y[m]=8;var _=new e(32);for(m=0;m<32;++m)_[m]=5;var x=v(y,9,1),w=v(_,5,1),S=function(D){for(var z=D[0],F=1;F<D.length;++F)D[F]>z&&(z=D[F]);return z},T=function(D,z,F){var H=z/8|0;return(D[H]|D[H+1]<<8)>>(7&z)&F},E=function(D,z){var F=z/8|0;return(D[F]|D[F+1]<<8|D[F+2]<<16)>>(7&z)},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],b=function(D,z,F){var H=new Error(z||R[D]);if(H.code=D,Error.captureStackTrace&&Error.captureStackTrace(H,b),!F)throw H;return H},M=function(D,z,F){var H=D.length;if(!H||F&&!F.l&&H<5)return z||new e(0);var G=!z||F,te=!F||F.i;F||(F={}),z||(z=new e(3*H));var V,K=function(We){var ce=z.length;if(We>ce){var Le=new e(Math.max(2*ce,We));Le.set(z),z=Le}},j=F.f||0,J=F.p||0,W=F.b||0,ne=F.l,ue=F.d,q=F.m,pe=F.n,me=8*H;do{if(!ne){F.f=j=T(D,J,1);var se=T(D,J+1,3);if(J+=3,!se){var N=D[(je=((V=J)/8|0)+(7&V&&1)+4)-4]|D[je-3]<<8,X=je+N;if(X>H){te&&b(0);break}G&&K(W+N),z.set(D.subarray(je,X),W),F.b=W+=N,F.p=J=8*X;continue}if(se==1)ne=x,ue=w,q=9,pe=5;else if(se==2){var Z=T(D,J,31)+257,ee=T(D,J+10,15)+4,ie=Z+T(D,J+5,31)+1;J+=14;for(var ge=new e(ie),Ce=new e(19),Te=0;Te<ee;++Te)Ce[o[Te]]=T(D,J+3*Te,7);J+=3*ee;var Ve=S(Ce),Re=(1<<Ve)-1,ze=v(Ce,Ve,1);for(Te=0;Te<ie;){var je,be=ze[T(D,J,Re)];if(J+=15&be,(je=be>>>4)<16)ge[Te++]=je;else{var Q=0,O=0;for(je==16?(O=3+T(D,J,3),J+=2,Q=ge[Te-1]):je==17?(O=3+T(D,J,7),J+=3):je==18&&(O=11+T(D,J,127),J+=7);O--;)ge[Te++]=Q}}var fe=ge.subarray(0,Z),we=ge.subarray(Z);q=S(fe),pe=S(we),ne=v(fe,q,1),ue=v(we,pe,1)}else b(1);if(J>me){te&&b(0);break}}G&&K(W+131072);for(var Ne=(1<<q)-1,Pe=(1<<pe)-1,$e=J;;$e=J){var Ge=(Q=ne[E(D,J)&Ne])>>>4;if((J+=15&Q)>me){te&&b(0);break}if(Q||b(2),Ge<256)z[W++]=Ge;else{if(Ge==256){$e=J,ne=null;break}var Be=Ge-254;if(Ge>264){var rt=i[Te=Ge-257];Be=T(D,J,(1<<rt)-1)+u[Te],J+=rt}var et=ue[E(D,J)&Pe],Ze=et>>>4;if(et||b(3),J+=15&et,we=f[Ze],Ze>3&&(rt=s[Ze],we+=E(D,J)&(1<<rt)-1,J+=rt),J>me){te&&b(0);break}G&&K(W+131072);for(var Xe=W+Be;W<Xe;W+=4)z[W]=z[W-we],z[W+1]=z[W+1-we],z[W+2]=z[W+2-we],z[W+3]=z[W+3-we];W=Xe}}F.l=ne,F.p=$e,F.b=W,ne&&(j=1,F.m=q,F.d=ue,F.n=pe)}while(!j);return W==z.length?z:function(We,ce,Le){(ce==null||ce<0)&&(ce=0),(Le==null||Le>We.length)&&(Le=We.length);var Qe=new(We instanceof t?t:We instanceof r?r:e)(Le-ce);return Qe.set(We.subarray(ce,Le)),Qe}(z,0,W)},C=new e(0),L=typeof TextDecoder<"u"&&new TextDecoder;try{L.decode(C,{stream:!0})}catch{}return n.convert_streams=function(D){var z=new DataView(D),F=0;function H(){var Z=z.getUint16(F);return F+=2,Z}function G(){var Z=z.getUint32(F);return F+=4,Z}function te(Z){N.setUint16(X,Z),X+=2}function V(Z){N.setUint32(X,Z),X+=4}for(var K={signature:G(),flavor:G(),length:G(),numTables:H(),reserved:H(),totalSfntSize:G(),majorVersion:H(),minorVersion:H(),metaOffset:G(),metaLength:G(),metaOrigLength:G(),privOffset:G(),privLength:G()},j=0;Math.pow(2,j)<=K.numTables;)j++;j--;for(var J=16*Math.pow(2,j),W=16*K.numTables-J,ne=12,ue=[],q=0;q<K.numTables;q++)ue.push({tag:G(),offset:G(),compLength:G(),origLength:G(),origChecksum:G()}),ne+=16;var pe,me=new Uint8Array(12+16*ue.length+ue.reduce(function(Z,ee){return Z+ee.origLength+4},0)),se=me.buffer,N=new DataView(se),X=0;return V(K.flavor),te(K.numTables),te(J),te(j),te(W),ue.forEach(function(Z){V(Z.tag),V(Z.origChecksum),V(ne),V(Z.origLength),Z.outOffset=ne,(ne+=Z.origLength)%4!=0&&(ne+=4-ne%4)}),ue.forEach(function(Z){var ee,ie=D.slice(Z.offset,Z.offset+Z.compLength);if(Z.compLength!=Z.origLength){var ge=new Uint8Array(Z.origLength);ee=new Uint8Array(ie,2),M(ee,ge)}else ge=new Uint8Array(ie);me.set(ge,Z.outOffset);var Ce=0;(ne=Z.outOffset+Z.origLength)%4!=0&&(Ce=4-ne%4),me.set(new Uint8Array(Ce).buffer,Z.outOffset+Z.origLength),pe=ne+Ce}),se.slice(0,pe)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function Dre(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function f(R){if(!c){const b={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let M in r){let C=0;r[M].split(",").forEach(L=>{let[D,z]=L.split("+");D=parseInt(D,36),z=z?parseInt(z,36):0,c.set(C+=D,b[M]);for(let F=z;F--;)c.set(++C,b[M])})}}return c.get(R)||u}const d=1,m=2,g=3,v=4,y=[null,"isol","init","fina","medi"];function _(R){const b=new Uint8Array(R.length);let M=u,C=d,L=-1;for(let D=0;D<R.length;D++){const z=R.codePointAt(D);let F=f(z)|0,H=d;F&a||(M&(i|o|l)?F&(s|o|l)?(H=g,(C===d||C===g)&&b[L]++):F&(i|u)&&(C===m||C===v)&&b[L]--:M&(s|u)&&(C===m||C===v)&&b[L]--,C=b[D]=H,M=F,L=D,z>65535&&D++)}return b}function x(R,b){const M=[];for(let L=0;L<b.length;L++){const D=b.codePointAt(L);D>65535&&L++,M.push(n.U.codeToGlyph(R,D))}const C=R.GSUB;if(C){const{lookupList:L,featureList:D}=C;let z;const F=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,H=[];D.forEach(G=>{if(F.test(G.tag))for(let te=0;te<G.tab.length;te++){if(H[G.tab[te]])continue;H[G.tab[te]]=!0;const V=L[G.tab[te]],K=/^(isol|init|fina|medi)$/.test(G.tag);K&&!z&&(z=_(b));for(let j=0;j<M.length;j++)(!z||!K||y[z[j]]===G.tag)&&n.U._applySubs(M,j,V,L)}})}return M}function w(R,b){const M=new Int16Array(b.length*3);let C=0;for(;C<b.length;C++){const F=b[C];if(F===-1)continue;M[C*3+2]=R.hmtx.aWidth[F];const H=R.GPOS;if(H){const G=H.lookupList;for(let te=0;te<G.length;te++){const V=G[te];for(let K=0;K<V.tabs.length;K++){const j=V.tabs[K];if(V.ltype===1){if(n._lctf.coverageIndex(j.coverage,F)!==-1&&j.pos){z(j.pos,C);break}}else if(V.ltype===2){let J=null,W=L();if(W!==-1){const ne=n._lctf.coverageIndex(j.coverage,b[W]);if(ne!==-1){if(j.fmt===1){const ue=j.pairsets[ne];for(let q=0;q<ue.length;q++)ue[q].gid2===F&&(J=ue[q])}else if(j.fmt===2){const ue=n.U._getGlyphClass(b[W],j.classDef1),q=n.U._getGlyphClass(F,j.classDef2);J=j.matrix[ue][q]}if(J){J.val1&&z(J.val1,W),J.val2&&z(J.val2,C);break}}}}else if(V.ltype===4){const J=n._lctf.coverageIndex(j.markCoverage,F);if(J!==-1){const W=L(D),ne=W===-1?-1:n._lctf.coverageIndex(j.baseCoverage,b[W]);if(ne!==-1){const ue=j.markArray[J],q=j.baseArray[ne][ue.markClass];M[C*3]=q.x-ue.x+M[W*3]-M[W*3+2],M[C*3+1]=q.y-ue.y+M[W*3+1];break}}}else if(V.ltype===6){const J=n._lctf.coverageIndex(j.mark1Coverage,F);if(J!==-1){const W=L();if(W!==-1){const ne=b[W];if(S(R,ne)===3){const ue=n._lctf.coverageIndex(j.mark2Coverage,ne);if(ue!==-1){const q=j.mark1Array[J],pe=j.mark2Array[ue][q.markClass];M[C*3]=pe.x-q.x+M[W*3]-M[W*3+2],M[C*3+1]=pe.y-q.y+M[W*3+1];break}}}}}}}}else if(R.kern&&!R.cff){const G=L();if(G!==-1){const te=R.kern.glyph1.indexOf(b[G]);if(te!==-1){const V=R.kern.rval[te].glyph2.indexOf(F);V!==-1&&(M[G*3+2]+=R.kern.rval[te].vals[V])}}}}return M;function L(F){for(let H=C-1;H>=0;H--)if(b[H]!==-1&&(!F||F(b[H])))return H;return-1}function D(F){return S(R,F)===1}function z(F,H){for(let G=0;G<3;G++)M[H*3+G]+=F[G]||0}}function S(R,b){const M=R.GDEF&&R.GDEF.glyphClassDef;return M?n.U._getGlyphClass(b,M):0}function T(...R){for(let b=0;b<R.length;b++)if(typeof R[b]=="number")return R[b]}function E(R){const b=Object.create(null),M=R["OS/2"],C=R.hhea,L=R.head.unitsPerEm,D=T(M&&M.sTypoAscender,C&&C.ascender,L),z={unitsPerEm:L,ascender:D,descender:T(M&&M.sTypoDescender,C&&C.descender,0),capHeight:T(M&&M.sCapHeight,D),xHeight:T(M&&M.sxHeight,D),lineGap:T(M&&M.sTypoLineGap,C&&C.lineGap),supportsCodePoint(F){return n.U.codeToGlyph(R,F)>0},forEachGlyph(F,H,G,te){let V=0;const K=1/z.unitsPerEm*H,j=x(R,F);let J=0;const W=w(R,j);return j.forEach((ne,ue)=>{if(ne!==-1){let q=b[ne];if(!q){const{cmds:pe,crds:me}=n.U.glyphToPath(R,ne);let se="",N=0;for(let ge=0,Ce=pe.length;ge<Ce;ge++){const Te=t[pe[ge]];se+=pe[ge];for(let Ve=1;Ve<=Te;Ve++)se+=(Ve>1?",":"")+me[N++]}let X,Z,ee,ie;if(me.length){X=Z=1/0,ee=ie=-1/0;for(let ge=0,Ce=me.length;ge<Ce;ge+=2){let Te=me[ge],Ve=me[ge+1];Te<X&&(X=Te),Ve<Z&&(Z=Ve),Te>ee&&(ee=Te),Ve>ie&&(ie=Ve)}}else X=ee=Z=ie=0;q=b[ne]={index:ne,advanceWidth:R.hmtx.aWidth[ne],xMin:X,yMin:Z,xMax:ee,yMax:ie,path:se}}te.call(null,q,V+W[ue*3]*K,W[ue*3+1]*K,J),V+=W[ue*3+2]*K,G&&(V+=G*H)}J+=F.codePointAt(J)>65535?2:1}),V}};return z}return function(b){const M=new Uint8Array(b,0,4),C=n._bin.readASCII(M,0,4);if(C==="wOFF")b=e(b);else if(C==="wOF2")throw new Error("woff2 fonts not supported");return E(n.parse(b)[0])}}const Lre=Yh({name:"Typr Font Parser",dependencies:[Bre,Ire,Dre],init(n,e,t){const r=n(),i=e();return t(r,i)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Fre(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(w){var S=w>>5;this.buckets.set(S,(this.buckets.get(S)||0)|1<<(31&w))},e.prototype.has=function(w){var S=this.buckets.get(w>>5);return S!==void 0&&(S&1<<(31&w))!=0},e.prototype.serialize=function(){var w=[];return this.buckets.forEach(function(S,T){w.push((+T).toString(36)+":"+S.toString(36))}),w.join(",")},e.prototype.deserialize=function(w){var S=this;this.buckets.clear(),w.split(",").forEach(function(T){var E=T.split(":");S.buckets.set(parseInt(E[0],36),parseInt(E[1],36))})};var t=Math.pow(2,8),r=t-1,i=~r;function s(w){var S=function(E){return E&i}(w).toString(16),T=function(E){return(E&i)+t-1}(w).toString(16);return"codepoint-index/plane"+(w>>16)+"/"+S+"-"+T+".json"}function o(w,S){var T=w&r,E=S.codePointAt(T/6|0);return((E=(E||48)-48)&1<<T%6)!=0}function a(w,S){var T;(T=w,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(E){return E.split("-").map(function(R){return parseInt(R.trim(),16)})})).forEach(function(E){var R=E[0],b=E[1];b===void 0&&(b=R),S(R,b)})}function l(w,S){a(w,function(T,E){for(var R=T;R<=E;R++)S(R)})}var u={},c={},f=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function m(w){var S=f.get(w);return S||(S=new e,l(w.ranges,function(T){return S.add(T)}),f.set(w,S)),S}var g,v=new Map;function y(w,S,T){return w[S]?S:w[T]?T:function(E){for(var R in E)return R}(w)}function _(w,S){var T=S;if(!w.includes(T)){T=1/0;for(var E=0;E<w.length;E++)Math.abs(w[E]-S)<Math.abs(T-S)&&(T=w[E])}return T}function x(w){return g||(g=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(S){g.add(S)})),g.has(w)}return n.CodePointSet=e,n.clearCache=function(){u={},c={}},n.getFontsForString=function(w,S){S===void 0&&(S={});var T,E=S.lang;E===void 0&&(E=/\p{Script=Hangul}/u.test(T=w)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(T)?"ja":"en");var R=S.category;R===void 0&&(R="sans-serif");var b=S.style;b===void 0&&(b="normal");var M=S.weight;M===void 0&&(M=400);var C=(S.dataUrl||d).replace(/\/$/g,""),L=new Map,D=new Uint8Array(w.length),z={},F={},H=new Array(w.length),G=new Map,te=!1;function V(J){var W=v.get(J);return W||(W=fetch(C+"/"+J).then(function(ne){if(!ne.ok)throw new Error(ne.statusText);return ne.json().then(function(ue){if(!Array.isArray(ue)||ue[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ue[0]);return ue[1]})}).catch(function(ne){if(C!==d)return te||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+C+'", trying default CDN. '+ne.message),te=!0),C=d,v.delete(J),V(J);throw ne}),v.set(J,W)),W}for(var K=function(J){var W=w.codePointAt(J),ne=s(W);H[J]=ne,u[ne]||G.has(ne)||G.set(ne,V(ne).then(function(ue){u[ne]=ue})),W>65535&&(J++,j=J)},j=0;j<w.length;j++)K(j);return Promise.all(G.values()).then(function(){G.clear();for(var J=function(ne){var ue=w.codePointAt(ne),q=null,pe=u[H[ne]],me=void 0;for(var se in pe){var N=F[se];if(N===void 0&&(N=F[se]=new RegExp(se).test(E||"en")),N){for(var X in me=se,pe[se])if(o(ue,pe[se][X])){q=X;break}break}}if(!q){e:for(var Z in pe)if(Z!==me){for(var ee in pe[Z])if(o(ue,pe[Z][ee])){q=ee;break e}}}q||(console.debug("No font coverage for U+"+ue.toString(16)),q="latin"),H[ne]=q,c[q]||G.has(q)||G.set(q,V("font-meta/"+q+".json").then(function(ie){c[q]=ie})),ue>65535&&(ne++,W=ne)},W=0;W<w.length;W++)J(W);return Promise.all(G.values())}).then(function(){for(var J,W=null,ne=0;ne<w.length;ne++){var ue=w.codePointAt(ne);if(W&&(x(ue)||m(W).has(ue)))D[ne]=D[ne-1];else{W=c[H[ne]];var q=z[W.id];if(!q){var pe=W.typeforms,me=y(pe,R,"sans-serif"),se=y(pe[me],b,"normal"),N=_((J=pe[me])===null||J===void 0?void 0:J[se],M);q=z[W.id]=C+"/font-files/"+W.id+"/"+me+"."+se+"."+N+".woff"}var X=L.get(q);X==null&&(X=L.size,L.set(q,X)),D[ne]=X}ue>65535&&(ne++,D[ne]=D[ne-1])}return{fontUrls:Array.from(L.keys()),chars:D}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function kre(n,e){const t=Object.create(null),r=Object.create(null);function i(o,a){const l=u=>{console.error(`Failure loading font ${o}`,u)};try{const u=new XMLHttpRequest;u.open("get",o,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const c=n(u.response);c.src=o,a(c)}catch(c){l(c)}},u.onerror=l,u.send()}catch(u){l(u)}}function s(o,a){let l=t[o];l?a(l):r[o]?r[o].push(a):(r[o]=[a],i(o,u=>{u.src=o,t[o]=u,r[o].forEach(c=>c(u)),delete r[o]}))}return function(o,a,{lang:l,fonts:u=[],style:c="normal",weight:f="normal",unicodeFontsURL:d}={}){const m=new Uint8Array(o.length),g=[];o.length||x();const v=new Map,y=[];if(c!=="italic"&&(c="normal"),typeof f!="number"&&(f=f==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(S=>!S.lang||S.lang.test(l)).reverse(),u.length){let R=0;(function b(M=0){for(let C=M,L=o.length;C<L;C++){const D=o.codePointAt(C);if(R===1&&g[m[C-1]].supportsCodePoint(D)||C>0&&/\s/.test(o[C]))m[C]=m[C-1],R===2&&(y[y.length-1][1]=C);else for(let z=m[C],F=u.length;z<=F;z++)if(z===F){const H=R===2?y[y.length-1]:y[y.length]=[C,C];H[1]=C,R=2}else{m[C]=z;const{src:H,unicodeRange:G}=u[z];if(!G||w(D,G)){const te=t[H];if(!te){s(H,()=>{b(C)});return}if(te.supportsCodePoint(D)){let V=v.get(te);typeof V!="number"&&(V=g.length,g.push(te),v.set(te,V)),m[C]=V,R=1;break}}}D>65535&&C+1<L&&(m[C+1]=m[C],C++,R===2&&(y[y.length-1][1]=C))}_()})()}else y.push([0,o.length-1]),_();function _(){if(y.length){const S=y.map(T=>o.substring(T[0],T[1]+1)).join(`
`);e.getFontsForString(S,{lang:l||void 0,style:c,weight:f,dataUrl:d}).then(({fontUrls:T,chars:E})=>{const R=g.length;let b=0;y.forEach(C=>{for(let L=0,D=C[1]-C[0];L<=D;L++)m[C[0]+L]=E[b++]+R;b++});let M=0;T.forEach((C,L)=>{s(C,D=>{g[L+R]=D,++M===T.length&&x()})})})}else x()}function x(){a({chars:m,fonts:g})}function w(S,T){for(let E=0;E<T.length;E++){const[R,b=R]=T[E];if(R<=S&&S<=b)return!0}return!1}}}const Ore=Yh({name:"FontResolver",dependencies:[kre,Lre,Fre],init(n,e,t){return n(e,t())}});function Ure(n,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:g,lang:v,fonts:y,style:_,weight:x,preResolvedFonts:w,unicodeFontsURL:S},T){const E=({chars:R,fonts:b})=>{let M,C;const L=[];for(let D=0;D<R.length;D++)R[D]!==C?(C=R[D],L.push(M={start:D,end:D,fontObj:b[R[D]]})):M.end=D;T(L)};w?E(w):n(g,E,{lang:v,fonts:y,style:_,weight:x,unicodeFontsURL:S})}function a({text:g="",font:v,lang:y,sdfGlyphSize:_=64,fontSize:x=400,fontWeight:w=1,fontStyle:S="normal",letterSpacing:T=0,lineHeight:E="normal",maxWidth:R=1/0,direction:b,textAlign:M="left",textIndent:C=0,whiteSpace:L="normal",overflowWrap:D="normal",anchorX:z=0,anchorY:F=0,metricsOnly:H=!1,unicodeFontsURL:G,preResolvedFonts:te=null,includeCaretPositions:V=!1,chunkedBoundsSize:K=8192,colorRanges:j=null},J){const W=f(),ne={fontLoad:0,typesetting:0};g.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),g=g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),x=+x,T=+T,R=+R,E=E||"normal",C=+C,o({text:g,lang:y,style:S,weight:w,fonts:typeof v=="string"?[{src:v}]:v,unicodeFontsURL:G,preResolvedFonts:te},ue=>{ne.fontLoad=f()-W;const q=isFinite(R);let pe=null,me=null,se=null,N=null,X=null,Z=null,ee=null,ie=null,ge=0,Ce=0,Te=L!=="nowrap";const Ve=new Map,Re=f();let ze=C,je=0,be=new d;const Q=[be];ue.forEach(Pe=>{const{fontObj:$e}=Pe,{ascender:Ge,descender:Be,unitsPerEm:rt,lineGap:et,capHeight:Ze,xHeight:Xe}=$e;let We=Ve.get($e);if(!We){const ae=x/rt,ke=E==="normal"?(Ge-Be+et)*ae:E*x,at=(ke-(Ge-Be)*ae)/2,it=Math.min(ke,(Ge-Be)*ae),mt=(Ge+Be)/2*ae+it/2;We={index:Ve.size,src:$e.src,fontObj:$e,fontSizeMult:ae,unitsPerEm:rt,ascender:Ge*ae,descender:Be*ae,capHeight:Ze*ae,xHeight:Xe*ae,lineHeight:ke,baseline:-at-Ge*ae,caretTop:mt,caretBottom:mt-it},Ve.set($e,We)}const{fontSizeMult:ce}=We,Le=g.slice(Pe.start,Pe.end+1);let Qe,de;$e.forEachGlyph(Le,x,T,(ae,ke,at,it)=>{ke+=je,it+=Pe.start,Qe=ke,de=ae;const mt=g.charAt(it),Tt=ae.advanceWidth*ce,Pt=be.count;let _t;if("isEmpty"in ae||(ae.isWhitespace=!!mt&&new RegExp(i).test(mt),ae.canBreakAfter=!!mt&&s.test(mt),ae.isEmpty=ae.xMin===ae.xMax||ae.yMin===ae.yMax||r.test(mt)),!ae.isWhitespace&&!ae.isEmpty&&Ce++,Te&&q&&!ae.isWhitespace&&ke+Tt+ze>R&&Pt){if(be.glyphAt(Pt-1).glyphObj.canBreakAfter)_t=new d,ze=-ke;else for(let Yt=Pt;Yt--;)if(Yt===0&&D==="break-word"){_t=new d,ze=-ke;break}else if(be.glyphAt(Yt).glyphObj.canBreakAfter){_t=be.splitAt(Yt+1);const rn=_t.glyphAt(0).x;ze-=rn;for(let kn=_t.count;kn--;)_t.glyphAt(kn).x-=rn;break}_t&&(be.isSoftWrapped=!0,be=_t,Q.push(be),ge=R)}let At=be.glyphAt(be.count);At.glyphObj=ae,At.x=ke+ze,At.y=at,At.width=Tt,At.charIndex=it,At.fontData=We,mt===`
`&&(be=new d,Q.push(be),ze=-(ke+Tt+T*x)+C)}),je=Qe+de.advanceWidth*ce+T*x});let O=0;Q.forEach(Pe=>{let $e=!0;for(let Ge=Pe.count;Ge--;){const Be=Pe.glyphAt(Ge);$e&&!Be.glyphObj.isWhitespace&&(Pe.width=Be.x+Be.width,Pe.width>ge&&(ge=Pe.width),$e=!1);let{lineHeight:rt,capHeight:et,xHeight:Ze,baseline:Xe}=Be.fontData;rt>Pe.lineHeight&&(Pe.lineHeight=rt);const We=Xe-Pe.baseline;We<0&&(Pe.baseline+=We,Pe.cap+=We,Pe.ex+=We),Pe.cap=Math.max(Pe.cap,Pe.baseline+et),Pe.ex=Math.max(Pe.ex,Pe.baseline+Ze)}Pe.baseline-=O,Pe.cap-=O,Pe.ex-=O,O+=Pe.lineHeight});let fe=0,we=0;if(z&&(typeof z=="number"?fe=-z:typeof z=="string"&&(fe=-ge*(z==="left"?0:z==="center"?.5:z==="right"?1:u(z)))),F&&(typeof F=="number"?we=-F:typeof F=="string"&&(we=F==="top"?0:F==="top-baseline"?-Q[0].baseline:F==="top-cap"?-Q[0].cap:F==="top-ex"?-Q[0].ex:F==="middle"?O/2:F==="bottom"?O:F==="bottom-baseline"?-Q[Q.length-1].baseline:u(F)*O)),!H){const Pe=e.getEmbeddingLevels(g,b);pe=new Uint16Array(Ce),me=new Uint8Array(Ce),se=new Float32Array(Ce*2),N={},ee=[1/0,1/0,-1/0,-1/0],ie=[],V&&(Z=new Float32Array(g.length*4)),j&&(X=new Uint8Array(Ce*3));let $e=0,Ge=-1,Be=-1,rt,et;if(Q.forEach((Ze,Xe)=>{let{count:We,width:ce}=Ze;if(We>0){let Le=0;for(let it=We;it--&&Ze.glyphAt(it).glyphObj.isWhitespace;)Le++;let Qe=0,de=0;if(M==="center")Qe=(ge-ce)/2;else if(M==="right")Qe=ge-ce;else if(M==="justify"&&Ze.isSoftWrapped){let it=0;for(let mt=We-Le;mt--;)Ze.glyphAt(mt).glyphObj.isWhitespace&&it++;de=(ge-ce)/it}if(de||Qe){let it=0;for(let mt=0;mt<We;mt++){let Tt=Ze.glyphAt(mt);const Pt=Tt.glyphObj;Tt.x+=Qe+it,de!==0&&Pt.isWhitespace&&mt<We-Le&&(it+=de,Tt.width+=de)}}const ae=e.getReorderSegments(g,Pe,Ze.glyphAt(0).charIndex,Ze.glyphAt(Ze.count-1).charIndex);for(let it=0;it<ae.length;it++){const[mt,Tt]=ae[it];let Pt=1/0,_t=-1/0;for(let At=0;At<We;At++)if(Ze.glyphAt(At).charIndex>=mt){let Yt=At,rn=At;for(;rn<We;rn++){let kn=Ze.glyphAt(rn);if(kn.charIndex>Tt)break;rn<We-Le&&(Pt=Math.min(Pt,kn.x),_t=Math.max(_t,kn.x+kn.width))}for(let kn=Yt;kn<rn;kn++){const ri=Ze.glyphAt(kn);ri.x=_t-(ri.x+ri.width-Pt)}break}}let ke;const at=it=>ke=it;for(let it=0;it<We;it++){const mt=Ze.glyphAt(it);ke=mt.glyphObj;const Tt=ke.index,Pt=Pe.levels[mt.charIndex]&1;if(Pt){const _t=e.getMirroredCharacter(g[mt.charIndex]);_t&&mt.fontData.fontObj.forEachGlyph(_t,0,0,at)}if(V){const{charIndex:_t,fontData:At}=mt,Yt=mt.x+fe,rn=mt.x+mt.width+fe;Z[_t*4]=Pt?rn:Yt,Z[_t*4+1]=Pt?Yt:rn,Z[_t*4+2]=Ze.baseline+At.caretBottom+we,Z[_t*4+3]=Ze.baseline+At.caretTop+we;const kn=_t-Ge;kn>1&&c(Z,Ge,kn),Ge=_t}if(j){const{charIndex:_t}=mt;for(;_t>Be;)Be++,j.hasOwnProperty(Be)&&(et=j[Be])}if(!ke.isWhitespace&&!ke.isEmpty){const _t=$e++,{fontSizeMult:At,src:Yt,index:rn}=mt.fontData,kn=N[Yt]||(N[Yt]={});kn[Tt]||(kn[Tt]={path:ke.path,pathBounds:[ke.xMin,ke.yMin,ke.xMax,ke.yMax]});const ri=mt.x+fe,jr=mt.y+Ze.baseline+we;se[_t*2]=ri,se[_t*2+1]=jr;const re=ri+ke.xMin*At,Ee=jr+ke.yMin*At,Fe=ri+ke.xMax*At,ve=jr+ke.yMax*At;re<ee[0]&&(ee[0]=re),Ee<ee[1]&&(ee[1]=Ee),Fe>ee[2]&&(ee[2]=Fe),ve>ee[3]&&(ee[3]=ve),_t%K===0&&(rt={start:_t,end:_t,rect:[1/0,1/0,-1/0,-1/0]},ie.push(rt)),rt.end++;const Oe=rt.rect;if(re<Oe[0]&&(Oe[0]=re),Ee<Oe[1]&&(Oe[1]=Ee),Fe>Oe[2]&&(Oe[2]=Fe),ve>Oe[3]&&(Oe[3]=ve),pe[_t]=Tt,me[_t]=rn,j){const xt=_t*3;X[xt]=et>>16&255,X[xt+1]=et>>8&255,X[xt+2]=et&255}}}}}),Z){const Ze=g.length-Ge;Ze>1&&c(Z,Ge,Ze)}}const Ne=[];Ve.forEach(({index:Pe,src:$e,unitsPerEm:Ge,ascender:Be,descender:rt,lineHeight:et,capHeight:Ze,xHeight:Xe})=>{Ne[Pe]={src:$e,unitsPerEm:Ge,ascender:Be,descender:rt,lineHeight:et,capHeight:Ze,xHeight:Xe}}),ne.typesetting=f()-Re,J({glyphIds:pe,glyphFontIndices:me,glyphPositions:se,glyphData:N,fontData:Ne,caretPositions:Z,glyphColors:X,chunkedBounds:ie,fontSize:x,topBaseline:we+Q[0].baseline,blockBounds:[fe,we-O,fe+ge,we],visibleBounds:ee,timings:ne})})}function l(g,v){a({...g,metricsOnly:!0},y=>{const[_,x,w,S]=y.blockBounds;v({width:w-_,height:S-x})})}function u(g){let v=g.match(/^([\d.]+)%$/),y=v?parseFloat(v[1]):NaN;return isNaN(y)?0:y/100}function c(g,v,y){const _=g[v*4],x=g[v*4+1],w=g[v*4+2],S=g[v*4+3],T=(x-_)/y;for(let E=0;E<y;E++){const R=(v+E)*4;g[R]=_+T*E,g[R+1]=_+T*(E+1),g[R+2]=w,g[R+3]=S}}function f(){return(self.performance||Date).now()}function d(){this.data=[]}const m=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(g){let v=d.flyweight;return v.data=this.data,v.index=g,v},splitAt(g){let v=new d;return v.data=this.data.splice(g*m.length),v}},d.flyweight=m.reduce((g,v,y,_)=>(Object.defineProperty(g,v,{get(){return this.data[this.index*m.length+y]},set(x){this.data[this.index*m.length+y]=x}}),g),{data:null,index:0}),{typeset:a,measure:l}}const sf=()=>(self.performance||Date).now(),wx=A5();let VD;function Nre(n,e,t,r,i,s,o,a,l,u,c=!0){return c?Gre(n,e,t,r,i,s,o,a,l,u).then(null,f=>(VD||(console.warn("WebGL SDF generation failed, falling back to JS",f),VD=!0),jD(n,e,t,r,i,s,o,a,l,u))):jD(n,e,t,r,i,s,o,a,l,u)}const S1=[],zre=5;let VA=0;function E5(){const n=sf();for(;S1.length&&sf()-n<zre;)S1.shift()();VA=S1.length?setTimeout(E5,0):0}const Gre=(...n)=>new Promise((e,t)=>{S1.push(()=>{const r=sf();try{wx.webgl.generateIntoCanvas(...n),e({timing:sf()-r})}catch(i){t(i)}}),VA||(VA=setTimeout(E5,0))}),Hre=4,Vre=2e3,WD={};let Wre=0;function jD(n,e,t,r,i,s,o,a,l,u){const c="TroikaTextSDFGenerator_JS_"+Wre++%Hre;let f=WD[c];return f||(f=WD[c]={workerModule:Yh({name:c,workerId:c,dependencies:[A5,sf],init(d,m){const g=d().javascript.generate;return function(...v){const y=m();return{textureData:g(...v),timing:m()-y}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,r,i,s).then(({textureData:d,timing:m})=>{const g=sf(),v=new Uint8Array(d.length*4);for(let y=0;y<d.length;y++)v[y*4+u]=d[y];return wx.webglUtils.renderImageData(o,v,a,l,n,e,1<<3-u),m+=sf()-g,--f.requests===0&&(f.idleTimer=setTimeout(()=>{wre(c)},Vre)),{timing:m}})}function jre(n){n._warm||(wx.webgl.isSupported(n),n._warm=!0)}const $re=wx.webglUtils.resizeWebGLCanvasWithoutClearing,Md={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Xre=new st;function vd(){return(self.performance||Date).now()}const $D=Object.create(null);function C5(n,e){n=Yre({},n);const t=vd(),{defaultFontURL:r}=Md,i=[];if(r&&i.push({label:"default",src:XD(r)}),n.font&&i.push({label:"user",src:XD(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Md.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Md.unicodeFontsURL,n.colorRanges!=null){let m={};for(let g in n.colorRanges)if(n.colorRanges.hasOwnProperty(g)){let v=n.colorRanges[g];typeof v!="number"&&(v=Xre.set(v).getHex()),m[g]=v}n.colorRanges=m}Object.freeze(n);const{textureWidth:s,sdfExponent:o}=Md,{sdfGlyphSize:a}=n,l=s/a*4;let u=$D[a];if(!u){const m=document.createElement("canvas");m.width=s,m.height=a*256/l,u=$D[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:m,sdfTexture:new fn(m,void 0,void 0,void 0,Kt,Kt),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,Kre(u)}const{sdfTexture:c,sdfCanvas:f}=u;R5(n).then(m=>{const{glyphIds:g,glyphFontIndices:v,fontData:y,glyphPositions:_,fontSize:x,timings:w}=m,S=[],T=new Float32Array(g.length*4);let E=0,R=0;const b=vd(),M=y.map(F=>{let H=u.glyphsByFont.get(F.src);return H||u.glyphsByFont.set(F.src,H=new Map),H});g.forEach((F,H)=>{const G=v[H],{src:te,unitsPerEm:V}=y[G];let K=M[G].get(F);if(!K){const{path:ue,pathBounds:q}=m.glyphData[te][F],pe=Math.max(q[2]-q[0],q[3]-q[1])/a*(Md.sdfMargin*a+.5),me=u.glyphCount++,se=[q[0]-pe,q[1]-pe,q[2]+pe,q[3]+pe];M[G].set(F,K={path:ue,atlasIndex:me,sdfViewBox:se}),S.push(K)}const{sdfViewBox:j}=K,J=_[R++],W=_[R++],ne=x/V;T[E++]=J+j[0]*ne,T[E++]=W+j[1]*ne,T[E++]=J+j[2]*ne,T[E++]=W+j[3]*ne,g[H]=K.atlasIndex}),w.quads=(w.quads||0)+(vd()-b);const C=vd();w.sdf={};const L=f.height,D=Math.ceil(u.glyphCount/l),z=Math.pow(2,Math.ceil(Math.log2(D*a)));z>L&&(console.info(`Increasing SDF texture size ${L}->${z}`),$re(f,s,z),c.dispose()),Promise.all(S.map(F=>T5(F,u,n.gpuAccelerateSDF).then(({timing:H})=>{w.sdf[F.atlasIndex]=H}))).then(()=>{S.length&&!u.contextLost&&(P5(u),c.needsUpdate=!0),w.sdfTotal=vd()-C,w.total=vd()-t,e(Object.freeze({parameters:n,sdfTexture:c,sdfGlyphSize:a,sdfExponent:o,glyphBounds:T,glyphAtlasIndices:g,glyphColors:m.glyphColors,caretPositions:m.caretPositions,chunkedBounds:m.chunkedBounds,ascender:m.ascender,descender:m.descender,lineHeight:m.lineHeight,capHeight:m.capHeight,xHeight:m.xHeight,topBaseline:m.topBaseline,blockBounds:m.blockBounds,visibleBounds:m.visibleBounds,timings:m.timings}))})}),Promise.resolve().then(()=>{u.contextLost||jre(f)})}function T5({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Md,u=Math.max(t[2]-t[0],t[3]-t[1]),c=Math.floor(e/4),f=c%(a/r)*r,d=Math.floor(c/(a/r))*r,m=e%4;return Nre(r,r,n,t,u,l,i,f,d,m,o)}function Kre(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(T5(s,n,!0))})}),Promise.all(r).then(()=>{P5(n),n.sdfTexture.needsUpdate=!0})})}function Jre({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;C5({font:n,sdfGlyphSize:t,text:i},r)}function Yre(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let Dy;function XD(n){return Dy||(Dy=typeof document>"u"?{}:document.createElement("a")),Dy.href=n,Dy.href}function P5(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const Zre=Yh({name:"Typesetter",dependencies:[Ure,Ore,bre],init(n,e,t){return n(e,t())}}),R5=Yh({name:"Typesetter",dependencies:[Zre],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});R5.onMainThread;const KD={};function Qre(n){let e=KD[n];return e||(e=KD[n]=new Xo(1,1,n,n).translate(.5,.5,0)),e}const qre="aTroikaGlyphBounds",JD="aTroikaGlyphIndex",eie="aTroikaGlyphColor";class tie extends zC{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new El,this.boundingBox=new Ma}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Qre(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){this.updateAttributeData(qre,e,4),this.updateAttributeData(JD,t,1),this.updateAttributeData(eie,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:l,cos:u}=Math,c=i/2,f=i*2,d=Math.abs(t),m=e[0]/d,g=e[2]/d,v=s((m+c)/f)!==s((g+c)/f)?-d:o(l(m)*d,l(g)*d),y=s((m-c)/f)!==s((g-c)/f)?d:a(l(m)*d,l(g)*d),_=s((m+i)/f)!==s((g+i)/f)?d*2:a(d-u(m)*d,d-u(g)*d);r.min.set(v,e[1],t<0?-_:0),r.max.set(y,e[3],t<0?0:_)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(JD).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,r){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new Fu(t,r)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const nie=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,rie=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,iie=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,sie=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function oie(n){const e=HA(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new De},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new qt(0,0,0,0)},uTroikaClipRect:{value:new qt(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new De},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new st},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new zr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nie,vertexTransform:rie,fragmentDefs:iie,fragmentColorTransform:sie,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(M5,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const eT=new bi({color:16777215,side:qr,transparent:!0}),YD=8421504,ZD=new Et,Ly=new $,eb=new $,um=[],aie=new $,tb="+x+y";function QD(n){return Array.isArray(n)?n[0]:n}let B5=()=>{const n=new Ln(new Xo(1,1),eT);return B5=()=>n,n},I5=()=>{const n=new Ln(new Xo(1,1,32,1),eT);return I5=()=>n,n};const lie={type:"syncstart"},uie={type:"synccomplete"},D5=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],cie=D5.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let L5=class extends Ln{constructor(){const e=new tie;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=YD,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=tb,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(lie),C5({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(uie),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return oie(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=eT.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.hasOutline()){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return QD(this.material).getDepthMaterial()}get customDistanceMaterial(){return QD(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let u=0,c=0,f=0,d,m,g,v=0,y=0;if(t){let{outlineWidth:x,outlineOffsetX:w,outlineOffsetY:S,outlineBlur:T,outlineOpacity:E}=this;u=this._parsePercent(x)||0,c=Math.max(0,this._parsePercent(T)||0),d=E,v=this._parsePercent(w)||0,y=this._parsePercent(S)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(g=this.strokeColor,r.uTroikaStrokeColor.value.set(g??YD),m=this.strokeOpacity,m==null&&(m=1)),d=this.fillOpacity;r.uTroikaEdgeOffset.value=u,r.uTroikaPositionOffset.value.set(v,y),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=d??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let _=this.clipRect;if(_&&Array.isArray(_)&&_.length===4)r.uTroikaClipRect.value.fromArray(_);else{const x=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new st;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||tb;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==tb&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,f,d]=l;Ly.set(0,0,0)[c]=u==="-"?1:-1,eb.set(0,0,0)[d]=f==="-"?-1:1,ZD.lookAt(aie,Ly.cross(eb),eb),a.setFromMatrix4(ZD)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new De){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new De){return Ly.copy(e),this.localPositionToTextCoords(this.worldToLocal(Ly),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?I5():B5(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let c=0;c<u.count;c++){let f=s[0]+u.getX(c)*(s[2]-s[0]);const d=s[1]+u.getY(c)*(s[3]-s[1]);let m=0;i&&(m=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(c,f,d,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,um.length=0,o.raycast(e,um);for(let c=0;c<um.length;c++)um[c].object=this,t.push(um[c])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,cie.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};D5.forEach(n=>{const e="_private_"+n;Object.defineProperty(L5.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Ma;new st;const fie=n=>typeof n=="object"&&typeof n.then=="function",Fy=[];function die(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function hie(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Fy)if(die(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Fy.indexOf(i);s!==-1&&Fy.splice(s,1)},promise:(fie(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Fy.push(i),!t)throw i.promise}const pie=(n,e,t)=>hie(n,e,!1,t),qD=B.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},u)=>{const c=Bn(({invalidate:g})=>g),[f]=B.useState(()=>new L5),[d,m]=B.useMemo(()=>{const g=[];let v="";return B.Children.forEach(s,y=>{typeof y=="string"||typeof y=="number"?v+=y:g.push(y)}),[g,v]},[s]);return pie(()=>new Promise(g=>Jre({font:r,characters:o},g)),["troika-text",r,o]),B.useLayoutEffect(()=>void f.sync(()=>{c(),a&&a(f)})),B.useEffect(()=>()=>f.dispose(),[f]),B.createElement("primitive",tn({object:f,ref:u,font:r,text:m,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:n},l),d)}),mie=()=>parseInt(Ml.replace(/\D+/g,"")),F5=mie();let ky=null,k5="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function O5(n=!0,e=!0,t){return r=>{t&&t(r),n&&(ky||(ky=new mre),ky.setDecoderPath(typeof n=="string"?n:k5),r.setDRACOLoader(ky)),e&&r.setMeshoptDecoder(typeof QS=="function"?QS():QS)}}const Ju=(n,e,t,r)=>_l(qC,n,O5(e,t,r));Ju.preload=(n,e,t,r)=>_l.preload(qC,n,O5(e,t,r));Ju.clear=n=>_l.clear(qC,n);Ju.setDecoderPath=n=>{k5=n};function gie(n,e,t){const r=Bn(d=>d.size),i=Bn(d=>d.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,f=B.useMemo(()=>{const d=new Tn(s,o,{minFilter:Kt,magFilter:Kt,type:Br,...c});return u&&(d.depthTexture=new cx(s,o,Rr)),d.samples=l,d},[]);return B.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),B.useEffect(()=>()=>f.dispose(),[]),f}const vie=n=>typeof n=="function",yie=B.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...s},o)=>{const a=Bn(({set:y})=>y),l=Bn(({camera:y})=>y),u=Bn(({size:y})=>y),c=B.useRef(null);B.useImperativeHandle(o,()=>c.current,[]);const f=B.useRef(null),d=gie(e);B.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),B.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let m=0,g=null;const v=vie(i);return fi(y=>{v&&(t===1/0||m<t)&&(f.current.visible=!1,y.gl.setRenderTarget(d),g=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=g,y.gl.setRenderTarget(null),f.current.visible=!0,m++)}),B.useLayoutEffect(()=>{if(r){const y=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:y}))}},[c,r,a]),B.createElement(B.Fragment,null,B.createElement("perspectiveCamera",tn({ref:c},s),!v&&i),B.createElement("group",{ref:f},v&&i(d.texture)))}),_ie=B.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const f=Bn(E=>E.invalidate),d=Bn(E=>E.camera),m=Bn(E=>E.gl),g=Bn(E=>E.events),v=Bn(E=>E.setEvents),y=Bn(E=>E.set),_=Bn(E=>E.get),x=Bn(E=>E.performance),w=e||d,S=r||g.connected||m.domElement,T=B.useMemo(()=>new Bne(w),[w]);return fi(()=>{T.enabled&&T.update()},-1),B.useEffect(()=>(s&&T.connect(s===!0?S:s),T.connect(S),()=>void T.dispose()),[s,S,t,T,f]),B.useEffect(()=>{const E=M=>{f(),t&&x.regress(),o&&o(M)},R=M=>{a&&a(M)},b=M=>{l&&l(M)};return T.addEventListener("change",E),T.addEventListener("start",R),T.addEventListener("end",b),()=>{T.removeEventListener("start",R),T.removeEventListener("end",b),T.removeEventListener("change",E)}},[o,a,l,T,f,v]),B.useEffect(()=>{if(n){const E=_().controls;return y({controls:T}),()=>y({controls:E})}},[n,T]),B.createElement("primitive",tn({ref:c,object:T,enableDamping:i},u))});var U5={exports:{}},xie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wie=xie,Sie=wie;function N5(){}function z5(){}z5.resetWarningCache=N5;var bie=function(){function n(r,i,s,o,a,l){if(l!==Sie){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:z5,resetWarningCache:N5};return t.PropTypes=t,t};U5.exports=bie();var Aie=U5.exports;const _n=$o(Aie);_n.func.isRequired,_n.arrayOf(_n.oneOfType([_n.element,_n.func])).isRequired;const eL=(n,e)=>{"updateRanges"in n?n.updateRanges[0]=e:n.updateRange=e},Mie=3e3,Eie=3001;function Cie(n){return typeof n=="function"}const tL=new Et,nL=new Et,Oy=[],cm=new Ln;class Tie extends ko{constructor(){super(),this.color=new st("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const r=this.instance.current;if(!r||!r.geometry||!r.material)return;cm.geometry=r.geometry;const i=r.matrixWorld,s=r.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>r.count)){r.getMatrixAt(s,tL),nL.multiplyMatrices(i,tL),cm.matrixWorld=nL,r.material instanceof Xn?cm.material.side=r.material.side:cm.material.side=r.material[0].side,cm.raycast(e,Oy);for(let o=0,a=Oy.length;o<a;o++){const l=Oy[o];l.instanceId=s,l.object=this,t.push(l)}Oy.length=0}}}const G5=B.createContext(null),rL=new Et,iL=new Et,Pie=new Et,sL=new $,oL=new Hn,aL=new $,Rie=n=>n.isInstancedBufferAttribute,H5=B.forwardRef(({context:n,children:e,...t},r)=>{B.useMemo(()=>S0({PositionMesh:Tie}),[]);const i=B.useRef();B.useImperativeHandle(r,()=>i.current,[]);const{subscribe:s,getParent:o}=B.useContext(n||G5);return B.useLayoutEffect(()=>s(i),[]),B.createElement("positionMesh",tn({instance:o(),instanceKey:i,ref:i},t),e)}),Bie=B.forwardRef(({context:n,children:e,range:t,limit:r=1e3,frames:i=1/0,...s},o)=>{const[{localContext:a,instance:l}]=B.useState(()=>{const x=B.createContext(null);return{localContext:x,instance:B.forwardRef((w,S)=>B.createElement(H5,tn({context:x},w,{ref:S})))}}),u=B.useRef(null);B.useImperativeHandle(o,()=>u.current,[]);const[c,f]=B.useState([]),[[d,m]]=B.useState(()=>{const x=new Float32Array(r*16);for(let w=0;w<r;w++)Pie.identity().toArray(x,w*16);return[x,new Float32Array([...new Array(r*3)].map(()=>1))]});B.useEffect(()=>{u.current.instanceMatrix.needsUpdate=!0});let g=0,v=0;const y=B.useRef([]);B.useLayoutEffect(()=>{y.current=Object.entries(u.current.geometry.attributes).filter(([x,w])=>Rie(w))}),fi(()=>{if(i===1/0||g<i){u.current.updateMatrix(),u.current.updateMatrixWorld(),rL.copy(u.current.matrixWorld).invert(),v=Math.min(r,t!==void 0?t:r,c.length),u.current.count=v,eL(u.current.instanceMatrix,{offset:0,count:v*16}),eL(u.current.instanceColor,{offset:0,count:v*3});for(let x=0;x<c.length;x++){const w=c[x].current;w.matrixWorld.decompose(sL,oL,aL),iL.compose(sL,oL,aL).premultiply(rL),iL.toArray(d,x*16),u.current.instanceMatrix.needsUpdate=!0,w.color.toArray(m,x*3),u.current.instanceColor.needsUpdate=!0}g++}});const _=B.useMemo(()=>({getParent:()=>u,subscribe:x=>(f(w=>[...w,x]),()=>f(w=>w.filter(S=>S.current!==x.current)))}),[]);return B.createElement("instancedMesh",tn({userData:{instances:c,limit:r,frames:i},matrixAutoUpdate:!1,ref:u,args:[null,null,0],raycast:()=>null},s),B.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:d.length/16,array:d,itemSize:16,usage:ol}),B.createElement("instancedBufferAttribute",{attach:"instanceColor",count:m.length/3,array:m,itemSize:3,usage:ol}),Cie(e)?B.createElement(a.Provider,{value:_},e(l)):n?B.createElement(n.Provider,{value:_},e):B.createElement(G5.Provider,{value:_},e))}),nb=F5>=154?"opaque_fragment":"output_fragment";class Iie extends u0{constructor(e){super(e),this.onBeforeCompile=(t,r)=>{const{isWebGL2:i}=r.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${nb}>`,`
        ${i?`#include <${nb}>`:`#extension GL_OES_standard_derivatives : enable
#include <${nb}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${F5>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const Die=B.forwardRef((n,e)=>{const[t]=B.useState(()=>new Iie(null));return B.createElement("primitive",tn({},n,{object:t,ref:e,attach:"material"}))});function Lie(n,e){const t=n+"Geometry";return B.forwardRef(({args:r,children:i,...s},o)=>{const a=B.useRef(null);return B.useImperativeHandle(o,()=>a.current),B.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),B.createElement("mesh",tn({ref:a},s),B.createElement(t,{attach:"geometry",args:r}),i)})}const lL=Lie("sphere"),Fie=B.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const u=B.useRef(null);B.useImperativeHandle(l,()=>u.current,[]);const c=B.useRef(Math.random()*1e4);return fi(f=>{var d,m;if(!e||t===0)return;o&&f.invalidate();const g=c.current+f.clock.getElapsedTime();u.current.rotation.x=Math.cos(g/4*t)/8*r,u.current.rotation.y=Math.sin(g/4*t)/8*r,u.current.rotation.z=Math.sin(g/4*t)/20*r;let v=Math.sin(g/4*t)/10;v=ao.mapLinear(v,-.1,.1,(d=s==null?void 0:s[0])!==null&&d!==void 0?d:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),u.current.position.y=v*i,u.current.updateMatrix()}),B.createElement("group",a,B.createElement("group",{ref:u,matrixAutoUpdate:!1},n))}),V5=(n,e,t)=>{let r;switch(n){case Hr:r=new Uint8ClampedArray(e*t*4);break;case Br:r=new Uint16Array(e*t*4);break;case da:r=new Uint32Array(e*t*4);break;case ZE:r=new Int8Array(e*t*4);break;case QE:r=new Int16Array(e*t*4);break;case eC:r=new Int32Array(e*t*4);break;case Rr:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let Uy;const kie=(n,e,t,r)=>{if(Uy!==void 0)return Uy;const i=new Tn(1,1,r);e.setRenderTarget(i);const s=new Ln(new Xo,new bi({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=V5(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),Uy=o[0]!==0,Uy};class tT{constructor(e){var t,r,i,s,o,a,l,u,c,f,d,m,g,v,y,_;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(w){throw this._renderer.setRenderTarget(null),w}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const x={format:Ur,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Kt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Kt,samples:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Nn,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:Nn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=tT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new vf,this._camera=new po,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!kie(this._type,this._renderer,this._camera,x)){let w;switch(this._type){case Br:w=this._renderer.extensions.has("EXT_color_buffer_float")?Rr:void 0;break}w!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Rr}`),this._type=w):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ln(new Xo,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Tn(this.width,this.height,x),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping:Ru}static instantiateRenderer(){const e=new o0;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=V5(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new rf(this.toArray(),this.width,this.height,Ur,this._type,(e==null?void 0:e.mapping)||Ru,(e==null?void 0:e.wrapS)||Nn,(e==null?void 0:e.wrapT)||Nn,(e==null?void 0:e.magFilter)||Kt,(e==null?void 0:e.minFilter)||Kt,(e==null?void 0:e.anisotropy)||1,vl);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof pr&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof fn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof fn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Oie=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Uie=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Nie extends pr{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:u,gainMap:c}){super({name:"GainMapDecoderMaterial",vertexShader:Oie,fragmentShader:Uie,uniforms:{sdr:{value:u},gainMap:{value:c},gamma:{value:new $(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new $().fromArray(t)},offsetSdr:{value:new $().fromArray(r)},gainMapMin:{value:new $().fromArray(i)},gainMapMax:{value:new $().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:ti,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class W5 extends Error{}class j5 extends Error{}const fm=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},zie=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const s=fm(i,"hdrgm:GainMapMin","0"),o=fm(i,"hdrgm:GainMapMax"),a=fm(i,"hdrgm:Gamma","1"),l=fm(i,"hdrgm:OffsetSDR","0.015625"),u=fm(i,"hdrgm:OffsetHDR","0.015625"),c=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),f=c?c[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!d)throw new Error("Incomplete gainmap metadata");const m=d[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(g=>parseFloat(g)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(m)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class Gie{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const c=a+4;if(s.getUint32(c)===1297106432){const f=c+4;let d;if(s.getUint16(f)===18761)d=!1;else if(s.getUint16(f)===19789)d=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!d)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!d);if(m<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=f+m,v=s.getUint16(g,!d),y=g+2;let _=0;for(let T=y;T<y+12*v;T+=12)s.getUint16(T,!d)===45057&&(_=s.getUint32(T+8,!d));const x=4,w=g+2+v*12+x,S=[];for(let T=w;T<w+_*16;T+=16){const E={MPType:s.getUint32(T,!d),size:s.getUint32(T+4,!d),dataOffset:s.getUint32(T+8,!d),dependantImages:s.getUint32(T+12,!d),start:-1,end:-1,isFII:!1};E.dataOffset?(E.start=f+E.dataOffset,E.isFII=!1):(E.start=0,E.isFII=!0),E.end=E.start+E.size,S.push(E)}if(this.options.extractNonFII&&S.length){const T=new Blob([s]),E=[];for(const R of S){if(R.isFII&&!this.options.extractFII)continue;const b=T.slice(R.start,R.end+1,"image/jpeg");E.push(b)}t(E)}}}a+=2+s.getUint16(a+2)}})}}const Hie=async n=>{const e=zie(n);if(!e)throw new j5("Gain map XMP metadata not found");const r=await new Gie({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new W5("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},uL=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class $5 extends Pi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new vx}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Nie({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new fn,sdr:new fn});return new tT({width:16,height:16,type:Br,colorSpace:vl,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?uL(s):Promise.resolve(void 0),uL(o)]);l=d[0],a=d[1],u=!0}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=d[0],a=d[1]}const c=new fn(l||new ImageData(2,2),Ru,Nn,Nn,Kt,X2,Ur,Hr,1,vl);c.flipY=u,c.needsUpdate=!0;const f=new fn(a,Ru,Nn,Nn,Kt,X2,Ur,Hr,1,eo);f.flipY=u,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=c,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Vie extends $5{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,u,c;const f=async()=>{if(l&&u&&c){try{await this.render(a,c,l,u)}catch(M){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(M),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let d=!0,m=0,g=0,v=!0,y=0,_=0,x=!0,w=0,S=0;const T=()=>{if(typeof s=="function"){const M=m+y+w,C=g+_+S,L=d&&v&&x;s(new ProgressEvent("progress",{lengthComputable:L,loaded:C,total:M}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const E=new ui(this._internalLoadingManager);E.setResponseType("arraybuffer"),E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),E.load(e,async M=>{if(typeof M=="string")throw new Error("Invalid sdr buffer");l=M,await f()},M=>{d=M.lengthComputable,g=M.loaded,m=M.total,T()},M=>{this.manager.itemError(e),typeof o=="function"&&o(M)});const R=new ui(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(t,async M=>{if(typeof M=="string")throw new Error("Invalid gainmap buffer");u=M,await f()},M=>{v=M.lengthComputable,_=M.loaded,y=M.total,T()},M=>{this.manager.itemError(t),typeof o=="function"&&o(M)});const b=new ui(this._internalLoadingManager);return b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(r,async M=>{if(typeof M!="string")throw new Error("Invalid metadata string");c=JSON.parse(M),await f()},M=>{x=M.lengthComputable,S=M.loaded,w=M.total,T()},M=>{this.manager.itemError(r),typeof o=="function"&&o(M)}),a}}class Wie extends $5{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new ui(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,c,f;try{const d=await Hie(l);u=d.sdr,c=d.gainMap,f=d.metadata}catch(d){if(d instanceof j5||d instanceof W5)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw d}try{await this.render(s,f,u,c)}catch(d){this.manager.itemError(e),typeof i=="function"&&i(d),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const Ug={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},X5="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",oh=n=>Array.isArray(n),nT=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Sx({files:n=nT,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let s=null,o=!1;t&&(rT(t),n=Ug[t],e=X5),o=oh(n);const{extension:a,isCubemap:l}=iT(n);if(s=sT(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Bn(m=>m.gl);B.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function m(){_l.clear(s,o?[n]:n)}u.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,u.domElement]);const c=_l(s,o?[n]:n,m=>{(a==="webp"||a==="jpg"||a==="jpeg")&&m.setRenderer(u),m.setPath==null||m.setPath(e),i&&i(m)});let f=o?c[0]:c;if(a==="jpg"||a==="jpeg"||a==="webp"){var d;f=(d=f.renderTarget)==null?void 0:d.texture}return f.mapping=l?gl:_h,"colorSpace"in f?f.colorSpace=r??l?"srgb":"srgb-linear":f.encoding=r??l?Eie:Mie,f}const jie={files:nT,path:"",preset:void 0,extensions:void 0};Sx.preload=n=>{const e={...jie,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&(rT(i),t=Ug[i],r=X5);const{extension:o}=iT(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=sT(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);_l.preload(a,oh(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),s&&s(l)})};const $ie={files:nT,preset:void 0};Sx.clear=n=>{const e={...$ie,...n};let{files:t}=e;const{preset:r}=e;r&&(rT(r),t=Ug[r]);const{extension:i}=iT(t),s=sT(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);_l.clear(s,oh(t)?[t]:t)};function rT(n){if(!(n in Ug))throw new Error("Preset must be one of: "+Object.keys(Ug).join(", "))}function iT(n){var e;const t=oh(n)&&n.length===6,r=oh(n)&&n.length===3&&n.some(o=>o.endsWith("json")),i=oh(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function sT(n){return n==="cube"?Az:n==="hdr"?hre:n==="exr"?pre:n==="jpg"||n==="jpeg"?Wie:n==="webp"?Vie:null}const Xie=n=>n.current&&n.current.isScene,Kie=n=>Xie(n)?n.current:n;function oT(n,e,t,r,i={}){var s,o,a,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=Kie(e||t),c=u.background,f=u.environment,d={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),Vd(u,i),()=>{n!=="only"&&(u.environment=f),n&&(u.background=c),Vd(u,d)}}function aT({scene:n,background:e=!1,map:t,...r}){const i=Bn(s=>s.scene);return B.useLayoutEffect(()=>{if(t)return oT(e,n,i,t,r)}),null}function K5({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=Sx(l),c=Bn(f=>f.scene);return B.useLayoutEffect(()=>oT(n,e,c,u,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),B.useEffect(()=>()=>{u.dispose()},[u]),null}function Jie({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:f,environmentRotation:d,scene:m,files:g,path:v,preset:y=void 0,extensions:_}){const x=Bn(b=>b.gl),w=Bn(b=>b.scene),S=B.useRef(null),[T]=B.useState(()=>new vf),E=B.useMemo(()=>{const b=new sx(r);return b.texture.type=Br,b},[r]);B.useEffect(()=>()=>{E.dispose()},[E]),B.useLayoutEffect(()=>{if(i===1){const b=x.autoClear;x.autoClear=!0,S.current.update(x,T),x.autoClear=b}return oT(o,m,w,E.texture,{backgroundBlurriness:a??l,backgroundIntensity:u,backgroundRotation:c,environmentIntensity:f,environmentRotation:d})},[n,T,E.texture,m,w,o,i,x]);let R=1;return fi(()=>{if(i===1/0||R<i){const b=x.autoClear;x.autoClear=!0,S.current.update(x,T),x.autoClear=b,R++}}),B.createElement(B.Fragment,null,see(B.createElement(B.Fragment,null,n,B.createElement("cubeCamera",{ref:S,args:[e,t,E]}),g||y?B.createElement(K5,{background:!0,files:g,preset:y,path:v,extensions:_}):s?B.createElement(aT,{background:!0,map:s,extensions:_}):null),T))}function Yie(n){var e,t,r,i;const s=Sx(n),o=n.map||s;B.useMemo(()=>S0({GroundProjectedEnvImpl:bne}),[]),B.useEffect(()=>()=>{s.dispose()},[s]);const a=B.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return B.createElement(B.Fragment,null,B.createElement(aT,tn({},n,{map:o})),B.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function Zie(n){return n.ground?B.createElement(Yie,n):n.map?B.createElement(aT,n):n.children?B.createElement(Jie,n):B.createElement(K5,n)}let Ac,dm;const Qie=B.createContext(null),cL=new Et,fL=new $,qie=B.forwardRef(({children:n,range:e,limit:t=1e3,...r},i)=>{const s=B.useRef(null);B.useImperativeHandle(i,()=>s.current,[]);const[o,a]=B.useState([]),[[l,u,c]]=B.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);B.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),fi(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),cL.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),Ac=0;Ac<o.length;Ac++)dm=o[Ac].current,dm.getWorldPosition(fL).applyMatrix4(cL),fL.toArray(l,Ac*3),s.current.geometry.attributes.position.needsUpdate=!0,dm.matrixWorldNeedsUpdate=!0,dm.color.toArray(u,Ac*3),s.current.geometry.attributes.color.needsUpdate=!0,c.set([dm.size],Ac),s.current.geometry.attributes.size.needsUpdate=!0});const f=B.useMemo(()=>({getParent:()=>s,subscribe:d=>(a(m=>[...m,d]),()=>a(m=>m.filter(g=>g.current!==d.current)))}),[]);return B.createElement("points",tn({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},r),B.createElement("bufferGeometry",null,B.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:ol}),B.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3,usage:ol}),B.createElement("bufferAttribute",{attach:"attributes-size",count:c.length,array:c,itemSize:1,usage:ol})),B.createElement(Qie.Provider,{value:f},n))}),ese=B.forwardRef(({children:n,positions:e,colors:t,sizes:r,stride:i=3,...s},o)=>{const a=B.useRef(null);return B.useImperativeHandle(o,()=>a.current,[]),fi(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),r&&(l.size.needsUpdate=!0)}),B.createElement("points",tn({ref:a},s),B.createElement("bufferGeometry",null,B.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/i,array:e,itemSize:i,usage:ol}),t&&B.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/i,array:t,itemSize:3,usage:ol}),r&&B.createElement("bufferAttribute",{attach:"attributes-size",count:r.length/i,array:r,itemSize:1,usage:ol})),n)}),tse=B.forwardRef((n,e)=>n.positions instanceof Float32Array?B.createElement(ese,tn({},n,{ref:e})):B.createElement(qie,tn({},n,{ref:e})));function J5({all:n,scene:e,camera:t}){const r=Bn(({gl:o})=>o),i=Bn(({camera:o})=>o),s=Bn(({scene:o})=>o);return B.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),r.compile(e||s,t||i);const a=new sx(128);new dC(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}/**
 * postprocessing v6.30.2 build Fri Mar 31 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var nse=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,lT="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",rse=class extends pr{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{THREE_REVISION:Ml.replace(/\D+/g,""),MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new pt(null),luminanceBuffer1:new pt(null),minLuminance:new pt(.01),deltaTime:new pt(0),tau:new pt(1)},extensions:{shaderTextureLOD:!0},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:nse,vertexShader:lT}),this.toneMapped=!1}set luminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}setLuminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}set luminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}setLuminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}set mipLevel1x1(n){this.defines.MIP_LEVEL_1X1=n.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(n){this.mipLevel1x1=n}set deltaTime(n){this.uniforms.deltaTime.value=n}setDeltaTime(n){this.uniforms.deltaTime.value=n}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(n){this.uniforms.minLuminance.value=n}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(n){this.uniforms.minLuminance.value=n}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(n){this.uniforms.tau.value=n}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(n){this.uniforms.tau.value=n}},Ut={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},bu={NONE:0,DEPTH:1,CONVOLUTION:2},yn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Zh={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Va={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},Ny={DEFAULT:0,ESKIL:1},ise=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,sse="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ose=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Y5=class extends pr{constructor(n=new qt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new pt(null),texelSize:new pt(new qt),scale:new pt(1),kernel:new pt(0)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:ise,vertexShader:sse}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=Zh.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return ose[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},ase=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Z5=class extends pr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new pt(null),opacity:new pt(1)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:ase,vertexShader:lT}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},lse=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,use="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",cse=class extends pr{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new pt(null),normalBuffer:new pt(null),texelSize:new pt(new De)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:lse,vertexShader:use}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ju){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},fse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,dse="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",hse=class extends pr{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new pt(null),texelSize:new pt(new De)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:fse,vertexShader:dse}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},pse=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,mse="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",gse=class extends pr{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ml.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new pt(null),depthBuffer:new pt(null),resolution:new pt(new De),texelSize:new pt(new De),cameraNear:new pt(.3),cameraFar:new pt(1e3),aspect:new pt(1),time:new pt(0)},blending:ti,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ju){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,r,i,s;return this.fragmentShader=pse.replace(yn.FRAGMENT_HEAD,(e=n.get(yn.FRAGMENT_HEAD))!=null?e:"").replace(yn.FRAGMENT_MAIN_UV,(t=n.get(yn.FRAGMENT_MAIN_UV))!=null?t:"").replace(yn.FRAGMENT_MAIN_IMAGE,(r=n.get(yn.FRAGMENT_MAIN_IMAGE))!=null?r:""),this.vertexShader=mse.replace(yn.VERTEX_HEAD,(i=n.get(yn.VERTEX_HEAD))!=null?i:"").replace(yn.VERTEX_MAIN_SUPPORT,(s=n.get(yn.VERTEX_MAIN_SUPPORT))!=null?s:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Un?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return yn}},vse=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,yse=class extends pr{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ml.replace(/\D+/g,"")},uniforms:{inputBuffer:new pt(null),threshold:new pt(0),smoothing:new pt(1),range:new pt(null)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:vse,vertexShader:lT}),this.toneMapped=!1,this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},_se=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,xse="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",wse=class extends Y5{constructor({kernelSize:n=Zh.MEDIUM,offset:e=0,rotation:t=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=_se,this.vertexShader=xse,this.kernelSize=n,this.uniforms.aspect=new pt(1),this.uniforms.rotation=new pt(new De),this.uniforms.maskParams=new pt(new qt),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=t,this.updateParams()}updateParams(){const n=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),t=Math.max(e-this.feather,0);n.set(this.offset-e,this.offset-t,this.offset+e,this.offset+t)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(n){this.uniforms.rotation.value.set(Math.cos(n),Math.sin(n))}get offset(){return this._offset}set offset(n){this._offset=n,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(n){this._focusArea=n,this.updateParams()}get feather(){return this._feather}set feather(n){this._feather=n,this.updateParams()}setSize(n,e){super.setSize(n,e),this.uniforms.aspect.value=n/e}},Sse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,bse="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Ase=class extends pr{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new pt(null),supportBuffer:new pt(null),texelSize:new pt(new De),radius:new pt(.85)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:Sse,vertexShader:bse}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Mse=new Hh,Kl=null;function Ese(){if(Kl===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Kl=new jt,Kl.setAttribute!==void 0?(Kl.setAttribute("position",new sn(n,3)),Kl.setAttribute("uv",new sn(e,2))):(Kl.addAttribute("position",new sn(n,3)),Kl.addAttribute("uv",new sn(e,2)))}return Kl}var hs=class{constructor(n="Pass",e=new vf,t=Mse){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Ln(Ese(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new vf),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=ju){}render(n,e,t,r,i){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Tn||e instanceof Xn||e instanceof fn||e instanceof hs)&&this[n].dispose()}}},Q5=class extends hs{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Z5,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Tn(1,1,{minFilter:Kt,magFilter:Kt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Hr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===Nt&&(this.renderTarget.texture.encoding=Nt))}},Cse=class extends hs{constructor(n,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new rse,this.needsSwap=!1,this.renderTargetPrevious=new Tn(1,1,{minFilter:bn,magFilter:bn,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=n,r.minLuminance=e,r.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new Q5(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(n){this.fullscreenMaterial.mipLevel1x1=n}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(n){this.fullscreenMaterial.adaptationRate=n}render(n,e,t,r,i){this.fullscreenMaterial.deltaTime=r,n.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),n.render(this.scene,this.camera),this.copyPass.render(n,this.renderTargetAdapted)}},Tse=class extends hs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},dL=new st,q5=class extends hs{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,u=o>=0;l?(n.getClearColor(dL),n.setClearColor(s,u?o:a)):u&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(dL,a):u&&n.setClearAlpha(a)}},Jl=-1,br=class extends xo{constructor(n,e=Jl,t=Jl,r=1){super(),this.resizable=n,this.baseSize=new De(1,1),this.preferredSize=new De(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new De,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==Jl?t.width=e.width:e.height!==Jl?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==Jl?t.height=e.height:e.width!==Jl?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Jl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Jl}},rb=!1,hL=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case qr:t=this.materialsFlatShadedDoubleSide;break;case Pr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case qr:t=this.materialsDoubleSide;break;case Pr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof pr))return n.clone();const e=n.uniforms,t=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,t.set(i,s))}const r=n.clone();for(const i of t)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Ho;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Pr,r}),this.materialsDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=qr,r}),this.materialsFlatShaded=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Pr,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=qr,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,rb){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return rb}static set workaroundEnabled(n){rb=n}},e6=class extends hs{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new q5,this.overrideMaterialManager=t===null?null:new hL(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new hL(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,c=n.shadowMap.autoUpdate,f=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=c}},Pse=class extends hs{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=br.AUTO_SIZE,height:r=br.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new cse;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Tn(1,1,{minFilter:bn,magFilter:bn,depthBuffer:!1,type:Rr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new br(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=ju){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function pL(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function Rse(n,e,t){var r,i,s,o,a;let l=e.getFragmentShader(),u=e.getVertexShader();const c=l!==void 0&&/mainImage/.test(l),f=l!==void 0&&/mainUv/.test(l);if(t.attributes|=e.getAttributes(),l===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(f&&t.attributes&bu.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!c&&!f)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const d=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=t.shaderParts;let g=(r=m.get(yn.FRAGMENT_HEAD))!=null?r:"",v=(i=m.get(yn.FRAGMENT_MAIN_UV))!=null?i:"",y=(s=m.get(yn.FRAGMENT_MAIN_IMAGE))!=null?s:"",_=(o=m.get(yn.VERTEX_HEAD))!=null?o:"",x=(a=m.get(yn.VERTEX_MAIN_SUPPORT))!=null?a:"";const w=new Set,S=new Set;if(f&&(v+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),u!==null&&/mainSupport/.test(u)){const R=/mainSupport *\([\w\s]*?uv\s*?\)/.test(u);x+=`	${n}MainSupport(`,x+=R?`vUv);
`:`);
`;for(const b of u.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const M of b[1].split(/\s*,\s*/))t.varyings.add(M),w.add(M),S.add(M);for(const b of u.matchAll(d))S.add(b[1])}for(const R of l.matchAll(d))S.add(R[1]);for(const R of e.defines.keys())S.add(R.replace(/\([\w\s,]*\)/g,""));for(const R of e.uniforms.keys())S.add(R);S.delete("while"),S.delete("for"),S.delete("if"),e.uniforms.forEach((R,b)=>t.uniforms.set(n+b.charAt(0).toUpperCase()+b.slice(1),R)),e.defines.forEach((R,b)=>t.defines.set(n+b.charAt(0).toUpperCase()+b.slice(1),R));const T=new Map([["fragment",l],["vertex",u]]);pL(n,S,t.defines),pL(n,S,T),l=T.get("fragment"),u=T.get("vertex");const E=e.blendMode;if(t.blendModes.set(E.blendFunction,E),c){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(y+=e.inputColorSpace===Nt?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const R=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;y+=`${n}MainImage(color0, UV, `,t.attributes&bu.DEPTH&&R.test(l)&&(y+="depth, ",t.readDepth=!0),y+=`color1);
	`;const b=n+"BlendOpacity";t.uniforms.set(b,E.opacity),y+=`color0 = blend${E.blendFunction}(color0, color1, ${b});

	`,g+=`uniform float ${b};

`}if(g+=l+`
`,u!==null&&(_+=u+`
`),m.set(yn.FRAGMENT_HEAD,g),m.set(yn.FRAGMENT_MAIN_UV,v),m.set(yn.FRAGMENT_MAIN_IMAGE,y),m.set(yn.VERTEX_HEAD,_),m.set(yn.VERTEX_MAIN_SUPPORT,x),e.extensions!==null)for(const R of e.extensions)t.extensions.add(R)}}var Bse=class extends hs{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new gse(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Nse;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Ut.DST)n.attributes|=o.getAttributes()&bu.DEPTH;else{if(n.attributes&o.getAttributes()&bu.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Rse("e"+e++,o,n)}let t=n.shaderParts.get(yn.FRAGMENT_HEAD),r=n.shaderParts.get(yn.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get(yn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&bu.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Nt&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(yn.FRAGMENT_HEAD,t),n.shaderParts.set(yn.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(yn.FRAGMENT_MAIN_UV,i),n.shaderParts.forEach((o,a,l)=>l.set(a,o==null?void 0:o.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=ju){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Hr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},t6=class extends hs{constructor({kernelSize:n=Zh.MEDIUM,resolutionScale:e=.5,width:t=br.AUTO_SIZE,height:r=br.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Tn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new br(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Y5,this._blurMaterial.kernelSize=n,this.copyMaterial=new Z5}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let f=e;this.fullscreenMaterial=u;for(let d=0,m=c.length;d<m;++d){const g=d&1?l:a;u.kernel=c[d],u.inputBuffer=f.texture,n.setRenderTarget(g),n.render(s,o),f=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Hr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===Nt&&(this.renderTargetA.texture.encoding=Nt,this.renderTargetB.texture.encoding=Nt))}static get AUTO_SIZE(){return br.AUTO_SIZE}},n6=class extends hs{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=br.AUTO_SIZE,height:s=br.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new yse(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Tn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new br(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Hr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ise=class extends hs{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new q5(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,f=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,c,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Dse=class extends hs{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Tn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new hse,this.upsamplingMaterial=new Ase,this.resolution=new De}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let f=e;this.fullscreenMaterial=a;for(let d=0,m=u.length;d<m;++d){const g=u[d];a.setSize(f.width,f.height),a.inputBuffer=f.texture,n.setRenderTarget(g),n.render(s,o),f=g}this.fullscreenMaterial=l;for(let d=c.length-1;d>=0;--d){const m=c[d];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=u[d].texture,n.setRenderTarget(m),n.render(s,o),f=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==Hr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n.outputEncoding===Nt)for(const i of r)i.texture.encoding=Nt}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},Lse=class extends hs{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=br.AUTO_SIZE,height:s=br.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new e6(n,e,new PC);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new st(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Tn(1,1,{minFilter:bn,magFilter:bn}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new br(this,o,a,r);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Fse=class extends t6{constructor({offset:n=0,rotation:e=0,focusArea:t=.4,feather:r=.3,kernelSize:i=Zh.MEDIUM,resolutionScale:s=.5,resolutionX:o=br.AUTO_SIZE,resolutionY:a=br.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:s,resolutionX:o,resolutionY:a}),this.blurMaterial=new wse({kernelSize:i,offset:n,rotation:e,focusArea:t,feather:r})}},ib=1/1e3,kse=1e3,Ose=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*ib}get fixedDelta(){return this._fixedDelta*ib}set fixedDelta(n){this._fixedDelta=n*kse}get elapsed(){return this._elapsed*ib}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Use=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Q5,this.depthTexture=null,this.passes=[],this.timer=new Ose,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new De),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Hr&&e.outputEncoding===Nt&&(this.inputBuffer.texture.encoding=Nt,this.outputBuffer.texture.encoding=Nt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new cx;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Du,e.type=_u):e.type=da,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const s=this.renderer,o=s===null?new De:s.getDrawingBufferSize(new De),a={minFilter:Kt,magFilter:Kt,stencilBuffer:t,depthBuffer:e,type:r},l=new Tn(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===Hr&&s!==null&&s.outputEncoding===Nt&&(l.texture.encoding=Nt),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new De),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,u)=>l||u.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const c of this.passes)c.enabled&&(c.render(t,i,s,e,o),c.needsSwap&&(o&&(r.renderToScreen=c.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),u=i,i=s,s=u),c instanceof Ise?o=!0:c instanceof Tse&&(o=!1))}setSize(e,t,r){const i=this.renderer,s=i.getSize(new De);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&i.setSize(e,t,r);const o=i.getDrawingBufferSize(new De);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Nse=class{constructor(){this.shaderParts=new Map([[yn.FRAGMENT_HEAD,null],[yn.FRAGMENT_MAIN_UV,null],[yn.FRAGMENT_MAIN_IMAGE,null],[yn.VERTEX_HEAD,null],[yn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=bu.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Wo}},zse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Gse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Hse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Vse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Wse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",jse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",$se="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Xse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Kse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Jse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Yse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Zse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Qse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",qse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",eoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",toe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",noe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",roe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ioe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",soe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ooe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",aoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",loe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",uoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",coe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",foe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",doe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",hoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",poe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",moe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",goe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",voe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",yoe=new Map([[Ut.ADD,zse],[Ut.ALPHA,Gse],[Ut.AVERAGE,Hse],[Ut.COLOR,Vse],[Ut.COLOR_BURN,Wse],[Ut.COLOR_DODGE,jse],[Ut.DARKEN,$se],[Ut.DIFFERENCE,Xse],[Ut.DIVIDE,Kse],[Ut.DST,null],[Ut.EXCLUSION,Jse],[Ut.HARD_LIGHT,Yse],[Ut.HARD_MIX,Zse],[Ut.HUE,Qse],[Ut.INVERT,qse],[Ut.INVERT_RGB,eoe],[Ut.LIGHTEN,toe],[Ut.LINEAR_BURN,noe],[Ut.LINEAR_DODGE,roe],[Ut.LINEAR_LIGHT,ioe],[Ut.LUMINOSITY,soe],[Ut.MULTIPLY,ooe],[Ut.NEGATION,aoe],[Ut.NORMAL,loe],[Ut.OVERLAY,uoe],[Ut.PIN_LIGHT,coe],[Ut.REFLECT,foe],[Ut.SATURATION,doe],[Ut.SCREEN,hoe],[Ut.SOFT_LIGHT,poe],[Ut.SRC,moe],[Ut.SUBTRACT,goe],[Ut.VIVID_LIGHT,voe]]),_oe=class extends xo{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new pt(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return yoe.get(this.blendFunction)}},Os=class extends xo{constructor(n,e,{attributes:t=bu.NONE,blendFunction:r=Ut.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new _oe(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Wo,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=ju){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Tn||e instanceof Xn||e instanceof fn||e instanceof hs)&&this[n].dispose()}}},xoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,woe=class extends Os{constructor({blendFunction:n=Ut.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=Zh.LARGE,resolutionScale:l=.5,width:u=br.AUTO_SIZE,height:c=br.AUTO_SIZE,resolutionX:f=u,resolutionY:d=c}={}){super("BloomEffect",xoe,{blendFunction:n,uniforms:new Map([["map",new pt(null)],["intensity",new pt(i)]])}),this.renderTarget=new Tn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new t6({kernelSize:a}),this.luminancePass=new n6({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Dse,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new br(this,f,d,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===Nt&&(this.renderTarget.texture.encoding=Nt))}},Soe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",boe=class extends Os{constructor({blendFunction:n=Ut.SRC,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",Soe,{blendFunction:n,uniforms:new Map([["brightness",new pt(e)],["contrast",new pt(t)]])}),this.inputColorSpace=Nt}get brightness(){return this.uniforms.get("brightness").value}set brightness(n){this.uniforms.get("brightness").value=n}getBrightness(n){return this.brightness}setBrightness(n){this.brightness=n}get contrast(){return this.uniforms.get("contrast").value}set contrast(n){this.uniforms.get("contrast").value=n}getContrast(n){return this.contrast}setContrast(n){this.contrast=n}},Aoe="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",Moe=class extends Os{constructor({blendFunction:n,bits:e=16}={}){super("ColorDepthEffect",Aoe,{blendFunction:n,uniforms:new Map([["factor",new pt(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(n){this.bits=n,this.uniforms.get("factor").value=Math.pow(2,n/3)}getBitDepth(){return this.bitDepth}setBitDepth(n){this.bitDepth=n}},Eoe=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,Coe=class extends Os{constructor({blendFunction:n=Ut.SRC,inverted:e=!1}={}){super("DepthEffect",Eoe,{blendFunction:n,attributes:bu.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(n){this.inverted!==n&&(n?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(n){this.inverted=n}},Toe="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",Poe=class extends Os{constructor({blendFunction:n,angle:e=Math.PI*.5,scale:t=1}={}){super("DotScreenEffect",Toe,{blendFunction:n,uniforms:new Map([["angle",new pt(new De)],["scale",new pt(t)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(n){this.uniforms.get("angle").value.set(Math.sin(n),Math.cos(n))}getAngle(){return this.angle}setAngle(n){this.angle=n}get scale(){return this.uniforms.get("scale").value}set scale(n){this.uniforms.get("scale").value=n}};new $;new Et;var Roe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",Boe=class extends Os{constructor({blendFunction:n=Ut.SRC,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",Roe,{blendFunction:n,uniforms:new Map([["hue",new pt(new $)],["saturation",new pt(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(n){this.uniforms.get("saturation").value=n}getSaturation(){return this.saturation}setSaturation(n){this.saturation=n}get hue(){const n=this.uniforms.get("hue").value;return Math.acos((n.x*3-1)/2)}set hue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(n){this.hue=n}};new st;var Ioe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Doe=class extends Os{constructor({blendFunction:n=Ut.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",Ioe,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},Loe=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,Foe=class extends Os{constructor({blendFunction:n=Ut.OVERLAY,density:e=1.25,scrollSpeed:t=0}={}){super("ScanlineEffect",Loe,{blendFunction:n,uniforms:new Map([["count",new pt(0)],["scrollSpeed",new pt(0)]])}),this.resolution=new De,this.d=e,this.scrollSpeed=t}get density(){return this.d}set density(n){this.d=n,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(n){this.density=n}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(n){this.uniforms.get("scrollSpeed").value=n,n===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},koe="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",Ooe="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",Uoe=Math.PI*.5,hm=new $,mL=new $,Noe=class extends Os{constructor(n,e=new $,{speed:t=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",koe,{vertexShader:Ooe,uniforms:new Map([["active",new pt(!1)],["center",new pt(new De(.5,.5))],["cameraDistance",new pt(1)],["size",new pt(1)],["radius",new pt(-i)],["maxRadius",new pt(r)],["waveSize",new pt(i)],["amplitude",new pt(s)]])}),this.position=e,this.speed=t,this.camera=n,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(n){this.camera=n}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(n){this.uniforms.get("amplitude").value=n}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(n){this.uniforms.get("waveSize").value=n}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(n){this.uniforms.get("maxRadius").value=n}get epicenter(){return this.position}set epicenter(n){this.position=n}getPosition(){return this.position}setPosition(n){this.position=n}getSpeed(){return this.speed}setSpeed(n){this.speed=n}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(n,e,t){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(hm),mL.copy(i.position).sub(r),o.value=hm.angleTo(mL)>Uoe,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),hm.copy(r).project(i),this.screenPosition.set((hm.x+1)*.5,(hm.y+1)*.5)),this.time+=t*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},zoe="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",Goe=class extends Os{constructor({blendFunction:n,intensity:e=1}={}){super("SepiaEffect",zoe,{blendFunction:n,uniforms:new Map([["weightsR",new pt(new $(.393,.769,.189))],["weightsG",new pt(new $(.349,.686,.168))],["weightsB",new pt(new $(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(n){this.blendMode.opacity.value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},Hoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,Voe="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",Woe=class extends Os{constructor({blendFunction:n,offset:e=0,rotation:t=0,focusArea:r=.4,feather:i=.3,kernelSize:s=Zh.MEDIUM,resolutionScale:o=.5,resolutionX:a=br.AUTO_SIZE,resolutionY:l=br.AUTO_SIZE}={}){super("TiltShiftEffect",Hoe,{vertexShader:Voe,blendFunction:n,uniforms:new Map([["rotation",new pt(new De)],["maskParams",new pt(new De)],["map",new pt(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new Tn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new Fse({kernelSize:s,resolutionScale:o,resolutionX:a,resolutionY:l,offset:e,rotation:t,focusArea:r,feather:i});const u=this.resolution=new br(this,a,l,o);u.addEventListener("change",c=>this.setSize(u.baseWidth,u.baseHeight)),this.rotation=t,this.updateParams()}updateParams(){const n=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);n.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(n){this.uniforms.get("rotation").value.set(Math.cos(n),Math.sin(n)),this.blurPass.blurMaterial.rotation=n}get offset(){return this._offset}set offset(n){this._offset=n,this.blurPass.blurMaterial.offset=n,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(n){this._focusArea=n,this.blurPass.blurMaterial.focusArea=n,this.updateParams()}get feather(){return this._feather}set feather(n){this._feather=n,this.blurPass.blurMaterial.feather=n,this.updateParams()}get bias(){return 0}set bias(n){}update(n,e,t){this.blurPass.render(n,e,this.renderTarget)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===Nt&&(this.renderTarget.texture.encoding=Nt))}},joe=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,$oe=class extends Os{constructor({blendFunction:n=Ut.SRC,adaptive:e=!0,mode:t=e?Va.REINHARD2_ADAPTIVE:Va.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",joe,{blendFunction:n,uniforms:new Map([["luminanceBuffer",new pt(null)],["maxLuminance",new pt(i)],["whitePoint",new pt(s)],["middleGrey",new pt(o)],["averageLuminance",new pt(l)]])}),this.renderTargetLuminance=new Tn(1,1,{minFilter:Vo,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new n6({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new Cse(this.luminancePass.texture,{minLuminance:a,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(n){if(this.mode!==n){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",n.toFixed(0)),n){case Va.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Va.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case Va.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=n===Va.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(n){this.mode=n}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(n){this.uniforms.get("whitePoint").value=n}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(n){this.uniforms.get("middleGrey").value=n}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(n){this.uniforms.get("averageLuminance").value=n}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(n){const e=Math.max(0,Math.ceil(Math.log2(n))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(n){this.resolution=n}get adaptive(){return this.mode===Va.REINHARD2_ADAPTIVE}set adaptive(n){this.mode=n?Va.REINHARD2_ADAPTIVE:Va.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(n){this.adaptiveLuminanceMaterial.adaptationRate=n}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(n){console.warn(this.name,"distinction was removed.")}update(n,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(n,e),this.adaptiveLuminancePass.render(n,null,null,t))}initialize(n,e,t){this.adaptiveLuminancePass.initialize(n,e,t)}},Xoe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Koe=class extends Os{constructor({blendFunction:n,technique:e=Ny.DEFAULT,eskil:t=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",Xoe,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new pt(r)],["darkness",new pt(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ny.ESKIL}set eskil(n){this.technique=n?Ny.ESKIL:Ny.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};const Us=function(n,e){return e===void 0&&(e=Ut.NORMAL),B.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=Bn(c=>c.invalidate),u=B.useMemo(()=>new n(a),[a]);return B.useLayoutEffect(()=>{u.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(u.blendMode.opacity.value=o),l()},[s,u.blendMode,o]),he.createElement("primitive",{ref:i,object:u,dispose:null})})};Us(woe,Ut.ADD);Us(boe);Us(Moe);Us(Coe);const Joe=B.createContext(null),Yoe=he.memo(B.forwardRef((n,e)=>{let{children:t,camera:r,scene:i,resolutionScale:s,enabled:o=!0,renderPriority:a=1,autoClear:l=!0,depthBuffer:u,disableNormalPass:c,stencilBuffer:f,multisampling:d=8,frameBufferType:m=Br}=n;const{gl:g,scene:v,camera:y,size:_}=Bn();i=i||v,r=r||y;const[x,w,S]=B.useMemo(()=>{const R=lne(),b=new Use(g,{depthBuffer:u,stencilBuffer:f,multisampling:d>0&&R?d:0,frameBufferType:m});b.addPass(new e6(i,r));let M=null,C=null;return c||(C=new Lse(i,r),C.enabled=!1,b.addPass(C),s!==void 0&&R&&(M=new Pse({normalBuffer:C.texture,resolutionScale:s}),M.enabled=!1,b.addPass(M))),[b,C,M]},[r,g,u,f,d,m,i,c,s]);B.useEffect(()=>x==null?void 0:x.setSize(_.width,_.height),[x,_]),fi((R,b)=>{o&&(g.autoClear=l,x.render(b))},o?a:0);const T=B.useRef(null);B.useLayoutEffect(()=>{let R;return T.current&&T.current.__r3f&&x&&(R=new Bse(r,...T.current.__r3f.objects),R.renderToScreen=!0,x.addPass(R),w&&(w.enabled=!0),S&&(S.enabled=!0)),()=>{R&&(x==null||x.removePass(R)),w&&(w.enabled=!1),S&&(S.enabled=!1)}},[x,t,r,w,S]);const E=B.useMemo(()=>({composer:x,normalPass:w,downSamplingPass:S,resolutionScale:s,camera:r,scene:i}),[x,w,S,s,r,i]);return B.useImperativeHandle(e,()=>x,[x]),he.createElement(Joe.Provider,{value:E},he.createElement("group",{ref:T},t))}));Us(Poe);Us(Boe);const Zoe=Us(Doe,Ut.COLOR_DODGE);Us(Foe,Ut.OVERLAY);Us(Goe);Us($oe);Us(Koe);Us(Noe);Us(Woe,Ut.ADD);function Xa(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r6(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Rs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Mh={duration:.5,overwrite:!1,delay:0},uT,Mi,Cr,lo=1e8,Cn=1/lo,WA=Math.PI*2,Qoe=WA/4,qoe=0,i6=Math.sqrt,eae=Math.cos,tae=Math.sin,ni=function(e){return typeof e=="string"},hr=function(e){return typeof e=="function"},xl=function(e){return typeof e=="number"},cT=function(e){return typeof e>"u"},Sa=function(e){return typeof e=="object"},as=function(e){return e!==!1},fT=function(){return typeof window<"u"},zy=function(e){return hr(e)||ni(e)},s6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ei=Array.isArray,jA=/(?:-?\.?\d|\.)+/gi,o6=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,sb=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,a6=/[+-]=-?[.\d]+/,l6=/[^,'"\[\]\s]+/gi,nae=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,tr,Qs,$A,dT,Is={},l_={},u6,c6=function(e){return(l_=Sf(e,Is))&&fs},hT=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},u_=function(e,t){return!t&&console.warn(e)},f6=function(e,t){return e&&(Is[e]=t)&&l_&&(l_[e]=t)||Is},Ng=function(){return 0},rae={suppressEvents:!0,isStart:!0,kill:!1},b1={suppressEvents:!0,kill:!1},iae={suppressEvents:!0},pT={},Au=[],XA={},d6,Ms={},ob={},gL=30,A1=[],mT="",gT=function(e){var t=e[0],r,i;if(Sa(t)||hr(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=A1.length;i--&&!A1[i].targetTest(t););r=A1[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new k6(e[i],r)))||e.splice(i,1);return e},of=function(e){return e._gsap||gT(uo(e))[0]._gsap},h6=function(e,t,r){return(r=e[t])&&hr(r)?e[t]():cT(r)&&e.getAttribute&&e.getAttribute(t)||r},ls=function(e,t){return(e=e.split(",")).forEach(t)||e},xr=function(e){return Math.round(e*1e5)/1e5||0},ai=function(e){return Math.round(e*1e7)/1e7||0},ah=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},sae=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},c_=function(){var e=Au.length,t=Au.slice(0),r,i;for(XA={},Au.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},p6=function(e,t,r,i){Au.length&&!Mi&&c_(),e.render(t,r,i||Mi&&t<0&&(e._initted||e._startAt)),Au.length&&!Mi&&c_()},m6=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(l6).length<2?t:ni(e)?e.trim():e},g6=function(e){return e},vo=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},oae=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Sf=function(e,t){for(var r in t)e[r]=t[r];return e},vL=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Sa(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},f_=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Km=function(e){var t=e.parent||tr,r=e.keyframes?oae(Ei(e.keyframes)):vo;if(as(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},aae=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},v6=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},bx=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Ou=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},af=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},lae=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},KA=function(e,t,r,i){return e._startAt&&(Mi?e._startAt.revert(b1):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},uae=function n(e){return!e||e._ts&&n(e.parent)},yL=function(e){return e._repeat?Eh(e._tTime,e=e.duration()+e._rDelay)*e:0},Eh=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},d_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ax=function(e){return e._end=ai(e._start+(e._tDur/Math.abs(e._ts||e._rts||Cn)||0))},Mx=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=ai(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ax(e),r._dirty||af(r,e)),e},y6=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=d_(e.rawTime(),t),(!t._dur||C0(0,t.totalDuration(),r)-t._tTime>Cn)&&t.render(r,!0)),af(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Cn}},fa=function(e,t,r,i){return t.parent&&Ou(t),t._start=ai((xl(r)?r:r||e!==tr?Ys(e,r,t):e._time)+t._delay),t._end=ai(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),v6(e,t,"_first","_last",e._sort?"_start":0),JA(t)||(e._recent=t),i||y6(e,t),e._ts<0&&Mx(e,e._tTime),e},_6=function(e,t){return(Is.ScrollTrigger||hT("scrollTrigger",t))&&Is.ScrollTrigger.create(t,e)},x6=function(e,t,r,i,s){if(yT(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Mi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&d6!==Es.frame)return Au.push(e),e._lazy=[s,i],1},cae=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},JA=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},fae=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&cae(e)&&!(!e._initted&&JA(e))||(e._ts<0||e._dp._ts<0)&&!JA(e))?0:1,a=e._rDelay,l=0,u,c,f;if(a&&e._repeat&&(l=C0(0,e._tDur,t),c=Eh(l,a),e._yoyo&&c&1&&(o=1-o),c!==Eh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Mi||i||e._zTime===Cn||!t&&e._zTime){if(!e._initted&&x6(e,t,i,r,l))return;for(f=e._zTime,e._zTime=t||(r?Cn:0),r||(r=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&KA(e,t,r,!0),e._onUpdate&&!r&&co(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&co(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ou(e,1),!r&&!Mi&&(co(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},dae=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Ch=function(e,t,r,i){var s=e._repeat,o=ai(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:ai(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Mx(e,e._tTime=e._tDur*a),e.parent&&Ax(e),r||af(e.parent,e),e},_L=function(e){return e instanceof ts?af(e):Ch(e,e._dur)},hae={_start:0,endTime:Ng,totalDuration:Ng},Ys=function n(e,t,r){var i=e.labels,s=e._recent||hae,o=e.duration()>=lo?s.endTime(!1):e._dur,a,l,u;return ni(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&r&&(l=l/100*(Ei(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Jm=function(e,t,r){var i=xl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=as(l.vars.inherit)&&l.parent;o.immediateRender=as(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Or(t[0],o,t[s+1])},Yu=function(e,t){return e||e===0?t(e):t},C0=function(e,t,r){return r<e?e:r>t?t:r},Si=function(e,t){return!ni(e)||!(t=nae.exec(e))?"":t[1]},pae=function(e,t,r){return Yu(r,function(i){return C0(e,t,i)})},YA=[].slice,w6=function(e,t){return e&&Sa(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Sa(e[0]))&&!e.nodeType&&e!==Qs},mae=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return ni(i)&&!t||w6(i,1)?(s=r).push.apply(s,uo(i)):r.push(i)})||r},uo=function(e,t,r){return Cr&&!t&&Cr.selector?Cr.selector(e):ni(e)&&!r&&($A||!Th())?YA.call((t||dT).querySelectorAll(e),0):Ei(e)?mae(e,r):w6(e)?YA.call(e,0):e?[e]:[]},ZA=function(e){return e=uo(e)[0]||u_("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return uo(t,r.querySelectorAll?r:r===e?u_("Invalid scope")||dT.createElement("div"):e)}},S6=function(e){return e.sort(function(){return .5-Math.random()})},b6=function(e){if(hr(e))return e;var t=Sa(e)?e:{each:e},r=lf(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=t.axis,c=i,f=i;return ni(i)?c=f={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],f=i[1]),function(d,m,g){var v=(g||t).length,y=o[v],_,x,w,S,T,E,R,b,M;if(!y){if(M=t.grid==="auto"?0:(t.grid||[1,lo])[1],!M){for(R=-lo;R<(R=g[M++].getBoundingClientRect().left)&&M<v;);M--}for(y=o[v]=[],_=l?Math.min(M,v)*c-.5:i%M,x=M===lo?0:l?v*f/M-.5:i/M|0,R=0,b=lo,E=0;E<v;E++)w=E%M-_,S=x-(E/M|0),y[E]=T=u?Math.abs(u==="y"?S:w):i6(w*w+S*S),T>R&&(R=T),T<b&&(b=T);i==="random"&&S6(y),y.max=R-b,y.min=b,y.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(M>v?v-1:u?u==="y"?v/M:M:Math.max(M,v/M))||0)*(i==="edges"?-1:1),y.b=v<0?s-v:s,y.u=Si(t.amount||t.each)||0,r=r&&v<0?D6(r):r}return v=(y[d]-y.min)/y.max||0,ai(y.b+(r?r(v):v)*y.v)+y.u}},QA=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=ai(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(xl(r)?0:Si(r))}},A6=function(e,t){var r=Ei(e),i,s;return!r&&Sa(e)&&(i=r=e.radius||lo,e.values?(e=uo(e.values),(s=!xl(e[0]))&&(i*=i)):e=QA(e.increment)),Yu(t,r?hr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=lo,c=0,f=e.length,d,m;f--;)s?(d=e[f].x-a,m=e[f].y-l,d=d*d+m*m):d=Math.abs(e[f]-a),d<u&&(u=d,c=f);return c=!i||u<=i?e[c]:o,s||c===o||xl(o)?c:c+Si(o)}:QA(e))},M6=function(e,t,r,i){return Yu(Ei(e)?!t:r===!0?!!(r=0):!i,function(){return Ei(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},gae=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},vae=function(e,t){return function(r){return e(parseFloat(r))+(t||Si(r))}},yae=function(e,t,r){return C6(e,t,0,1,r)},E6=function(e,t,r){return Yu(r,function(i){return e[~~t(i)]})},_ae=function n(e,t,r){var i=t-e;return Ei(e)?E6(e,n(0,e.length),t):Yu(r,function(s){return(i+(s-e)%i)%i+e})},xae=function n(e,t,r){var i=t-e,s=i*2;return Ei(e)?E6(e,n(0,e.length-1),t):Yu(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},zg=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?l6:jA),r+=e.substr(t,i-t)+M6(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},C6=function(e,t,r,i,s){var o=t-e,a=i-r;return Yu(s,function(l){return r+((l-e)/o*a||0)})},wae=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=ni(e),a={},l,u,c,f,d;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Ei(e)&&!Ei(t)){for(c=[],f=e.length,d=f-2,u=1;u<f;u++)c.push(n(e[u-1],e[u]));f--,s=function(g){g*=f;var v=Math.min(d,~~g);return c[v](g-v)},r=t}else i||(e=Sf(Ei(e)?[]:{},e));if(!c){for(l in t)vT.call(a,e,l,"get",t[l]);s=function(g){return wT(g,a)||(o?e.p:e)}}}return Yu(r,s)},xL=function(e,t,r){var i=e.labels,s=lo,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},co=function(e,t,r){var i=e.vars,s=i[t],o=Cr,a=e._ctx,l,u,c;if(s)return l=i[t+"Params"],u=i.callbackScope||e,r&&Au.length&&c_(),a&&(Cr=a),c=l?s.apply(u,l):s.call(u),Cr=o,c},Cm=function(e){return Ou(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Mi),e.progress()<1&&co(e,"onInterrupt"),e},jd,T6=[],P6=function(e){if(!fT()){T6.push(e);return}e=!e.name&&e.default||e;var t=e.name,r=hr(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Ng,render:wT,add:vT,kill:Oae,modifier:kae,rawVars:0},o={targetTest:0,get:0,getSetter:xT,aliases:{},register:0};if(Th(),e!==i){if(Ms[t])return;vo(i,vo(f_(e,s),o)),Sf(i.prototype,Sf(s,f_(e,o))),Ms[i.prop=t]=i,e.targetTest&&(A1.push(i),pT[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}f6(t,i),e.register&&e.register(fs,i,us)},Mn=255,Tm={aqua:[0,Mn,Mn],lime:[0,Mn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mn],navy:[0,0,128],white:[Mn,Mn,Mn],olive:[128,128,0],yellow:[Mn,Mn,0],orange:[Mn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mn,0,0],pink:[Mn,192,203],cyan:[0,Mn,Mn],transparent:[Mn,Mn,Mn,0]},ab=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Mn+.5|0},R6=function(e,t,r){var i=e?xl(e)?[e>>16,e>>8&Mn,e&Mn]:0:Tm.black,s,o,a,l,u,c,f,d,m,g;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Tm[e])i=Tm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Mn,i&Mn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Mn,e&Mn]}else if(e.substr(0,3)==="hsl"){if(i=g=e.match(jA),!t)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=ab(l+1/3,s,o),i[1]=ab(l,s,o),i[2]=ab(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(o6),r&&i.length<4&&(i[3]=1),i}else i=e.match(jA)||Tm.transparent;i=i.map(Number)}return t&&!g&&(s=i[0]/Mn,o=i[1]/Mn,a=i[2]/Mn,f=Math.max(s,o,a),d=Math.min(s,o,a),c=(f+d)/2,f===d?l=u=0:(m=f-d,u=c>.5?m/(2-f-d):m/(f+d),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},B6=function(e){var t=[],r=[],i=-1;return e.split(Mu).forEach(function(s){var o=s.match(Wd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},wL=function(e,t,r){var i="",s=(e+i).match(Mu),o=t?"hsla(":"rgba(",a=0,l,u,c,f;if(!s)return e;if(s=s.map(function(d){return(d=R6(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(c=B6(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(Mu,"1").split(Wd),f=u.length-1;a<f;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(Mu),f=u.length-1;a<f;a++)i+=u[a]+s[a];return i+u[f]},Mu=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Tm)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Sae=/hsl[a]?\(/,I6=function(e){var t=e.join(" "),r;if(Mu.lastIndex=0,Mu.test(t))return r=Sae.test(t),e[1]=wL(e[1],r),e[0]=wL(e[0],r,B6(e[1])),!0},Gg,Es=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,u,c,f,d,m,g=function v(y){var _=n()-i,x=y===!0,w,S,T,E;if(_>e&&(r+=_-t),i+=_,T=i-r,w=T-o,(w>0||x)&&(E=++f.frame,d=T-f.time*1e3,f.time=T=T/1e3,o+=w+(w>=s?4:s-w),S=1),x||(l=u(v)),S)for(m=0;m<a.length;m++)a[m](T,d,E,y)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return d/(1e3/(y||60))},wake:function(){u6&&(!$A&&fT()&&(Qs=$A=window,dT=Qs.document||{},Is.gsap=fs,(Qs.gsapVersions||(Qs.gsapVersions=[])).push(fs.version),c6(l_||Qs.GreenSockGlobals||!Qs.gsap&&Qs||{}),c=Qs.requestAnimationFrame,T6.forEach(P6)),l&&f.sleep(),u=c||function(y){return setTimeout(y,o-f.time*1e3+1|0)},Gg=1,g(2))},sleep:function(){(c?Qs.cancelAnimationFrame:clearTimeout)(l),Gg=0,u=Ng},lagSmoothing:function(y,_){e=y||1/0,t=Math.min(_||33,e)},fps:function(y){s=1e3/(y||240),o=f.time*1e3+s},add:function(y,_,x){var w=_?function(S,T,E,R){y(S,T,E,R),f.remove(w)}:y;return f.remove(y),a[x?"unshift":"push"](w),Th(),w},remove:function(y,_){~(_=a.indexOf(y))&&a.splice(_,1)&&m>=_&&m--},_listeners:a},f}(),Th=function(){return!Gg&&Es.wake()},an={},bae=/^[\d.\-M][\d.\-,\s]/,Aae=/["']/g,Mae=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[i]=isNaN(u)?u.replace(Aae,"").trim():+u,i=l.substr(a+1).trim();return t},Eae=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},Cae=function(e){var t=(e+"").split("("),r=an[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Mae(t[1])]:Eae(e).split(",").map(m6)):an._CE&&bae.test(e)?an._CE("",e):r},D6=function(e){return function(t){return 1-e(1-t)}},L6=function n(e,t){for(var r=e._first,i;r;)r instanceof ts?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},lf=function(e,t){return e&&(hr(e)?e:an[e]||Cae(e))||t},Bf=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return ls(e,function(a){an[a]=Is[a]=s,an[o=a.toLowerCase()]=r;for(var l in s)an[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=an[a+"."+l]=s[l]}),s},F6=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},lb=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/WA*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*tae((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:F6(a);return s=WA/s,l.config=function(u,c){return n(e,u,c)},l},ub=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:F6(r);return i.config=function(s){return n(e,s)},i};ls("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Bf(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});an.Linear.easeNone=an.none=an.Linear.easeIn;Bf("Elastic",lb("in"),lb("out"),lb());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Bf("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Bf("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Bf("Circ",function(n){return-(i6(1-n*n)-1)});Bf("Sine",function(n){return n===1?1:-eae(n*Qoe)+1});Bf("Back",ub("in"),ub("out"),ub());an.SteppedEase=an.steps=Is.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Cn;return function(a){return((i*C0(0,o,a)|0)+s)*r}}};Mh.ease=an["quad.out"];ls("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return mT+=n+","+n+"Params,"});var k6=function(e,t){this.id=qoe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:h6,this.set=t?t.getSetter:xT},Ph=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ch(this,+t.duration,1,1),this.data=t.data,Cr&&(this._ctx=Cr,Cr.data.push(this)),Gg||Es.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Ch(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Th(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Mx(this,r),!s._dp||s.parent||y6(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&fa(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Cn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),p6(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+yL(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+yL(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Eh(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-Cn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?d_(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Cn?0:this._rts,this.totalTime(C0(-Math.abs(this._delay),this._tDur,i),!0),Ax(this),lae(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Th(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Cn&&(this._tTime-=Cn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&fa(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(as(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?d_(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=iae);var i=Mi;return Mi=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Mi=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,_L(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,_L(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Ys(this,r),as(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,as(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Cn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Cn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Cn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=hr(r)?r:g6,a=function(){var u=i.then;i.then=null,hr(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Cm(this)},n}();vo(Ph.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Cn,_prom:0,_ps:!1,_rts:1});var ts=function(n){r6(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=as(r.sortChildren),tr&&fa(r.parent||tr,Xa(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&_6(Xa(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Jm(0,arguments,this),this},t.from=function(i,s,o){return Jm(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Jm(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Km(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Or(i,s,Ys(this,o),1),this},t.call=function(i,s,o){return fa(this,Or.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new Or(i,o,Ys(this,l)),this},t.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Km(o).immediateRender=as(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},t.staggerFromTo=function(i,s,o,a,l,u,c,f){return a.startAt=o,Km(a).immediateRender=as(a.immediateRender),this.staggerTo(i,s,a,l,u,c,f)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:ai(i),f=this._zTime<0!=i<0&&(this._initted||!u),d,m,g,v,y,_,x,w,S,T,E,R;if(this!==tr&&c>l&&i>=0&&(c=l),c!==this._tTime||o||f){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),d=c,S=this._start,w=this._ts,_=!w,f&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(E=this._yoyo,y=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,s,o);if(d=ai(c%y),c===l?(v=this._repeat,d=u):(v=~~(c/y),v&&v===c/y&&(d=u,v--),d>u&&(d=u)),T=Eh(this._tTime,y),!a&&this._tTime&&T!==v&&this._tTime-T*y-this._dur<=0&&(T=v),E&&v&1&&(d=u-d,R=1),v!==T&&!this._lock){var b=E&&T&1,M=b===(E&&v&1);if(v<T&&(b=!b),a=b?0:u,this._lock=1,this.render(a||(R?0:ai(v*y)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&co(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,M&&(this._lock=2,a=b?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;L6(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=dae(this,ai(a),ai(d)),x&&(c-=d-(d=x._start))),this._tTime=c,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!v&&(co(this,"onStart"),this._tTime!==c))return this;if(d>=a&&i>=0)for(m=this._first;m;){if(g=m._next,(m._act||d>=m._start)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(d-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(d-m._start)*m._ts,s,o),d!==this._time||!this._ts&&!_){x=0,g&&(c+=this._zTime=-Cn);break}}m=g}else{m=this._last;for(var C=i<0?i:d;m;){if(g=m._prev,(m._act||C<=m._end)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(C-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(C-m._start)*m._ts,s,o||Mi&&(m._initted||m._startAt)),d!==this._time||!this._ts&&!_){x=0,g&&(c+=this._zTime=C?-Cn:Cn);break}}m=g}}if(x&&!s&&(this.pause(),x.render(d>=a?0:-Cn)._zTime=d>=a?1:-1,this._ts))return this._start=S,Ax(this),this.render(i,s,o);this._onUpdate&&!s&&co(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(S===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Ou(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(co(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(xl(s)||(s=Ys(this,s,i)),!(i instanceof Ph)){if(Ei(i))return i.forEach(function(a){return o.add(a,s)}),this;if(ni(i))return this.addLabel(i,s);if(hr(i))i=Or.delayedCall(0,i);else return this}return this!==i?fa(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-lo);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Or?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return ni(i)?this.removeLabel(i):hr(i)?this.killTweensOf(i):(bx(this,i),i===this._recent&&(this._recent=this._last),af(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ai(Es.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Ys(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Or.delayedCall(0,s||Ng,o);return a.data="isPause",this._hasPause=1,fa(this,a,Ys(this,i))},t.removePause=function(i){var s=this._first;for(i=Ys(this,i);s;)s._start===i&&s.data==="isPause"&&Ou(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)lu!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=uo(i),l=this._first,u=xl(s),c;l;)l instanceof Or?sae(l._targets,a)&&(u?(!lu||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Ys(o,i),l=s,u=l.startAt,c=l.onStart,f=l.onStartParams,d=l.immediateRender,m,g=Or.to(o,vo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Cn,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());g._dur!==y&&Ch(g,y,0,1).render(g._time,!0,!0),m=1}c&&c.apply(g,f||[])}},s));return d?g.render(0):g},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,vo({startAt:{time:Ys(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),xL(this,Ys(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),xL(this,Ys(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Cn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return af(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),af(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=lo,u,c,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,fa(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;Ch(o,o===tr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(tr._ts&&(p6(tr,d_(i,tr)),d6=Es.frame),Es.frame>=gL){gL+=Rs.autoSleep||120;var s=tr._first;if((!s||!s._ts)&&Rs.autoSleep&&Es._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Es.sleep()}}},e}(Ph);vo(ts.prototype,{_lock:0,_hasPause:0,_forcing:0});var Tae=function(e,t,r,i,s,o,a){var l=new us(this._pt,e,t,0,1,H6,null,s),u=0,c=0,f,d,m,g,v,y,_,x;for(l.b=r,l.e=i,r+="",i+="",(_=~i.indexOf("random("))&&(i=zg(i)),o&&(x=[r,i],o(x,e,t),r=x[0],i=x[1]),d=r.match(sb)||[];f=sb.exec(i);)g=f[0],v=i.substring(u,f.index),m?m=(m+1)%5:v.substr(-5)==="rgba("&&(m=1),g!==d[c++]&&(y=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:v||c===1?v:",",s:y,c:g.charAt(1)==="="?ah(y,g)-y:parseFloat(g)-y,m:m&&m<4?Math.round:0},u=sb.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(a6.test(i)||_)&&(l.e=0),this._pt=l,l},vT=function(e,t,r,i,s,o,a,l,u,c){hr(i)&&(i=i(s||0,e,o));var f=e[t],d=r!=="get"?r:hr(f)?u?e[t.indexOf("set")||!hr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():f,m=hr(f)?u?Dae:z6:_T,g;if(ni(i)&&(~i.indexOf("random(")&&(i=zg(i)),i.charAt(1)==="="&&(g=ah(d,i)+(Si(d)||0),(g||g===0)&&(i=g))),!c||d!==i||qA)return!isNaN(d*i)&&i!==""?(g=new us(this._pt,e,t,+d||0,i-(d||0),typeof f=="boolean"?Fae:G6,0,m),u&&(g.fp=u),a&&g.modifier(a,this,e),this._pt=g):(!f&&!(t in e)&&hT(t,i),Tae.call(this,e,t,d,i,m,l||Rs.stringFilter,u))},Pae=function(e,t,r,i,s){if(hr(e)&&(e=Ym(e,s,t,r,i)),!Sa(e)||e.style&&e.nodeType||Ei(e)||s6(e))return ni(e)?Ym(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Ym(e[a],s,t,r,i);return o},O6=function(e,t,r,i,s,o){var a,l,u,c;if(Ms[e]&&(a=new Ms[e]).init(s,a.rawVars?t[e]:Pae(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new us(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==jd))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},lu,qA,yT=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.onUpdateParams,f=i.callbackScope,d=i.runBackwards,m=i.yoyoEase,g=i.keyframes,v=i.autoRevert,y=e._dur,_=e._startAt,x=e._targets,w=e.parent,S=w&&w.data==="nested"?w.vars.targets:x,T=e._overwrite==="auto"&&!uT,E=e.timeline,R,b,M,C,L,D,z,F,H,G,te,V,K;if(E&&(!g||!s)&&(s="none"),e._ease=lf(s,Mh.ease),e._yEase=m?D6(lf(m===!0?s:m,Mh.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!E&&!!i.runBackwards,!E||g&&!i.stagger){if(F=x[0]?of(x[0]).harness:0,V=F&&i[F.prop],R=f_(i,pT),_&&(_._zTime<0&&_.progress(1),t<0&&d&&a&&!v?_.render(-1,!0):_.revert(d&&y?b1:rae),_._lazy=0),o){if(Ou(e._startAt=Or.set(x,vo({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!_&&as(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:c,callbackScope:f,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Mi||!a&&!v)&&e._startAt.revert(b1),a&&y&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(d&&y&&!_){if(t&&(a=!1),M=vo({overwrite:!1,data:"isFromStart",lazy:a&&!_&&as(l),immediateRender:a,stagger:0,parent:w},R),V&&(M[F.prop]=V),Ou(e._startAt=Or.set(x,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Mi?e._startAt.revert(b1):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Cn,Cn);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&as(l)||l&&!y,b=0;b<x.length;b++){if(L=x[b],z=L._gsap||gT(x)[b]._gsap,e._ptLookup[b]=G={},XA[z.id]&&Au.length&&c_(),te=S===x?b:S.indexOf(L),F&&(H=new F).init(L,V||R,e,te,S)!==!1&&(e._pt=C=new us(e._pt,L,H.name,0,1,H.render,H,0,H.priority),H._props.forEach(function(j){G[j]=C}),H.priority&&(D=1)),!F||V)for(M in R)Ms[M]&&(H=O6(M,R,e,te,L,S))?H.priority&&(D=1):G[M]=C=vT.call(e,L,M,"get",R[M],te,S,0,i.stringFilter);e._op&&e._op[b]&&e.kill(L,e._op[b]),T&&e._pt&&(lu=e,tr.killTweensOf(L,G,e.globalTime(t)),K=!e.parent,lu=0),e._pt&&l&&(XA[z.id]=1)}D&&V6(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!K,g&&t<=0&&E.render(lo,!0,!0)},Rae=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,c,f,d;if(!l)for(l=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(u=f[d][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return qA=1,e.vars[t]="+=0",yT(e,a),qA=0,1;l.push(u)}for(d=l.length;d--;)c=l[d],u=c._pt||c,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,c.e&&(c.e=xr(r)+Si(c.e)),c.b&&(c.b=u.s+Si(c.b))},Bae=function(e,t){var r=e[0]?of(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Sf({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Iae=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Ei(t))a=r[e]||(r[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Ym=function(e,t,r,i,s){return hr(e)?e.call(t,r,i,s):ni(e)&&~e.indexOf("random(")?zg(e):e},U6=mT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",N6={};ls(U6+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return N6[n]=1});var Or=function(n){r6(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Km(i))||this;var l=a.vars,u=l.duration,c=l.delay,f=l.immediateRender,d=l.stagger,m=l.overwrite,g=l.keyframes,v=l.defaults,y=l.scrollTrigger,_=l.yoyoEase,x=i.parent||tr,w=(Ei(r)||s6(r)?xl(r[0]):"length"in i)?[r]:uo(r),S,T,E,R,b,M,C,L;if(a._targets=w.length?gT(w):u_("GSAP target "+r+" not found. https://greensock.com",!Rs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,g||d||zy(u)||zy(c)){if(i=a.vars,S=a.timeline=new ts({data:"nested",defaults:v||{},targets:x&&x.data==="nested"?x.vars.targets:w}),S.kill(),S.parent=S._dp=Xa(a),S._start=0,d||zy(u)||zy(c)){if(R=w.length,C=d&&b6(d),Sa(d))for(b in d)~U6.indexOf(b)&&(L||(L={}),L[b]=d[b]);for(T=0;T<R;T++)E=f_(i,N6),E.stagger=0,_&&(E.yoyoEase=_),L&&Sf(E,L),M=w[T],E.duration=+Ym(u,Xa(a),T,M,w),E.delay=(+Ym(c,Xa(a),T,M,w)||0)-a._delay,!d&&R===1&&E.delay&&(a._delay=c=E.delay,a._start+=c,E.delay=0),S.to(M,E,C?C(T,M,w):0),S._ease=an.none;S.duration()?u=c=0:a.timeline=0}else if(g){Km(vo(S.vars.defaults,{ease:"none"})),S._ease=lf(g.ease||i.ease||"none");var D=0,z,F,H;if(Ei(g))g.forEach(function(G){return S.to(w,G,">")}),S.duration();else{E={};for(b in g)b==="ease"||b==="easeEach"||Iae(b,g[b],E,g.easeEach);for(b in E)for(z=E[b].sort(function(G,te){return G.t-te.t}),D=0,T=0;T<z.length;T++)F=z[T],H={ease:F.e,duration:(F.t-(T?z[T-1].t:0))/100*u},H[b]=F.v,S.to(w,H,D),D+=H.duration;S.duration()<u&&S.to({},{duration:u-S.duration()})}}u||a.duration(u=S.duration())}else a.timeline=0;return m===!0&&!uT&&(lu=Xa(a),tr.killTweensOf(w),lu=0),fa(x,Xa(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!u&&!g&&a._start===ai(x._time)&&as(f)&&uae(Xa(a))&&x.data!=="nested")&&(a._tTime=-Cn,a.render(Math.max(0,-c)||0)),y&&_6(Xa(a),y),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,f=i>l-Cn&&!c?l:i<Cn?0:i,d,m,g,v,y,_,x,w,S;if(!u)fae(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=f,w=this.timeline,this._repeat){if(v=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(v*100+i,s,o);if(d=ai(f%v),f===l?(g=this._repeat,d=u):(g=~~(f/v),g&&g===f/v&&(d=u,g--),d>u&&(d=u)),_=this._yoyo&&g&1,_&&(S=this._yEase,d=u-d),y=Eh(this._tTime,v),d===a&&!o&&this._initted)return this._tTime=f,this;g!==y&&(w&&this._yEase&&L6(w,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(ai(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(x6(this,c?i:d,o,s,f))return this._tTime=0,this;if(a!==this._time)return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(S||this._ease)(d/u),this._from&&(this.ratio=x=1-x),d&&!a&&!s&&!g&&(co(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(x,m.d),m=m._next;w&&w.render(i<0?i:!d&&_?-Cn:w._dur*w._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&KA(this,i,s,o),co(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!s&&this.parent&&co(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(c&&!this._onUpdate&&KA(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Ou(this,1),!s&&!(c&&!a)&&(f||a||_)&&(co(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){Gg||Es.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||yT(this,l),u=this._ease(l/this._dur),Rae(this,i,s,o,a,u,l)?this.resetTo(i,s,o,a):(Mx(this,0),this.parent||v6(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Cm(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,lu&&lu.vars.overwrite!==!0)._first||Cm(this),this.parent&&o!==this.timeline.totalDuration()&&Ch(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?uo(i):a,u=this._ptLookup,c=this._pt,f,d,m,g,v,y,_;if((!s||s==="all")&&aae(a,l))return s==="all"&&(this._pt=0),Cm(this);for(f=this._op=this._op||[],s!=="all"&&(ni(s)&&(v={},ls(s,function(x){return v[x]=1}),s=v),s=Bae(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){d=u[_],s==="all"?(f[_]=s,g=d,m={}):(m=f[_]=f[_]||{},g=s);for(v in g)y=d&&d[v],y&&((!("kill"in y.d)||y.d.kill(v)===!0)&&bx(this,y,"_pt"),delete d[v]),m!=="all"&&(m[v]=1)}return this._initted&&!this._pt&&c&&Cm(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Jm(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Jm(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return tr.killTweensOf(i,s,o)},e}(Ph);vo(Or.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ls("staggerTo,staggerFrom,staggerFromTo",function(n){Or[n]=function(){var e=new ts,t=YA.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var _T=function(e,t,r){return e[t]=r},z6=function(e,t,r){return e[t](r)},Dae=function(e,t,r,i){return e[t](i.fp,r)},Lae=function(e,t,r){return e.setAttribute(t,r)},xT=function(e,t){return hr(e[t])?z6:cT(e[t])&&e.setAttribute?Lae:_T},G6=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Fae=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},H6=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},wT=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},kae=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},Oae=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?bx(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Uae=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},V6=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},us=function(){function n(t,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||G6,this.d=l||this,this.set=u||_T,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Uae,this.m=r,this.mt=s,this.tween=i},n}();ls(mT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return pT[n]=1});Is.TweenMax=Is.TweenLite=Or;Is.TimelineLite=Is.TimelineMax=ts;tr=new ts({sortChildren:!1,defaults:Mh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Rs.stringFilter=I6;var Rh=[],M1={},Nae=[],SL=0,cb=function(e){return(M1[e]||Nae).map(function(t){return t()})},eM=function(){var e=Date.now(),t=[];e-SL>2&&(cb("matchMediaInit"),Rh.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=Qs.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&t.push(r))}),cb("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),SL=e,cb("matchMedia"))},W6=function(){function n(t,r){this.selector=r&&ZA(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){hr(r)&&(s=i,i=r,r=hr);var o=this,a=function(){var u=Cr,c=o.selector,f;return u&&u!==o&&u.data.push(o),s&&(o.selector=ZA(s)),Cr=o,f=i.apply(o,arguments),hr(f)&&o._r.push(f),Cr=u,o.selector=c,o.isReverted=!1,f};return o.last=a,r===hr?a(o):r?o[r]=a:a},e.ignore=function(r){var i=Cr;Cr=null,r(this),Cr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Or&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof Ph)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=Rh.indexOf(this);~a&&Rh.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),zae=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Sa(r)||(r={matches:r});var o=new W6(0,s||this.scope),a=o.conditions={},l,u,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?c=1:(l=Qs.matchMedia(r[u]),l&&(Rh.indexOf(o)<0&&Rh.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(eM):l.addEventListener("change",eM)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),h_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return P6(i)})},timeline:function(e){return new ts(e)},getTweensOf:function(e,t){return tr.getTweensOf(e,t)},getProperty:function(e,t,r,i){ni(e)&&(e=uo(e)[0]);var s=of(e||{}).get,o=r?g6:m6;return r==="native"&&(r=""),e&&(t?o((Ms[t]&&Ms[t].get||s)(e,t,r,i)):function(a,l,u){return o((Ms[a]&&Ms[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,r){if(e=uo(e),e.length>1){var i=e.map(function(c){return fs.quickSetter(c,t,r)}),s=i.length;return function(c){for(var f=s;f--;)i[f](c)}}e=e[0]||{};var o=Ms[t],a=of(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var f=new o;jd._pt=0,f.init(e,r?c+r:c,jd,0,[e]),f.render(1,f),jd._pt&&wT(1,jd)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=fs.to(e,Sf((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return tr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=lf(e.ease,Mh.ease)),vL(Mh,e||{})},config:function(e){return vL(Rs,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Ms[a]&&!Is[a]&&u_(t+" effect requires "+a+" plugin.")}),ob[t]=function(a,l,u){return r(uo(a),vo(l||{},s),u)},o&&(ts.prototype[t]=function(a,l,u){return this.add(ob[t](a,Sa(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){an[e]=lf(t)},parseEase:function(e,t){return arguments.length?lf(e,t):an},getById:function(e){return tr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new ts(e),i,s;for(r.smoothChildTiming=as(e.smoothChildTiming),tr.remove(r),r._dp=0,r._time=r._tTime=tr._time,i=tr._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Or&&i.vars.onComplete===i._targets[0]))&&fa(r,i,i._start-i._delay),i=s;return fa(tr,r,0),r},context:function(e,t){return e?new W6(e,t):Cr},matchMedia:function(e){return new zae(e)},matchMediaRefresh:function(){return Rh.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||eM()},addEventListener:function(e,t){var r=M1[e]||(M1[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=M1[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:_ae,wrapYoyo:xae,distribute:b6,random:M6,snap:A6,normalize:yae,getUnit:Si,clamp:pae,splitColor:R6,toArray:uo,selector:ZA,mapRange:C6,pipe:gae,unitize:vae,interpolate:wae,shuffle:S6},install:c6,effects:ob,ticker:Es,updateRoot:ts.updateRoot,plugins:Ms,globalTimeline:tr,core:{PropTween:us,globals:f6,Tween:Or,Timeline:ts,Animation:Ph,getCache:of,_removeLinkedListItem:bx,reverting:function(){return Mi},context:function(e){return e&&Cr&&(Cr.data.push(e),e._ctx=Cr),Cr},suppressOverwrites:function(e){return uT=e}}};ls("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return h_[n]=Or[n]});Es.add(ts.updateRoot);jd=h_.to({},{duration:0});var Gae=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Hae=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Gae(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},fb=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(ni(s)&&(l={},ls(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}Hae(a,s)}}}},fs=h_.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Mi?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},fb("roundProps",QA),fb("modifiers"),fb("snap",A6))||h_;Or.version=ts.version=fs.version="3.11.5";u6=1;fT()&&Th();an.Power0;an.Power1;an.Power2;an.Power3;an.Power4;an.Linear;an.Quad;an.Cubic;an.Quart;an.Quint;an.Strong;an.Elastic;an.Back;an.SteppedEase;an.Bounce;an.Sine;an.Expo;an.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var bL,uu,lh,ST,Yc,AL,bT,Vae=function(){return typeof window<"u"},wl={},Fc=180/Math.PI,uh=Math.PI/180,yd=Math.atan2,ML=1e8,AT=/([A-Z])/g,Wae=/(left|right|width|margin|padding|x)/i,jae=/[\s,\(]\S/,ha={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},tM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},$ae=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Xae=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Kae=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},j6=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},$6=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Jae=function(e,t,r){return e.style[t]=r},Yae=function(e,t,r){return e.style.setProperty(t,r)},Zae=function(e,t,r){return e._gsap[t]=r},Qae=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},qae=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},ele=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},rr="transform",zo=rr+"Origin",tle=function n(e,t){var r=this,i=this.target,s=i.style;if(e in wl){if(this.tfm=this.tfm||{},e!=="transform")e=ha[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=Ya(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Ya(i,e);else return ha.transform.split(",").forEach(function(o){return n.call(r,o,t)});if(this.props.indexOf(rr)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(zo,t,"")),e=rr}(s||t)&&this.props.push(e,t,s[e])},X6=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},nle=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(AT,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=bT(),(!s||!s.isStart)&&!r[rr]&&(X6(r),i.uncache=1)}},K6=function(e,t){var r={target:e,props:[],revert:nle,save:tle};return e._gsap||fs.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},J6,nM=function(e,t){var r=uu.createElementNS?uu.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):uu.createElement(e);return r.style?r:uu.createElement(e)},va=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(AT,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Bh(t)||t,1)||""},EL="O,Moz,ms,Ms,Webkit".split(","),Bh=function(e,t,r){var i=t||Yc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(EL[o]+e in s););return o<0?null:(o===3?"ms":o>=0?EL[o]:"")+e},rM=function(){Vae()&&window.document&&(bL=window,uu=bL.document,lh=uu.documentElement,Yc=nM("div")||{style:{}},nM("div"),rr=Bh(rr),zo=rr+"Origin",Yc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",J6=!!Bh("perspective"),bT=fs.core.reverting,ST=1)},db=function n(e){var t=nM("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(lh.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),lh.removeChild(t),this.style.cssText=s,o},CL=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Y6=function(e){var t;try{t=e.getBBox()}catch{t=db.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===db||(t=db.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+CL(e,["x","cx","x1"])||0,y:+CL(e,["y","cy","y1"])||0,width:0,height:0}:t},Z6=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Y6(e))},Hg=function(e,t){if(t){var r=e.style;t in wl&&t!==zo&&(t=rr),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(AT,"-$1").toLowerCase())):r.removeAttribute(t)}},cu=function(e,t,r,i,s,o){var a=new us(e._pt,t,r,0,1,o?$6:j6);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},TL={deg:1,rad:1,turn:1},rle={grid:1,flex:1},Uu=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Yc.style,l=Wae.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),f=100,d=i==="px",m=i==="%",g,v,y,_;return i===o||!s||TL[i]||TL[o]?s:(o!=="px"&&!d&&(s=n(e,t,r,"px")),_=e.getCTM&&Z6(e),(m||o==="%")&&(wl[t]||~t.indexOf("adius"))?(g=_?e.getBBox()[l?"width":"height"]:e[c],xr(m?s/g*f:s/100*g)):(a[l?"width":"height"]=f+(d?o:i),v=~t.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,_&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===uu||!v.appendChild)&&(v=uu.body),y=v._gsap,y&&m&&y.width&&l&&y.time===Es.time&&!y.uncache?xr(s/y.width*f):((m||o==="%")&&!rle[va(v,"display")]&&(a.position=va(e,"position")),v===e&&(a.position="static"),v.appendChild(Yc),g=Yc[c],v.removeChild(Yc),a.position="absolute",l&&m&&(y=of(v),y.time=Es.time,y.width=v[c]),xr(d?g*s/f:g&&s?f/g*s:0))))},Ya=function(e,t,r,i){var s;return ST||rM(),t in ha&&t!=="transform"&&(t=ha[t],~t.indexOf(",")&&(t=t.split(",")[0])),wl[t]&&t!=="transform"?(s=Wg(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:m_(va(e,zo))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=p_[t]&&p_[t](e,t,r)||va(e,t)||h6(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Uu(e,t,s,r)+r:s},ile=function(e,t,r,i){if(!r||r==="none"){var s=Bh(t,e,1),o=s&&va(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=va(e,"borderTopColor"))}var a=new us(this._pt,e.style,t,0,1,H6),l=0,u=0,c,f,d,m,g,v,y,_,x,w,S,T;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=va(e,t)||i,e.style[t]=r),c=[r,i],I6(c),r=c[0],i=c[1],d=r.match(Wd)||[],T=i.match(Wd)||[],T.length){for(;f=Wd.exec(i);)y=f[0],x=i.substring(l,f.index),g?g=(g+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(g=1),y!==(v=d[u++]||"")&&(m=parseFloat(v)||0,S=v.substr((m+"").length),y.charAt(1)==="="&&(y=ah(m,y)+S),_=parseFloat(y),w=y.substr((_+"").length),l=Wd.lastIndex-w.length,w||(w=w||Rs.units[t]||S,l===i.length&&(i+=w,a.e+=w)),S!==w&&(m=Uu(e,t,v,w)||0),a._pt={_next:a._pt,p:x||u===1?x:",",s:m,c:_-m,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?$6:j6;return a6.test(i)&&(a.e=0),this._pt=a,a},PL={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sle=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=PL[r]||r,t[1]=PL[i]||i,t.join(" ")},ole=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],wl[a]&&(l=1,a=a==="transformOrigin"?zo:rr),Hg(r,a);l&&(Hg(r,rr),o&&(o.svg&&r.removeAttribute("transform"),Wg(r,1),o.uncache=1,X6(i)))}},p_={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new us(e._pt,t,r,0,0,ole);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Vg=[1,0,0,1,0,0],Q6={},q6=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},RL=function(e){var t=va(e,rr);return q6(t)?Vg:t.substr(7).match(o6).map(xr)},MT=function(e,t){var r=e._gsap||of(e),i=e.style,s=RL(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Vg:s):(s===Vg&&!e.offsetParent&&e!==lh&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,lh.appendChild(e)),s=RL(e),l?i.display=l:Hg(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):lh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},iM=function(e,t,r,i,s,o){var a=e._gsap,l=s||MT(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,f=a.xOffset||0,d=a.yOffset||0,m=l[0],g=l[1],v=l[2],y=l[3],_=l[4],x=l[5],w=t.split(" "),S=parseFloat(w[0])||0,T=parseFloat(w[1])||0,E,R,b,M;r?l!==Vg&&(R=m*y-g*v)&&(b=S*(y/R)+T*(-v/R)+(v*x-y*_)/R,M=S*(-g/R)+T*(m/R)-(m*x-g*_)/R,S=b,T=M):(E=Y6(e),S=E.x+(~w[0].indexOf("%")?S/100*E.width:S),T=E.y+(~(w[1]||w[0]).indexOf("%")?T/100*E.height:T)),i||i!==!1&&a.smooth?(_=S-u,x=T-c,a.xOffset=f+(_*m+x*v)-_,a.yOffset=d+(_*g+x*y)-x):a.xOffset=a.yOffset=0,a.xOrigin=S,a.yOrigin=T,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[zo]="0px 0px",o&&(cu(o,a,"xOrigin",u,S),cu(o,a,"yOrigin",c,T),cu(o,a,"xOffset",f,a.xOffset),cu(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",S+" "+T)},Wg=function(e,t){var r=e._gsap||new k6(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=va(e,zo)||"0",c,f,d,m,g,v,y,_,x,w,S,T,E,R,b,M,C,L,D,z,F,H,G,te,V,K,j,J,W,ne,ue,q;return c=f=d=v=y=_=x=w=S=0,m=g=1,r.svg=!!(e.getCTM&&Z6(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[rr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[rr]!=="none"?l[rr]:"")),i.scale=i.rotate=i.translate="none"),R=MT(e,r.svg),r.svg&&(r.uncache?(V=e.getBBox(),u=r.xOrigin-V.x+"px "+(r.yOrigin-V.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),iM(e,te||u,!!te||r.originIsAbsolute,r.smooth!==!1,R)),T=r.xOrigin||0,E=r.yOrigin||0,R!==Vg&&(L=R[0],D=R[1],z=R[2],F=R[3],c=H=R[4],f=G=R[5],R.length===6?(m=Math.sqrt(L*L+D*D),g=Math.sqrt(F*F+z*z),v=L||D?yd(D,L)*Fc:0,x=z||F?yd(z,F)*Fc+v:0,x&&(g*=Math.abs(Math.cos(x*uh))),r.svg&&(c-=T-(T*L+E*z),f-=E-(T*D+E*F))):(q=R[6],ne=R[7],j=R[8],J=R[9],W=R[10],ue=R[11],c=R[12],f=R[13],d=R[14],b=yd(q,W),y=b*Fc,b&&(M=Math.cos(-b),C=Math.sin(-b),te=H*M+j*C,V=G*M+J*C,K=q*M+W*C,j=H*-C+j*M,J=G*-C+J*M,W=q*-C+W*M,ue=ne*-C+ue*M,H=te,G=V,q=K),b=yd(-z,W),_=b*Fc,b&&(M=Math.cos(-b),C=Math.sin(-b),te=L*M-j*C,V=D*M-J*C,K=z*M-W*C,ue=F*C+ue*M,L=te,D=V,z=K),b=yd(D,L),v=b*Fc,b&&(M=Math.cos(b),C=Math.sin(b),te=L*M+D*C,V=H*M+G*C,D=D*M-L*C,G=G*M-H*C,L=te,H=V),y&&Math.abs(y)+Math.abs(v)>359.9&&(y=v=0,_=180-_),m=xr(Math.sqrt(L*L+D*D+z*z)),g=xr(Math.sqrt(G*G+q*q)),b=yd(H,G),x=Math.abs(b)>2e-4?b*Fc:0,S=ue?1/(ue<0?-ue:ue):0),r.svg&&(te=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!q6(va(e,rr)),te&&e.setAttribute("transform",te))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(m*=-1,x+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,x+=x<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=d+o,r.scaleX=xr(m),r.scaleY=xr(g),r.rotation=xr(v)+a,r.rotationX=xr(y)+a,r.rotationY=xr(_)+a,r.skewX=x+a,r.skewY=w+a,r.transformPerspective=S+o,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(i[zo]=m_(u)),r.xOffset=r.yOffset=0,r.force3D=Rs.force3D,r.renderTransform=r.svg?lle:J6?eG:ale,r.uncache=0,r},m_=function(e){return(e=e.split(" "))[0]+" "+e[1]},hb=function(e,t,r){var i=Si(t);return xr(parseFloat(t)+parseFloat(Uu(e,"x",r+"px",i)))+i},ale=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,eG(e,t)},Mc="0deg",pm="0px",Ec=") ",eG=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,f=r.rotationX,d=r.skewX,m=r.skewY,g=r.scaleX,v=r.scaleY,y=r.transformPerspective,_=r.force3D,x=r.target,w=r.zOrigin,S="",T=_==="auto"&&e&&e!==1||_===!0;if(w&&(f!==Mc||c!==Mc)){var E=parseFloat(c)*uh,R=Math.sin(E),b=Math.cos(E),M;E=parseFloat(f)*uh,M=Math.cos(E),o=hb(x,o,R*M*-w),a=hb(x,a,-Math.sin(E)*-w),l=hb(x,l,b*M*-w+w)}y!==pm&&(S+="perspective("+y+Ec),(i||s)&&(S+="translate("+i+"%, "+s+"%) "),(T||o!==pm||a!==pm||l!==pm)&&(S+=l!==pm||T?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ec),u!==Mc&&(S+="rotate("+u+Ec),c!==Mc&&(S+="rotateY("+c+Ec),f!==Mc&&(S+="rotateX("+f+Ec),(d!==Mc||m!==Mc)&&(S+="skew("+d+", "+m+Ec),(g!==1||v!==1)&&(S+="scale("+g+", "+v+Ec),x.style[rr]=S||"translate(0, 0)"},lle=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,f=r.scaleX,d=r.scaleY,m=r.target,g=r.xOrigin,v=r.yOrigin,y=r.xOffset,_=r.yOffset,x=r.forceCSS,w=parseFloat(o),S=parseFloat(a),T,E,R,b,M;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=uh,u*=uh,T=Math.cos(l)*f,E=Math.sin(l)*f,R=Math.sin(l-u)*-d,b=Math.cos(l-u)*d,u&&(c*=uh,M=Math.tan(u-c),M=Math.sqrt(1+M*M),R*=M,b*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),T*=M,E*=M)),T=xr(T),E=xr(E),R=xr(R),b=xr(b)):(T=f,b=d,E=R=0),(w&&!~(o+"").indexOf("px")||S&&!~(a+"").indexOf("px"))&&(w=Uu(m,"x",o,"px"),S=Uu(m,"y",a,"px")),(g||v||y||_)&&(w=xr(w+g-(g*T+v*R)+y),S=xr(S+v-(g*E+v*b)+_)),(i||s)&&(M=m.getBBox(),w=xr(w+i/100*M.width),S=xr(S+s/100*M.height)),M="matrix("+T+","+E+","+R+","+b+","+w+","+S+")",m.setAttribute("transform",M),x&&(m.style[rr]=M)},ule=function(e,t,r,i,s){var o=360,a=ni(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Fc:1),u=l-i,c=i+u+"deg",f,d;return a&&(f=s.split("_")[1],f==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),f==="cw"&&u<0?u=(u+o*ML)%o-~~(u/o)*o:f==="ccw"&&u>0&&(u=(u-o*ML)%o-~~(u/o)*o)),e._pt=d=new us(e._pt,t,r,i,u,$ae),d.e=c,d.u="deg",e._props.push(r),d},BL=function(e,t){for(var r in t)e[r]=t[r];return e},cle=function(e,t,r){var i=BL({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,c,f,d,m,g;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[rr]=t,a=Wg(r,1),Hg(r,rr),r.setAttribute("transform",u)):(u=getComputedStyle(r)[rr],o[rr]=t,a=Wg(r,1),o[rr]=u);for(l in wl)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(m=Si(u),g=Si(c),f=m!==g?Uu(r,l,u,g):parseFloat(u),d=parseFloat(c),e._pt=new us(e._pt,a,l,f,d-f,tM),e._pt.u=g||0,e._props.push(l));BL(a,i)};ls("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});p_[e>1?"border"+n:n]=function(a,l,u,c,f){var d,m;if(arguments.length<4)return d=o.map(function(g){return Ya(a,g,u)}),m=d.join(" "),m.split(d[0]).length===5?d[0]:m;d=(c+"").split(" "),m={},o.forEach(function(g,v){return m[g]=d[v]=d[v]||d[(v-1)/2|0]}),a.init(l,m,f)}});var tG={name:"css",register:rM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,c,f,d,m,g,v,y,_,x,w,S,T,E,R,b;ST||rM(),this.styles=this.styles||K6(e),b=this.styles.props,this.tween=r;for(v in t)if(v!=="autoRound"&&(c=t[v],!(Ms[v]&&O6(v,t,r,i,e,s)))){if(m=typeof c,g=p_[v],m==="function"&&(c=c.call(r,i,e,s),m=typeof c),m==="string"&&~c.indexOf("random(")&&(c=zg(c)),g)g(this,e,v,c,r)&&(R=1);else if(v.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(v)+"").trim(),c+="",Mu.lastIndex=0,Mu.test(u)||(y=Si(u),_=Si(c)),_?y!==_&&(u=Uu(e,v,u,_)+_):y&&(c+=y),this.add(a,"setProperty",u,c,i,s,0,0,v),o.push(v),b.push(v,0,a[v]);else if(m!=="undefined"){if(l&&v in l?(u=typeof l[v]=="function"?l[v].call(r,i,e,s):l[v],ni(u)&&~u.indexOf("random(")&&(u=zg(u)),Si(u+"")||(u+=Rs.units[v]||Si(Ya(e,v))||""),(u+"").charAt(1)==="="&&(u=Ya(e,v))):u=Ya(e,v),d=parseFloat(u),x=m==="string"&&c.charAt(1)==="="&&c.substr(0,2),x&&(c=c.substr(2)),f=parseFloat(c),v in ha&&(v==="autoAlpha"&&(d===1&&Ya(e,"visibility")==="hidden"&&f&&(d=0),b.push("visibility",0,a.visibility),cu(this,a,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),v!=="scale"&&v!=="transform"&&(v=ha[v],~v.indexOf(",")&&(v=v.split(",")[0]))),w=v in wl,w){if(this.styles.save(v),S||(T=e._gsap,T.renderTransform&&!t.parseTransform||Wg(e,t.parseTransform),E=t.smoothOrigin!==!1&&T.smooth,S=this._pt=new us(this._pt,a,rr,0,1,T.renderTransform,T,0,-1),S.dep=1),v==="scale")this._pt=new us(this._pt,T,"scaleY",T.scaleY,(x?ah(T.scaleY,x+f):f)-T.scaleY||0,tM),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){b.push(zo,0,a[zo]),c=sle(c),T.svg?iM(e,c,0,E,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==T.zOrigin&&cu(this,T,"zOrigin",T.zOrigin,_),cu(this,a,v,m_(u),m_(c)));continue}else if(v==="svgOrigin"){iM(e,c,1,E,0,this);continue}else if(v in Q6){ule(this,T,v,d,x?ah(d,x+c):c);continue}else if(v==="smoothOrigin"){cu(this,T,"smooth",T.smooth,c);continue}else if(v==="force3D"){T[v]=c;continue}else if(v==="transform"){cle(this,c,e);continue}}else v in a||(v=Bh(v)||v);if(w||(f||f===0)&&(d||d===0)&&!jae.test(c)&&v in a)y=(u+"").substr((d+"").length),f||(f=0),_=Si(c)||(v in Rs.units?Rs.units[v]:y),y!==_&&(d=Uu(e,v,u,_)),this._pt=new us(this._pt,w?T:a,v,d,(x?ah(d,x+f):f)-d,!w&&(_==="px"||v==="zIndex")&&t.autoRound!==!1?Kae:tM),this._pt.u=_||0,y!==_&&_!=="%"&&(this._pt.b=u,this._pt.r=Xae);else if(v in a)ile.call(this,e,v,u,x?x+c:c);else if(v in e)this.add(e,v,u||e[v],x?x+c:c,i,s);else if(v!=="parseTransform"){hT(v,c);continue}w||(v in a?b.push(v,0,a[v]):b.push(v,1,u||e[v])),o.push(v)}}R&&V6(this)},render:function(e,t){if(t.tween._time||!bT())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Ya,aliases:ha,getSetter:function(e,t,r){var i=ha[t];return i&&i.indexOf(",")<0&&(t=i),t in wl&&t!==zo&&(e._gsap.x||Ya(e,"x"))?r&&AL===r?t==="scale"?Qae:Zae:(AL=r||{})&&(t==="scale"?qae:ele):e.style&&!cT(e.style[t])?Jae:~t.indexOf("-")?Yae:xT(e,t)},core:{_removeProperty:Hg,_getMatrix:MT}};fs.utils.checkPrefix=Bh;fs.core.getStyleSaver=K6;(function(n,e,t,r){var i=ls(n+","+e+","+t,function(s){wl[s]=1});ls(e,function(s){Rs.units[s]="deg",Q6[s]=1}),ha[i[13]]=n+","+e,ls(r,function(s){var o=s.split(":");ha[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ls("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Rs.units[n]="px"});fs.registerPlugin(tG);var E1=fs.registerPlugin(tG)||fs;E1.core.Tween;const nG=B.createContext(),fle=({children:n})=>{const[e,t]=B.useState(!1),[r,i]=B.useState(!1),[s,o]=B.useState(!1);return qe(nG.Provider,{value:{play:e,setPlay:t,end:r,setEnd:i,hasScroll:s,setHasScroll:o},children:n})},ET=()=>{const n=B.useContext(nG);if(n===void 0)throw new Error("usePlay must be used within a PlayProvider");return n},rG=n=>n.replace("#include <common>",`#include <common>
  float exponentialEasing(float x, float a) {
  
    float epsilon = 0.00001;
    float min_param_a = 0.0 + epsilon;
    float max_param_a = 1.0 - epsilon;
    a = max(min_param_a, min(max_param_a, a));
    
    if (a < 0.5){
      // emphasis
      a = 2.0*(a);
      float y = pow(x, a);
      return y;
    } else {
      // de-emphasis
      a = 2.0*(a-0.5);
      float y = pow(x, 1.0/(1.0-a));
      return y;
    }
  }`).replace("vec4 diffuseColor = vec4( diffuse, opacity );",`
float fadeDist = 350.0;
float dist = length(vViewPosition);

float fadeOpacity = smoothstep(fadeDist, 0.0, dist);
fadeOpacity = exponentialEasing(fadeOpacity, 0.93);
vec4 diffuseColor = vec4( diffuse, fadeOpacity * opacity );`),iG=n=>{n.fragmentShader=rG(n.fragmentShader)},IL=n=>{n.fragmentShader=rG(n.fragmentShader).replace("#include <output_fragment>","gl_FragColor = diffuseColor;")},dle=6;function hle(n){const{nodes:e,materials:t}=Ju("./models/airplane/model.glb"),r=B.useRef();return fi((i,s)=>{r.current.rotation.x+=s*dle}),xn("group",{...n,dispose:null,children:[qe("mesh",{geometry:e.PUSHILIN_Plane_Circle000.geometry,children:qe("meshStandardMaterial",{color:"white"})}),qe("mesh",{ref:r,geometry:e.PUSHILIN_Plane_Helix.geometry,material:t.plane,position:[1.09,.23,0],children:qe("meshStandardMaterial",{color:"white"})})]})}Ju.preload("./models/airplane/model.glb");var sG=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],ple=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],oG=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],mle=sG,gle=mle.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),sM=oG;sM=sM.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var vle=sM.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),yle=Tle,_le=sG,DL=ple,xle=oG,wle=gle,Sle=vle,Ro=999,LL=9999,pb=0,mb=1,FL=2,kL=3,OL=4,mm=5,ble=6,Ale=7,Mle=8,UL=9,Ele=10,NL=11,Cle=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function Tle(n){var e=0,t=0,r=Ro,i,s,o=[],a=[],l=1,u=0,c=0,f=!1,d=!1,m="",g;n=n||{};var v=xle,y=_le;n.version==="300 es"&&(v=Sle,y=wle);for(var _={},x={},e=0;e<v.length;e++)_[v[e]]=!0;for(var e=0;e<y.length;e++)x[y[e]]=!0;return function(te){return a=[],te!==null?S(te):T()};function w(te){te.length&&a.push({type:Cle[r],data:te,position:c,line:l,column:u})}function S(te){e=0,te.toString&&(te=te.toString()),m+=te.replace(/\r\n/g,`
`),g=m.length;for(var V;i=m[e],e<g;){switch(V=e,r){case pb:e=C();break;case mb:e=M();break;case FL:e=b();break;case kL:e=L();break;case OL:e=F();break;case NL:e=z();break;case mm:e=H();break;case LL:e=G();break;case UL:e=R();break;case Ro:e=E();break}if(V!==e)switch(m[V]){case`
`:u=0,++l;break;default:++u;break}}return t+=e,m=m.slice(e),a}function T(te){return o.length&&w(o.join("")),r=Ele,w("(eof)"),a}function E(){return o=o.length?[]:o,s==="/"&&i==="*"?(c=t+e-1,r=pb,s=i,e+1):s==="/"&&i==="/"?(c=t+e-1,r=mb,s=i,e+1):i==="#"?(r=FL,c=t+e,e):/\s/.test(i)?(r=UL,c=t+e,e):(f=/\d/.test(i),d=/[^\w_]/.test(i),c=t+e,r=f?OL:d?kL:LL,e)}function R(){return/[^\s]/g.test(i)?(w(o.join("")),r=Ro,e):(o.push(i),s=i,e+1)}function b(){return(i==="\r"||i===`
`)&&s!=="\\"?(w(o.join("")),r=Ro,e):(o.push(i),s=i,e+1)}function M(){return b()}function C(){return i==="/"&&s==="*"?(o.push(i),w(o.join("")),r=Ro,e+1):(o.push(i),s=i,e+1)}function L(){if(s==="."&&/\d/.test(i))return r=mm,e;if(s==="/"&&i==="*")return r=pb,e;if(s==="/"&&i==="/")return r=mb,e;if(i==="."&&o.length){for(;D(o););return r=mm,e}if(i===";"||i===")"||i==="("){if(o.length)for(;D(o););return w(i),r=Ro,e+1}var te=o.length===2&&i!=="=";if(/[\w_\d\s]/.test(i)||te){for(;D(o););return r=Ro,e}return o.push(i),s=i,e+1}function D(te){var V=0,K,j;do{if(K=DL.indexOf(te.slice(0,te.length+V).join("")),j=DL[K],K===-1){if(V--+te.length>0)continue;j=te.slice(0,1).join("")}return w(j),c+=j.length,o=o.slice(j.length),o.length}while(1)}function z(){return/[^a-fA-F0-9]/.test(i)?(w(o.join("")),r=Ro,e):(o.push(i),s=i,e+1)}function F(){return i==="."||/[eE]/.test(i)?(o.push(i),r=mm,s=i,e+1):i==="x"&&o.length===1&&o[0]==="0"?(r=NL,o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=Ro,e):(o.push(i),s=i,e+1)}function H(){return i==="f"&&(o.push(i),s=i,e+=1),/[eE]/.test(i)||(i==="-"||i==="+")&&/[eE]/.test(s)?(o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=Ro,e):(o.push(i),s=i,e+1)}function G(){if(/[^\d\w_]/.test(i)){var te=o.join("");return x[te]?r=Mle:_[te]?r=Ale:r=ble,w(o.join("")),r=Ro,e}return o.push(i),s=i,e+1}}var Ple=yle,Rle=Ble;function Ble(n,e){var t=Ple(e),r=[];return r=r.concat(t(n)),r=r.concat(t(null)),r}const oM=$o(Rle);var gb,zL;function Ile(){if(zL)return gb;zL=1,gb=n;function n(e){for(var t=!1,r=0,i=0;i<e.length;i++)switch(t=t||e[i].type==="keyword"&&e[i].data==="for",e[i].data){case"(":e[i].depth=t?r++:r;break;case"{":e[i].depth=t?r:r++,t=!1;break;case"}":e[i].depth=--r;break;default:e[i].depth=r}for(var i=0;i<e.length;i++){var s=e[i],o=i+1;if(!(s.type!=="ident"&&s.type!=="keyword")&&(a(),e[o].type==="ident"&&(a(),o++,e[o].data==="("))){for(;e[o]&&e[o].data!==";"&&e[o].data!=="{";)e[o++].depth++;e[o]&&e[o].data==="{"&&e[o].depth++}}return e;function a(){for(;e[o]&&(e[o].type==="whitespace"||e[o].data==="["||e[o].data==="]"||e[o].data==="integer");)o++}}return gb}var vb,GL;function Dle(){if(GL)return vb;GL=1,vb=n;function n(e){var t=[0],r=t[0],i=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var s=0;s<e.length;s++){var o=e[s],a=o.depth;a>i?t.push(++r):a<i&&t.splice(-1,1),o.scope=t[t.length-1],o.stack=t.slice(),i=o.depth}return e}return vb}var yb,HL;function Lle(){if(HL)return yb;HL=1,yb=n;function n(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.property=!1,r.type==="ident"){for(var i=t;e[--i]&&e[i].type==="whitespace";);e[i]&&e[i].type==="operator"&&e[i].data==="."&&(r.property=!0)}}return e}return yb}var _b,VL;function Fle(){return VL||(VL=1,_b={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}),_b}var xb,WL;function kle(){return WL||(WL=1,xb={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}),xb}var wb,jL;function Ole(){if(jL)return wb;jL=1;var n=Fle(),e=kle();wb=t;function t(r){for(var i=0,s=0;s<r.length;s++){var o=r[s],a=o.type;o.assignment=!1,o.declaration=!1,!(a!=="ident"&&a!=="builtin")&&(i=s+1,c(),r[i].type==="operator"&&n[r[i].data]&&(o.assignment=!0))}for(var s=0;s<r.length;s++){var l=r[s],a=l.type,u=l.data;if(l.declaration=!1,a==="keyword"){if(e[u])continue}else if(a!=="ident")continue;if(i=s+1,f(),r[i].type==="ident"){if(r[i++].declaration=!0,f(),r[i].data==="("){for(i++,c();r[i]&&r[i].data!==")"&&!(r[i].type!=="keyword"&&r[i].type!=="ident");)i++,c(),r[i].type==="ident"&&(r[i++].declaration=!0,c(),f(),c(),r[i].data===","&&(i++,c()));s=i;continue}for(;r[i]&&r[i].data!==";";)r[i].data===","?(i++,c(),(r[i].declaration=r[i].type==="ident")&&i++):(c(),d(),c(),i++);s=i}}for(var s=0;s<r.length;s++){var o=r[s];if(o.type==="keyword"&&o.data==="struct"&&(i=s+1,c(),r[i].type==="ident"&&(i++,c(),r[i++].data==="{"))){for(c();r[i].type==="ident"||r[i].type==="keyword";){do i++,c(),r[i].structMember=!0,r[i].declaration=!1,i++,f();while(r[i].data===",");r[i].data===";"&&i++,c()}if(i++,c(),r[i].type==="ident")for(r[i].declaration=!0,c();r[++i].data===",";)c(),i++,c(),r[i].type==="ident"&&(r[i].declaration=!0),c()}}return r;function c(m){for(;r[i]&&r[i].type==="whitespace";)i++}function f(){for(;r[i]&&(r[i].type==="integer"||r[i].data==="["||r[i].data==="]"||r[i].type==="whitespace");)i++}function d(){if(r[i]&&r[i].data==="("){var m=0;do{if(r[i].data===";")break;r[i].data==="("&&m++,r[i].data===")"&&m--}while(m&&r[++i])}}}return wb}var Ule=Nle;function Nle(n,e){Ile()(n),Dle()(n),Lle()(n),Ole()(n);for(var t=Gle(n),r=e||zle(),i={},s=0;s<n.length;s++){var o=n[s],a=o.stack,l=o.data;if(o.descoped=!1,o.type==="ident"&&!o.property&&!o.structMember){for(var u=!1,c=a.length-1;c>=0;c--){var f=t[a[c]];if(f&&f[l]){if(u=!0,c)break;o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data}}u||(o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data)}}return n}function zle(){var n=0;return function(t){return t+"_"+(n++).toString(36)}}function Gle(n){for(var e={},t=0;t<n.length;t++){var r=n[t];r.declaration&&(e[r.scope]=e[r.scope]||{},e[r.scope][r.data]=r)}return e}const $L=$o(Ule);var Hle=Vle;function Vle(n){for(var e=[],t=0;t<n.length;t++)n[t].type!=="eof"&&e.push(n[t].data);return e.join("")}const Zm=$o(Hle);var Wle=jle;function jle(n){var e=null,t=null,r=0,i=0,s=0,o=0,a=0,l=[],u,c,f;for(u=0,c;u<n.length;u++)if(f=n[u],f.data==="{"){if(r&&r++||(c=m(u,Yl(")"),Yl()),c<0)||(o=c,c=m(c,Yl("("),Yl(")")),c<0)||(a=c,c=m(c,gm),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,gm),c<0))continue;r=1,i=u,e=n[c].data,s=c;var d=m(c,gm);switch(n[d]&&n[d].data){case"lowp":case"highp":case"mediump":s=d}}else if(r&&f.data==="}"){if(--r)continue;l.push({name:t,type:e,body:[i+1,u],args:[a,o+1],outer:[s,u+1]})}for(u=0;u<n.length;u++)if(f=n[u],f.data===";"){if(c=m(u,Yl(")"),Yl()),c<0||(o=c,c=m(c,Yl("("),Yl(")")),c<0)||(a=c,c=m(c,gm),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,gm),c<0)||n[c].type==="operator"||n[c].data==="return")continue;e=n[c].data,l.push({name:t,type:e,body:!1,args:[a,o+1],outer:[c,u+1]})}return l.sort(function(g,v){return g.outer[0]-v.outer[0]});function m(g,v,y){for(var _=g-1;_>=0;_--){if(v(n[_]))return _;if(y&&y(n[_]))return-1}return-1}}function Yl(n){return function(e){return e.type==="operator"&&(!n||e.data===n)}}function gm(n){return n.type!=="whitespace"}const aM=$o(Wle);function Gy(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aG={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var f=typeof Gy=="function"&&Gy;if(!c&&f)return f(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},r[u][0].call(c.exports,function(d){var m=r[u][1][d];return o(m||d)},c,c.exports,t,r,i,s)}return i[u].exports}for(var a=typeof Gy=="function"&&Gy,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){var g=t("crypto");function v(E,R){R=x(E,R);var b;return(b=R.algorithm!=="passthrough"?g.createHash(R.algorithm):new T).write===void 0&&(b.write=b.update,b.end=b.update),S(R,b).dispatch(E),b.update||b.end(""),b.digest?b.digest(R.encoding==="buffer"?void 0:R.encoding):(E=b.read(),R.encoding!=="buffer"?E.toString(R.encoding):E)}(i=r.exports=v).sha1=function(E){return v(E)},i.keys=function(E){return v(E,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(E){return v(E,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(E){return v(E,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var y=g.getHashes?g.getHashes().slice():["sha1","md5"],_=(y.push("passthrough"),["buffer","hex","binary","base64"]);function x(E,R){var b={};if(b.algorithm=(R=R||{}).algorithm||"sha1",b.encoding=R.encoding||"hex",b.excludeValues=!!R.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=R.ignoreUnknown===!0,b.respectType=R.respectType!==!1,b.respectFunctionNames=R.respectFunctionNames!==!1,b.respectFunctionProperties=R.respectFunctionProperties!==!1,b.unorderedArrays=R.unorderedArrays===!0,b.unorderedSets=R.unorderedSets!==!1,b.unorderedObjects=R.unorderedObjects!==!1,b.replacer=R.replacer||void 0,b.excludeKeys=R.excludeKeys||void 0,E===void 0)throw new Error("Object argument required.");for(var M=0;M<y.length;++M)y[M].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=y[M]);if(y.indexOf(b.algorithm)===-1)throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+y.join(", "));if(_.indexOf(b.encoding)===-1&&b.algorithm!=="passthrough")throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+_.join(", "));return b}function w(E){if(typeof E=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(E))!=null}function S(E,R,b){b=b||[];function M(C){return R.update?R.update(C,"utf8"):R.write(C,"utf8")}return{dispatch:function(C){return this["_"+((C=E.replacer?E.replacer(C):C)===null?"null":typeof C)](C)},_object:function(C){var L,D=Object.prototype.toString.call(C),z=/\[object (.*)\]/i.exec(D);if(z=(z=z?z[1]:"unknown:["+D+"]").toLowerCase(),0<=(D=b.indexOf(C)))return this.dispatch("[CIRCULAR:"+D+"]");if(b.push(C),a!==void 0&&a.isBuffer&&a.isBuffer(C))return M("buffer:"),M(C);if(z==="object"||z==="function"||z==="asyncfunction")return D=Object.keys(C),E.unorderedObjects&&(D=D.sort()),E.respectType===!1||w(C)||D.splice(0,0,"prototype","__proto__","constructor"),E.excludeKeys&&(D=D.filter(function(F){return!E.excludeKeys(F)})),M("object:"+D.length+":"),L=this,D.forEach(function(F){L.dispatch(F),M(":"),E.excludeValues||L.dispatch(C[F]),M(",")});if(!this["_"+z]){if(E.ignoreUnknown)return M("["+z+"]");throw new Error('Unknown object type "'+z+'"')}this["_"+z](C)},_array:function(C,F){F=F!==void 0?F:E.unorderedArrays!==!1;var D=this;if(M("array:"+C.length+":"),!F||C.length<=1)return C.forEach(function(H){return D.dispatch(H)});var z=[],F=C.map(function(H){var G=new T,te=b.slice();return S(E,G,te).dispatch(H),z=z.concat(te.slice(b.length)),G.read().toString()});return b=b.concat(z),F.sort(),this._array(F,!1)},_date:function(C){return M("date:"+C.toJSON())},_symbol:function(C){return M("symbol:"+C.toString())},_error:function(C){return M("error:"+C.toString())},_boolean:function(C){return M("bool:"+C.toString())},_string:function(C){M("string:"+C.length+":"),M(C.toString())},_function:function(C){M("fn:"),w(C)?this.dispatch("[native]"):this.dispatch(C.toString()),E.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(C.name)),E.respectFunctionProperties&&this._object(C)},_number:function(C){return M("number:"+C.toString())},_xml:function(C){return M("xml:"+C.toString())},_null:function(){return M("Null")},_undefined:function(){return M("Undefined")},_regexp:function(C){return M("regex:"+C.toString())},_uint8array:function(C){return M("uint8array:"),this.dispatch(Array.prototype.slice.call(C))},_uint8clampedarray:function(C){return M("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(C))},_int8array:function(C){return M("int8array:"),this.dispatch(Array.prototype.slice.call(C))},_uint16array:function(C){return M("uint16array:"),this.dispatch(Array.prototype.slice.call(C))},_int16array:function(C){return M("int16array:"),this.dispatch(Array.prototype.slice.call(C))},_uint32array:function(C){return M("uint32array:"),this.dispatch(Array.prototype.slice.call(C))},_int32array:function(C){return M("int32array:"),this.dispatch(Array.prototype.slice.call(C))},_float32array:function(C){return M("float32array:"),this.dispatch(Array.prototype.slice.call(C))},_float64array:function(C){return M("float64array:"),this.dispatch(Array.prototype.slice.call(C))},_arraybuffer:function(C){return M("arraybuffer:"),this.dispatch(new Uint8Array(C))},_url:function(C){return M("url:"+C.toString())},_map:function(C){return M("map:"),C=Array.from(C),this._array(C,E.unorderedSets!==!1)},_set:function(C){return M("set:"),C=Array.from(C),this._array(C,E.unorderedSets!==!1)},_file:function(C){return M("file:"),this.dispatch([C.name,C.size,C.type,C.lastModfied])},_blob:function(){if(E.ignoreUnknown)return M("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return M("domwindow")},_bigint:function(C){return M("bigint:"+C.toString())},_process:function(){return M("process")},_timer:function(){return M("timer")},_pipe:function(){return M("pipe")},_tcp:function(){return M("tcp")},_udp:function(){return M("udp")},_tty:function(){return M("tty")},_statwatcher:function(){return M("statwatcher")},_securecontext:function(){return M("securecontext")},_connection:function(){return M("connection")},_zlib:function(){return M("zlib")},_context:function(){return M("context")},_nodescript:function(){return M("nodescript")},_httpparser:function(){return M("httpparser")},_dataview:function(){return M("dataview")},_signal:function(){return M("signal")},_fsevent:function(){return M("fsevent")},_tlswrap:function(){return M("tlswrap")}}}function T(){return{buf:"",write:function(E){this.buf+=E},end:function(E){this.buf+=E},read:function(){return this.buf}}}i.writeToStream=function(E,R,b){return b===void 0&&(b=R,R={}),S(R=x(E,R),b).dispatch(E)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){(function(g){var v=typeof Uint8Array<"u"?Uint8Array:Array,y="+".charCodeAt(0),_="/".charCodeAt(0),x="0".charCodeAt(0),w="a".charCodeAt(0),S="A".charCodeAt(0),T="-".charCodeAt(0),E="_".charCodeAt(0);function R(b){return b=b.charCodeAt(0),b===y||b===T?62:b===_||b===E?63:b<x?-1:b<x+10?b-x+26+26:b<S+26?b-S:b<w+26?b-w+26:void 0}g.toByteArray=function(b){var M,C;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var L=b.length,L=b.charAt(L-2)==="="?2:b.charAt(L-1)==="="?1:0,D=new v(3*b.length/4-L),z=0<L?b.length-4:b.length,F=0;function H(G){D[F++]=G}for(M=0;M<z;M+=4,0)H((16711680&(C=R(b.charAt(M))<<18|R(b.charAt(M+1))<<12|R(b.charAt(M+2))<<6|R(b.charAt(M+3))))>>16),H((65280&C)>>8),H(255&C);return L==2?H(255&(C=R(b.charAt(M))<<2|R(b.charAt(M+1))>>4)):L==1&&(H((C=R(b.charAt(M))<<10|R(b.charAt(M+1))<<4|R(b.charAt(M+2))>>2)>>8&255),H(255&C)),D},g.fromByteArray=function(b){var M,C,L,D,z=b.length%3,F="";function H(G){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(G)}for(M=0,L=b.length-z;M<L;M+=3)C=(b[M]<<16)+(b[M+1]<<8)+b[M+2],F+=H((D=C)>>18&63)+H(D>>12&63)+H(D>>6&63)+H(63&D);switch(z){case 1:F=(F+=H((C=b[b.length-1])>>2))+H(C<<4&63)+"==";break;case 2:F=(F=(F+=H((C=(b[b.length-2]<<8)+b[b.length-1])>>10))+H(C>>4&63))+H(C<<2&63)+"="}return F}})(i===void 0?this.base64js={}:i)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,i){(function(s,o,y,l,u,c,f,d,m){var g=t("base64-js"),v=t("ieee754");function y(N,X,Z){if(!(this instanceof y))return new y(N,X,Z);var ee,ie,ge,Ce,Te=typeof N;if(X==="base64"&&Te=="string")for(N=(Ce=N).trim?Ce.trim():Ce.replace(/^\s+|\s+$/g,"");N.length%4!=0;)N+="=";if(Te=="number")ee=V(N);else if(Te=="string")ee=y.byteLength(N,X);else{if(Te!="object")throw new Error("First argument needs to be a number, array or string.");ee=V(N.length)}if(y._useTypedArrays?ie=y._augment(new Uint8Array(ee)):((ie=this).length=ee,ie._isBuffer=!0),y._useTypedArrays&&typeof N.byteLength=="number")ie._set(N);else if(K(Ce=N)||y.isBuffer(Ce)||Ce&&typeof Ce=="object"&&typeof Ce.length=="number")for(ge=0;ge<ee;ge++)y.isBuffer(N)?ie[ge]=N.readUInt8(ge):ie[ge]=N[ge];else if(Te=="string")ie.write(N,0,X);else if(Te=="number"&&!y._useTypedArrays&&!Z)for(ge=0;ge<ee;ge++)ie[ge]=0;return ie}function _(N,X,Z,ee){return y._charsWritten=ne(function(ie){for(var ge=[],Ce=0;Ce<ie.length;Ce++)ge.push(255&ie.charCodeAt(Ce));return ge}(X),N,Z,ee)}function x(N,X,Z,ee){return y._charsWritten=ne(function(ie){for(var ge,Ce,Te=[],Ve=0;Ve<ie.length;Ve++)Ce=ie.charCodeAt(Ve),ge=Ce>>8,Ce=Ce%256,Te.push(Ce),Te.push(ge);return Te}(X),N,Z,ee)}function w(N,X,Z){var ee="";Z=Math.min(N.length,Z);for(var ie=X;ie<Z;ie++)ee+=String.fromCharCode(N[ie]);return ee}function S(N,X,Z,ge){ge||(se(typeof Z=="boolean","missing or invalid endian"),se(X!=null,"missing offset"),se(X+1<N.length,"Trying to read beyond buffer length"));var ie,ge=N.length;if(!(ge<=X))return Z?(ie=N[X],X+1<ge&&(ie|=N[X+1]<<8)):(ie=N[X]<<8,X+1<ge&&(ie|=N[X+1])),ie}function T(N,X,Z,ge){ge||(se(typeof Z=="boolean","missing or invalid endian"),se(X!=null,"missing offset"),se(X+3<N.length,"Trying to read beyond buffer length"));var ie,ge=N.length;if(!(ge<=X))return Z?(X+2<ge&&(ie=N[X+2]<<16),X+1<ge&&(ie|=N[X+1]<<8),ie|=N[X],X+3<ge&&(ie+=N[X+3]<<24>>>0)):(X+1<ge&&(ie=N[X+1]<<16),X+2<ge&&(ie|=N[X+2]<<8),X+3<ge&&(ie|=N[X+3]),ie+=N[X]<<24>>>0),ie}function E(N,X,Z,ee){if(ee||(se(typeof Z=="boolean","missing or invalid endian"),se(X!=null,"missing offset"),se(X+1<N.length,"Trying to read beyond buffer length")),!(N.length<=X))return ee=S(N,X,Z,!0),32768&ee?-1*(65535-ee+1):ee}function R(N,X,Z,ee){if(ee||(se(typeof Z=="boolean","missing or invalid endian"),se(X!=null,"missing offset"),se(X+3<N.length,"Trying to read beyond buffer length")),!(N.length<=X))return ee=T(N,X,Z,!0),2147483648&ee?-1*(4294967295-ee+1):ee}function b(N,X,Z,ee){return ee||(se(typeof Z=="boolean","missing or invalid endian"),se(X+3<N.length,"Trying to read beyond buffer length")),v.read(N,X,Z,23,4)}function M(N,X,Z,ee){return ee||(se(typeof Z=="boolean","missing or invalid endian"),se(X+7<N.length,"Trying to read beyond buffer length")),v.read(N,X,Z,52,8)}function C(N,X,Z,ee,ie){if(ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+1<N.length,"trying to write beyond buffer length"),q(X,65535)),ie=N.length,!(ie<=Z))for(var ge=0,Ce=Math.min(ie-Z,2);ge<Ce;ge++)N[Z+ge]=(X&255<<8*(ee?ge:1-ge))>>>8*(ee?ge:1-ge)}function L(N,X,Z,ee,ie){if(ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+3<N.length,"trying to write beyond buffer length"),q(X,4294967295)),ie=N.length,!(ie<=Z))for(var ge=0,Ce=Math.min(ie-Z,4);ge<Ce;ge++)N[Z+ge]=X>>>8*(ee?ge:3-ge)&255}function D(N,X,Z,ee,ie){ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+1<N.length,"Trying to write beyond buffer length"),pe(X,32767,-32768)),N.length<=Z||C(N,0<=X?X:65535+X+1,Z,ee,ie)}function z(N,X,Z,ee,ie){ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+3<N.length,"Trying to write beyond buffer length"),pe(X,2147483647,-2147483648)),N.length<=Z||L(N,0<=X?X:4294967295+X+1,Z,ee,ie)}function F(N,X,Z,ee,ie){ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+3<N.length,"Trying to write beyond buffer length"),me(X,34028234663852886e22,-34028234663852886e22)),N.length<=Z||v.write(N,X,Z,ee,23,4)}function H(N,X,Z,ee,ie){ie||(se(X!=null,"missing value"),se(typeof ee=="boolean","missing or invalid endian"),se(Z!=null,"missing offset"),se(Z+7<N.length,"Trying to write beyond buffer length"),me(X,17976931348623157e292,-17976931348623157e292)),N.length<=Z||v.write(N,X,Z,ee,52,8)}i.Buffer=y,i.SlowBuffer=y,i.INSPECT_MAX_BYTES=50,y.poolSize=8192,y._useTypedArrays=function(){try{var N=new ArrayBuffer(0),X=new Uint8Array(N);return X.foo=function(){return 42},X.foo()===42&&typeof X.subarray=="function"}catch{return!1}}(),y.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.isBuffer=function(N){return!(N==null||!N._isBuffer)},y.byteLength=function(N,X){var Z;switch(N+="",X||"utf8"){case"hex":Z=N.length/2;break;case"utf8":case"utf-8":Z=J(N).length;break;case"ascii":case"binary":case"raw":Z=N.length;break;case"base64":Z=W(N).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Z=2*N.length;break;default:throw new Error("Unknown encoding")}return Z},y.concat=function(N,X){if(se(K(N),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),N.length===0)return new y(0);if(N.length===1)return N[0];if(typeof X!="number")for(ie=X=0;ie<N.length;ie++)X+=N[ie].length;for(var Z=new y(X),ee=0,ie=0;ie<N.length;ie++){var ge=N[ie];ge.copy(Z,ee),ee+=ge.length}return Z},y.prototype.write=function(N,X,Z,ee){isFinite(X)?isFinite(Z)||(ee=Z,Z=void 0):(Ve=ee,ee=X,X=Z,Z=Ve),X=Number(X)||0;var ie,ge,Ce,Te,Ve=this.length-X;switch((!Z||Ve<(Z=Number(Z)))&&(Z=Ve),ee=String(ee||"utf8").toLowerCase()){case"hex":ie=function(Re,ze,je,be){je=Number(je)||0;var Q=Re.length-je;(!be||Q<(be=Number(be)))&&(be=Q),se((Q=ze.length)%2==0,"Invalid hex string"),Q/2<be&&(be=Q/2);for(var O=0;O<be;O++){var fe=parseInt(ze.substr(2*O,2),16);se(!isNaN(fe),"Invalid hex string"),Re[je+O]=fe}return y._charsWritten=2*O,O}(this,N,X,Z);break;case"utf8":case"utf-8":ge=this,Ce=X,Te=Z,ie=y._charsWritten=ne(J(N),ge,Ce,Te);break;case"ascii":case"binary":ie=_(this,N,X,Z);break;case"base64":ge=this,Ce=X,Te=Z,ie=y._charsWritten=ne(W(N),ge,Ce,Te);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=x(this,N,X,Z);break;default:throw new Error("Unknown encoding")}return ie},y.prototype.toString=function(N,X,Z){var ee,ie,ge,Ce,Te=this;if(N=String(N||"utf8").toLowerCase(),X=Number(X)||0,(Z=Z!==void 0?Number(Z):Te.length)===X)return"";switch(N){case"hex":ee=function(Ve,Re,ze){var je=Ve.length;(!Re||Re<0)&&(Re=0),(!ze||ze<0||je<ze)&&(ze=je);for(var be="",Q=Re;Q<ze;Q++)be+=j(Ve[Q]);return be}(Te,X,Z);break;case"utf8":case"utf-8":ee=function(Ve,Re,ze){var je="",be="";ze=Math.min(Ve.length,ze);for(var Q=Re;Q<ze;Q++)Ve[Q]<=127?(je+=ue(be)+String.fromCharCode(Ve[Q]),be=""):be+="%"+Ve[Q].toString(16);return je+ue(be)}(Te,X,Z);break;case"ascii":case"binary":ee=w(Te,X,Z);break;case"base64":ie=Te,Ce=Z,ee=(ge=X)===0&&Ce===ie.length?g.fromByteArray(ie):g.fromByteArray(ie.slice(ge,Ce));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ee=function(Ve,Re,ze){for(var je=Ve.slice(Re,ze),be="",Q=0;Q<je.length;Q+=2)be+=String.fromCharCode(je[Q]+256*je[Q+1]);return be}(Te,X,Z);break;default:throw new Error("Unknown encoding")}return ee},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},y.prototype.copy=function(N,X,Z,ee){if(X=X||0,(ee=ee||ee===0?ee:this.length)!==(Z=Z||0)&&N.length!==0&&this.length!==0){se(Z<=ee,"sourceEnd < sourceStart"),se(0<=X&&X<N.length,"targetStart out of bounds"),se(0<=Z&&Z<this.length,"sourceStart out of bounds"),se(0<=ee&&ee<=this.length,"sourceEnd out of bounds"),ee>this.length&&(ee=this.length);var ie=(ee=N.length-X<ee-Z?N.length-X+Z:ee)-Z;if(ie<100||!y._useTypedArrays)for(var ge=0;ge<ie;ge++)N[ge+X]=this[ge+Z];else N._set(this.subarray(Z,Z+ie),X)}},y.prototype.slice=function(N,X){var Z=this.length;if(N=te(N,Z,0),X=te(X,Z,Z),y._useTypedArrays)return y._augment(this.subarray(N,X));for(var ee=X-N,ie=new y(ee,void 0,!0),ge=0;ge<ee;ge++)ie[ge]=this[ge+N];return ie},y.prototype.get=function(N){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(N)},y.prototype.set=function(N,X){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(N,X)},y.prototype.readUInt8=function(N,X){if(X||(se(N!=null,"missing offset"),se(N<this.length,"Trying to read beyond buffer length")),!(N>=this.length))return this[N]},y.prototype.readUInt16LE=function(N,X){return S(this,N,!0,X)},y.prototype.readUInt16BE=function(N,X){return S(this,N,!1,X)},y.prototype.readUInt32LE=function(N,X){return T(this,N,!0,X)},y.prototype.readUInt32BE=function(N,X){return T(this,N,!1,X)},y.prototype.readInt8=function(N,X){if(X||(se(N!=null,"missing offset"),se(N<this.length,"Trying to read beyond buffer length")),!(N>=this.length))return 128&this[N]?-1*(255-this[N]+1):this[N]},y.prototype.readInt16LE=function(N,X){return E(this,N,!0,X)},y.prototype.readInt16BE=function(N,X){return E(this,N,!1,X)},y.prototype.readInt32LE=function(N,X){return R(this,N,!0,X)},y.prototype.readInt32BE=function(N,X){return R(this,N,!1,X)},y.prototype.readFloatLE=function(N,X){return b(this,N,!0,X)},y.prototype.readFloatBE=function(N,X){return b(this,N,!1,X)},y.prototype.readDoubleLE=function(N,X){return M(this,N,!0,X)},y.prototype.readDoubleBE=function(N,X){return M(this,N,!1,X)},y.prototype.writeUInt8=function(N,X,Z){Z||(se(N!=null,"missing value"),se(X!=null,"missing offset"),se(X<this.length,"trying to write beyond buffer length"),q(N,255)),X>=this.length||(this[X]=N)},y.prototype.writeUInt16LE=function(N,X,Z){C(this,N,X,!0,Z)},y.prototype.writeUInt16BE=function(N,X,Z){C(this,N,X,!1,Z)},y.prototype.writeUInt32LE=function(N,X,Z){L(this,N,X,!0,Z)},y.prototype.writeUInt32BE=function(N,X,Z){L(this,N,X,!1,Z)},y.prototype.writeInt8=function(N,X,Z){Z||(se(N!=null,"missing value"),se(X!=null,"missing offset"),se(X<this.length,"Trying to write beyond buffer length"),pe(N,127,-128)),X>=this.length||(0<=N?this.writeUInt8(N,X,Z):this.writeUInt8(255+N+1,X,Z))},y.prototype.writeInt16LE=function(N,X,Z){D(this,N,X,!0,Z)},y.prototype.writeInt16BE=function(N,X,Z){D(this,N,X,!1,Z)},y.prototype.writeInt32LE=function(N,X,Z){z(this,N,X,!0,Z)},y.prototype.writeInt32BE=function(N,X,Z){z(this,N,X,!1,Z)},y.prototype.writeFloatLE=function(N,X,Z){F(this,N,X,!0,Z)},y.prototype.writeFloatBE=function(N,X,Z){F(this,N,X,!1,Z)},y.prototype.writeDoubleLE=function(N,X,Z){H(this,N,X,!0,Z)},y.prototype.writeDoubleBE=function(N,X,Z){H(this,N,X,!1,Z)},y.prototype.fill=function(N,X,Z){if(X=X||0,Z=Z||this.length,se(typeof(N=typeof(N=N||0)=="string"?N.charCodeAt(0):N)=="number"&&!isNaN(N),"value is not a number"),se(X<=Z,"end < start"),Z!==X&&this.length!==0){se(0<=X&&X<this.length,"start out of bounds"),se(0<=Z&&Z<=this.length,"end out of bounds");for(var ee=X;ee<Z;ee++)this[ee]=N}},y.prototype.inspect=function(){for(var N=[],X=this.length,Z=0;Z<X;Z++)if(N[Z]=j(this[Z]),Z===i.INSPECT_MAX_BYTES){N[Z+1]="...";break}return"<Buffer "+N.join(" ")+">"},y.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(y._useTypedArrays)return new y(this).buffer;for(var N=new Uint8Array(this.length),X=0,Z=N.length;X<Z;X+=1)N[X]=this[X];return N.buffer};var G=y.prototype;function te(N,X,Z){return typeof N!="number"?Z:X<=(N=~~N)?X:0<=N||0<=(N+=X)?N:0}function V(N){return(N=~~Math.ceil(+N))<0?0:N}function K(N){return(Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"})(N)}function j(N){return N<16?"0"+N.toString(16):N.toString(16)}function J(N){for(var X=[],Z=0;Z<N.length;Z++){var ee=N.charCodeAt(Z);if(ee<=127)X.push(N.charCodeAt(Z));else for(var ie=Z,ge=(55296<=ee&&ee<=57343&&Z++,encodeURIComponent(N.slice(ie,Z+1)).substr(1).split("%")),Ce=0;Ce<ge.length;Ce++)X.push(parseInt(ge[Ce],16))}return X}function W(N){return g.toByteArray(N)}function ne(N,X,Z,ee){for(var ie=0;ie<ee&&!(ie+Z>=X.length||ie>=N.length);ie++)X[ie+Z]=N[ie];return ie}function ue(N){try{return decodeURIComponent(N)}catch{return String.fromCharCode(65533)}}function q(N,X){se(typeof N=="number","cannot write a non-number as a number"),se(0<=N,"specified a negative value for writing an unsigned value"),se(N<=X,"value is larger than maximum value for type"),se(Math.floor(N)===N,"value has a fractional component")}function pe(N,X,Z){se(typeof N=="number","cannot write a non-number as a number"),se(N<=X,"value larger than maximum allowed value"),se(Z<=N,"value smaller than minimum allowed value"),se(Math.floor(N)===N,"value has a fractional component")}function me(N,X,Z){se(typeof N=="number","cannot write a non-number as a number"),se(N<=X,"value larger than maximum allowed value"),se(Z<=N,"value smaller than minimum allowed value")}function se(N,X){if(!N)throw new Error(X||"Failed assertion")}y._augment=function(N){return N._isBuffer=!0,N._get=N.get,N._set=N.set,N.get=G.get,N.set=G.set,N.write=G.write,N.toString=G.toString,N.toLocaleString=G.toString,N.toJSON=G.toJSON,N.copy=G.copy,N.slice=G.slice,N.readUInt8=G.readUInt8,N.readUInt16LE=G.readUInt16LE,N.readUInt16BE=G.readUInt16BE,N.readUInt32LE=G.readUInt32LE,N.readUInt32BE=G.readUInt32BE,N.readInt8=G.readInt8,N.readInt16LE=G.readInt16LE,N.readInt16BE=G.readInt16BE,N.readInt32LE=G.readInt32LE,N.readInt32BE=G.readInt32BE,N.readFloatLE=G.readFloatLE,N.readFloatBE=G.readFloatBE,N.readDoubleLE=G.readDoubleLE,N.readDoubleBE=G.readDoubleBE,N.writeUInt8=G.writeUInt8,N.writeUInt16LE=G.writeUInt16LE,N.writeUInt16BE=G.writeUInt16BE,N.writeUInt32LE=G.writeUInt32LE,N.writeUInt32BE=G.writeUInt32BE,N.writeInt8=G.writeInt8,N.writeInt16LE=G.writeInt16LE,N.writeInt16BE=G.writeInt16BE,N.writeInt32LE=G.writeInt32LE,N.writeInt32BE=G.writeInt32BE,N.writeFloatLE=G.writeFloatLE,N.writeFloatBE=G.writeFloatBE,N.writeDoubleLE=G.writeDoubleLE,N.writeDoubleBE=G.writeDoubleBE,N.fill=G.fill,N.inspect=G.inspect,N.toArrayBuffer=G.toArrayBuffer,N}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,i){(function(s,o,g,l,u,c,f,d,m){var g=t("buffer").Buffer,v=4,y=new g(v);y.fill(0),r.exports={hash:function(_,x,w,S){for(var T=x(function(C,L){C.length%v!=0&&(D=C.length+(v-C.length%v),C=g.concat([C,y],D));for(var D,z=[],F=L?C.readInt32BE:C.readInt32LE,H=0;H<C.length;H+=v)z.push(F.call(C,H));return z}(_=g.isBuffer(_)?_:new g(_),S),8*_.length),x=S,E=new g(w),R=x?E.writeInt32BE:E.writeInt32LE,b=0;b<T.length;b++)R.call(E,T[b],4*b,!0);return E}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,i){(function(s,o,g,l,u,c,f,d,m){var g=t("buffer").Buffer,v=t("./sha"),y=t("./sha256"),_=t("./rng"),x={sha1:v,sha256:y,md5:t("./md5")},w=64,S=new g(w);function T(C,L){var D=x[C=C||"sha1"],z=[];return D||E("algorithm:",C,"is not yet supported"),{update:function(F){return g.isBuffer(F)||(F=new g(F)),z.push(F),F.length,this},digest:function(F){var H=g.concat(z),H=L?function(G,te,V){g.isBuffer(te)||(te=new g(te)),g.isBuffer(V)||(V=new g(V)),te.length>w?te=G(te):te.length<w&&(te=g.concat([te,S],w));for(var K=new g(w),j=new g(w),J=0;J<w;J++)K[J]=54^te[J],j[J]=92^te[J];return V=G(g.concat([K,V])),G(g.concat([j,V]))}(D,L,H):D(H);return z=null,F?H.toString(F):H}}}function E(){var C=[].slice.call(arguments).join(" ");throw new Error([C,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}S.fill(0),i.createHash=function(C){return T(C)},i.createHmac=T,i.randomBytes=function(C,L){if(!L||!L.call)return new g(_(C));try{L.call(this,void 0,new g(_(C)))}catch(D){L(D)}};var R,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],M=function(C){i[C]=function(){E("sorry,",C,"is not implemented yet")}};for(R in b)M(b[R])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){var g=t("./helpers");function v(E,R){E[R>>5]|=128<<R%32,E[14+(R+64>>>9<<4)]=R;for(var b=1732584193,M=-271733879,C=-1732584194,L=271733878,D=0;D<E.length;D+=16){var z=b,F=M,H=C,G=L,b=_(b,M,C,L,E[D+0],7,-680876936),L=_(L,b,M,C,E[D+1],12,-389564586),C=_(C,L,b,M,E[D+2],17,606105819),M=_(M,C,L,b,E[D+3],22,-1044525330);b=_(b,M,C,L,E[D+4],7,-176418897),L=_(L,b,M,C,E[D+5],12,1200080426),C=_(C,L,b,M,E[D+6],17,-1473231341),M=_(M,C,L,b,E[D+7],22,-45705983),b=_(b,M,C,L,E[D+8],7,1770035416),L=_(L,b,M,C,E[D+9],12,-1958414417),C=_(C,L,b,M,E[D+10],17,-42063),M=_(M,C,L,b,E[D+11],22,-1990404162),b=_(b,M,C,L,E[D+12],7,1804603682),L=_(L,b,M,C,E[D+13],12,-40341101),C=_(C,L,b,M,E[D+14],17,-1502002290),b=x(b,M=_(M,C,L,b,E[D+15],22,1236535329),C,L,E[D+1],5,-165796510),L=x(L,b,M,C,E[D+6],9,-1069501632),C=x(C,L,b,M,E[D+11],14,643717713),M=x(M,C,L,b,E[D+0],20,-373897302),b=x(b,M,C,L,E[D+5],5,-701558691),L=x(L,b,M,C,E[D+10],9,38016083),C=x(C,L,b,M,E[D+15],14,-660478335),M=x(M,C,L,b,E[D+4],20,-405537848),b=x(b,M,C,L,E[D+9],5,568446438),L=x(L,b,M,C,E[D+14],9,-1019803690),C=x(C,L,b,M,E[D+3],14,-187363961),M=x(M,C,L,b,E[D+8],20,1163531501),b=x(b,M,C,L,E[D+13],5,-1444681467),L=x(L,b,M,C,E[D+2],9,-51403784),C=x(C,L,b,M,E[D+7],14,1735328473),b=w(b,M=x(M,C,L,b,E[D+12],20,-1926607734),C,L,E[D+5],4,-378558),L=w(L,b,M,C,E[D+8],11,-2022574463),C=w(C,L,b,M,E[D+11],16,1839030562),M=w(M,C,L,b,E[D+14],23,-35309556),b=w(b,M,C,L,E[D+1],4,-1530992060),L=w(L,b,M,C,E[D+4],11,1272893353),C=w(C,L,b,M,E[D+7],16,-155497632),M=w(M,C,L,b,E[D+10],23,-1094730640),b=w(b,M,C,L,E[D+13],4,681279174),L=w(L,b,M,C,E[D+0],11,-358537222),C=w(C,L,b,M,E[D+3],16,-722521979),M=w(M,C,L,b,E[D+6],23,76029189),b=w(b,M,C,L,E[D+9],4,-640364487),L=w(L,b,M,C,E[D+12],11,-421815835),C=w(C,L,b,M,E[D+15],16,530742520),b=S(b,M=w(M,C,L,b,E[D+2],23,-995338651),C,L,E[D+0],6,-198630844),L=S(L,b,M,C,E[D+7],10,1126891415),C=S(C,L,b,M,E[D+14],15,-1416354905),M=S(M,C,L,b,E[D+5],21,-57434055),b=S(b,M,C,L,E[D+12],6,1700485571),L=S(L,b,M,C,E[D+3],10,-1894986606),C=S(C,L,b,M,E[D+10],15,-1051523),M=S(M,C,L,b,E[D+1],21,-2054922799),b=S(b,M,C,L,E[D+8],6,1873313359),L=S(L,b,M,C,E[D+15],10,-30611744),C=S(C,L,b,M,E[D+6],15,-1560198380),M=S(M,C,L,b,E[D+13],21,1309151649),b=S(b,M,C,L,E[D+4],6,-145523070),L=S(L,b,M,C,E[D+11],10,-1120210379),C=S(C,L,b,M,E[D+2],15,718787259),M=S(M,C,L,b,E[D+9],21,-343485551),b=T(b,z),M=T(M,F),C=T(C,H),L=T(L,G)}return Array(b,M,C,L)}function y(E,R,b,M,C,L){return T((R=T(T(R,E),T(M,L)))<<C|R>>>32-C,b)}function _(E,R,b,M,C,L,D){return y(R&b|~R&M,E,R,C,L,D)}function x(E,R,b,M,C,L,D){return y(R&M|b&~M,E,R,C,L,D)}function w(E,R,b,M,C,L,D){return y(R^b^M,E,R,C,L,D)}function S(E,R,b,M,C,L,D){return y(b^(R|~M),E,R,C,L,D)}function T(E,R){var b=(65535&E)+(65535&R);return(E>>16)+(R>>16)+(b>>16)<<16|65535&b}r.exports=function(E){return g.hash(E,v,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){r.exports=function(g){for(var v,y=new Array(g),_=0;_<g;_++)!(3&_)&&(v=4294967296*Math.random()),y[_]=v>>>((3&_)<<3)&255;return y}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){var g=t("./helpers");function v(x,w){x[w>>5]|=128<<24-w%32,x[15+(w+64>>9<<4)]=w;for(var S,T,E,R=Array(80),b=1732584193,M=-271733879,C=-1732584194,L=271733878,D=-1009589776,z=0;z<x.length;z+=16){for(var F=b,H=M,G=C,te=L,V=D,K=0;K<80;K++){R[K]=K<16?x[z+K]:_(R[K-3]^R[K-8]^R[K-14]^R[K-16],1);var j=y(y(_(b,5),(j=M,T=C,E=L,(S=K)<20?j&T|~j&E:!(S<40)&&S<60?j&T|j&E|T&E:j^T^E)),y(y(D,R[K]),(S=K)<20?1518500249:S<40?1859775393:S<60?-1894007588:-899497514)),D=L,L=C,C=_(M,30),M=b,b=j}b=y(b,F),M=y(M,H),C=y(C,G),L=y(L,te),D=y(D,V)}return Array(b,M,C,L,D)}function y(x,w){var S=(65535&x)+(65535&w);return(x>>16)+(w>>16)+(S>>16)<<16|65535&S}function _(x,w){return x<<w|x>>>32-w}r.exports=function(x){return g.hash(x,v,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){function g(w,S){var T=(65535&w)+(65535&S);return(w>>16)+(S>>16)+(T>>16)<<16|65535&T}function v(w,S){var T,E=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);w[S>>5]|=128<<24-S%32,w[15+(S+64>>9<<4)]=S;for(var M,C,L=0;L<w.length;L+=16){for(var D=R[0],z=R[1],F=R[2],H=R[3],G=R[4],te=R[5],V=R[6],K=R[7],j=0;j<64;j++)b[j]=j<16?w[j+L]:g(g(g((C=b[j-2],_(C,17)^_(C,19)^x(C,10)),b[j-7]),(C=b[j-15],_(C,7)^_(C,18)^x(C,3))),b[j-16]),T=g(g(g(g(K,_(C=G,6)^_(C,11)^_(C,25)),G&te^~G&V),E[j]),b[j]),M=g(_(M=D,2)^_(M,13)^_(M,22),D&z^D&F^z&F),K=V,V=te,te=G,G=g(H,T),H=F,F=z,z=D,D=g(T,M);R[0]=g(D,R[0]),R[1]=g(z,R[1]),R[2]=g(F,R[2]),R[3]=g(H,R[3]),R[4]=g(G,R[4]),R[5]=g(te,R[5]),R[6]=g(V,R[6]),R[7]=g(K,R[7])}return R}var y=t("./helpers"),_=function(w,S){return w>>>S|w<<32-S},x=function(w,S){return w>>>S};r.exports=function(w){return y.hash(w,v,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){i.read=function(g,v,y,_,L){var w,S,T=8*L-_-1,E=(1<<T)-1,R=E>>1,b=-7,M=y?L-1:0,C=y?-1:1,L=g[v+M];for(M+=C,w=L&(1<<-b)-1,L>>=-b,b+=T;0<b;w=256*w+g[v+M],M+=C,b-=8);for(S=w&(1<<-b)-1,w>>=-b,b+=_;0<b;S=256*S+g[v+M],M+=C,b-=8);if(w===0)w=1-R;else{if(w===E)return S?NaN:1/0*(L?-1:1);S+=Math.pow(2,_),w-=R}return(L?-1:1)*S*Math.pow(2,w-_)},i.write=function(g,v,y,_,x,D){var S,T,E=8*D-x-1,R=(1<<E)-1,b=R>>1,M=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=_?0:D-1,L=_?1:-1,D=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(T=isNaN(v)?1:0,S=R):(S=Math.floor(Math.log(v)/Math.LN2),v*(_=Math.pow(2,-S))<1&&(S--,_*=2),2<=(v+=1<=S+b?M/_:M*Math.pow(2,1-b))*_&&(S++,_/=2),R<=S+b?(T=0,S=R):1<=S+b?(T=(v*_-1)*Math.pow(2,x),S+=b):(T=v*Math.pow(2,b-1)*Math.pow(2,x),S=0));8<=x;g[y+C]=255&T,C+=L,T/=256,x-=8);for(S=S<<x|T,E+=x;0<E;g[y+C]=255&S,C+=L,S/=256,E-=8);g[y+C-L]|=128*D}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,i){(function(s,o,a,l,u,c,f,d,m){var g,v,y;function _(){}(s=r.exports={}).nextTick=(v=typeof window<"u"&&window.setImmediate,y=typeof window<"u"&&window.postMessage&&window.addEventListener,v?function(x){return window.setImmediate(x)}:y?(g=[],window.addEventListener("message",function(x){var w=x.source;w!==window&&w!==null||x.data!=="process-tick"||(x.stopPropagation(),0<g.length&&g.shift()())},!0),function(x){g.push(x),window.postMessage("process-tick","*")}):function(x){setTimeout(x,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(aG);var $le=aG.exports;const Xle=$o($le);var Rn={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive"};const Kle={[`${Rn.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${Rn.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${Rn.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${Rn.position};
  `},[`${Rn.positionRaw}`]:{"#include <begin_vertex>":`
    vec4 csm_positionUnprojected = ${Rn.positionRaw};
    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;
    #endif
    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;
    vec3 transformed = csm_positionUnprojected.xyz;
  `},[`${Rn.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${Rn.pointSize};
    `},[`${Rn.diffuseColor}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${Rn.diffuseColor};
  `},[`${Rn.fragColor}`]:{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = ${Rn.fragColor};
  `},[`${Rn.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${Rn.emissive};
    `},[`${Rn.roughness}`]:{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = ${Rn.roughness};
    `},[`${Rn.metalness}`]:{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = ${Rn.metalness};
    `}},Jle={[`${Rn.position}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( ${Rn.position}, 1.0 );
  `},[`${Rn.positionRaw}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = ${Rn.position};
  `},[`${Rn.diffuseColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${Rn.diffuseColor};
  `},[`${Rn.fragColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${Rn.fragColor};
  `}},Yle=`

#ifdef IS_VERTEX
    vec3 csm_Position = position;
    vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
    vec3 csm_Normal = normal;
#else
    #if defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL
        vec4 csm_DiffuseColor = vec4(1., 0., 1., 1.);
        vec4 csm_FragColor = vec4(1., 0., 1., 1.);
    #else
        #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
            vec3 csm_Emissive = emissive;
            float csm_Roughness = roughness;
            float csm_Metalness = metalness;
        #endif
        
        #ifdef USE_MAP
            vec4 _csm_sampledDiffuseColor = texture2D(map, vUv);

            #ifdef DECODE_VIDEO_TEXTURE
            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)
            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);
            #endif

            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
        #else
            vec4 csm_DiffuseColor = vec4(diffuse, opacity);
            vec4 csm_FragColor = vec4(diffuse, opacity);
        #endif
    #endif
#endif
`,Zle=(n,e,t)=>n.split(e).join(t),Qle=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},qle=(n,e)=>new RegExp(`\\b${Qle(e)}\\b`).test(n);function eue(n){try{new n}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}class tue extends Xn{constructor({baseMaterial:e,fragmentShader:t,vertexShader:r,uniforms:i,patchMap:s,cacheKey:o,...a}){let l;if(eue(e)?l=new e(a):(l=e,Object.assign(l,a)),l.type==="RawShaderMaterial")throw new Error("CustomShaderMaterial does not support RawShaderMaterial");super(),this.uniforms=i||{},this._customPatchMap=s||{},this._fs=t||"",this._vs=r||"",this._cacheKey=o,this._base=e,this._type=l.type,this._instanceID=ao.generateUUID();for(const u in l){let c=u;u.startsWith("_")&&(c=u.split("_")[1]),this[c]===void 0&&(this[c]=0),this[c]=l[c]}this.update({fragmentShader:t,vertexShader:r,uniforms:i,cacheKey:o})}update(e){const t=(e==null?void 0:e.uniforms)||{},r=(e==null?void 0:e.fragmentShader)||this._fs,i=(e==null?void 0:e.vertexShader)||this._vs,s=Object.values(t).reduce((o,{value:a})=>o+JSON.stringify(a),"");this.uuid=(e==null||e.cacheKey==null?void 0:e.cacheKey())||Xle([r,i,s,this._instanceID]),this.generateMaterial({fragmentShader:r,vertexShader:i,uniforms:t})}clone(){const e=new this.constructor({baseMaterial:this._base,fragmentShader:this._fs,vertexShader:this._vs,patchMap:this._customPatchMap,uniforms:this.uniforms,cacheKey:this._cacheKey});for(const t in this)t!=="uuid"&&(e[t]=this[t]);return e}generateMaterial({fragmentShader:e,vertexShader:t,uniforms:r}){const i=this.parseShader(e),s=this.parseShader(t);this.uniforms=r||{},this.customProgramCacheKey=()=>this.uuid,this.onBeforeCompile=o=>{if(i){const a=this.patchShader(i,o.fragmentShader);o.fragmentShader=this.getMaterialDefine()+a}if(s){const a=this.patchShader(s,o.vertexShader);o.vertexShader=`#define IS_VERTEX;
`+a,o.vertexShader=this.getMaterialDefine()+o.vertexShader}o.uniforms={...o.uniforms,...this.uniforms},this.uniforms=o.uniforms},this.needsUpdate=!0}getMaterialDefine(){return`#define IS_${this._type.toUpperCase()};
`}getPatchMapForMaterial(){switch(this._type){case"ShaderMaterial":return Jle;default:return Kle}}patchShader(e,t){let r=t;const i={...this.getPatchMapForMaterial(),...this._customPatchMap};return Object.keys(i).forEach(s=>{Object.keys(i[s]).forEach(o=>{qle(e.main,s)&&(r=Zle(r,o,i[s][o]))})}),r=r.replace("void main() {",`
          ${e.header}
          void main() {
            ${Yle}
            ${e.main}
          `),r=e.defines+r,r}parseShader(e){if(!e)return;const t=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),r=oM(t),i=aM(r),s=i.map(l=>l.name).indexOf("main"),o=Zm(r.slice(0,s>=0?i[s].outer[0]:void 0)),a=s>=0?this.getShaderFromIndex(r,i[s].body):"";return{defines:"",header:o,main:a}}getShaderFromIndex(e,t){return Zm(e.slice(t[0],t[1]))}}function nue(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}const lG=B.forwardRef((n,e)=>{const{children:t,...r}=n;return B.Children.toArray(t).some(XL)?B.createElement(B.Fragment,null,B.Children.map(t,i=>XL(i)?B.createElement(lM,tn({},r,{ref:e}),i.props.children):i)):B.createElement(lM,tn({},r,{ref:e}),t)});lG.displayName="Slot";const lM=B.forwardRef((n,e)=>{const{children:t,...r}=n;return B.isValidElement(t)?B.cloneElement(t,{...iue(r,t.props),ref:nue(e,t.ref)}):B.Children.count(t)>1?B.Children.only(null):null});lM.displayName="SlotClone";const rue=({children:n})=>B.createElement(B.Fragment,null,n);function XL(n){return B.isValidElement(n)&&n.type===rue}function iue(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const sue=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:B.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?lG:e;return B.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),B.createElement(o,tn({},s,{ref:r}))})}),{}),oue=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},aue=B.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=B.useState({});return oue(()=>{l({})},[]),a?FU.createPortal(B.createElement(sue.div,tn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),lue=aue;var KL=Object.prototype.hasOwnProperty;function g_(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&g_(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(KL.call(n,t)&&++r&&!KL.call(e,t)||!(t in e)||!g_(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function uG(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var Ex=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};Ex.prototype._test=function(e){var t=this.fn;try{ch(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return ch(this.modifiers.slice(),t,this)(e)}catch{return!1}};Ex.prototype._check=function(e){try{ch(this.modifiers.slice(),this.fn,this)(e)}catch{if(ch(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!ch(this.modifiers.slice(),this.fn,this)(e))throw null};Ex.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){fG(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function cG(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function ch(n,e,t){if(n.length){var r=n.shift(),i=ch(n,e,t);return r.perform(i,t)}else return cG(e)}function fG(n,e,t){if(n.length){var r=n.shift(),i=fG(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(cG(e,"async")(s))}}var uue=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},CT=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),ba=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ba.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new Ex(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};ba.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new uue(t,e.simple,e.async)),this};ba.prototype._clone=function(){return new ba(this.chain.slice(),this.nextRuleModifiers.slice())};ba.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ba.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new CT(r,e,i))}}),t};ba.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new CT(t,e,r)}})};ba.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){dG(e,t.chain.slice(),r,i)})};function dG(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){dG(n,e,t,r)},function(s){r(new CT(i,n,s))})}else t(n)}var JL=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function cue(n,e){return e===void 0&&(e=!1),{simple:function(t){return JL(t,e)||n.check(t)===void 0},async:function(t){return JL(t,e)||n.testAsync(t)}}}function rs(){return typeof Proxy<"u"?hG(new ba):uM(new ba)}var jg={};rs.extend=function(n){Object.assign(jg,n)};rs.clearCustomRules=function(){jg={}};function hG(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=hG(n._clone());if(r in v_)return i._applyModifier(v_[r],r);if(r in jg)return i._applyRule(jg[r],r);if(r in cM)return i._applyRule(cM[r],r)}})}function uM(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=uM(s._clone()),c=u._applyRule(i[o],o).apply(void 0,a);return c}}),s},t=e(cM,n),r=e(jg,t);return Object.keys(v_).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=uM(r._clone());return s._applyModifier(v_[i],i)}})}),r}var v_={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Hy(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Hy(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Hy(e).every(n)}},async:function(n){return function(e){return Promise.all(Hy(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return YL(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return YL(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function YL(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Hy(n){return typeof n=="string"?n.split(""):n}var cM={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||fue;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return _d("string")},boolean:function(){return _d("boolean")},undefined:function(){return _d("undefined")},null:function(){return _d("null")},array:function(){return _d("array")},object:function(){return _d("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return due(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:cue};function _d(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function fue(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function due(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Sn="colors",Ui="sizes",yt="space",hue={gap:yt,gridGap:yt,columnGap:yt,gridColumnGap:yt,rowGap:yt,gridRowGap:yt,inset:yt,insetBlock:yt,insetBlockEnd:yt,insetBlockStart:yt,insetInline:yt,insetInlineEnd:yt,insetInlineStart:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,marginBlock:yt,marginBlockEnd:yt,marginBlockStart:yt,marginInline:yt,marginInlineEnd:yt,marginInlineStart:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,paddingBlock:yt,paddingBlockEnd:yt,paddingBlockStart:yt,paddingInline:yt,paddingInlineEnd:yt,paddingInlineStart:yt,top:yt,right:yt,bottom:yt,left:yt,scrollMargin:yt,scrollMarginTop:yt,scrollMarginRight:yt,scrollMarginBottom:yt,scrollMarginLeft:yt,scrollMarginX:yt,scrollMarginY:yt,scrollMarginBlock:yt,scrollMarginBlockEnd:yt,scrollMarginBlockStart:yt,scrollMarginInline:yt,scrollMarginInlineEnd:yt,scrollMarginInlineStart:yt,scrollPadding:yt,scrollPaddingTop:yt,scrollPaddingRight:yt,scrollPaddingBottom:yt,scrollPaddingLeft:yt,scrollPaddingX:yt,scrollPaddingY:yt,scrollPaddingBlock:yt,scrollPaddingBlockEnd:yt,scrollPaddingBlockStart:yt,scrollPaddingInline:yt,scrollPaddingInlineEnd:yt,scrollPaddingInlineStart:yt,fontSize:"fontSizes",background:Sn,backgroundColor:Sn,backgroundImage:Sn,borderImage:Sn,border:Sn,borderBlock:Sn,borderBlockEnd:Sn,borderBlockStart:Sn,borderBottom:Sn,borderBottomColor:Sn,borderColor:Sn,borderInline:Sn,borderInlineEnd:Sn,borderInlineStart:Sn,borderLeft:Sn,borderLeftColor:Sn,borderRight:Sn,borderRightColor:Sn,borderTop:Sn,borderTopColor:Sn,caretColor:Sn,color:Sn,columnRuleColor:Sn,fill:Sn,outline:Sn,outlineColor:Sn,stroke:Sn,textDecorationColor:Sn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ui,minBlockSize:Ui,maxBlockSize:Ui,inlineSize:Ui,minInlineSize:Ui,maxInlineSize:Ui,width:Ui,minWidth:Ui,maxWidth:Ui,height:Ui,minHeight:Ui,maxHeight:Ui,flexBasis:Ui,gridTemplateColumns:Ui,gridTemplateRows:Ui,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},pue=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Qh=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,pue))(e);return i in n?n[i]:n[i]=t(e,...r)}},uf=Symbol.for("sxs.internal"),TT=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),ZL=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:mue}=Object.prototype,fM=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),gue=/\s+(?![^()]*\))/,xd=n=>e=>n(...typeof e=="string"?String(e).split(gue):[e]),QL={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:xd((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:xd((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:xd((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:xd((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:xd((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:xd((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},Sb=/([\d.]+)([^]*)/,vue=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,yue=(n,e)=>n in _ue&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${fM(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${fM(n)}:${r}fit-content`)+s):String(e),_ue={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Sl=n=>n?n+"-":"",pG=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Sl(e)+(a.includes("$")?"":Sl(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),xue=/\s*,\s*(?![^()]*\))/,wue=Object.prototype.toString,$d=(n,e,t,r,i)=>{let s,o,a;const l=(u,c,f)=>{let d,m;const g=v=>{for(d in v){const x=d.charCodeAt(0)===64,w=x&&Array.isArray(v[d])?v[d]:[v[d]];for(m of w){const S=/[A-Z]/.test(_=d)?_:_.replace(/-[^]/g,E=>E[1].toUpperCase()),T=typeof m=="object"&&m&&m.toString===wue&&(!r.utils[S]||!c.length);if(S in r.utils&&!T){const E=r.utils[S];if(E!==o){o=E,g(E(m)),o=null;continue}}else if(S in QL){const E=QL[S];if(E!==a){a=E,g(E(m)),a=null;continue}}if(x&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(E,R,b,M,C,L)=>{const D=Sb.test(R),z=.0625*(D?-1:1),[F,H]=D?[M,R]:[R,M];return"("+(b[0]==="="?"":b[0]===">"===D?"max-":"min-")+F+":"+(b[0]!=="="&&b.length===1?H.replace(Sb,(G,te,V)=>Number(te)+z*(b===">"?1:-1)+V):H)+(C?") and ("+(C[0]===">"?"min-":"max-")+F+":"+(C.length===1?L.replace(Sb,(G,te,V)=>Number(te)+z*(C===">"?-1:1)+V):L):"")+")"})),T){const E=x?f.concat(d):[...f],R=x?[...c]:vue(c,d.split(xue));s!==void 0&&i(qL(...s)),s=void 0,l(m,R,E)}else s===void 0&&(s=[[],c,f]),d=x||d.charCodeAt(0)!==36?d:`--${Sl(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,m=T?m:typeof m=="number"?m&&S in Sue?String(m)+"px":String(m):pG(yue(S,m??""),r.prefix,r.themeMap[S]),s[0].push(`${x?`${d} `:`${fM(d)}:`}${m}`)}}var y,_};g(u),s!==void 0&&i(qL(...s)),s=void 0};l(n,e,t)},qL=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,Sue={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},eF=n=>String.fromCharCode(n+(n>25?39:97)),cf=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=eF(t%52)+r;return eF(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Pm=["themed","global","styled","onevar","resonevar","allvar","inline"],bue=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},Aue=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(bue(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const m=d.slice(14,-3).trim().split(/\s+/),g=Pm[m[0]];g&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[g]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Pm.length-1;a>=0;--a){const l=Pm[a];if(!o[l]){const u=Pm[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}Mue(o[l])}};return r(),e},Mue=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},vm=Symbol(),Eue=Qh(),tF=(n,e)=>Eue(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[uf]){r.type==null&&(r.type=i[uf].type);for(const s of i[uf].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(Cue(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Tue(n,r,e)}),Cue=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Sl(i.prefix)}c-${cf(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){c=l,f=d,mue.call(c,f)||(l[d]="undefined");const m=n[d];for(const g in m){const v={[d]:String(g)};String(g)==="undefined"&&u.push(d);const y=m[g],_=[v,y,!ZL(y)];o.push(_)}}var c,f;if(typeof e=="object"&&e)for(const d of e){let{css:m,...g}=d;m=typeof m=="object"&&m||{};for(const y in g)g[y]=String(g[y]);const v=[g,m,!ZL(m)];a.push(v)}return[s,r,o,a,l,u]},Tue=(n,e,t)=>{const[r,i,s,o]=Pue(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let m=0;m<d[vm].length;m++){const[g,v]=d[vm][m];f.rules[g].apply(v)}return d[vm]=[],null}return d[vm]=[],d.rules={},Pm.forEach(m=>d.rules[m]={apply:g=>d[vm].push([m,g])}),d})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||Rue;const{css:d,...m}=f,g={};for(const _ in s)if(delete m[_],_ in f){let x=f[_];typeof x=="object"&&x?g[_]={"@initial":s[_],...x}:(x=String(x),g[_]=x!=="undefined"||o.has(_)?x:s[_])}else g[_]=s[_];const v=new Set([...i]);for(const[_,x,w,S]of e.composers){t.rules.styled.cache.has(_)||(t.rules.styled.cache.add(_),$d(x,[`.${_}`],[],n,R=>{l.styled.apply(R)}));const T=nF(w,g,n.media),E=nF(S,g,n.media,!0);for(const R of T)if(R!==void 0)for(const[b,M,C]of R){const L=`${_}-${cf(M)}-${b}`;v.add(L);const D=(C?t.rules.resonevar:t.rules.onevar).cache,z=C?l.resonevar:l.onevar;D.has(L)||(D.add(L),$d(M,[`.${L}`],[],n,F=>{z.apply(F)}))}for(const R of E)if(R!==void 0)for(const[b,M]of R){const C=`${_}-${cf(M)}-${b}`;v.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),$d(M,[`.${C}`],[],n,L=>{l.allvar.apply(L)}))}}if(typeof d=="object"&&d){const _=`${r}-i${cf(d)}-css`;v.add(_),t.rules.inline.cache.has(_)||(t.rules.inline.cache.add(_),$d(d,[`.${_}`],[],n,x=>{l.inline.apply(x)}))}for(const _ of String(f.className||"").trim().split(/\s+/))_&&v.add(_);const y=m.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:m,toString:()=>y,deferredInjector:a}};return TT(c,{className:r,selector:u,[uf]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},Pue=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},nF=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let m,g,v=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const _=y.slice(1);(g=g||[]).push(_ in t?t[_]:y.replace(/^@media ?/,"")),c=!0}u+=v,m=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,c])}return i},Rue={},Bue=Qh(),Iue=(n,e)=>Bue(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=cf(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}$d(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return TT(r,{toString:r})}),Due=Qh(),Lue=(n,e)=>Due(n,()=>t=>{const r=`${Sl(n.prefix)}k-${cf(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];$d(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return TT(i,{get name(){return i()},toString:i})}),Fue=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Sl(this.prefix)+Sl(this.scale)+this.token}toString(){return this.computedValue}},kue=Qh(),Oue=(n,e)=>kue(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Sl(n.prefix)}t-${cf(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${Sl(n.prefix)}${l}-${u}`,f=pG(String(r[l][u]),n.prefix,l);s[l][u]=new Fue(u,f,l,n.prefix),o.push(`${c}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),Uue=Qh(),Nue=Qh(),zue=n=>{const e=(t=>{let r=!1;const i=Uue(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...hue},utils:typeof s.utils=="object"&&s.utils||{}},f=Aue(l),d={css:tF(c,f),globalCss:Iue(c,f),keyframes:Lue(c,f),createTheme:Oue(c,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:c,prefix:o,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(u)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>Nue(t,()=>{const i=tF(t,r);return(...s)=>{const o=i(...s),a=o[uf].type,l=he.forwardRef((u,c)=>{const f=u&&u.as||a,{props:d,deferredInjector:m}=o(u);return delete d.as,d.ref=c,m?he.createElement(he.Fragment,null,he.createElement(f,d),he.createElement(m,null)):he.createElement(f,d)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[uf]=o[uf],l}}))(e),e};const Gue=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},Hue=G9["useId".toString()]||(()=>{});let Vue=0;function Wue(n){const[e,t]=B.useState(Hue());return Gue(()=>{n||t(r=>r??String(Vue++))},[n]),n||(e?`radix-${e}`:"")}function mG(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}function PT(...n){return B.useCallback(mG(...n),n)}const gG=B.forwardRef((n,e)=>{const{children:t,...r}=n;return B.Children.toArray(t).some(rF)?B.createElement(B.Fragment,null,B.Children.map(t,i=>rF(i)?B.createElement(dM,tn({},r,{ref:e}),i.props.children):i)):B.createElement(dM,tn({},r,{ref:e}),t)});gG.displayName="Slot";const dM=B.forwardRef((n,e)=>{const{children:t,...r}=n;return B.isValidElement(t)?B.cloneElement(t,{...jue(r,t.props),ref:mG(e,t.ref)}):B.Children.count(t)>1?B.Children.only(null):null});dM.displayName="SlotClone";const vG=({children:n})=>B.createElement(B.Fragment,null,n);function rF(n){return B.isValidElement(n)&&n.type===vG}function jue(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const qh=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:B.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?gG:e;return B.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error($ue),B.createElement(o,tn({},s,{ref:r}))})}),{}),$ue="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Xue=B.forwardRef((n,e)=>B.createElement(qh.span,tn({},n,{ref:e,style:{...n.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),Kue=Xue,Jue=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},Yue=B.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=B.useState({});return Jue(()=>{l({})},[]),a?FU.createPortal(B.createElement(qh.div,tn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),Zue=B.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return B.createElement(qh.svg,tn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:B.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Que=Zue;function iF(n){const[e,t]=B.useState(void 0);return B.useEffect(()=>{if(n){const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else{const l=n.getBoundingClientRect();o=l.width,a=l.height}t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>{t(void 0),r.unobserve(n)}}},[n]),e}function que(n,e){const t=kc.get(n);return t===void 0?(kc.set(n,{rect:{},callbacks:[e]}),kc.size===1&&(hM=requestAnimationFrame(yG))):(t.callbacks.push(e),e(n.getBoundingClientRect())),()=>{const r=kc.get(n);if(r===void 0)return;const i=r.callbacks.indexOf(e);i>-1&&r.callbacks.splice(i,1),r.callbacks.length===0&&(kc.delete(n),kc.size===0&&cancelAnimationFrame(hM))}}let hM;const kc=new Map;function yG(){const n=[];kc.forEach((e,t)=>{const r=t.getBoundingClientRect();var i,s;i=e.rect,s=r,(i.width!==s.width||i.height!==s.height||i.top!==s.top||i.right!==s.right||i.bottom!==s.bottom||i.left!==s.left)&&(e.rect=r,n.push(e))}),n.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),hM=requestAnimationFrame(yG)}function _G(n){const[e,t]=B.useState();return B.useEffect(()=>{if(n){const r=que(n,t);return()=>{t(void 0),r()}}},[n]),e}function xG(n,e=[]){let t=[];const r=()=>{const i=t.map(s=>B.createContext(s));return function(s){const o=(s==null?void 0:s[n])||i;return B.useMemo(()=>({[`__scope${n}`]:{...s,[n]:o}}),[s,o])}};return r.scopeName=n,[function(i,s){const o=B.createContext(s),a=t.length;function l(u){const{scope:c,children:f,...d}=u,m=(c==null?void 0:c[n][a])||o,g=B.useMemo(()=>d,Object.values(d));return B.createElement(m.Provider,{value:g},f)}return t=[...t,s],l.displayName=i+"Provider",[l,function(u,c){const f=(c==null?void 0:c[n][a])||o,d=B.useContext(f);if(d)return d;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}]},ece(r,...e)]}function ece(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((o,{useScope:a,scopeName:l})=>({...o,...a(i)[`__scope${l}`]}),{});return B.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function tce({anchorRect:n,popperSize:e,arrowSize:t,arrowOffset:r=0,side:i,sideOffset:s=0,align:o,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!n||!e||!u)return{popperStyles:nce,arrowStyles:bb};const f=function(R,b,M=0,C=0,L){const D=L?L.height:0,z=sF(b,R,"x"),F=sF(b,R,"y"),H=F.before-M-D,G=F.after+M+D,te=z.before-M-D,V=z.after+M+D;return{top:{start:{x:z.start+C,y:H},center:{x:z.center,y:H},end:{x:z.end-C,y:H}},right:{start:{x:V,y:F.start+C},center:{x:V,y:F.center},end:{x:V,y:F.end-C}},bottom:{start:{x:z.start+C,y:G},center:{x:z.center,y:G},end:{x:z.end-C,y:G}},left:{start:{x:te,y:F.start+C},center:{x:te,y:F.center},end:{x:te,y:F.end-C}}}}(e,n,s,a,t),d=f[i][o];if(l===!1){const R=oF(d);let b=bb;return t&&(b=lF({popperSize:e,arrowSize:t,arrowOffset:r,side:i,align:o})),{popperStyles:{...R,"--radix-popper-transform-origin":aF(e,i,o,r,t)},arrowStyles:b,placedSide:i,placedAlign:o}}const m=DOMRect.fromRect({...e,...d}),g=(v=u,y=c,DOMRect.fromRect({width:v.width-2*y,height:v.height-2*y,x:v.left+y,y:v.top+y}));var v,y;const _=cF(m,g),x=f[uF(i)][o],w=function(R,b,M){const C=uF(R);return b[R]&&!M[C]?C:R}(i,_,cF(DOMRect.fromRect({...e,...x}),g)),S=function(R,b,M,C,L){const D=M==="top"||M==="bottom",z=D?"left":"top",F=D?"right":"bottom",H=D?"width":"height",G=b[H]>R[H];return(C==="start"||C==="center")&&(L[z]&&G||L[F]&&!G)?"end":(C==="end"||C==="center")&&(L[F]&&G||L[z]&&!G)?"start":C}(e,n,i,o,_),T=oF(f[w][S]);let E=bb;return t&&(E=lF({popperSize:e,arrowSize:t,arrowOffset:r,side:w,align:S})),{popperStyles:{...T,"--radix-popper-transform-origin":aF(e,w,S,r,t)},arrowStyles:E,placedSide:w,placedAlign:S}}function sF(n,e,t){const r=n[t==="x"?"left":"top"],i=t==="x"?"width":"height",s=n[i],o=e[i];return{before:r-o,start:r,center:r+(s-o)/2,end:r+s-o,after:r+s}}function oF(n){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(n.x+window.scrollX)}px, ${Math.round(n.y+window.scrollY)}px, 0)`}}function aF(n,e,t,r,i){const s=e==="top"||e==="bottom",o=i?i.width:0,a=i?i.height:0,l=o/2+r;let u="",c="";return s?(u={start:`${l}px`,center:"center",end:n.width-l+"px"}[t],c=e==="top"?`${n.height+a}px`:-a+"px"):(u=e==="left"?`${n.width+a}px`:-a+"px",c={start:`${l}px`,center:"center",end:n.height-l+"px"}[t]),`${u} ${c}`}const nce={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},bb={position:"absolute",opacity:0};function lF({popperSize:n,arrowSize:e,arrowOffset:t,side:r,align:i}){const s=(n.width-e.width)/2,o=(n.height-e.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(e.width,e.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:rce(r,i)};return r!=="top"&&r!=="bottom"||(i==="start"&&(u.left=`${t}px`),i==="center"&&(u.left=`${s}px`),i==="end"&&(u.right=`${t}px`)),r!=="left"&&r!=="right"||(i==="start"&&(u.top=`${t}px`),i==="center"&&(u.top=`${o}px`),i==="end"&&(u.bottom=`${t}px`)),u}function rce(n,e){return(n!=="top"&&n!=="right"||e!=="end")&&(n!=="bottom"&&n!=="left"||e==="end")?"ltr":"rtl"}function uF(n){return{top:"bottom",right:"left",bottom:"top",left:"right"}[n]}function cF(n,e){return{top:n.top<e.top,right:n.right>e.right,bottom:n.bottom>e.bottom,left:n.left<e.left}}const[wG,SG]=xG("Popper"),[ice,bG]=wG("Popper"),sce=n=>{const{__scopePopper:e,children:t}=n,[r,i]=B.useState(null);return B.createElement(ice,{scope:e,anchor:r,onAnchorChange:i},t)},oce=B.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=bG("PopperAnchor",t),o=B.useRef(null),a=PT(e,o);return B.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:B.createElement(qh.div,tn({},i,{ref:a}))}),[ace,lce]=wG("PopperContent"),uce=B.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i,align:s="center",alignOffset:o,collisionTolerance:a,avoidCollisions:l=!0,...u}=n,c=bG("PopperContent",t),[f,d]=B.useState(),m=_G(c.anchor),[g,v]=B.useState(null),y=iF(g),[_,x]=B.useState(null),w=iF(_),S=PT(e,D=>v(D)),T=function(){const[D,z]=B.useState(void 0);return B.useEffect(()=>{let F;function H(){z({width:window.innerWidth,height:window.innerHeight})}function G(){window.clearTimeout(F),F=window.setTimeout(H,100)}return H(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),D}(),E=T?DOMRect.fromRect({...T,x:0,y:0}):void 0,{popperStyles:R,arrowStyles:b,placedSide:M,placedAlign:C}=tce({anchorRect:m,popperSize:y,arrowSize:w,arrowOffset:f,side:r,sideOffset:i,align:s,alignOffset:o,shouldAvoidCollisions:l,collisionBoundariesRect:E,collisionTolerance:a}),L=M!==void 0;return B.createElement("div",{style:R,"data-radix-popper-content-wrapper":""},B.createElement(ace,{scope:t,arrowStyles:b,onArrowChange:x,onArrowOffsetChange:d},B.createElement(qh.div,tn({"data-side":M,"data-align":C},u,{style:{...u.style,animation:L?void 0:"none"},ref:S}))))}),cce=B.forwardRef(function(n,e){const{__scopePopper:t,offset:r,...i}=n,s=lce("PopperArrow",t),{onArrowOffsetChange:o}=s;return B.useEffect(()=>o(r),[o,r]),B.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},B.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},B.createElement(Que,tn({},i,{ref:e,style:{...i.style,display:"block"}}))))}),fce=sce,dce=oce,hce=uce,pce=cce,fF=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{};function mce(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}function gce(...n){return B.useCallback(mce(...n),n)}const AG=n=>{const{present:e,children:t}=n,r=function(o){const[a,l]=B.useState(),u=B.useRef({}),c=B.useRef(o),f=B.useRef("none"),d=o?"mounted":"unmounted",[m,g]=function(v,y){return B.useReducer((_,x)=>{const w=y[_][x];return w??_},v)}(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const v=Vy(u.current);f.current=m==="mounted"?v:"none"},[m]),fF(()=>{const v=u.current,y=c.current;if(y!==o){const _=f.current,x=Vy(v);o?g("MOUNT"):x==="none"||(v==null?void 0:v.display)==="none"?g("UNMOUNT"):g(y&&_!==x?"ANIMATION_OUT":"UNMOUNT"),c.current=o}},[o,g]),fF(()=>{if(a){const v=_=>{const x=Vy(u.current).includes(_.animationName);_.target===a&&x&&g("ANIMATION_END")},y=_=>{_.target===a&&(f.current=Vy(u.current))};return a.addEventListener("animationstart",y),a.addEventListener("animationcancel",v),a.addEventListener("animationend",v),()=>{a.removeEventListener("animationstart",y),a.removeEventListener("animationcancel",v),a.removeEventListener("animationend",v)}}},[a,g]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:B.useCallback(v=>{v&&(u.current=getComputedStyle(v)),l(v)},[])}}(e),i=typeof t=="function"?t({present:r.isPresent}):B.Children.only(t),s=gce(r.ref,i.ref);return typeof t=="function"||r.isPresent?B.cloneElement(i,{ref:s}):null};function Vy(n){return(n==null?void 0:n.animationName)||"none"}AG.displayName="Presence";function dF(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n},[n]),e.current}function vce(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function yce(n){const e=vce(n);B.useEffect(()=>{const t=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function hF(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n}),B.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function _ce({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=function({defaultProp:l,onChange:u}){const c=B.useState(l),[f]=c,d=B.useRef(f),m=hF(u);return B.useEffect(()=>{d.current!==f&&(m(f),d.current=f)},[f,d,m]),c}({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=hF(t);return[o,B.useCallback(l=>{if(s){const u=l,c=typeof l=="function"?u(n):l;c!==n&&a(c)}else i(l)},[s,n,i,a])]}function wd(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}const[MG,E1e]=xG("Tooltip",[SG]),Cx=SG(),xce=700,[C1e,wce]=MG("TooltipProvider",{isOpenDelayed:!0,delayDuration:xce,onOpen:()=>{},onClose:()=>{}}),[Sce,Tx]=MG("Tooltip"),bce=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,delayDuration:o}=n,a=wce("Tooltip",e),l=Cx(e),[u,c]=B.useState(null),f=Wue(),d=B.useRef(0),m=o??a.delayDuration,g=B.useRef(!1),{onOpen:v,onClose:y}=a,[_=!1,x]=_ce({prop:r,defaultProp:i,onChange:E=>{E&&(document.dispatchEvent(new CustomEvent("tooltip.open")),v()),s==null||s(E)}}),w=B.useMemo(()=>_?g.current?"delayed-open":"instant-open":"closed",[_]),S=B.useCallback(()=>{window.clearTimeout(d.current),g.current=!1,x(!0)},[x]),T=B.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{g.current=!0,x(!0)},m)},[m,x]);return B.useEffect(()=>()=>window.clearTimeout(d.current),[]),B.createElement(fce,l,B.createElement(Sce,{scope:e,contentId:f,open:_,stateAttribute:w,trigger:u,onTriggerChange:c,onTriggerEnter:B.useCallback(()=>{a.isOpenDelayed?T():S()},[a.isOpenDelayed,T,S]),onOpen:B.useCallback(S,[S]),onClose:B.useCallback(()=>{window.clearTimeout(d.current),x(!1),y()},[x,y])},t))},Ace=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Tx("TooltipTrigger",t),s=Cx(t),o=PT(e,i.onTriggerChange),a=B.useRef(!1),l=B.useCallback(()=>a.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("mouseup",l),[l]),B.createElement(dce,tn({asChild:!0},s),B.createElement(qh.button,tn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onMouseEnter:wd(n.onMouseEnter,i.onTriggerEnter),onMouseLeave:wd(n.onMouseLeave,i.onClose),onMouseDown:wd(n.onMouseDown,()=>{i.onClose(),a.current=!0,document.addEventListener("mouseup",l,{once:!0})}),onFocus:wd(n.onFocus,()=>{a.current||i.onOpen()}),onBlur:wd(n.onBlur,i.onClose),onClick:wd(n.onClick,i.onClose)})))}),Mce=B.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Tx("TooltipContent",n.__scopeTooltip);return B.createElement(AG,{present:t||i.open},B.createElement(Ece,tn({ref:e},r)))}),Ece=B.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,portalled:s=!0,...o}=n,a=Tx("TooltipContent",t),l=Cx(t),u=s?Yue:B.Fragment,{onClose:c}=a;return yce(()=>c()),B.useEffect(()=>(document.addEventListener("tooltip.open",c),()=>document.removeEventListener("tooltip.open",c)),[c]),B.createElement(u,null,B.createElement(Tce,{__scopeTooltip:t}),B.createElement(hce,tn({"data-state":a.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),B.createElement(vG,null,r),B.createElement(Kue,{id:a.contentId,role:"tooltip"},i||r)))}),Cce=B.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Cx(t);return B.createElement(pce,tn({},i,r,{ref:e}))});function Tce(n){const{__scopeTooltip:e}=n,t=Tx("CheckTriggerMoved",e),r=_G(t.trigger),i=r==null?void 0:r.left,s=dF(i),o=r==null?void 0:r.top,a=dF(o),l=t.onClose;return B.useEffect(()=>{(s!==void 0&&s!==i||a!==void 0&&a!==o)&&l()},[l,s,a,i,o]),null}const Pce=bce,Rce=Ace,Bce=Mce,Ice=Cce;function Dce(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Fn(n,e){if(n==null)return{};var t=Dce(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Qn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Qn||(Qn={}));const Lce={[Qn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Qn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Qn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Qn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Qn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Qn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Qn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Qn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Qn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Qn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Qn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function EG(n,e,...t){const[r,...i]=Lce[e](...t);console[n]("LEVA: "+r,...i)}const qa=EG.bind(null,"warn"),Fce=EG.bind(null,"log"),kce=["value"],Oce=["schema"],Uce=["value"],CG=[],bf={};function pF(n){let{value:e}=n,t=Fn(n,kce);for(let r of CG){const i=r(e,t);if(i)return i}}function Tl(n,e){let{schema:t}=e,r=Fn(e,Oce);if(n in bf){qa(Qn.ALREADY_REGISTERED_TYPE,n);return}CG.push((i,s)=>t(i,s)&&n),bf[n]=r}function Ab(n,e,t,r){const{normalize:i}=bf[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Fn(e,Uce);return{value:s,settings:o}}function Nce(n,e,t,r,i,s){const{sanitize:o}=bf[n];return o?o(e,t,r,i,s):e}function mF(n,e,t){const{format:r}=bf[n];return r?r(e,t):e}function zce(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(t),!0).forEach(function(r){zce(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Nu=(n,e,t)=>n>t?t:n<e?e:n,Gce=n=>{if(n===""||typeof n=="number")return n;try{const e=Zl(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},Hce=Math.log(10);function vF(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/Hce)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const y_=(n,e,t)=>t===e?0:(Nu(n,e,t)-e)/(t-e),__=(n,e,t)=>n*(t-e)+e,Vce=()=>"_"+Math.random().toString(36).substr(2,9),yF=/\(([0-9+\-*/^ .]+)\)/,_F=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,xF=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,wF=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,SF=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,bF=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Zl(n){if(isNaN(Number(n)))if(yF.test(n)){const e=n.replace(yF,(t,r)=>String(Zl(r)));return Zl(e)}else if(_F.test(n)){const e=n.replace(_F,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Zl(e)}else if(xF.test(n)){const e=n.replace(xF,(t,r,i)=>String(Number(r)*Number(i)));return Zl(e)}else if(wF.test(n)){const e=n.replace(wF,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Zl(e)}else if(SF.test(n)){const e=n.replace(SF,(t,r,i)=>String(Number(r)+Number(i)));return Zl(e)}else if(bF.test(n)){const e=n.replace(bF,(t,r,i)=>String(Number(r)-Number(i)));return Zl(e)}else return Number(n);return Number(n)}function Wce(n,e){const t=Wt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function jce(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function TG(n){return Object.prototype.toString.call(n)==="[object Object]"}const $ce=n=>TG(n)&&Object.keys(n).length===0;let ya;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(ya||(ya={}));let jo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(jo||(jo={}));const Xce=["type","__customInput"],Kce=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Jce=["type"];function PG(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Wt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:T,__customInput:E}=n,R=Fn(n,Xce);return PG(E,e,R,T)}const{render:o,label:a,optional:l,order:u=0,disabled:c,hint:f,onChange:d,onEditStart:m,onEditEnd:g,transient:v}=n,y=Fn(n,Kce),_=Wt({render:o,key:e,label:a??e,hint:f,transient:v??!!d,onEditStart:m,onEditEnd:g,disabled:c,optional:l,order:u},t);let{type:x}=y,w=Fn(y,Jce);if(x=r??x,x in ya)return{type:x,input:w,options:_};let S;return r&&TG(w)&&"value"in w?S=w.value:S=$ce(w)?void 0:w,{type:x,input:S,options:Wt(Wt({},_),{},{onChange:d,optional:(i=_.optional)!==null&&i!==void 0?i:!1,disabled:(s=_.disabled)!==null&&s!==void 0?s:!1})}}function Yce(n,e,t,r){const i=PG(n,e),{type:s,input:o,options:a}=i;if(s)return s in ya?i:{type:s,input:Ab(s,o,t,r),options:a};let l=pF(o);return l?{type:l,input:Ab(l,o,t,r),options:a}:(l=pF({value:o}),l?{type:l,input:Ab(l,{value:o},t,r),options:a}:!1)}function AF(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=RG({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const Zce=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function RG({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=Nce(n,o,t,e,i,s)}catch(l){throw new Zce(`The value \`${r}\` did not result in a correct value.`,e,l)}return g_(a,e)?e:a}const BG=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},IG=n=>n.shiftKey?5:n.altKey?1/5:1,Qce=["value"],qce=["min","max"],efe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},DG=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Nu(i,e,t);return r?s+r:s},tfe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},LG=n=>{let{value:e}=n,t=Fn(n,Qce);const{min:r=-1/0,max:i=1/0}=t,s=Fn(t,qce);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Nu(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?vF(l)*10:vF(o);l=l||u/10;const c=Math.round(Nu(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:Wt({initialValue:o,step:l,pad:c,min:r,max:i,suffix:a},s)}},FG=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var kG=Object.freeze({__proto__:null,schema:efe,sanitize:DG,format:tfe,normalize:LG,sanitizeStep:FG});function Ir(){return Ir=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ir.apply(this,arguments)}const OG=B.createContext({});function Ri(){return B.useContext(OG)}const UG=B.createContext(null),NG=B.createContext(null),zG=B.createContext(null);function T0(){return B.useContext(NG)}function nfe(){return B.useContext(zG)}const rfe=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Wy(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const ym={$inputStyle:()=>n=>Wy(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Wy(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Wy(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Wy(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Lt,css:T1e,createTheme:P1e,globalCss:ife,keyframes:R1e}=zue({prefix:"leva",theme:rfe(),utils:Wt(Wt({},ym),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":ym.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":ym.$focusStyle()(n)}),$hover:n=>({"&:hover":ym.$hoverStyle()(n)}),$active:n=>({"&:active":ym.$activeStyle()(n)})})}),sfe=ife({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function ll(n,e){const{theme:t}=B.useContext(UG);if(!(n in t)||!(e in t[n]))return qa(Qn.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const GG=Lt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),HG=Lt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${GG}`]:{paddingLeft:0}}),ofe=Lt(HG,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),afe=Lt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),lfe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],ufe=["onUpdate"];function RT(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,c=Fn(n,lfe);const{id:f,emitOnEditStart:d,emitOnEditEnd:m,disabled:g}=Ri(),v=a||f,y=B.useRef(null),_=u>0,x=_?"textarea":"input",w=B.useCallback(E=>R=>{const b=R.currentTarget.value;E(b)},[]);he.useEffect(()=>{const E=y.current,R=w(b=>{r(b),m()});return E==null||E.addEventListener("blur",R),()=>E==null?void 0:E.removeEventListener("blur",R)},[w,r,m]);const S=B.useCallback(E=>{E.key==="Enter"&&w(r)(E)},[w,r]),T=Object.assign({as:x},_?{rows:u}:{},c);return he.createElement(afe,{textArea:_},e&&typeof e=="string"?he.createElement(HG,null,e):e,he.createElement(GG,Ir({levaType:o,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:w(i),onFocus:()=>d(),onKeyPress:S,onKeyDown:s,disabled:g},T)))}function cfe(n){let{onUpdate:e}=n,t=Fn(n,ufe);const r=B.useCallback(s=>e(Gce(s)),[e]),i=B.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return he.createElement(RT,Ir({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const x_=Lt("div",{}),pM=Lt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),ffe=Lt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${pM}::after`]:{opacity:.6},[`${x_}:hover > & + ${pM}::after`]:{opacity:.6},[`${x_}:hover > & > svg`]:{opacity:1}}),VG=Lt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${x_}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),WG=Lt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${VG} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),jG=Lt(WG,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),dfe=Lt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),hfe=Lt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),mM=Lt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),pfe=Lt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${mM}`]:{pointerEvents:"auto"}}}}}),$G=Lt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),mfe=Lt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),gfe=Lt(Ice,{fill:"$toolTipBackground"});function BT({children:n}){const{className:e}=B.useContext(UG);return he.createElement(lue,{className:e},n)}const vfe=["align"];function yfe(){const{id:n,disable:e,disabled:t}=Ri();return he.createElement(he.Fragment,null,he.createElement(hfe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),he.createElement("label",{htmlFor:n+"__disable"}))}function _fe(n){const{id:e,optional:t,hint:r}=Ri(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return he.createElement(he.Fragment,null,t&&he.createElement(yfe,null),r!==void 0?he.createElement(Pce,null,he.createElement(Rce,{asChild:!0},he.createElement(mM,Ir({},i,n))),he.createElement(Bce,{side:"top",sideOffset:2},he.createElement(mfe,null,r,he.createElement(gfe,null)))):he.createElement(mM,Ir({},i,s,n)))}function Zo(n){let{align:e}=n,t=Fn(n,vfe);const{value:r,label:i,key:s,disabled:o}=Ri(),{hideCopyButton:a}=nfe(),l=!a&&s!==void 0,[u,c]=B.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),c(!0)}catch{qa(Qn.CLIPBOARD_ERROR,{[s]:r})}};return he.createElement(dfe,{align:e,onPointerLeave:()=>c(!1)},he.createElement(_fe,t),l&&!o&&he.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},he.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),he.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):he.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},he.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),he.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const xfe=["toggled"],wfe=Lt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function IT(n){let{toggled:e}=n,t=Fn(n,xfe);return he.createElement(wfe,Ir({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),he.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Sfe=["input"];function wo(n){let{input:e}=n,t=Fn(n,Sfe);return e?he.createElement(jG,t):he.createElement(WG,t)}function XG({value:n,type:e,settings:t,setValue:r}){const[i,s]=B.useState(mF(e,n,t)),o=B.useRef(n),a=B.useRef(t);a.current=t;const l=B.useCallback(c=>s(mF(e,c,a.current)),[e]),u=B.useCallback(c=>{try{r(c)}catch(f){const{type:d,previousValue:m}=f;if(d!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return B.useEffect(()=>{g_(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function P0(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Ri();return Bte(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function bfe(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!1);return B.useEffect(()=>{const i=BG(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),B.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function KG(){const n=B.useRef(null),e=B.useRef({x:0,y:0}),t=B.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const Afe=["__refCount"],Mb=(n,e)=>{if(!n[e])return null;const t=n[e];return Fn(t,Afe)};function Mfe(n){const e=T0(),[t,r]=B.useState(Mb(e.getData(),n)),i=B.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=B.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=B.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=B.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=B.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return B.useEffect(()=>{r(Mb(e.getData(),n));const u=e.useStore.subscribe(c=>Mb(c.data,n),r,{equalityFn:uG});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const Efe=Lt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),JG=Lt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),gM=Lt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),YG=Lt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),ZG=Lt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Cfe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=B.useRef(null),a=B.useRef(null),l=B.useRef(0),u=ll("sizes","scrubberWidth"),c=P0(({event:d,first:m,xy:[g],movement:[v],memo:y})=>{if(m){const{width:x,left:w}=o.current.getBoundingClientRect();l.current=x-parseFloat(u),y=(d==null?void 0:d.target)===a.current?n:__((g-w)/x,e,t)}const _=y+__(v/l.current,0,t-e);return r(FG(_,{step:i,initialValue:s})),y}),f=y_(n,e,t);return he.createElement(YG,Ir({ref:o},c()),he.createElement(JG,null,he.createElement(ZG,{style:{left:0,right:`${(1-f)*100}%`}})),he.createElement(gM,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const Tfe=he.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=B.useState(!1),o=P0(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*IG(u)),c=0),c));return he.createElement(ofe,Ir({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function QG({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&he.createElement(Tfe,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return he.createElement(cfe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function Pfe(){const n=Ri(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return he.createElement(wo,{input:!0},he.createElement(Zo,null,e),he.createElement(Efe,{hasRange:l},l&&he.createElement(Cfe,Ir({value:parseFloat(t),onDrag:r},i)),he.createElement(QG,Ir({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Rfe}=kG,Bfe=Fn(kG,["sanitizeStep"]);var Ife=Wt({component:Pfe},Bfe);const Dfe=(n,e)=>rs().schema({options:rs().passesAnyOf(rs().object(),rs().array())}).test(e),Lfe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},Ffe=(n,{values:e})=>e.indexOf(n),kfe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var Ofe=Object.freeze({__proto__:null,schema:Dfe,sanitize:Lfe,format:Ffe,normalize:kfe});const Ufe=Lt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),vM=Lt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Nfe=Lt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${vM}:focus + &`]:{$focusStyle:""},[`${vM}:hover + &`]:{$hoverStyle:""}});function zfe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=B.useRef();return e===a[n]&&(l.current=o[n]),he.createElement(Ufe,null,he.createElement(vM,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,c)=>he.createElement("option",{key:u,value:c},u))),he.createElement(Nfe,null,l.current),he.createElement(IT,{toggled:!0}))}function Gfe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(zfe,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var Hfe=Wt({component:Gfe},Ofe);const Vfe=n=>rs().string().test(n),Wfe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},jfe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var $fe=Object.freeze({__proto__:null,schema:Vfe,sanitize:Wfe,normalize:jfe});const Xfe=["displayValue","onUpdate","onChange","editable"],Kfe=Lt("div",{whiteSpace:"pre-wrap"});function Jfe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Fn(n,Xfe);return i?he.createElement(RT,Ir({value:e,onUpdate:t,onChange:r},s)):he.createElement(Kfe,null,e)}function Yfe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(Jfe,Ir({displayValue:t,onUpdate:r,onChange:i},e)))}var Zfe=Wt({component:Yfe},$fe);const Qfe=n=>rs().boolean().test(n),qfe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var ede=Object.freeze({__proto__:null,schema:Qfe,sanitize:qfe});const tde=Lt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function nde({value:n,onUpdate:e,id:t,disabled:r}){return he.createElement(tde,null,he.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),he.createElement("label",{htmlFor:t},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},he.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function rde(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(nde,{value:e,onUpdate:t,id:i,disabled:r}))}var ide=Wt({component:rde},ede);const sde=["locked"];function ode({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=B.useRef(n[t]);o.current=n[t];const a=B.useCallback(u=>i({[t]:RG({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=XG({type:"NUMBER",value:n[t],settings:r,setValue:a});return he.createElement(QG,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const ade=Lt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function lde(n){let{locked:e}=n,t=Fn(n,sde);return he.createElement("svg",Ir({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?he.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):he.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function DT({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=Ri(),{lock:o,locked:a}=t;return he.createElement(ade,{withLock:o},o&&he.createElement(lde,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>he.createElement(ode,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const qG=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=LG(Wt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},ude=["lock"],cde=["value"];function fde(n){const e=rs().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function dde(n){return Array.isArray(n)?"array":"object"}function Qm(n,e,t){return dde(n)===e?n:e==="array"?Object.values(n):jce(n,t)}const hde=(n,e,t)=>{const r=Qm(n,"object",e.keys);for(let o in r)r[o]=DG(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Qm(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],c=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*c}else s=Wt(Wt({},o),r)}return Qm(s,e.format,e.keys)},pde=(n,e)=>Qm(n,"object",e.keys),mde=n=>!!n&&("step"in n||"min"in n||"max"in n);function gde(n,e,t=[]){const{lock:r=!1}=e,i=Fn(e,ude),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Qm(n,"object",o),l=mde(i)?o.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=qG(a,l);return{value:s==="array"?n:a,settings:Wt(Wt({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function e8(n){return{schema:fde(n.length),normalize:e=>{let{value:t}=e,r=Fn(e,cde);return gde(t,r,n)},format:(e,t)=>pde(e,t),sanitize:(e,t,r)=>hde(e,t,r)}}var vde={grad:.9,turn:360,rad:360/(2*Math.PI)},Wa=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Qr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},fo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},t8=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},MF=function(n){return{r:fo(n.r,0,255),g:fo(n.g,0,255),b:fo(n.b,0,255),a:fo(n.a)}},Eb=function(n){return{r:Qr(n.r),g:Qr(n.g),b:Qr(n.b),a:Qr(n.a,3)}},yde=/^#([0-9a-f]{3,8})$/i,jy=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},n8=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},r8=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},EF=function(n){return{h:t8(n.h),s:fo(n.s,0,100),l:fo(n.l,0,100),a:fo(n.a)}},CF=function(n){return{h:Qr(n.h),s:Qr(n.s),l:Qr(n.l),a:Qr(n.a,3)}},TF=function(n){return r8((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},qm=function(n){return{h:(e=n8(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},_de=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xde=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wde=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sde=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yM={string:[[function(n){var e=yde.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Qr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Qr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=wde.exec(n)||Sde.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:MF({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=_de.exec(n)||xde.exec(n);if(!e)return null;var t,r,i=EF({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(vde[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return TF(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Wa(e)&&Wa(t)&&Wa(r)?MF({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Wa(e)||!Wa(t)||!Wa(r))return null;var o=EF({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return TF(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Wa(e)||!Wa(t)||!Wa(r))return null;var o=function(a){return{h:t8(a.h),s:fo(a.s,0,100),v:fo(a.v,0,100),a:fo(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return r8(o)},"hsv"]]},PF=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},i8=function(n){return typeof n=="string"?PF(n.trim(),yM.string):typeof n=="object"&&n!==null?PF(n,yM.object):[null,void 0]},bde=function(n){return i8(n)[1]},Cb=function(n,e){var t=qm(n);return{h:t.h,s:fo(t.s+100*e,0,100),l:t.l,a:t.a}},Tb=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},RF=function(n,e){var t=qm(n);return{h:t.h,s:t.s,l:fo(t.l+100*e,0,100),a:t.a}},_M=function(){function n(e){this.parsed=i8(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Qr(Tb(this.rgba),2)},n.prototype.isDark=function(){return Tb(this.rgba)<.5},n.prototype.isLight=function(){return Tb(this.rgba)>=.5},n.prototype.toHex=function(){return e=Eb(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?jy(Qr(255*s)):"","#"+jy(t)+jy(r)+jy(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return Eb(this.rgba)},n.prototype.toRgbString=function(){return e=Eb(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return CF(qm(this.rgba))},n.prototype.toHslString=function(){return e=CF(qm(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=n8(this.rgba),{h:Qr(e.h),s:Qr(e.s),v:Qr(e.v),a:Qr(e.a,3)};var e},n.prototype.invert=function(){return Hi({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Hi(Cb(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Hi(Cb(this.rgba,-e))},n.prototype.grayscale=function(){return Hi(Cb(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Hi(RF(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Hi(RF(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Hi({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Qr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=qm(this.rgba);return typeof e=="number"?Hi({h:e,s:t.s,l:t.l,a:t.a}):Qr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Hi(e).toHex()},n}(),Hi=function(n){return n instanceof _M?n:new _M(n)},BF=[],Ade=function(n){n.forEach(function(e){BF.indexOf(e)<0&&(e(_M,yM),BF.push(e))})};function Mde(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,d="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var g in t){var v=(a=c,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<f&&(f=v,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function ep(){return(ep=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function LT(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function xM(n){var e=B.useRef(n),t=B.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Ih=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},eg=function(n){return"touches"in n},wM=function(n){return n&&n.ownerDocument.defaultView||self},IF=function(n,e,t){var r=n.getBoundingClientRect(),i=eg(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:Ih((i.pageX-(r.left+wM(n).pageXOffset))/r.width),top:Ih((i.pageY-(r.top+wM(n).pageYOffset))/r.height)}},DF=function(n){!eg(n)&&n.preventDefault()},FT=he.memo(function(n){var e=n.onMove,t=n.onKey,r=LT(n,["onMove","onKey"]),i=B.useRef(null),s=xM(e),o=xM(t),a=B.useRef(null),l=B.useRef(!1),u=B.useMemo(function(){var m=function(y){DF(y),(eg(y)?y.touches.length>0:y.buttons>0)&&i.current?s(IF(i.current,y,a.current)):v(!1)},g=function(){return v(!1)};function v(y){var _=l.current,x=wM(i.current),w=y?x.addEventListener:x.removeEventListener;w(_?"touchmove":"mousemove",m),w(_?"touchend":"mouseup",g)}return[function(y){var _=y.nativeEvent,x=i.current;if(x&&(DF(_),!function(S,T){return T&&!eg(S)}(_,l.current)&&x)){if(eg(_)){l.current=!0;var w=_.changedTouches||[];w.length&&(a.current=w[0].identifier)}x.focus(),s(IF(x,_,a.current)),v(!0)}},function(y){var _=y.which||y.keyCode;_<37||_>40||(y.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},v]},[o,s]),c=u[0],f=u[1],d=u[2];return B.useEffect(function(){return d},[d]),he.createElement("div",ep({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),R0=function(n){return n.filter(Boolean).join(" ")},kT=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=R0(["react-colorful__pointer",n.className]);return he.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},he.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Vi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},s8=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Vi(n.h),s:Vi(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Vi(i/2),a:Vi(r,2)}},SM=function(n){var e=s8(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Pb=function(n){var e=s8(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},o8=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:Vi(255*[r,a,o,o,l,r][u]),g:Vi(255*[l,r,r,a,o,o][u]),b:Vi(255*[o,o,l,r,r,a][u]),a:Vi(i,2)}},a8=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Vi(60*(a<0?a+6:a)),s:Vi(s?o/s*100:0),v:Vi(s/255*100),a:i}},l8=he.memo(function(n){var e=n.hue,t=n.onChange,r=R0(["react-colorful__hue",n.className]);return he.createElement("div",{className:r},he.createElement(FT,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Ih(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Vi(e),"aria-valuemax":"360","aria-valuemin":"0"},he.createElement(kT,{className:"react-colorful__hue-pointer",left:e/360,color:SM({h:e,s:100,v:100,a:1})})))}),u8=he.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:SM({h:e.h,s:100,v:100,a:1})};return he.createElement("div",{className:"react-colorful__saturation",style:r},he.createElement(FT,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Ih(e.s+100*i.left,0,100),v:Ih(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Vi(e.s)+"%, Brightness "+Vi(e.v)+"%"},he.createElement(kT,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:SM(e)})))}),OT=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function c8(n,e,t){var r=xM(t),i=B.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=B.useRef({color:e,hsva:s});B.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),B.useEffect(function(){var u;OT(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,n,r]);var l=B.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var Ede=typeof window<"u"?B.useLayoutEffect:B.useEffect,Cde=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},LF=new Map,f8=function(n){Ede(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!LF.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,LF.set(e,t);var r=Cde();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},Tde=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=LT(n,["className","colorModel","color","onChange"]),a=B.useRef(null);f8(a);var l=c8(t,i,s),u=l[0],c=l[1],f=R0(["react-colorful",e]);return he.createElement("div",ep({},o,{ref:a,className:f}),he.createElement(u8,{hsva:u,onChange:c}),he.createElement(l8,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},Pde=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+Pb(Object.assign({},t,{a:0}))+", "+Pb(Object.assign({},t,{a:1}))+")"},s=R0(["react-colorful__alpha",e]),o=Vi(100*t.a);return he.createElement("div",{className:s},he.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),he.createElement(FT,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Ih(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},he.createElement(kT,{className:"react-colorful__alpha-pointer",left:t.a,color:Pb(t)})))},Rde=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=LT(n,["className","colorModel","color","onChange"]),a=B.useRef(null);f8(a);var l=c8(t,i,s),u=l[0],c=l[1],f=R0(["react-colorful",e]);return he.createElement("div",ep({},o,{ref:a,className:f}),he.createElement(u8,{hsva:u,onChange:c}),he.createElement(l8,{hue:u.h,onChange:c}),he.createElement(Pde,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},Bde={defaultColor:{r:0,g:0,b:0,a:1},toHsva:a8,fromHsva:o8,equal:OT},Ide=function(n){return he.createElement(Rde,ep({},n,{colorModel:Bde}))},Dde={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return a8({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=o8(n)).r,g:e.g,b:e.b};var e},equal:OT},Lde=function(n){return he.createElement(Tde,ep({},n,{colorModel:Dde}))};function tp(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function np(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Fde(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function kde(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Fde(arguments[e]));return n}var Ode=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function B0(n,e){var t=Ude(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Ude(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=Ode.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var Nde=[".DS_Store","Thumbs.db"];function zde(n){return tp(this,void 0,void 0,function(){return np(this,function(e){return w_(n)&&Gde(n)?[2,jde(n.dataTransfer,n.type)]:Hde(n)?[2,Vde(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Wde(n)]:[2,[]]})})}function Gde(n){return w_(n.dataTransfer)}function Hde(n){return w_(n)&&w_(n.target)}function w_(n){return typeof n=="object"&&n!==null}function Vde(n){return bM(n.target.files).map(function(e){return B0(e)})}function Wde(n){return tp(this,void 0,void 0,function(){var e;return np(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return B0(r)})]}})})}function jde(n,e){return tp(this,void 0,void 0,function(){var t,r;return np(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=bM(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map($de))]):[3,2];case 1:return r=i.sent(),[2,FF(d8(r))];case 2:return[2,FF(bM(n.files).map(function(s){return B0(s)}))]}})})}function FF(n){return n.filter(function(e){return Nde.indexOf(e.name)===-1})}function bM(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function $de(n){if(typeof n.webkitGetAsEntry!="function")return kF(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?h8(e):kF(n)}function d8(n){return n.reduce(function(e,t){return kde(e,Array.isArray(t)?d8(t):[t])},[])}function kF(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=B0(e);return Promise.resolve(t)}function Xde(n){return tp(this,void 0,void 0,function(){return np(this,function(e){return[2,n.isDirectory?h8(n):Kde(n)]})})}function h8(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return tp(o,void 0,void 0,function(){var l,u,c;return np(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Xde)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Kde(n){return tp(this,void 0,void 0,function(){return np(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=B0(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var Jde=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function OF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function UF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(t),!0).forEach(function(r){p8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p8(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NF(n,e){return qde(n)||Qde(n,e)||Zde(n,e)||Yde()}function Yde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zde(n,e){if(n){if(typeof n=="string")return zF(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zF(n,e)}}function zF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Qde(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function qde(n){if(Array.isArray(n))return n}var ehe="file-invalid-type",the="file-too-large",nhe="file-too-small",rhe="too-many-files",ihe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:ehe,message:"File type must be ".concat(t)}},GF=function(e){return{code:the,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},HF=function(e){return{code:nhe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},she={code:rhe,message:"Too many files"};function m8(n,e){var t=n.type==="application/x-moz-file"||Jde(n,e);return[t,t?null:ihe(e)]}function g8(n,e,t){if(_m(n.size))if(_m(e)&&_m(t)){if(n.size>t)return[!1,GF(t)];if(n.size<e)return[!1,HF(e)]}else{if(_m(e)&&n.size<e)return[!1,HF(e)];if(_m(t)&&n.size>t)return[!1,GF(t)]}return[!0,null]}function _m(n){return n!=null}function ohe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=m8(a,t),u=NF(l,1),c=u[0],f=g8(a,r,i),d=NF(f,1),m=d[0];return c&&m})}function S_(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function $y(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function VF(n){n.preventDefault()}function ahe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function lhe(n){return n.indexOf("Edge/")!==-1}function uhe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ahe(n)||lhe(n)}function aa(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!S_(r)&&a&&a.apply(void 0,[r].concat(s)),S_(r)})}}function che(){return"showOpenFilePicker"in window}function fhe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return UF(UF({},e),{},p8({},t,[]))},{}):{}}]}function dhe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function hhe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var phe=["children"],mhe=["open"],ghe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vhe=["refKey","onChange","onClick"];function yhe(n){return whe(n)||xhe(n)||v8(n)||_he()}function _he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xhe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function whe(n){if(Array.isArray(n))return AM(n)}function Rb(n,e){return Ahe(n)||bhe(n,e)||v8(n,e)||She()}function She(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v8(n,e){if(n){if(typeof n=="string")return AM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AM(n,e)}}function AM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function bhe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Ahe(n){if(Array.isArray(n))return n}function WF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(t),!0).forEach(function(r){MM(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function MM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b_(n,e){if(n==null)return{};var t=Mhe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Mhe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var UT=B.forwardRef(function(n,e){var t=n.children,r=b_(n,phe),i=_8(r),s=i.open,o=b_(i,mhe);return B.useImperativeHandle(e,function(){return{open:s}},[s]),he.createElement(B.Fragment,null,t(Zn(Zn({},o),{},{open:s})))});UT.displayName="Dropzone";var y8={disabled:!1,getFilesFromEvent:zde,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};UT.defaultProps=y8;UT.propTypes={children:_n.func,accept:_n.oneOfType([_n.string,_n.arrayOf(_n.string)]),multiple:_n.bool,preventDropOnDocument:_n.bool,noClick:_n.bool,noKeyboard:_n.bool,noDrag:_n.bool,noDragEventsBubbling:_n.bool,minSize:_n.number,maxSize:_n.number,maxFiles:_n.number,disabled:_n.bool,getFilesFromEvent:_n.func,onFileDialogCancel:_n.func,onFileDialogOpen:_n.func,useFsAccessApi:_n.bool,onDragEnter:_n.func,onDragLeave:_n.func,onDragOver:_n.func,onDrop:_n.func,onDropAccepted:_n.func,onDropRejected:_n.func,validator:_n.func};var EM={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function _8(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Zn(Zn({},y8),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,d=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,_=e.useFsAccessApi,x=e.preventDropOnDocument,w=e.noClick,S=e.noKeyboard,T=e.noDrag,E=e.noDragEventsBubbling,R=e.validator,b=B.useMemo(function(){return typeof y=="function"?y:jF},[y]),M=B.useMemo(function(){return typeof v=="function"?v:jF},[v]),C=B.useRef(null),L=B.useRef(null),D=B.useReducer(Ehe,EM),z=Rb(D,2),F=z[0],H=z[1],G=F.isFocused,te=F.isFileDialogActive,V=F.draggedFiles,K=B.useRef(typeof window<"u"&&window.isSecureContext&&_&&che()),j=function(){!K.current&&te&&setTimeout(function(){if(L.current){var fe=L.current.files;fe.length||(H({type:"closeDialog"}),M())}},300)};B.useEffect(function(){return window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)}},[L,te,M,K]);var J=B.useRef([]),W=function(fe){C.current&&C.current.contains(fe.target)||(fe.preventDefault(),J.current=[])};B.useEffect(function(){return x&&(document.addEventListener("dragover",VF,!1),document.addEventListener("drop",W,!1)),function(){x&&(document.removeEventListener("dragover",VF),document.removeEventListener("drop",W))}},[C,x]);var ne=B.useCallback(function(O){O.preventDefault(),O.persist(),Te(O),J.current=[].concat(yhe(J.current),[O.target]),$y(O)&&Promise.resolve(i(O)).then(function(fe){S_(O)&&!E||(H({draggedFiles:fe,isDragActive:!0,type:"setDraggedFiles"}),u&&u(O))})},[i,u,E]),ue=B.useCallback(function(O){O.preventDefault(),O.persist(),Te(O);var fe=$y(O);if(fe&&O.dataTransfer)try{O.dataTransfer.dropEffect="copy"}catch{}return fe&&f&&f(O),!1},[f,E]),q=B.useCallback(function(O){O.preventDefault(),O.persist(),Te(O);var fe=J.current.filter(function(Ne){return C.current&&C.current.contains(Ne)}),we=fe.indexOf(O.target);we!==-1&&fe.splice(we,1),J.current=fe,!(fe.length>0)&&(H({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),$y(O)&&c&&c(O))},[C,c,E]),pe=B.useCallback(function(O,fe){var we=[],Ne=[];O.forEach(function(Pe){var $e=m8(Pe,t),Ge=Rb($e,2),Be=Ge[0],rt=Ge[1],et=g8(Pe,o,s),Ze=Rb(et,2),Xe=Ze[0],We=Ze[1],ce=R?R(Pe):null;if(Be&&Xe&&!ce)we.push(Pe);else{var Le=[rt,We];ce&&(Le=Le.concat(ce)),Ne.push({file:Pe,errors:Le.filter(function(Qe){return Qe})})}}),(!a&&we.length>1||a&&l>=1&&we.length>l)&&(we.forEach(function(Pe){Ne.push({file:Pe,errors:[she]})}),we.splice(0)),H({acceptedFiles:we,fileRejections:Ne,type:"setFiles"}),d&&d(we,Ne,fe),Ne.length>0&&g&&g(Ne,fe),we.length>0&&m&&m(we,fe)},[H,a,t,o,s,l,d,m,g,R]),me=B.useCallback(function(O){O.preventDefault(),O.persist(),Te(O),J.current=[],$y(O)&&Promise.resolve(i(O)).then(function(fe){S_(O)&&!E||pe(fe,O)}),H({type:"reset"})},[i,pe,E]),se=B.useCallback(function(){if(K.current){H({type:"openDialog"}),b();var O={multiple:a,types:fhe(t)};window.showOpenFilePicker(O).then(function(fe){return i(fe)}).then(function(fe){pe(fe,null),H({type:"closeDialog"})}).catch(function(fe){dhe(fe)?(M(fe),H({type:"closeDialog"})):hhe(fe)&&(K.current=!1,L.current&&(L.current.value=null,L.current.click()))});return}L.current&&(H({type:"openDialog"}),b(),L.current.value=null,L.current.click())},[H,b,M,_,pe,t,a]),N=B.useCallback(function(O){!C.current||!C.current.isEqualNode(O.target)||(O.key===" "||O.key==="Enter"||O.keyCode===32||O.keyCode===13)&&(O.preventDefault(),se())},[C,se]),X=B.useCallback(function(){H({type:"focus"})},[]),Z=B.useCallback(function(){H({type:"blur"})},[]),ee=B.useCallback(function(){w||(uhe()?setTimeout(se,0):se())},[w,se]),ie=function(fe){return r?null:fe},ge=function(fe){return S?null:ie(fe)},Ce=function(fe){return T?null:ie(fe)},Te=function(fe){E&&fe.stopPropagation()},Ve=B.useMemo(function(){return function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=O.refKey,we=fe===void 0?"ref":fe,Ne=O.role,Pe=O.onKeyDown,$e=O.onFocus,Ge=O.onBlur,Be=O.onClick,rt=O.onDragEnter,et=O.onDragOver,Ze=O.onDragLeave,Xe=O.onDrop,We=b_(O,ghe);return Zn(Zn(MM({onKeyDown:ge(aa(Pe,N)),onFocus:ge(aa($e,X)),onBlur:ge(aa(Ge,Z)),onClick:ie(aa(Be,ee)),onDragEnter:Ce(aa(rt,ne)),onDragOver:Ce(aa(et,ue)),onDragLeave:Ce(aa(Ze,q)),onDrop:Ce(aa(Xe,me)),role:typeof Ne=="string"&&Ne!==""?Ne:"button"},we,C),!r&&!S?{tabIndex:0}:{}),We)}},[C,N,X,Z,ee,ne,ue,q,me,S,T,r]),Re=B.useCallback(function(O){O.stopPropagation()},[]),ze=B.useMemo(function(){return function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=O.refKey,we=fe===void 0?"ref":fe,Ne=O.onChange,Pe=O.onClick,$e=b_(O,vhe),Ge=MM({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:ie(aa(Ne,me)),onClick:ie(aa(Pe,Re)),tabIndex:-1},we,L);return Zn(Zn({},Ge),$e)}},[L,t,a,me,r]),je=V.length,be=je>0&&ohe({files:V,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Q=je>0&&!be;return Zn(Zn({},F),{},{isDragAccept:be,isDragReject:Q,isFocused:G&&!r,getRootProps:Ve,getInputProps:ze,rootRef:C,inputRef:L,open:ie(se)})}function Ehe(n,e){switch(e.type){case"focus":return Zn(Zn({},n),{},{isFocused:!0});case"blur":return Zn(Zn({},n),{},{isFocused:!1});case"openDialog":return Zn(Zn({},EM),{},{isFileDialogActive:!0});case"closeDialog":return Zn(Zn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Zn(Zn({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Zn(Zn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Zn({},EM);default:return n}}function jF(){}const Che=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());u=d=>{const m=o(d);if(!c(f,m)){const g=f;a(f=m,g)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var The=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Phe=The;function $F(n){return Phe(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var x8=function(e){var t,r;return!($F(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,$F(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Rhe=x8,NT=function(e){return Rhe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Bhe=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},Ihe=NT,Dhe=Bhe;function w8(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];CM(i)&&Dhe(i,Lhe,n)}return n}function Lhe(n,e){if(Fhe(e)){var t=this[e];CM(n)&&CM(t)?w8(t,n):this[e]=n}}function CM(n){return Ihe(n)&&!Array.isArray(n)}function Fhe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var khe=w8;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ohe=function(n,e,t,r,i){if(!Uhe(n)||!e)return n;if(e=Xy(e),t&&(e+="."+Xy(t)),r&&(e+="."+Xy(r)),i&&(e+="."+Xy(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function Uhe(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Xy(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Nhe=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(r[u]=o[u])}return r},zhe=NT,Ghe=Nhe,Hhe=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");XF(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];Whe(t)&&(t=jhe(t)),XF(t)&&(Vhe(n,t),Ghe(n,t))}return n};function Vhe(n,e){for(var t in e)$he(e,t)&&(n[t]=e[t])}function Whe(n){return n&&typeof n=="string"}function jhe(n){var e={};for(var t in n)e[t]=n[t];return e}function XF(n){return n&&typeof n=="object"||zhe(n)}function $he(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Xhe=Hhe,Khe=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=Xhe({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,c=n.length,f=-1,d;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<c;){var g=n[f],v=n[f+1],y={val:g,idx:f,arr:l,str:n};if(o.push(y),g==="\\"){y.val=Yhe(r,n,f)===!0?g+v:v,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[g]){a.push(g);var _=m(),x=f+1;if(n.indexOf(_,x+1)!==-1)for(;a.length&&x<c;){var w=n[++x];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){x=TM(n,w,x+1);continue}if(_=m(),a.length&&n.indexOf(_,x+1)===-1)break;if(s[w]){a.push(w);continue}_===w&&a.pop()}if(d=x,d===-1){l[l.length-1]+=g;continue}g=n.slice(f,d+1),y.val=g,y.idx=f=d}if(i.indexOf(g)!==-1){if(d=TM(n,g,f+1),d===-1){l[l.length-1]+=g;continue}Jhe(g,r)===!0?g=n.slice(f,d+1):g=n.slice(f+1,d),y.val=g,y.idx=f=d}if(typeof t=="function"&&(t(y,o),g=y.val,f=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function TM(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?TM(n,e,i+1):i}function Jhe(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Yhe(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Zhe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},KF=Zhe,Qhe=function(e){KF(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];KF(i)&&qhe(e,i)}return e};function qhe(n,e){for(var t in e)epe(e,t)&&(n[t]=e[t])}function epe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var tpe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var npe=Khe,rpe=Qhe,JF=x8,YF=tpe,ipe=function(n,e,t){if(!YF(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=npe(e,{sep:".",brackets:!0}).filter(spe),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){YF(o[a])||(o[a]={}),o=o[a];continue}JF(o[a])&&JF(t)?o[a]=rpe({},o[a],t):o[a]=t}return n};function spe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Bb=NT,ZF=khe,ope=Ohe,QF=ipe,ape=function(e,t,r){if(!Bb(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return ZF.apply(null,arguments);if(typeof r=="string")return QF(e,t,r),e;var i=ope(e,t);return Bb(r)&&Bb(i)&&(r=ZF({},i,r)),QF(e,t,r),e};const lpe=$o(ape),zT=(...n)=>n.filter(Boolean).join(".");function upe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function cpe(n){const e=B.useRef(null),t=B.useRef(null),r=B.useRef(!0);return B.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),B.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const fpe=n=>{const[e,t]=B.useState(n.getVisiblePaths());return B.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:uG});return()=>r()},[n]),e};function S8(n=3){const e=B.useRef(null),t=B.useRef(null),[r,i]=B.useState(!1),s=B.useCallback(()=>i(!0),[]),o=B.useCallback(()=>i(!1),[]);return B.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}Ade([Mde]);const dpe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};rs.extend({color:()=>n=>Hi(n).isValid()});const hpe=n=>rs().color().test(n);function b8(n,{format:e,hasAlpha:t,isString:r}){const i=dpe[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?Wce(s,["a"]):s}const A8=(n,e)=>{const t=Hi(n);if(!t.isValid())throw Error("Invalid color");return b8(t,e)},ppe=(n,e)=>b8(Hi(n),Wt(Wt({},e),{},{isString:!0,format:"hex"})),mpe=({value:n})=>{const e=bde(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:A8(n,i),settings:i}};var gpe=Object.freeze({__proto__:null,schema:hpe,sanitize:A8,format:ppe,normalize:mpe});const vpe=Lt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),ype=Lt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),_pe=Lt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function qF(n,e){return e!=="rgb"?Hi(n).toRgb():n}function xpe({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Ri(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:d}=S8(),m=B.useRef(0),[g,v]=B.useState(()=>qF(n,o)),y=a?Ide:Lde,_=()=>{v(qF(n,o)),f(),i()},x=()=>{d(),s(),window.clearTimeout(m.current)},w=()=>{m.current=window.setTimeout(x,500)};return B.useEffect(()=>()=>window.clearTimeout(m.current),[]),he.createElement(he.Fragment,null,he.createElement(vpe,{ref:l,active:c,onClick:()=>_(),style:{color:e}}),c&&he.createElement(BT,null,he.createElement($G,{onPointerUp:x}),he.createElement(_pe,{ref:u,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:S=>S.buttons===0&&w()},he.createElement(y,{color:g,onChange:r}))))}function wpe(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,t),he.createElement(ype,null,he.createElement(xpe,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),he.createElement(RT,{value:e,onChange:r,onUpdate:i})))}var Spe=Wt({component:wpe},gpe);function bpe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(DT,{value:e,settings:r,onUpdate:t}))}var Ape=Wt({component:bpe},e8(["x","y","z"]));const Mpe=Lt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Epe=Lt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Cpe({value:n,settings:e,onUpdate:t}){const r=B.useRef(),i=B.useRef(0),s=B.useRef(0),o=B.useRef(1),[a,l]=B.useState(!1),[u,c]=B.useState(!1),[f,d]=KG(),m=B.useRef(null),g=B.useRef(null);B.useLayoutEffect(()=>{if(a){const{top:D,left:z,width:F,height:H}=m.current.getBoundingClientRect();g.current.style.left=z+F/2+"px",g.current.style.top=D+H/2+"px"}},[a]);const{keys:[v,y],joystick:_}=e,x=_==="invertY"?1:-1,{[v]:{step:w},[y]:{step:S}}=e,T=ll("sizes","joystickWidth"),E=ll("sizes","joystickHeight"),R=parseFloat(T)*.8/2,b=parseFloat(E)*.8/2,M=B.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*R}),s.current&&d({y:s.current*-b}),r.current=window.setInterval(()=>{t(D=>{const z=w*i.current*o.current,F=x*S*s.current*o.current;return Array.isArray(D)?{[v]:D[0]+z,[y]:D[1]+F}:{[v]:D[v]+z,[y]:D[y]+F}})},16))},[R,b,t,d,w,S,v,y,x]),C=B.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);B.useEffect(()=>{function D(z){o.current=IG(z)}return window.addEventListener("keydown",D),window.addEventListener("keyup",D),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",D),window.removeEventListener("keyup",D)}},[]);const L=P0(({first:D,active:z,delta:[F,H],movement:[G,te]})=>{D&&l(!0);const V=Nu(G,-R,R),K=Nu(te,-b,b);i.current=Math.abs(G)>Math.abs(V)?Math.sign(G-V):0,s.current=Math.abs(te)>Math.abs(K)?Math.sign(K-te):0;let j=n[v],J=n[y];z?(i.current||(j+=F*w*o.current,d({x:V})),s.current||(J-=x*H*S*o.current,d({y:K})),i.current||s.current?M():C(),t({[v]:j,[y]:J})):(l(!1),i.current=0,s.current=0,d({x:0,y:0}),C())});return he.createElement(Mpe,Ir({ref:m},L()),a&&he.createElement(BT,null,he.createElement(Epe,{ref:g,isOutOfBounds:u},he.createElement("div",null),he.createElement("span",{ref:f}))))}const Tpe=Lt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Ppe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ri();return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(Tpe,{withJoystick:!!r.joystick},r.joystick&&he.createElement(Cpe,{value:e,settings:r,onUpdate:t}),he.createElement(DT,{value:e,settings:r,onUpdate:t})))}const Rpe=["joystick"],M8=e8(["x","y"]),Bpe=n=>{let{joystick:e=!0}=n,t=Fn(n,Rpe);const{value:r,settings:i}=M8.normalize(t);return{value:r,settings:Wt(Wt({},i),{},{joystick:e})}};var Ipe=Wt(Wt({component:Ppe},M8),{},{normalize:Bpe});const Dpe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},Lpe=(n,e)=>typeof e=="object"&&"image"in e,Fpe=({image:n})=>({value:n});var kpe=Object.freeze({__proto__:null,sanitize:Dpe,schema:Lpe,normalize:Fpe});const Ope=Lt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Upe=Lt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Npe=Lt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),zpe=Lt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Gpe=Lt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Hpe=Lt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Vpe(){const{label:n,value:e,onUpdate:t,disabled:r}=Ri(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=S8(),u=B.useCallback(g=>{g.length&&t(g[0])},[t]),c=B.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:d,isDragAccept:m}=_8({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(Ope,null,he.createElement(Npe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&he.createElement(BT,null,he.createElement($G,{onPointerUp:l,style:{cursor:"pointer"}}),he.createElement(zpe,{ref:s,style:{backgroundImage:`url(${e})`}})),he.createElement(Upe,f({isDragAccept:m}),he.createElement("input",d()),he.createElement(Gpe,null,m?"drop image":"click or drop")),he.createElement(Hpe,{onClick:c,disabled:!e})))}var Wpe=Wt({component:Vpe},kpe);const ek=rs().number(),jpe=(n,e)=>rs().array().length(2).every.number().test(n)&&rs().schema({min:ek,max:ek}).test(e),A_=n=>({min:n[0],max:n[1]}),E8=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?A_(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=Wt(Wt({},s),i);return[Nu(Number(o),e,Math.max(e,a)),Nu(Number(a),Math.min(t,o),t)]},$pe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=qG(A_(n),{min:r,max:r}),s=[e,t],o=Wt(Wt({},i),{},{bounds:s});return{value:E8(A_(n),o,n),settings:o}};var Xpe=Object.freeze({__proto__:null,schema:jpe,format:A_,sanitize:E8,normalize:$pe});const Kpe=["value","bounds","onDrag"],Jpe=["bounds"],Ype=Lt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Zpe(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Fn(n,Kpe);const o=B.useRef(null),a=B.useRef(null),l=B.useRef(null),u=B.useRef(0),c=ll("sizes","scrubberWidth"),f=P0(({event:g,first:v,xy:[y],movement:[_],memo:x={}})=>{if(v){const{width:S,left:T}=o.current.getBoundingClientRect();u.current=S-parseFloat(c);const E=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;x.pos=__((y-T)/S,t,r);const R=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=R<0||R===0&&x.pos<=e.min?"min":"max",E&&(x.pos=e[x.key])}const w=x.pos+__(_/u.current,0,r-t);return i({[x.key]:Rfe(w,s[x.key])}),x}),d=`calc(${y_(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,m=`calc(${1-y_(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return he.createElement(YG,Ir({ref:o},f()),he.createElement(JG,null,he.createElement(ZG,{style:{left:d,right:m}})),he.createElement(gM,{position:"left",ref:a,style:{left:d}}),he.createElement(gM,{position:"right",ref:l,style:{right:m}}))}function Qpe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ri(),i=Fn(r,Jpe);return he.createElement(he.Fragment,null,he.createElement(wo,{input:!0},he.createElement(Zo,null,n),he.createElement(Ype,null,he.createElement(Zpe,Ir({value:e},r,{onDrag:t})),he.createElement(DT,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var qpe=Wt({component:Qpe},Xpe);const eme=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},tme=["type","value"],nme=["onChange","transient","onEditStart","onEditEnd"],rme=function(){const e=$C(Che(()=>({data:{}}))),t=eme();this.storeId=Vce(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(d=>d.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in ya&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{let d=u[c];if(d){const{type:m,value:g}=f,v=Fn(f,tme);m!==d.type?qa(Qn.INPUT_TYPE_OVERRIDE,m):((d.__refCount===0||a)&&Object.assign(d,v),d.__refCount++)}else u[c]=Wt(Wt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return AF(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=Wt(Wt({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{try{AF(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{qa(Qn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Wt(Wt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Wt(Wt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,f])=>{if(c==="")return qa(Qn.EMPTY_KEY);let d=zT(a,c);if(f.type===ya.FOLDER){const m=s(f.schema,d,l);Object.assign(u,m),d in r||(r[d]=f.settings)}else if(c in l)qa(Qn.DUPLICATE_KEYS,c,d,l[c].path);else{const m=Yce(f,c,d,u);if(m){const{type:g,options:v,input:y}=m,{onChange:_,transient:x,onEditStart:w,onEditEnd:S}=v,T=Fn(v,nme);u[d]=Wt(Wt(Wt({type:g},T),y),{},{fromPanel:!0}),l[c]={path:d,onChange:_,transient:x,onEditStart:w,onEditEnd:S}}else qa(Qn.UNKNOWN_INPUT,d,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new rme;const tk=n=>"__levaInput"in n,ime=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=upe(i);(!r||s.toLowerCase().indexOf(r)>-1)&&lpe(t,o,{[s]:{__levaInput:!0,path:i}})}),t},sme=["type","label","path","valueKey","value","settings","setValue","disabled"];function ome(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,u=Fn(n,sme);const{displayValue:c,onChange:f,onUpdate:d}=XG({type:e,value:s,settings:o,setValue:a}),m=bf[e].component;return m?he.createElement(OG.Provider,{value:Wt({key:i,path:r,id:""+r,label:t,displayValue:c,value:s,onChange:f,onUpdate:d,settings:o,setValue:a,disabled:l},u)},he.createElement(pfe,{disabled:l},he.createElement(m,null))):(qa(Qn.NO_COMPONENT_FOR_TYPE,e,r),null)}const ame=Lt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function lme({onClick:n,settings:e,label:t}){const r=T0();return he.createElement(wo,null,he.createElement(ame,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const ume=Lt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),cme=Lt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),fme=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function dme(n){const{label:e,opts:t}=fme(n),r=T0();return he.createElement(wo,{input:!!e},e&&he.createElement(Zo,null,e),he.createElement(ume,null,Object.entries(t).map(([i,s])=>he.createElement(cme,{key:i,onClick:()=>s(r.get)},i))))}const hme=Lt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),C8=100;function pme(n,e){n.push(e),n.length>C8&&n.shift()}const mme=B.forwardRef(function({initialValue:n},e){const t=ll("colors","highlight3"),r=ll("colors","elevation2"),i=ll("colors","highlight1"),[s,o]=B.useMemo(()=>[Hi(i).alpha(.4).toRgbString(),Hi(i).alpha(.1).toRgbString()],[i]),a=B.useRef([n]),l=B.useRef(n),u=B.useRef(n),c=B.useRef(),f=B.useCallback((g,v)=>{if(!g)return;const{width:y,height:_}=g,x=new Path2D,w=y/C8,S=_*.05;for(let R=0;R<a.current.length;R++){const b=y_(a.current[R],l.current,u.current),M=w*R,C=_-b*(_-S*2)-S;x.lineTo(M,C)}v.clearRect(0,0,y,_);const T=new Path2D(x);T.lineTo(w*(a.current.length+1),_),T.lineTo(0,_),T.lineTo(0,0);const E=v.createLinearGradient(0,0,0,_);E.addColorStop(0,s),E.addColorStop(1,o),v.fillStyle=E,v.fill(T),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(x),v.strokeStyle=t,v.lineWidth=2,v.stroke(x)},[t,r,s,o]),[d,m]=bfe(f);return B.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(u.current===void 0||g>u.current)&&(u.current=g),pme(a.current,g),c.current=requestAnimationFrame(()=>f(d.current,m.current))}}),[d,m,f]),B.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),he.createElement(hme,{ref:d})}),nk=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),gme=B.forwardRef(function({initialValue:n},e){const[t,r]=B.useState(nk(n));return B.useImperativeHandle(e,()=>({frame:i=>r(nk(i))}),[]),he.createElement("div",null,t)});function rk(n){return typeof n=="function"?n():n.current}function vme({label:n,objectOrFn:e,settings:t}){const r=B.useRef(),i=B.useRef(rk(e));return B.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(rk(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),he.createElement(wo,{input:!0},he.createElement(Zo,{align:"top"},n),t.graph?he.createElement(mme,{ref:r,initialValue:i.current}):he.createElement(gme,{ref:r,initialValue:i.current}))}const yme=["type","label","key"],_me={[ya.BUTTON]:lme,[ya.BUTTON_GROUP]:dme,[ya.MONITOR]:vme},xme=he.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=Mfe(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=Fn(e,yme);if(l in ya){const d=_me[l];return he.createElement(d,Ir({label:u,path:n},f))}return l in bf?he.createElement(ome,Ir({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(Fce(Qn.UNSUPPORTED_INPUT,l,n),null)});function wme({toggle:n,toggled:e,name:t}){return he.createElement(ffe,{onClick:()=>n()},he.createElement(IT,{toggled:e}),he.createElement("div",null,t))}const Sme=({name:n,path:e,tree:t})=>{const r=T0(),i=zT(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=B.useState(!s),u=B.useRef(null),c=ll("colors","folderWidgetColor"),f=ll("colors","folderTextColor");return B.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,c,f]),he.createElement(x_,{ref:u},he.createElement(wme,{name:n,toggled:a,toggle:()=>l(d=>!d)}),he.createElement(T8,{parent:i,tree:t,toggled:a}))},T8=he.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=cpe(s),l=T0(),u=([f,d])=>{var m;return(tk(d)?(m=l.getInput(d.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(zT(r,f)).order)||0},c=Object.entries(i).sort((f,d)=>u(f)-u(d));return he.createElement(pM,{ref:o,isRoot:n,fill:e,flat:t},he.createElement(VG,{ref:a,isRoot:n,toggled:s},c.map(([f,d])=>tk(d)?he.createElement(xme,{key:d.path,valueKey:d.valueKey,path:d.path}):he.createElement(Sme,{key:f,name:f,path:r,tree:d}))))}),bme=Lt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${jG}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),P8=40,M_=Lt("i",{$flexCenter:"",width:P8,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Ame=Lt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Mme=Lt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${M_}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Eme=Lt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Cme=Lt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:P8}}}}),Tme=he.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=B.useState(""),s=B.useMemo(()=>BG(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return B.useEffect(()=>{s(r)},[r,s]),he.createElement(he.Fragment,null,he.createElement(Eme,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),he.createElement(M_,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Pme({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,f]=B.useState(!1),d=B.useRef(null);B.useEffect(()=>{var g,v;c?(g=d.current)===null||g===void 0||g.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const m=P0(({offset:[g,v],first:y,last:_})=>{e({x:g,y:v}),y&&t({x:g,y:v}),_&&r({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(u==null?void 0:u.x)||g,(u==null?void 0:u.y)||v]});return B.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(y=>!y)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),he.createElement(he.Fragment,null,he.createElement(Ame,{mode:a?"drag":void 0},he.createElement(M_,{active:!s,onClick:()=>i()},he.createElement(IT,{toggled:s,width:12,height:8})),he.createElement(Cme,Ir({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?he.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},he.createElement("circle",{cx:"2",cy:"2",r:"2"}),he.createElement("circle",{cx:"14",cy:"2",r:"2"}),he.createElement("circle",{cx:"26",cy:"2",r:"2"}),he.createElement("circle",{cx:"2",cy:"12",r:"2"}),he.createElement("circle",{cx:"14",cy:"12",r:"2"}),he.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&he.createElement(M_,{active:c,onClick:()=>f(g=>!g)},he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},he.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),he.createElement(Mme,{toggled:c},he.createElement(Tme,{ref:d,setFilter:n,toggle:i})))}he.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const d=fpe(n),[m,g]=B.useState(""),v=B.useMemo(()=>ime(d,m),[d,m]),[y,_]=KG(),x=i||d.length>0,w=typeof o=="object"&&o.title||void 0,S=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,T=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,E=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,b=typeof o=="object"&&o.onDragStart||void 0,M=typeof o=="object"&&o.onDragEnd||void 0;return he.useEffect(()=>{_({x:E==null?void 0:E.x,y:E==null?void 0:E.y})},[E,_]),sfe(),he.createElement(zG.Provider,{value:{hideCopyButton:a}},he.createElement(bme,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&he.createElement(Pme,{onDrag:C=>{_(C),R==null||R(C)},onDragStart:C=>b==null?void 0:b(C),onDragEnd:C=>M==null?void 0:M(C),setFilter:g,toggle:C=>u(L=>C??!L),toggled:l,title:w,drag:S,filterEnabled:T,from:E}),x&&he.createElement(NG.Provider,{value:n},he.createElement(T8,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))});Tl(jo.SELECT,Hfe);Tl(jo.IMAGE,Wpe);Tl(jo.NUMBER,Ife);Tl(jo.COLOR,Spe);Tl(jo.STRING,Zfe);Tl(jo.BOOLEAN,ide);Tl(jo.INTERVAL,qpe);Tl(jo.VECTOR3D,Ape);Tl(jo.VECTOR2D,Ipe);function ik(n){return typeof n=="string"?new st(n).convertLinearToSRGB():n}function Rme(n){switch(n){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function Bme({color:n,alpha:e,lighting:t,name:r,...i}={}){return[{color:n,alpha:e,lighting:t,name:r},i]}function R8(n){return n instanceof $||n instanceof De||n instanceof qt||n instanceof zr||n instanceof Et}function sk(n){return R8(n)?n.toArray():n instanceof st?"#"+n.clone().convertLinearToSRGB().getHexString():n instanceof fn?n.image.src:n}const Ime={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},B8={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},GT={local:"local",world:"world",uv:"uv"},Dme={phong:CC,physical:ks,toon:TC,basic:bi,lambert:RC,standard:Kh};class Pl{constructor(e,t,r){this.uuid=ao.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const s=Object.getOwnPropertyNames(e).filter(a=>a.startsWith("u_")).reduce((a,l)=>{var u;let c=(u=Object.getOwnPropertyDescriptor(e,l))==null?void 0:u.value;return(R8(c)||c instanceof st)&&(c=c.clone()),{...a,[l.slice(1)]:c}},{});for(const a in s){const l=a.split("_")[1];(t==null?void 0:t[l])!==void 0&&(s[a]=t[l])}t&&Object.keys(t).map(a=>{t[a]!==void 0&&(this[a]=t[a])}),this.uniforms={},this.schema=[];const o={};Object.keys(s).map(a=>{const l=a.split("_")[1];this.uniforms[`u_${this.uuid}_${l}`]={value:ik(s[a])},this.schema.push({value:s[a],label:l}),o[l]={set:u=>{this.uniforms[`u_${this.uuid}_${l}`].value=ik(u)},get:()=>this.uniforms[`u_${this.uuid}_${l}`].value}}),t!=null&&t.name&&(this.name=t.name),t!=null&&t.mode&&(this.mode=t.mode),t!=null&&t.visible&&(this.visible=t.visible),Object.defineProperties(this,o),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=r,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(Ime)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var t;const r=Object.getOwnPropertyNames(e).filter(c=>c==="fragmentShader"||c==="vertexShader").reduce((c,f)=>{var d;return{...c,[f]:(d=Object.getOwnPropertyDescriptor(e,f))==null?void 0:d.value}},{}),i={vert:oM(r.vertexShader||""),frag:oM(r.fragmentShader||"")},s={vert:$L(i.vert,this.renameTokens.bind(this)),frag:$L(i.frag,this.renameTokens.bind(this))},o={vert:aM(s.vert),frag:aM(s.frag)},a={vert:o.vert.map(c=>c.name).indexOf("main"),frag:o.frag.map(c=>c.name).indexOf("main")},l={vert:a.vert>=0?Zm(s.vert.slice(0,o.vert[a.vert].outer[0])):"",frag:a.frag>=0?Zm(s.frag.slice(0,o.frag[a.frag].outer[0])):""},u={vert:a.vert>=0?this.getShaderFromIndex(s.vert,o.vert[a.vert].body):"",frag:a.frag>=0?this.getShaderFromIndex(s.frag,o.frag[a.frag].body):""};this.vertexShader=this.processFinal(u.vert,!0),this.fragmentShader=this.processFinal(u.frag),this.vertexVariables=l.vert,this.fragmentVariables=l.frag,(t=this.onParse)==null||t.call(this,this),this.schema=this.schema.filter((c,f)=>{const d=c.label;return f===this.schema.findIndex(m=>m.label===d)})}renameTokens(e){if(e.startsWith("u_")){const t=e.slice(2);return`u_${this.uuid}_${t}`}else if(e.startsWith("v_")){const t=e.slice(2);return`v_${this.uuid}_${t}`}else if(e.startsWith("f_")){const t=e.slice(2);return`f_${this.uuid}_${t}`}else return e}processFinal(e,t){const r=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),i=r.match(/^.*return.*$/gm);let s=r.replace(/^.*return.*$/gm,"");if(i!=null&&i[0]){const o=i[0].replace("return","").trim().replace(";",""),a=this.getBlendMode(o,"lamina_finalColor");s+=t?`lamina_finalPosition = ${o};`:`lamina_finalColor = ${a};`}return s}getShaderFromIndex(e,t){return Zm(e.slice(t[0],t[1]))}getBlendMode(e,t){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${t}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${t}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${t}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${t}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${t}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${t}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${t}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${t}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${t}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${t}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${t}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${t}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:t,options:r,...i})=>({label:t,options:r,...Rme(t),...i,value:sk(this[t])}))}serialize(){const e=this.constructor.name.split("$")[0];let t=Object.keys(this);t=t.filter(s=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(s));const r={};t.forEach(s=>{r[s]=this[s]});const i={};for(const s in this.uniforms){const o=s.replace(`u_${this.uuid}_`,"");i[o]=sk(this.uniforms[s].value)}return{constructor:e,properties:{...i,...r}}}}class yo extends Pl{constructor(e){super(yo,{name:"Depth",...e},t=>{t.schema.push({value:t.mapping,label:"mapping",options:["vector","world","camera"]});const r=yo.getMapping(t.uuid,t.mapping);t.fragmentShader=t.fragmentShader.replace("lamina_mapping_template",r)}),this.mapping="vector"}static getMapping(e,t){switch(t){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}yo.u_near=2;yo.u_far=10;yo.u_origin=new $(0,0,0);yo.u_colorA="white";yo.u_colorB="black";yo.u_alpha=1;yo.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;yo.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;class rp extends Pl{constructor(e){super(rp,{name:"Color",...e})}}rp.u_color="red";rp.u_alpha=1;rp.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class cs extends Pl{constructor(e){super(cs,{name:"noise",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(B8)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(GT)});const r=cs.getNoiseFunction(t.type),i=cs.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",i),t.fragmentShader=t.fragmentShader.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}cs.u_colorA="#666666";cs.u_colorB="#666666";cs.u_colorC="#FFFFFF";cs.u_colorD="#FFFFFF";cs.u_alpha=1;cs.u_scale=1;cs.u_offset=new $(0,0,0);cs.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;cs.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class Qo extends Pl{constructor(e){super(Qo,{name:"Fresnel",...e})}}Qo.u_color="white";Qo.u_alpha=1;Qo.u_bias=0;Qo.u_intensity=1;Qo.u_power=2;Qo.u_factor=1;Qo.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;Qo.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class _o extends Pl{constructor(e){super(_o,{name:"Gradient",...e},t=>{t.schema.push({value:t.axes,label:"axes",options:["x","y","z"]}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(GT)});const r=_o.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",r||"local"),t.fragmentShader=t.fragmentShader.replace("axes_template",t.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}_o.u_colorA="white";_o.u_colorB="black";_o.u_alpha=1;_o.u_start=1;_o.u_end=-1;_o.u_contrast=1;_o.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;_o.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class If extends Pl{constructor(e){super(If,{name:"Matcap",...e})}}If.u_alpha=1;If.u_map=void 0;If.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;If.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;class Df extends Pl{constructor(e){super(Df,{name:"Texture",...e})}}Df.u_alpha=1;Df.u_map=void 0;Df.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;Df.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class ul extends Pl{constructor(e){super(ul,{name:"Displace",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(B8)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(GT)});const r=ul.getNoiseFunction(t.type),i=ul.getMapping(t.mapping);t.vertexVariables=t.vertexVariables.replace("lamina_mapping_template",i),t.vertexVariables=t.vertexVariables.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}ul.u_strength=1;ul.u_scale=1;ul.u_offset=new $(0,0,0);ul.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class Lf extends Pl{constructor(e){super(Lf,{name:"Normal",...e})}}Lf.u_alpha=1;Lf.u_direction=new $(1,1,1);Lf.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;Lf.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;var Lme=`
vec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {

	return y * opacity + x * (1.0 - opacity);

}

vec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {

	float a = min(y.a, opacity);

	return vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);

}
vec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_burn(const in float x, const in float y) {

	return (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);

}

vec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_burn(x.r, y.r),
		lamina_blend_color_burn(x.g, y.g),
		lamina_blend_color_burn(x.b, y.b),
		lamina_blend_color_burn(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_dodge(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x / (1.0 - y), 1.0);

}

vec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_dodge(x.r, y.r),
		lamina_blend_color_dodge(x.g, y.g),
		lamina_blend_color_dodge(x.b, y.b),
		lamina_blend_color_dodge(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_divide(const in float x, const in float y) {

	return (y > 0.0) ? min(x / y, 1.0) : 1.0;

}

vec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_divide(x.r, y.r),
		lamina_blend_divide(x.g, y.g),
		lamina_blend_divide(x.b, y.b),
		lamina_blend_divide(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_overlay(const in float x, const in float y) {

	return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));

}

vec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_overlay(x.r, y.r),
		lamina_blend_overlay(x.g, y.g),
		lamina_blend_overlay(x.b, y.b),
		lamina_blend_overlay(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_reflect(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);

}

vec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_reflect(x.r, y.r),
		lamina_blend_reflect(x.g, y.g),
		lamina_blend_reflect(x.b, y.b),
		lamina_blend_reflect(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_softlight(const in float x, const in float y) {

	return (y < 0.5) ?
		(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :
		(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));

}

vec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_softlight(x.r, y.r),
		lamina_blend_softlight(x.g, y.g),
		lamina_blend_softlight(x.b, y.b),
		lamina_blend_softlight(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}

`,ok=`

// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83
// Huge thanks to the creators of these algorithms

float lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}
vec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }
vec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }


float lamina_noise_white(vec2 p) {
  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *
               (0.1 + abs(sin(p.y * 13.0 + p.x))));
}

float lamina_noise_white(vec3 p) {
  return lamina_noise_white(p.xy);
}


vec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float lamina_noise_perlin(vec3 P) {
  vec3 Pi0 = floor(P);        // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod(Pi0, 289.0);
  Pi1 = mod(Pi1, 289.0);
  vec3 Pf0 = fract(P);        // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);
  vec4 ixy0 = lamina_noise_permute(ixy + iz0);
  vec4 ixy1 = lamina_noise_permute(ixy + iz1);

  vec4 gx0 = ixy0 / 7.0;
  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 / 7.0;
  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);

  vec4 norm0 = lamina_noise_taylorInvSqrt(
      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = lamina_noise_taylorInvSqrt(
      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = lamina_noise_fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),
                 fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return lamina_normalize(2.2 * n_xyz);
}

float lamina_noise_simplex(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  //  x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +
                             vec4(0.0, i1.y, i2.y, 1.0)) +
                    i.x + vec4(0.0, i1.x, i2.x, 1.0));

  // Gradients
  // ( N*N points uniformly over a square, mapped onto an octahedron.)
  float n_ = 1.0 / 7.0; // N=7
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

  // Normalise gradients
  vec4 norm =
      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m =
      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return lamina_normalize(42.0 *
         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));
}

vec3 lamina_noise_simplex3(vec3 x) {
  float s = lamina_noise_simplex(vec3(x));
  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));
  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));
  vec3 c = vec3(s, s1, s2);
  return c;
}

vec3 lamina_noise_curl(vec3 p) {
  const float e = .1;
  vec3 dx = vec3(e, 0.0, 0.0);
  vec3 dy = vec3(0.0, e, 0.0);
  vec3 dz = vec3(0.0, 0.0, e);

  vec3 p_x0 = lamina_noise_simplex3(p - dx);
  vec3 p_x1 = lamina_noise_simplex3(p + dx);
  vec3 p_y0 = lamina_noise_simplex3(p - dy);
  vec3 p_y1 = lamina_noise_simplex3(p + dy);
  vec3 p_z0 = lamina_noise_simplex3(p - dz);
  vec3 p_z1 = lamina_noise_simplex3(p + dz);

  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;

  const float divisor = 1.0 / (2.0 * e);
  return normalize(vec3(x, y, z) * divisor);
}

vec3 lamina_permute(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {
  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);
}

// From: https://github.com/Erkaman/glsl-worley
float lamina_noise_worley(vec3 P) {
  float jitter = 1.;
  bool manhattanDistance = false; 

  float K = 0.142857142857; // 1/7
  float Ko = 0.428571428571; // 1/2-K/2
  float  K2 = 0.020408163265306; // 1/(7*7)
  float Kz = 0.166666666667; // 1/6
  float Kzo = 0.416666666667; // 1/2-1/6*2

	vec3 Pi = mod(floor(P), 289.0);
 	vec3 Pf = fract(P) - 0.5;

	vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);
	vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);
	vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);

	vec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));
	vec3 p1 = lamina_permute(p + Pi.y - 1.0);
	vec3 p2 = lamina_permute(p + Pi.y);
	vec3 p3 = lamina_permute(p + Pi.y + 1.0);

	vec3 p11 = lamina_permute(p1 + Pi.z - 1.0);
	vec3 p12 = lamina_permute(p1 + Pi.z);
	vec3 p13 = lamina_permute(p1 + Pi.z + 1.0);

	vec3 p21 = lamina_permute(p2 + Pi.z - 1.0);
	vec3 p22 = lamina_permute(p2 + Pi.z);
	vec3 p23 = lamina_permute(p2 + Pi.z + 1.0);

	vec3 p31 = lamina_permute(p3 + Pi.z - 1.0);
	vec3 p32 = lamina_permute(p3 + Pi.z);
	vec3 p33 = lamina_permute(p3 + Pi.z + 1.0);

	vec3 ox11 = fract(p11*K) - Ko;
	vec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;
	vec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed

	vec3 ox12 = fract(p12*K) - Ko;
	vec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;
	vec3 oz12 = floor(p12*K2)*Kz - Kzo;

	vec3 ox13 = fract(p13*K) - Ko;
	vec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;
	vec3 oz13 = floor(p13*K2)*Kz - Kzo;

	vec3 ox21 = fract(p21*K) - Ko;
	vec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;
	vec3 oz21 = floor(p21*K2)*Kz - Kzo;

	vec3 ox22 = fract(p22*K) - Ko;
	vec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;
	vec3 oz22 = floor(p22*K2)*Kz - Kzo;

	vec3 ox23 = fract(p23*K) - Ko;
	vec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;
	vec3 oz23 = floor(p23*K2)*Kz - Kzo;

	vec3 ox31 = fract(p31*K) - Ko;
	vec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;
	vec3 oz31 = floor(p31*K2)*Kz - Kzo;

	vec3 ox32 = fract(p32*K) - Ko;
	vec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;
	vec3 oz32 = floor(p32*K2)*Kz - Kzo;

	vec3 ox33 = fract(p33*K) - Ko;
	vec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;
	vec3 oz33 = floor(p33*K2)*Kz - Kzo;

	vec3 dx11 = Pfx + jitter*ox11;
	vec3 dy11 = Pfy.x + jitter*oy11;
	vec3 dz11 = Pfz.x + jitter*oz11;

	vec3 dx12 = Pfx + jitter*ox12;
	vec3 dy12 = Pfy.x + jitter*oy12;
	vec3 dz12 = Pfz.y + jitter*oz12;

	vec3 dx13 = Pfx + jitter*ox13;
	vec3 dy13 = Pfy.x + jitter*oy13;
	vec3 dz13 = Pfz.z + jitter*oz13;

	vec3 dx21 = Pfx + jitter*ox21;
	vec3 dy21 = Pfy.y + jitter*oy21;
	vec3 dz21 = Pfz.x + jitter*oz21;

	vec3 dx22 = Pfx + jitter*ox22;
	vec3 dy22 = Pfy.y + jitter*oy22;
	vec3 dz22 = Pfz.y + jitter*oz22;

	vec3 dx23 = Pfx + jitter*ox23;
	vec3 dy23 = Pfy.y + jitter*oy23;
	vec3 dz23 = Pfz.z + jitter*oz23;

	vec3 dx31 = Pfx + jitter*ox31;
	vec3 dy31 = Pfy.z + jitter*oy31;
	vec3 dz31 = Pfz.x + jitter*oz31;

	vec3 dx32 = Pfx + jitter*ox32;
	vec3 dy32 = Pfy.z + jitter*oy32;
	vec3 dz32 = Pfz.y + jitter*oz32;

	vec3 dx33 = Pfx + jitter*ox33;
	vec3 dy33 = Pfy.z + jitter*oy33;
	vec3 dz33 = Pfz.z + jitter*oz33;

	vec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);
	vec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);
	vec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);
	vec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);
	vec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);
	vec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);
	vec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);
	vec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);
	vec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);

	vec3 d1a = min(d11, d12);
	d12 = max(d11, d12);
	d11 = min(d1a, d13); // Smallest now not in d12 or d13
	d13 = max(d1a, d13);
	d12 = min(d12, d13); // 2nd smallest now not in d13
	vec3 d2a = min(d21, d22);
	d22 = max(d21, d22);
	d21 = min(d2a, d23); // Smallest now not in d22 or d23
	d23 = max(d2a, d23);
	d22 = min(d22, d23); // 2nd smallest now not in d23
	vec3 d3a = min(d31, d32);
	d32 = max(d31, d32);
	d31 = min(d3a, d33); // Smallest now not in d32 or d33
	d33 = max(d3a, d33);
	d32 = min(d32, d33); // 2nd smallest now not in d33
	vec3 da = min(d11, d21);
	d21 = max(d11, d21);
	d11 = min(da, d31); // Smallest now in d11
	d31 = max(da, d31); // 2nd smallest now not in d31
	d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;
	d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest
	d12 = min(d12, d21); // 2nd smallest now not in d21
	d12 = min(d12, d22); // nor in d22
	d12 = min(d12, d31); // nor in d31
	d12 = min(d12, d32); // nor in d32
	d11.yz = min(d11.yz,d12.xy); // nor in d12.yz
	d11.y = min(d11.y,d12.z); // Only two more to go
	d11.y = min(d11.y,d11.z); // Done! (Phew!)

  vec2 F = sqrt(d11.xy);
	return F.x; // F1, F2

}

float lamina_noise_swirl(vec3 position) {
    float scale = 0.1;
    float freq = 4. * scale;
    float t = 1.;

    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);

    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));
    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));
    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));
    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));
    
    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;
    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;
    float fbm3 = worley3 * .75 + worley4 * .25;

    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);
    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + 
        curlWorleyFbm.b * .125;

    return curlWorley;
}
  
  
`,ak=`

float lamina_map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }
`;class I8 extends tue{constructor({color:e,alpha:t,lighting:r,layers:i,name:s,...o}={}){super({baseMaterial:Dme[r||"basic"],...o}),this.name="LayerMaterial",this.layers=[],this.lighting="basic";const a=e||"white",l=t??1;this.uniforms={u_lamina_color:{value:typeof a=="string"?new st(a).convertSRGBToLinear():a},u_lamina_alpha:{value:l}},this.layers=i||this.layers,this.lighting=r||this.lighting,this.name=s||this.name,this.refresh()}genShaders(){let e="",t="",r="",i="",s={};return this.layers.filter(o=>o.visible).forEach(o=>{e+=o.vertexVariables+`
`,t+=o.fragmentVariables+`
`,r+=o.vertexShader+`
`,i+=o.fragmentShader+`
`,s={...s,...o.uniforms}}),s={...s,...this.uniforms},{uniforms:s,vertexShader:`
        ${ak}
        ${ok}
        ${e}

        void main() {
          vec3 lamina_finalPosition = position;
          vec3 lamina_finalNormal = normal;

          ${r}

          csm_Position = lamina_finalPosition;
          csm_Normal = lamina_finalNormal;
        }
        `,fragmentShader:`
        ${ak}
        ${ok}
        ${Lme}
        ${t}

        uniform vec3 u_lamina_color;
        uniform float u_lamina_alpha;

        void main() {
          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);

          ${i}

          csm_DiffuseColor = lamina_finalColor;
         
        }
        `}}refresh(){const{uniforms:e,fragmentShader:t,vertexShader:r}=this.genShaders();super.update({fragmentShader:t,vertexShader:r,uniforms:e})}serialize(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}set color(e){var t,r;(t=this.uniforms)!=null&&(r=t.u_lamina_color)!=null&&r.value&&(this.uniforms.u_lamina_color.value=typeof e=="string"?new st(e).convertSRGBToLinear():e)}get color(){var e,t;return(e=this.uniforms)==null||(t=e.u_lamina_color)==null?void 0:t.value}set alpha(e){this.uniforms.u_lamina_alpha.value=e}get alpha(){return this.uniforms.u_lamina_alpha.value}}S0({LayerMaterial:I8});S0({LayerMaterial:I8,Depth_:yo,Color_:rp,Noise_:cs,Fresnel_:Qo,Gradient_:_o,Matcap_:If,Texture_:Df,Displace_:ul,Normal_:Lf});const lk=he.forwardRef(({children:n,...e},t)=>{const r=he.useRef(null);B.useImperativeHandle(t,()=>r.current),he.useLayoutEffect(()=>{r.current.layers=r.current.__r3f.objects,r.current.refresh()},[n]);const[i,s]=B.useMemo(()=>Bme(e),[e]);return he.createElement("layerMaterial",tn({args:[i],ref:r},s),n)});function Fme(n){return[{mode:n==null?void 0:n.mode,visible:n==null?void 0:n.visible,type:n==null?void 0:n.type,mapping:n==null?void 0:n.mapping,map:n==null?void 0:n.map,axes:n==null?void 0:n.axes}]}const uk=he.forwardRef((n,e)=>he.createElement("gradient_",tn({ref:e,args:Fme(n)},n))),kme=({backgroundColors:n})=>{const r=B.useRef(),i=B.useRef();return fi(()=>{r.current.colorA=new st(n.current.colorA),r.current.colorB=new st(n.current.colorB),i.current.colorA=new st(n.current.colorA),i.current.colorB=new st(n.current.colorB)}),xn(O_,{children:[qe(lL,{scale:[500,500,500],"rotation-y":Math.PI/2,children:qe(lk,{color:"#ffffff",side:Pr,children:qe(uk,{ref:r,axes:"y",start:.2,end:-.5})})}),qe(Zie,{resolution:256,frames:1/0,children:qe(lL,{scale:[100,100,100],"rotation-y":Math.PI/2,"rotation-x":Math.PI,children:qe(lk,{color:"#ffffff",side:Pr,children:qe(uk,{ref:i,axes:"y",start:.2,end:-.5})})})})]})};function Ome({sceneOpacity:n,...e}){const{nodes:t,materials:r}=Ju("./models/cloud/model.gltf"),i=B.useRef();return fi(()=>{i.current.opacity=n.current}),qe("group",{...e,dispose:null,children:qe("mesh",{geometry:t.Mball001.geometry,children:qe("meshStandardMaterial",{ref:i,onBeforeCompile:iG,envMapIntensity:2,transparent:!0})})})}Ju.preload("./models/cloud/model.gltf");const Ume=240,Nme=.1,zme=()=>{const n=B.useRef();let e={x:0,y:0,z:0},t=0;const r=()=>{e={x:ao.randFloatSpread(8),y:ao.randFloatSpread(5),z:ao.randFloatSpread(8)},t=ao.randFloat(16,20)};return r(),fi((i,s)=>{n.current&&(n.current.position.z+=t*s,n.current.position.z>5&&(r(),n.current.position.z=e.z))}),qe(H5,{ref:n,color:"white",position:[e.x,e.y,e.z],"rotation-y":Math.PI/2})},Gme=()=>{const n=B.useRef(),e=p5(),t=B.useRef(0);return fi((r,i)=>{e.offset-t.current>5e-4&&(n.current.opacity=Nme),t.current=e.offset,n.current.opacity>0&&(n.current.opacity-=i*.2)}),qe("group",{children:xn(Bie,{children:[qe("planeGeometry",{args:[1,.004]}),qe("meshBasicMaterial",{ref:n,side:qr,blending:e_,opacity:0,transparent:!0}),Array(Ume).fill().map((r,i)=>qe(zme,{},i))]})})},Hme=({title:n,subtitle:e,...t})=>xn("group",{...t,children:[!!n&&xn(qD,{color:"white",anchorX:"left",anchorY:"bottom",fontSize:.52,maxWidth:2.5,lineHeight:1,font:"./fonts/DMSerifDisplay-Regular.ttf",children:[n,qe("meshStandardMaterial",{color:"white",onBeforeCompile:IL})]}),xn(qD,{color:"white",anchorX:"left",anchorY:"top",fontSize:.2,maxWidth:2.5,font:"./fonts/Inter-Regular.ttf",children:[e,qe("meshStandardMaterial",{color:"white",onBeforeCompile:IL})]})]}),Vme=1e3,Cc=250,Wme=.008,jme=.02,ck=35,Ib=42,$me=()=>{const n=B.useMemo(()=>[new $(0,0,0),new $(0,0,-Cc),new $(100,0,-2*Cc),new $(-100,0,-3*Cc),new $(100,0,-4*Cc),new $(0,0,-5*Cc),new $(0,0,-6*Cc),new $(0,0,-7*Cc)],[]),e=B.useRef(0),t=B.useRef(),r=B.useMemo(()=>new wC(n,!1,"catmullrom",.5),[]),i=B.useMemo(()=>[{cameraRailDist:-1,position:new $(n[1].x-3,n[1].y,n[1].z),subtitle:"Stratigem Digital provides cutting-edge solutions for SEO, Web Development, Paid Ads Management, and more. Hop aboard and explore services designed to skyrocket your business success."},{cameraRailDist:1.5,position:new $(n[2].x+2,n[2].y,n[2].z),title:"SEO(Search Engine Optimization)",subtitle:"Get found by the customer who matter most. Our SEO strategies are tailored to your industry,combining technical optimization, keyword targeting, and content enhancement to boost your visibility on Google and other search engines."},{cameraRailDist:-1,position:new $(n[3].x-3,n[3].y,n[3].z),title:"Web Development",subtitle:"Your Website is your digital storefront. We create visually stunning, user-friendly websites designed to turn visitors into loyal customers. Whether it's an E-commerce store or a corporate site, we've got you covered."},{cameraRailDist:1.5,position:new $(n[4].x+3.5,n[4].y,n[4].z-12),title:"Paid Ads Management",subtitle:"Harness the power of the paid advertising. Our team optimizes ad campaigns on Google, Meta and other platforms to ensure you get the most bang for your buck. We monitor performance closely to deliver unbeatable ROI."},{cameraRailDist:-1,position:new $(n[5].x-3,n[5].y,n[5].z),title:"Google Adwords Management",subtitle:"Tap into the potential of Google Adwords. From keyword research to ad creation and bid optimization, We craft campaigns that convert. Reach your audience when it matters most."},{cameraRailDist:1.5,position:new $(n[6].x+2,n[6].y,n[6].z-12),title:"Meta Ads(Facebook & Instagram)",subtitle:"Social media is where conversations happen, and will make sure your brand is part of it. Our Meta Ads campaigns combine creative storytelling with precise targeting to drive engagement and conversions."},{cameraRailDist:1,position:new $(n[7].x+3.5,n[7].y,n[7].z),title:"Linkedin B2B Lead Generation",subtitle:"Linkedin isn't just a social network is a goldmine for B2B opportunities. We create data-driven campaigns to connect you with decision-makers and grow your professional network. "}],[]),s=B.useMemo(()=>[{position:new $(-3.5,-3.2,-7)},{position:new $(3.5,-4,-10)},{scale:new $(4,4,4),position:new $(-18,.2,-68),rotation:new Fr(-Math.PI/5,Math.PI/6,0)},{scale:new $(2.5,2.5,2.5),position:new $(10,-1.2,-52)},{scale:new $(4,4,4),position:new $(n[1].x+10,n[1].y-4,n[1].z+64)},{scale:new $(3,3,3),position:new $(n[1].x-20,n[1].y+4,n[1].z+28),rotation:new Fr(0,Math.PI/7,0)},{rotation:new Fr(0,Math.PI/7,Math.PI/5),scale:new $(5,5,5),position:new $(n[1].x-13,n[1].y+4,n[1].z-62)},{rotation:new Fr(Math.PI/2,Math.PI/2,Math.PI/3),scale:new $(5,5,5),position:new $(n[1].x+54,n[1].y+2,n[1].z-82)},{scale:new $(5,5,5),position:new $(n[1].x+8,n[1].y-14,n[1].z-22)},{scale:new $(3,3,3),position:new $(n[2].x+6,n[2].y-7,n[2].z+50)},{scale:new $(2,2,2),position:new $(n[2].x-2,n[2].y+4,n[2].z-26)},{scale:new $(4,4,4),position:new $(n[2].x+12,n[2].y+1,n[2].z-86),rotation:new Fr(Math.PI/4,0,Math.PI/3)},{scale:new $(3,3,3),position:new $(n[3].x+3,n[3].y-10,n[3].z+50)},{scale:new $(3,3,3),position:new $(n[3].x-10,n[3].y,n[3].z+30),rotation:new Fr(Math.PI/4,0,Math.PI/5)},{scale:new $(4,4,4),position:new $(n[3].x-20,n[3].y-5,n[3].z-8),rotation:new Fr(Math.PI,0,Math.PI/5)},{scale:new $(5,5,5),position:new $(n[3].x+0,n[3].y-5,n[3].z-98),rotation:new Fr(0,Math.PI/3,0)},{scale:new $(2,2,2),position:new $(n[4].x+3,n[4].y-10,n[4].z+2)},{scale:new $(3,3,3),position:new $(n[4].x+24,n[4].y-6,n[4].z-42),rotation:new Fr(Math.PI/4,0,Math.PI/5)},{scale:new $(3,3,3),position:new $(n[4].x-4,n[4].y+9,n[4].z-62),rotation:new Fr(Math.PI/3,0,Math.PI/3)},{scale:new $(3,3,3),position:new $(n[7].x+12,n[7].y-5,n[7].z+60),rotation:new Fr(-Math.PI/4,-Math.PI/6,0)},{scale:new $(3,3,3),position:new $(n[7].x-12,n[7].y+5,n[7].z+120),rotation:new Fr(Math.PI/4,Math.PI/6,0)}],[]),o=B.useMemo(()=>{const E=new wu;return E.moveTo(0,-.08),E.lineTo(0,.08),E},[r]),a=B.useRef(),l=B.useRef(),u=B.useRef(),c=p5(),f=B.useRef(0),{play:d,setHasScroll:m,end:g,setEnd:v,setPlay:y}=ET();fi((E,R)=>{if(window.innerWidth>window.innerHeight?(u.current.fov=30,u.current.position.z=5):(u.current.fov=80,u.current.position.z=2),f.current<=0&&c.offset>0&&m(!0),d&&!g&&e.current<1&&(e.current=ao.lerp(e.current,1,R*.1)),g&&e.current>0&&(e.current=ao.lerp(e.current,0,R)),t.current.opacity=e.current,g)return;const b=Math.max(0,c.offset);let M=1,C=!0;if(i.forEach(W=>{const ne=W.position.distanceTo(a.current.position);if(ne<Ib){M=Math.max(ne/Ib,.1);const ue=new $((1-ne/Ib)*W.cameraRailDist,0,0);l.current.position.lerp(ue,R),C=!1}}),C){const W=new $(0,0,0);l.current.position.lerp(W,R)}let L=ao.lerp(f.current,b,R*M);L=Math.min(L,1),L=Math.max(L,0),f.current=L,x.current.seek(L*x.current.duration());const D=r.getPoint(L);a.current.position.lerp(D,R*24);const z=r.getPoint(Math.min(L+Wme,1)),F=a.current.getWorldDirection(new $),H=new $().subVectors(D,z).normalize(),G=F.lerp(H,R*24);a.current.lookAt(a.current.position.clone().add(G));const te=r.getTangent(L+jme),V=new ko;V.position.copy(D),V.lookAt(V.position.clone().add(H)),te.applyAxisAngle(new $(0,1,0),-V.rotation.y);let K=Math.atan2(-te.z,te.x);K=-Math.PI/2+K;let j=K*180/Math.PI;j*=2.4,j<0&&(j=Math.max(j,-ck)),j>0&&(j=Math.min(j,ck)),K=j*Math.PI/180;const J=new Hn().setFromEuler(new Fr(_.current.rotation.x,_.current.rotation.y,K));_.current.quaternion.slerp(J,R*2),a.current.position.z<n[n.length-1].z+100&&(v(!0),T.current.play())});const _=B.useRef(),x=B.useRef(),w=B.useRef({colorA:"#3535cc",colorB:"#abaadd"}),S=B.useRef(),T=B.useRef();return B.useLayoutEffect(()=>{x.current=E1.timeline(),x.current.to(w.current,{duration:1,colorA:"#6f35cc",colorB:"#ffad30"}),x.current.to(w.current,{duration:1,colorA:"#424242",colorB:"#ffcc00"}),x.current.to(w.current,{duration:1,colorA:"#81318b",colorB:"#55ab8f"}),x.current.pause(),S.current=E1.timeline(),S.current.pause(),S.current.from(_.current.position,{duration:3,z:5,y:-2}),T.current=E1.timeline(),T.current.pause(),T.current.to(_.current.position,{duration:10,z:-250,y:10},0),T.current.to(l.current.position,{duration:8,y:12},0),T.current.to(_.current.position,{duration:1,z:-1e3})},[]),B.useEffect(()=>{d&&(S.current.play(),setTimeout(()=>{y(!1)},2e4))},[d]),B.useMemo(()=>xn(O_,{children:[qe("directionalLight",{position:[0,3,1],intensity:.1}),xn("group",{ref:a,children:[qe(Gme,{}),qe(kme,{backgroundColors:w}),qe("group",{ref:l,children:qe(yie,{ref:u,position:[0,0,5],fov:30,makeDefault:!0})}),qe("group",{ref:_,children:qe(Fie,{floatIntensity:1,speed:1.5,rotationIntensity:.5,children:qe(hle,{"rotation-y":Math.PI/2,scale:[.2,.2,.2],"position-y":.1})})})]}),i.map((E,R)=>B.createElement(Hme,{...E,key:R})),qe("group",{"position-y":-2,children:xn("mesh",{children:[qe("extrudeGeometry",{args:[o,{steps:Vme,bevelEnabled:!1,extrudePath:r}]}),qe("meshStandardMaterial",{color:"white",ref:t,transparent:!0,envMapIntensity:2,onBeforeCompile:iG})]})}),s.map((E,R)=>B.createElement(Ome,{sceneOpacity:e,...E,key:R}))]}),[])},Xme=()=>{const{progress:n}=r5(),{play:e,end:t,setPlay:r,hasScroll:i}=ET(),s=$U();return xn("div",{className:`overlay ${e?"overlay--disable":""}
    ${i?"overlay--scrolled":""}`,children:[qe("div",{className:`loader ${n===100?"loader--disappear":""}`}),n===100&&xn("div",{className:`intro ${e?"intro--disappear":""}`,children:[xn("h1",{className:"logo",children:[qe("img",{src:"./images/Stratigem Digital Logo.png",alt:"",className:"img"}),"Welcome to Stratigem Digital"]}),qe("h2",{className:"set font-serif font-bold text-2xl uppercase ",style:{zIndex:15900},onClick:()=>{console.log("navigating..."),s("/about")},children:"About Us"}),xn("b",{className:"intro__scroll",children:["Your Growth Our Mission Let's Launch Your Business to New Heights!",qe("br",{}),qe("br",{}),qe("center",{children:"Scroll to begin the journey"})]}),qe("button",{className:"explore bg-white",onClick:()=>{r(!0)},children:"Start Your Journey Today!"})]}),qe("div",{className:`outro ${t?"outro--appear":""}`,children:qe("p",{className:"outro__text",children:"Wish you had a great Services with us... Reload to explore again"})})]})};function Kme(){const{play:n,end:e}=ET(),t=B.useMemo(()=>qe(Yoe,{children:qe(Zoe,{opacity:.08})}),[]);return xn(O_,{children:[xn(YC,{children:[qe("color",{attach:"background",args:["#b3e4f5"]}),qe(ane,{pages:n&&!e?20:0,damping:.5,style:{top:"10px",left:"0px",bottom:"10px",right:"10px",width:"auto",height:"auto",animation:"fadeIn 2.4s ease-in-out 1.2s forwards",opacity:0},children:qe($me,{})}),t]}),qe(Xme,{})]})}const D8=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Px=B.createContext({});function Jme(){return B.useContext(Px).visualElement}const HT=B.createContext(null),Rx=typeof document<"u",fk=Rx?B.useLayoutEffect:B.useEffect,L8=B.createContext({strict:!1});function Yme(n,e,t,r){const i=Jme(),s=B.useContext(L8),o=B.useContext(HT),a=B.useContext(D8).reducedMotion,l=B.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return B.useInsertionEffect(()=>{u&&u.update(t,o)}),fk(()=>{u&&u.render()}),B.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?fk:B.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function Xd(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Zme(n,e,t){return B.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Xd(t)&&(t.current=r))},[e])}function $g(n){return typeof n=="string"||Array.isArray(n)}function Bx(n){return typeof n=="object"&&typeof n.start=="function"}const Qme=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function Ix(n){return Bx(n.animate)||Qme.some(e=>$g(n[e]))}function F8(n){return!!(Ix(n)||n.variants)}function qme(n,e){if(Ix(n)){const{initial:t,animate:r}=n;return{initial:t===!1||$g(t)?t:void 0,animate:$g(r)?r:void 0}}return n.inherit!==!1?e:{}}function ege(n){const{initial:e,animate:t}=qme(n,B.useContext(Px));return B.useMemo(()=>({initial:e,animate:t}),[dk(e),dk(t)])}function dk(n){return Array.isArray(n)?n.join(" "):n}const hk={animation:["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xg={};for(const n in hk)Xg[n]={isEnabled:e=>hk[n].some(t=>!!e[t])};function tge(n){for(const e in n)Xg[e]={...Xg[e],...n[e]}}function k8(n){const e=B.useRef(null);return e.current===null&&(e.current=n()),e.current}const tg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let nge=1;function rge(){return k8(()=>{if(tg.hasEverUpdated)return nge++})}const O8=B.createContext({}),U8=B.createContext({}),ige=Symbol.for("motionComponentSymbol");function sge({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&tge(n);function s(a,l){let u;const c={...B.useContext(D8),...a,layoutId:oge(a)},{isStatic:f}=c,d=ege(a),m=f?void 0:rge(),g=r(a,f);if(!f&&Rx){d.visualElement=Yme(i,g,c,e);const v=B.useContext(U8),y=B.useContext(L8).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,y,n,m,v))}return B.createElement(Px.Provider,{value:d},u&&d.visualElement?B.createElement(u,{visualElement:d.visualElement,...c}):null,t(i,a,m,Zme(g,d.visualElement,l),g,f,d.visualElement))}const o=B.forwardRef(s);return o[ige]=i,o}function oge({layoutId:n}){const e=B.useContext(O8).id;return e&&n!==void 0?e+"-"+n:n}function age(n){function e(r,i={}){return sge(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const lge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function VT(n){return typeof n!="string"||n.includes("-")?!1:!!(lge.indexOf(n)>-1||/[A-Z]/.test(n))}const E_={};function uge(n){Object.assign(E_,n)}const Dx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ip=new Set(Dx);function N8(n,{layout:e,layoutId:t}){return ip.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!E_[n]||n==="opacity")}const ds=n=>!!(n&&n.getVelocity),cge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fge=Dx.length;function dge(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<fge;o++){const a=Dx[o];if(n[a]!==void 0){const l=cge[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}function z8(n){return n.startsWith("--")}const hge=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Dh=(n,e,t)=>Math.min(Math.max(t,n),e),Ff={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ng={...Ff,transform:n=>Dh(0,1,n)},Ky={...Ff,default:1},rg=n=>Math.round(n*1e5)/1e5,Kg=/(-)?([\d]*\.?[\d])+/g,PM=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,pge=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function I0(n){return typeof n=="string"}const D0=n=>({test:e=>I0(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ql=D0("deg"),_a=D0("%"),Ot=D0("px"),mge=D0("vh"),gge=D0("vw"),pk={..._a,parse:n=>_a.parse(n)/100,transform:n=>_a.transform(n*100)},mk={...Ff,transform:Math.round},G8={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,size:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,rotate:Ql,rotateX:Ql,rotateY:Ql,rotateZ:Ql,scale:Ky,scaleX:Ky,scaleY:Ky,scaleZ:Ky,skew:Ql,skewX:Ql,skewY:Ql,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:ng,originX:pk,originY:pk,originZ:Ot,zIndex:mk,fillOpacity:ng,strokeOpacity:ng,numOctaves:mk};function WT(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,c=!0;for(const f in e){const d=e[f];if(z8(f)){s[f]=d;continue}const m=G8[f],g=hge(d,m);if(ip.has(f)){if(l=!0,o[f]=g,!c)continue;d!==(m.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=g):i[f]=g}if(e.transform||(l||r?i.transform=dge(n.transform,t,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:m=0}=a;i.transformOrigin=`${f} ${d} ${m}`}}const jT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function H8(n,e,t){for(const r in e)!ds(e[r])&&!N8(r,t)&&(n[r]=e[r])}function vge({transformTemplate:n},e,t){return B.useMemo(()=>{const r=jT();return WT(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function yge(n,e,t){const r=n.style||{},i={};return H8(i,r,n),Object.assign(i,vge(n,e,t)),n.transformValues?n.transformValues(i):i}function _ge(n,e,t){const r={},i=yge(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const xge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function C_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||xge.has(n)}let V8=n=>!C_(n);function wge(n){n&&(V8=e=>e.startsWith("on")?!C_(e):n(e))}try{wge(require("@emotion/is-prop-valid").default)}catch{}function Sge(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(V8(i)||t===!0&&C_(i)||!e&&!C_(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function gk(n,e,t){return typeof n=="string"?n:Ot.transform(e+t*n)}function bge(n,e,t){const r=gk(e,n.x,n.width),i=gk(t,n.y,n.height);return`${r} ${i}`}const Age={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mge={offset:"strokeDashoffset",array:"strokeDasharray"};function Ege(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Age:Mge;n[s.offset]=Ot.transform(-r);const o=Ot.transform(e),a=Ot.transform(t);n[s.array]=`${o} ${a}`}function $T(n,{attrX:e,attrY:t,originX:r,originY:i,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...l},u,c,f){if(WT(n,l,u,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:m,dimensions:g}=n;d.transform&&(g&&(m.transform=d.transform),delete d.transform),g&&(r!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=bge(g,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),s!==void 0&&Ege(d,s,o,a,!1)}const W8=()=>({...jT(),attrs:{}}),XT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Cge(n,e,t,r){const i=B.useMemo(()=>{const s=W8();return $T(s,e,{enableHardwareAcceleration:!1},XT(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};H8(s,n.style,n),i.style={...s,...i.style}}return i}function Tge(n=!1){return(t,r,i,s,{latestValues:o},a)=>{const u=(VT(t)?Cge:_ge)(r,o,a,t),f={...Sge(r,typeof t=="string",n),...u,ref:s},{children:d}=r,m=B.useMemo(()=>ds(d)?d.get():d,[d]);return i&&(f["data-projection-id"]=i),B.createElement(t,{...f,children:m})}}const KT=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function j8(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const $8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X8(n,e,t,r){j8(n,e,void 0,r);for(const i in e.attrs)n.setAttribute($8.has(i)?i:KT(i),e.attrs[i])}function JT(n,e){const{style:t}=n,r={};for(const i in t)(ds(t[i])||e.style&&ds(e.style[i])||N8(i,n))&&(r[i]=t[i]);return r}function K8(n,e){const t=JT(n,e);for(const r in n)if(ds(n[r])||ds(e[r])){const i=r==="x"||r==="y"?"attr"+r.toUpperCase():r;t[i]=n[r]}return t}function YT(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}const T_=n=>Array.isArray(n),Pge=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Rge=n=>T_(n)?n[n.length-1]||0:n;function C1(n){const e=ds(n)?n.get():n;return Pge(e)?e.toValue():e}function Bge({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:Ige(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const J8=n=>(e,t)=>{const r=B.useContext(Px),i=B.useContext(HT),s=()=>Bge(n,e,r,i);return t?s():k8(s)};function Ige(n,e,t,r){const i={},s=r(n,{});for(const d in s)i[d]=C1(s[d]);let{initial:o,animate:a}=n;const l=Ix(n),u=F8(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=t?t.initial===!1:!1;c=c||o===!1;const f=c?a:o;return f&&typeof f!="boolean"&&!Bx(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const g=YT(n,m);if(!g)return;const{transitionEnd:v,transition:y,..._}=g;for(const x in _){let w=_[x];if(Array.isArray(w)){const S=c?w.length-1:0;w=w[S]}w!==null&&(i[x]=w)}for(const x in v)i[x]=v[x]}),i}const Dge={useVisualState:J8({scrapeMotionValuesFromProps:K8,createRenderState:W8,onMount:(n,e,{renderState:t,latestValues:r})=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}$T(t,r,{enableHardwareAcceleration:!1},XT(e.tagName),n.transformTemplate),X8(e,t)}})},Lge={useVisualState:J8({scrapeMotionValuesFromProps:JT,createRenderState:jT})};function Fge(n,{forwardMotionProps:e=!1},t,r){return{...VT(n)?Dge:Lge,preloadedFeatures:t,useRender:Tge(e),createVisualElement:r,Component:n}}function rl(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Y8=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Lx(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const kge=n=>e=>Y8(e)&&n(e,Lx(e));function cl(n,e,t,r){return rl(n,e,kge(t),r)}var In;(function(n){n.Animate="animate",n.Hover="whileHover",n.Tap="whileTap",n.Drag="whileDrag",n.Focus="whileFocus",n.InView="whileInView",n.Exit="exit"})(In||(In={}));const Oge=(n,e)=>t=>e(n(t)),Eu=(...n)=>n.reduce(Oge);function Z8(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const vk=Z8("dragHorizontal"),yk=Z8("dragVertical");function Q8(n){let e=!1;if(n==="y")e=yk();else if(n==="x")e=vk();else{const t=vk(),r=yk();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function q8(){const n=Q8(!0);return n?(n(),!1):!0}class Zu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function _k(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.type==="touch"||q8())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive(In.Hover,e),a[r]&&a[r](s,o)};return cl(n.current,t,i,{passive:!n.getProps()[r]})}class Uge extends Zu{mount(){this.unmount=Eu(_k(this.node,!0),_k(this.node,!1))}unmount(){}}class Nge extends Zu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive(In.Focus,!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(In.Focus,!1),this.isActive=!1)}mount(){this.unmount=Eu(rl(this.node.current,"focus",()=>this.onFocus()),rl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const eH=(n,e)=>e?n===e?!0:eH(n,e.parentElement):!1,xa=n=>n;function Db(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Lx(t))}class zge extends Zu{constructor(){super(...arguments),this.removeStartListeners=xa,this.removeEndListeners=xa,this.removeAccessibleListeners=xa,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),s=cl(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c}=this.node.getProps();eH(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)},{passive:!(r.onTap||r.onPointerUp)}),o=cl(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Eu(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Db("up",this.node.getProps().onTap)};this.removeEndListeners(),this.removeEndListeners=rl(this.node.current,"keyup",o),Db("down",(a,l)=>{this.startPress(a,l)})},t=rl(this.node.current,"keydown",e),r=()=>{this.isPressing&&Db("cancel",(s,o)=>this.cancelPress(s,o))},i=rl(this.node.current,"blur",r);this.removeAccessibleListeners=Eu(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive(In.Tap,!0),r&&r(e,t)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive(In.Tap,!1),!q8()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&r(e,t)}mount(){const e=this.node.getProps(),t=cl(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=rl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Eu(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const RM=new WeakMap,Lb=new WeakMap,Gge=n=>{const e=RM.get(n.target);e&&e(n)},Hge=n=>{n.forEach(Gge)};function Vge({root:n,...e}){const t=n||document;Lb.has(t)||Lb.set(t,{});const r=Lb.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Hge,{root:n,...e})),r[i]}function Wge(n,e,t){const r=Vge(e);return RM.set(n,t),r.observe(n),()=>{RM.delete(n),r.unobserve(n)}}const jge={some:0,all:1};class $ge extends Zu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}viewportFallback(){requestAnimationFrame(()=>{this.hasEnteredView=!0;const{onViewportEnter:e}=this.node.getProps();e&&e(null),this.node.animationState&&this.node.animationState.setActive(In.InView,!0)})}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s,fallback:o=!0}=e;if(typeof IntersectionObserver>"u"){o&&this.viewportFallback();return}const a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jge[i]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(In.InView,c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=c?f:d;m&&m(u)};return Wge(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Xge(e,t))&&this.startObserver()}unmount(){}}function Xge({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Kge={inView:{Feature:$ge},tap:{Feature:zge},focus:{Feature:Nge},hover:{Feature:Uge}};function tH(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const Jge=n=>/^\-?\d*\.?\d+$/.test(n),Yge=n=>/^0[^.\s]+$/.test(n),fl={delta:0,timestamp:0},nH=1/60*1e3,Zge=typeof performance<"u"?()=>performance.now():()=>Date.now(),rH=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(Zge()),nH);function Qge(n){let e=[],t=[],r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?e:t;return u&&o.add(l),d.indexOf(l)===-1&&(d.push(l),f&&i&&(r=e.length)),l},cancel:l=>{const u=t.indexOf(l);u!==-1&&t.splice(u,1),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.length=0,r=e.length,r)for(let u=0;u<r;u++){const c=e[u];c(l),o.has(c)&&(a.schedule(c),n())}i=!1,s&&(s=!1,a.process(l))}};return a}const qge=40;let BM=!0,Jg=!1,IM=!1;const L0=["read","update","preRender","render","postRender"],Fx=L0.reduce((n,e)=>(n[e]=Qge(()=>Jg=!0),n),{}),ji=L0.reduce((n,e)=>{const t=Fx[e];return n[e]=(r,i=!1,s=!1)=>(Jg||t0e(),t.schedule(r,i,s)),n},{}),zu=L0.reduce((n,e)=>(n[e]=Fx[e].cancel,n),{}),Fb=L0.reduce((n,e)=>(n[e]=()=>Fx[e].process(fl),n),{}),e0e=n=>Fx[n].process(fl),iH=n=>{Jg=!1,fl.delta=BM?nH:Math.max(Math.min(n-fl.timestamp,qge),1),fl.timestamp=n,IM=!0,L0.forEach(e0e),IM=!1,Jg&&(BM=!1,rH(iH))},t0e=()=>{Jg=!0,BM=!0,IM||rH(iH)};function ZT(n,e){n.indexOf(e)===-1&&n.push(e)}function QT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class qT{constructor(){this.subscriptions=[]}add(e){return ZT(this.subscriptions,e),()=>QT(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function e3(n,e){return e?n*(1e3/e):0}const n0e=n=>!isNaN(parseFloat(n));class r0e{constructor(e,t={}){this.version="9.0.7",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=fl;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ji.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ji.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=n0e(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qT);const r=this.events[e].add(t);return e==="change"?()=>{r(),ji.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?e3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t)||null,this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){this.animation=null}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lh(n,e){return new r0e(n,e)}const t3=(n,e)=>t=>!!(I0(t)&&pge.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),sH=(n,e,t)=>r=>{if(!I0(r))return r;const[i,s,o,a]=r.match(Kg);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},i0e=n=>Dh(0,255,n),kb={...Ff,transform:n=>Math.round(i0e(n))},Zc={test:t3("rgb","red"),parse:sH("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+kb.transform(n)+", "+kb.transform(e)+", "+kb.transform(t)+", "+rg(ng.transform(r))+")"};function s0e(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const DM={test:t3("#"),parse:s0e,transform:Zc.transform},Kd={test:t3("hsl","hue"),parse:sH("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+_a.transform(rg(e))+", "+_a.transform(rg(t))+", "+rg(ng.transform(r))+")"},zi={test:n=>Zc.test(n)||DM.test(n)||Kd.test(n),parse:n=>Zc.test(n)?Zc.parse(n):Kd.test(n)?Kd.parse(n):DM.parse(n),transform:n=>I0(n)?n:n.hasOwnProperty("red")?Zc.transform(n):Kd.transform(n)},oH="${c}",aH="${n}";function o0e(n){var e,t;return isNaN(n)&&I0(n)&&(((e=n.match(Kg))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(PM))===null||t===void 0?void 0:t.length)||0)>0}function P_(n){typeof n=="number"&&(n=`${n}`);const e=[];let t=0,r=0;const i=n.match(PM);i&&(t=i.length,n=n.replace(PM,oH),e.push(...i.map(zi.parse)));const s=n.match(Kg);return s&&(r=s.length,n=n.replace(Kg,aH),e.push(...s.map(Ff.parse))),{values:e,numColors:t,numNumbers:r,tokenised:n}}function lH(n){return P_(n).values}function uH(n){const{values:e,numColors:t,tokenised:r}=P_(n),i=e.length;return s=>{let o=r;for(let a=0;a<i;a++)o=o.replace(a<t?oH:aH,a<t?zi.transform(s[a]):rg(s[a]));return o}}const a0e=n=>typeof n=="number"?0:n;function l0e(n){const e=lH(n);return uH(n)(e.map(a0e))}const Gu={test:o0e,parse:lH,createTransformer:uH,getAnimatableNone:l0e},u0e=new Set(["brightness","contrast","saturate","opacity"]);function c0e(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Kg)||[];if(!r)return n;const i=t.replace(r,"");let s=u0e.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const f0e=/([a-z-]*)\(.*?\)/g,LM={...Gu,getAnimatableNone:n=>{const e=n.match(f0e);return e?e.map(c0e).join(" "):n}},d0e={...G8,color:zi,backgroundColor:zi,outlineColor:zi,fill:zi,stroke:zi,borderColor:zi,borderTopColor:zi,borderRightColor:zi,borderBottomColor:zi,borderLeftColor:zi,filter:LM,WebkitFilter:LM},n3=n=>d0e[n];function r3(n,e){let t=n3(n);return t!==LM&&(t=Gu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const cH=n=>e=>e.test(n),h0e={test:n=>n==="auto",parse:n=>n},fH=[Ff,Ot,_a,Ql,gge,mge,h0e],xm=n=>fH.find(cH(n)),p0e=[...fH,zi,Gu],m0e=n=>p0e.find(cH(n));function g0e(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function v0e(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function kx(n,e,t){const r=n.getProps();return YT(r,e,t!==void 0?t:r.custom,g0e(n),v0e(n))}function y0e(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Lh(t))}function _0e(n,e){const t=kx(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=Rge(s[o]);y0e(n,o,a)}}function x0e(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&i!==void 0?i:e[l]),c!=null&&(typeof c=="string"&&(Jge(c)||Yge(c))?c=parseFloat(c):!m0e(c)&&Gu.test(u)&&(c=r3(l,u)),n.addValue(l,Lh(c,{owner:n})),t[l]===void 0&&(t[l]=c),c!==null&&n.setBaseTarget(l,c))}}function w0e(n,e){return e?(e[n]||e.default||e).from:void 0}function S0e(n,e,t){const r={};for(const i in n){const s=w0e(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function R_(n){return!!(ds(n)&&n.add)}const b0e="framerAppearId",A0e="data-"+KT(b0e);var M0e=function(){},B_=function(){};const T1=n=>n*1e3,E0e={current:!1},i3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,s3=n=>e=>1-n(1-e),o3=n=>n*n,C0e=s3(o3),a3=i3(o3),dr=(n,e,t)=>-t*n+t*e+n;function Ob(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function T0e({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=Ob(l,a,n+1/3),s=Ob(l,a,n),o=Ob(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Ub=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},P0e=[DM,Zc,Kd],R0e=n=>P0e.find(e=>e.test(n));function xk(n){const e=R0e(n);let t=e.parse(n);return e===Kd&&(t=T0e(t)),t}const dH=(n,e)=>{const t=xk(n),r=xk(e),i={...t};return s=>(i.red=Ub(t.red,r.red,s),i.green=Ub(t.green,r.green,s),i.blue=Ub(t.blue,r.blue,s),i.alpha=dr(t.alpha,r.alpha,s),Zc.transform(i))};function hH(n,e){return typeof n=="number"?t=>dr(n,e,t):zi.test(n)?dH(n,e):mH(n,e)}const pH=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>hH(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},B0e=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=hH(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},mH=(n,e)=>{const t=Gu.createTransformer(e),r=P_(n),i=P_(e);return r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Eu(pH(r.values,i.values),t):o=>`${o>0?e:n}`},I_=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},wk=(n,e)=>t=>dr(n,e,t);function I0e(n){return typeof n=="number"?wk:typeof n=="string"?zi.test(n)?dH:mH:Array.isArray(n)?pH:typeof n=="object"?B0e:wk}function D0e(n,e,t){const r=[],i=t||I0e(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]:e;a=Eu(l,a)}r.push(a)}return r}function gH(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;B_(s===e.length),B_(!r||!Array.isArray(r)||r.length===s-1),n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=D0e(e,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<n.length-2&&!(u<n[c+1]);c++);const f=I_(n[c],n[c+1],u);return o[c](f)};return t?u=>l(Dh(n[0],n[s-1],u)):l}const vH=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,L0e=1e-7,F0e=12;function k0e(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=vH(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>L0e&&++a<F0e);return o}function yH(n,e,t,r){if(n===e&&t===r)return xa;const i=s=>k0e(s,0,1,n,t);return s=>s===0||s===1?s:vH(i(s),e,r)}const _H=n=>1-Math.sin(Math.acos(n)),l3=s3(_H),O0e=i3(l3),xH=yH(.33,1.53,.69,.99),u3=s3(xH),U0e=i3(u3),N0e=n=>(n*=2)<1?.5*u3(n):.5*(2-Math.pow(2,-10*(n-1))),z0e={linear:xa,easeIn:o3,easeInOut:a3,easeOut:C0e,circIn:_H,circInOut:O0e,circOut:l3,backIn:u3,backInOut:U0e,backOut:xH,anticipate:N0e},Sk=n=>{if(Array.isArray(n)){B_(n.length===4);const[e,t,r,i]=n;return yH(e,t,r,i)}else if(typeof n=="string")return z0e[n];return n},G0e=n=>Array.isArray(n)&&typeof n[0]!="number";function H0e(n,e){return n.map(()=>e||a3).splice(0,n.length-1)}function V0e(n){const e=n.length;return n.map((t,r)=>r!==0?r/(e-1):0)}function W0e(n,e){return n.map(t=>t*e)}function FM({keyframes:n,ease:e=a3,times:t,duration:r=300}){n=[...n];const i=G0e(e)?e.map(Sk):Sk(e),s={done:!1,value:n[0]},o=W0e(t&&t.length===n.length?t:V0e(n),r);function a(){return gH(o,n,{ease:Array.isArray(i)?i:H0e(n,i)})}let l=a();return{next:u=>(s.value=l(u),s.done=u>=r,s),flipTarget:()=>{n.reverse(),l=a()}}}const Nb=.001,j0e=.01,bk=10,$0e=.05,X0e=1;function K0e({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s;M0e(n<=bk*1e3);let o=1-e;o=Dh($0e,X0e,o),n=Dh(j0e,bk,n/1e3),o<1?(i=u=>{const c=u*o,f=c*n,d=c-t,m=kM(u,o),g=Math.exp(-f);return Nb-d/m*g},s=u=>{const f=u*o*n,d=f*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-f),v=kM(Math.pow(u,2),o);return(-i(u)+Nb>0?-1:1)*((d-m)*g)/v}):(i=u=>{const c=Math.exp(-u*n),f=(u-t)*n+1;return-Nb+c*f},s=u=>{const c=Math.exp(-u*n),f=(t-u)*(n*n);return c*f});const a=5/n,l=Y0e(i,s,a);if(n=n*1e3,isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const J0e=12;function Y0e(n,e,t){let r=t;for(let i=1;i<J0e;i++)r=r-n(r)/e(r);return r}function kM(n,e){return n*Math.sqrt(1-e*e)}const Z0e=["duration","bounce"],Q0e=["stiffness","damping","mass"];function Ak(n,e){return e.some(t=>n[t]!==void 0)}function q0e(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Ak(n,Q0e)&&Ak(n,Z0e)){const t=K0e(n);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}const eve=5;function wH({keyframes:n,restDelta:e,restSpeed:t,...r}){let i=n[0],s=n[n.length-1];const o={done:!1,value:i},{stiffness:a,damping:l,mass:u,velocity:c,duration:f,isResolvedFromDuration:d}=q0e(r);let m=tve,g=c?-(c/1e3):0;const v=l/(2*Math.sqrt(a*u));function y(){const _=s-i,x=Math.sqrt(a/u)/1e3,w=Math.abs(_)<5;if(t||(t=w?.01:2),e||(e=w?.005:.5),v<1){const S=kM(x,v);m=T=>{const E=Math.exp(-v*x*T);return s-E*((g+v*x*_)/S*Math.sin(S*T)+_*Math.cos(S*T))}}else if(v===1)m=S=>s-Math.exp(-x*S)*(_+(g+x*_)*S);else{const S=x*Math.sqrt(v*v-1);m=T=>{const E=Math.exp(-v*x*T),R=Math.min(S*T,300);return s-E*((g+v*x*_)*Math.sinh(R)+S*_*Math.cosh(R))/S}}}return y(),{next:_=>{const x=m(_);if(d)o.done=_>=f;else{let w=g;if(_!==0)if(v<1){const E=Math.max(0,_-eve);w=e3(x-m(E),_-E)}else w=0;const S=Math.abs(w)<=t,T=Math.abs(s-x)<=e;o.done=S&&T}return o.value=o.done?s:x,o},flipTarget:()=>{g=-g,[i,s]=[s,i],y()}}}wH.needsInterpolation=(n,e)=>typeof n=="string"||typeof e=="string";const tve=n=>0;function nve({keyframes:n=[0],velocity:e=0,power:t=.8,timeConstant:r=350,restDelta:i=.5,modifyTarget:s}){const o=n[0],a={done:!1,value:o};let l=t*e;const u=o+l,c=s===void 0?u:s(u);return c!==u&&(l=c-o),{next:f=>{const d=-l*Math.exp(-f/r);return a.done=!(d>i||d<-i),a.value=a.done?c:c+d,a},flipTarget:()=>{}}}const rve={decay:nve,keyframes:FM,tween:FM,spring:wH};function SH(n,e,t=0){return n-e-t}function ive(n,e=0,t=0,r=!0){return r?SH(e+-n,e,t):e-(n-e)+t}function sve(n,e,t,r){return r?n>=e+t:n<=-t}const ove=n=>{const e=({delta:t})=>n(t);return{start:()=>ji.update(e,!0),stop:()=>zu.update(e)}};function D_({duration:n,driver:e=ove,elapsed:t=0,repeat:r=0,repeatType:i="loop",repeatDelay:s=0,keyframes:o,autoplay:a=!0,onPlay:l,onStop:u,onComplete:c,onRepeat:f,onUpdate:d,type:m="keyframes",...g}){const v=t;let y,_=0,x=n,w=!1,S=!0,T;const E=rve[o.length>2?"keyframes":m]||FM,R=o[0],b=o[o.length-1];let M={done:!1,value:R};const{needsInterpolation:C}=E;C&&C(R,b)&&(T=gH([0,100],[R,b],{clamp:!1}),o=[0,100]);const L=E({...g,duration:n,keyframes:o});function D(){_++,i==="reverse"?(S=_%2===0,t=ive(t,x,s,S)):(t=SH(t,x,s),i==="mirror"&&L.flipTarget()),w=!1,f&&f()}function z(){y&&y.stop(),c&&c()}function F(G){S||(G=-G),t+=G,w||(M=L.next(Math.max(0,t)),T&&(M.value=T(M.value)),w=S?M.done:t<=0),d&&d(M.value),w&&(_===0&&(x=x!==void 0?x:t),_<r?sve(t,x,s,S)&&D():z())}function H(){l&&l(),y=e(F),y.start()}return a&&H(),{stop:()=>{u&&u(),y&&y.stop()},set currentTime(G){t=v,F(G)},sample:G=>{t=v;const te=n&&typeof n=="number"?Math.max(n*.5,50):50;let V=0;for(F(0);V<=G;){const K=G-V;F(Math.min(K,te)),V+=te}return M}}}function ave(n){return!n||Array.isArray(n)||typeof n=="string"&&bH[n]}const Rm=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,bH={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rm([0,.65,.55,1]),circOut:Rm([.55,0,1,.45]),backIn:Rm([.31,.01,.66,-.59]),backOut:Rm([.33,1.53,.69,.99])};function lve(n){if(n)return Array.isArray(n)?Rm(n):bH[n]}function uve(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){return n.animate({[e]:t,offset:l},{delay:r,duration:i,easing:lve(a),fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Mk={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},zb={},AH={};for(const n in Mk)AH[n]=()=>(zb[n]===void 0&&(zb[n]=Mk[n]()),zb[n]);function cve(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const fve=new Set(["opacity"]),Jy=10;function dve(n,e,{onUpdate:t,onComplete:r,...i}){if(!(AH.waapi()&&fve.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0))return!1;let{keyframes:o,duration:a=300,elapsed:l=0,ease:u}=i;if(i.type==="spring"||!ave(i.ease)){if(i.repeat===1/0)return;const f=D_({...i,elapsed:0});let d={done:!1,value:o[0]};const m=[];let g=0;for(;!d.done&&g<2e4;)d=f.sample(g),m.push(d.value),g+=Jy;o=m,a=g-Jy,u="linear"}const c=uve(n.owner.current,e,o,{...i,delay:-l,duration:a,ease:u});return c.onfinish=()=>{n.set(cve(o,i)),ji.update(()=>c.cancel()),r&&r()},{get currentTime(){return c.currentTime||0},set currentTime(f){c.currentTime=f},stop:()=>{const{currentTime:f}=c;if(f){const d=D_({...i,autoplay:!1});n.setWithVelocity(d.sample(f-Jy).value,d.sample(f).value,Jy)}ji.update(()=>c.cancel())}}}function MH(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(zu.read(r),n(s-e))};return ji.read(r,!0),()=>zu.read(r)}function hve({keyframes:n,elapsed:e,onUpdate:t,onComplete:r}){const i=()=>{t&&t(n[n.length-1]),r&&r()};return e?{stop:MH(i,-e)}:i()}function pve({keyframes:n,velocity:e=0,min:t,max:r,power:i=.8,timeConstant:s=750,bounceStiffness:o=500,bounceDamping:a=10,restDelta:l=1,modifyTarget:u,driver:c,onUpdate:f,onComplete:d,onStop:m}){const g=n[0];let v;function y(S){return t!==void 0&&S<t||r!==void 0&&S>r}function _(S){return t===void 0?r:r===void 0||Math.abs(t-S)<Math.abs(r-S)?t:r}function x(S){v&&v.stop(),v=D_({keyframes:[0,1],velocity:0,...S,driver:c,onUpdate:T=>{f&&f(T),S.onUpdate&&S.onUpdate(T)},onComplete:d,onStop:m})}function w(S){x({type:"spring",stiffness:o,damping:a,restDelta:l,...S})}if(y(g))w({velocity:e,keyframes:[g,_(g)]});else{let S=i*e+g;typeof u<"u"&&(S=u(S));const T=_(S),E=T===t?-1:1;let R,b;const M=C=>{R=b,b=C,e=e3(C-R,fl.delta),(E===1&&C>T||E===-1&&C<T)&&w({keyframes:[C,T],velocity:e})};x({type:"decay",keyframes:[g,0],velocity:e,timeConstant:s,power:i,restDelta:l,modifyTarget:u,onUpdate:y(S)?M:void 0})}return{stop:()=>v&&v.stop()}}const Tc=()=>({type:"spring",stiffness:500,damping:25,restSpeed:10}),Yy=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Gb=()=>({type:"keyframes",ease:"linear",duration:.3}),mve={type:"keyframes",duration:.8},Ek={x:Tc,y:Tc,z:Tc,rotate:Tc,rotateX:Tc,rotateY:Tc,rotateZ:Tc,scaleX:Yy,scaleY:Yy,scale:Yy,opacity:Gb,backgroundColor:Gb,color:Gb,default:Yy},gve=(n,{keyframes:e})=>e.length>2?mve:(Ek[n]||Ek.default)(e[1]),OM=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&Gu.test(e)&&!e.startsWith("url("));function vve({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function Ck(n){return n===0||typeof n=="string"&&parseFloat(n)===0&&n.indexOf(" ")===-1}function Tk(n){return typeof n=="number"?0:r3("",n)}function EH(n,e){return n[e]||n.default||n}function yve(n,e,t,r){const i=OM(e,t);let s=r.from!==void 0?r.from:n.get();return s==="none"&&i&&typeof t=="string"?s=r3(e,t):Ck(s)&&typeof t=="string"?s=Tk(t):!Array.isArray(t)&&Ck(t)&&typeof s=="string"&&(t=Tk(s)),Array.isArray(t)?(t[0]===null&&(t[0]=s),t):[s,t]}const c3=(n,e,t,r={})=>i=>{const s=EH(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-T1(o);const l=yve(e,n,t,s),u=l[0],c=l[l.length-1],f=OM(n,u),d=OM(n,c);let m={keyframes:l,velocity:e.getVelocity(),...s,elapsed:a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(!f||!d||E0e.current||s.type===!1)return hve(m);if(s.type==="inertia")return pve(m);if(vve(s)||(m={...m,...gve(n,m)}),m.duration&&(m.duration=T1(m.duration)),m.repeatDelay&&(m.repeatDelay=T1(m.repeatDelay)),e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=dve(e,n,m);if(g)return g}return D_(m)};function _ve(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>UM(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=UM(n,e,t);else{const i=typeof e=="function"?kx(n,e,t.custom):e;r=CH(n,i,t)}return r.then(()=>n.notify("AnimationComplete",e))}function UM(n,e,t={}){const r=kx(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>CH(n,r,t):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return xve(n,e,u+l,c,f,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(u)}else return Promise.all([s(),o(t.delay)])}function CH(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(s=r);const u=[],c=i&&n.animationState&&n.animationState.getState()[i];for(const f in a){const d=n.getValue(f),m=a[f];if(!d||m===void 0||c&&Sve(c,f))continue;const g={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!d.hasAnimated){const y=n.getProps()[A0e];y&&(g.elapsed=window.HandoffAppearAnimations(y,f,d,ji))}let v=d.start(c3(f,d,m,n.shouldReduceMotion&&ip.has(f)?{type:!1}:g));R_(l)&&(l.add(f),v=v.then(()=>l.remove(f))),u.push(v)}return Promise.all(u).then(()=>{o&&_0e(n,o)})}function xve(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(n.variantChildren).sort(wve).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(UM(u,e,{...s,delay:t+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function wve(n,e){return n.sortNodePosition(e)}function Sve({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}const f3=[In.Animate,In.InView,In.Focus,In.Hover,In.Tap,In.Drag,In.Exit],bve=[...f3].reverse(),Ave=f3.length;function Mve(n){return e=>Promise.all(e.map(({animation:t,options:r})=>_ve(n,t,r)))}function Eve(n){let e=Mve(n);const t=Tve();let r=!0;const i=(l,u)=>{const c=kx(n,u);if(c){const{transition:f,transitionEnd:d,...m}=c;l={...l,...m,...d}}return l};function s(l){e=l(n)}function o(l,u){const c=n.getProps(),f=n.getVariantContext(!0)||{},d=[],m=new Set;let g={},v=1/0;for(let _=0;_<Ave;_++){const x=bve[_],w=t[x],S=c[x]!==void 0?c[x]:f[x],T=$g(S),E=x===u?w.isActive:null;E===!1&&(v=_);let R=S===f[x]&&S!==c[x]&&T;if(R&&r&&n.manuallyAnimateOnMount&&(R=!1),w.protectedKeys={...g},!w.isActive&&E===null||!S&&!w.prevProp||Bx(S)||typeof S=="boolean")continue;const b=Cve(w.prevProp,S);let M=b||x===u&&w.isActive&&!R&&T||_>v&&T;const C=Array.isArray(S)?S:[S];let L=C.reduce(i,{});E===!1&&(L={});const{prevResolvedValues:D={}}=w,z={...D,...L},F=H=>{M=!0,m.delete(H),w.needsAnimating[H]=!0};for(const H in z){const G=L[H],te=D[H];g.hasOwnProperty(H)||(G!==te?T_(G)&&T_(te)?!tH(G,te)||b?F(H):w.protectedKeys[H]=!0:G!==void 0?F(H):m.add(H):G!==void 0&&m.has(H)?F(H):w.protectedKeys[H]=!0)}w.prevProp=S,w.prevResolvedValues=L,w.isActive&&(g={...g,...L}),r&&n.blockInitialAnimation&&(M=!1),M&&!R&&d.push(...C.map(H=>({animation:H,options:{type:x,...l}})))}if(m.size){const _={};m.forEach(x=>{const w=n.getBaseTarget(x);w!==void 0&&(_[x]=w)}),d.push({animation:_})}let y=!!d.length;return r&&c.initial===!1&&!n.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,u,c){if(t[l].isActive===u)return Promise.resolve();n.variantChildren&&n.variantChildren.forEach(d=>{d.animationState&&d.animationState.setActive(l,u)}),t[l].isActive=u;const f=o(c,l);for(const d in t)t[d].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function Cve(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!tH(e,n):!1}function Pc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tve(){return{[In.Animate]:Pc(!0),[In.InView]:Pc(),[In.Hover]:Pc(),[In.Tap]:Pc(),[In.Drag]:Pc(),[In.Focus]:Pc(),[In.Exit]:Pc()}}class Pve extends Zu{constructor(e){super(e),e.animationState||(e.animationState=Eve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Bx(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Rve=0;class Bve extends Zu{constructor(){super(...arguments),this.id=Rve++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive(In.Exit,!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ive={animation:{Feature:Pve},exit:{Feature:Bve}},Pk=(n,e)=>Math.abs(n-e);function Dve(n,e){const t=Pk(n.x,e.x),r=Pk(n.y,e.y);return Math.sqrt(t**2+r**2)}class TH{constructor(e,t,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Vb(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,f=Dve(u.offset,{x:0,y:0})>=3;if(!c&&!f)return;const{point:d}=u,{timestamp:m}=fl;this.history.push({...d,timestamp:m});const{onStart:g,onMove:v}=this.handlers;c||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,c)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Hb(c,this.transformPagePoint),ji.update(this.updatePoint,!0)},this.handlePointerUp=(u,c)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:f,onSessionEnd:d}=this.handlers,m=Vb(u.type==="pointercancel"?this.lastMoveEventInfo:Hb(c,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,m),d&&d(u,m)},!Y8(e))return;this.handlers=t,this.transformPagePoint=r;const i=Lx(e),s=Hb(i,this.transformPagePoint),{point:o}=s,{timestamp:a}=fl;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Vb(s,this.history)),this.removeListeners=Eu(cl(window,"pointermove",this.handlePointerMove),cl(window,"pointerup",this.handlePointerUp),cl(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zu.update(this.updatePoint)}}function Hb(n,e){return e?{point:e(n.point)}:n}function Rk(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Vb({point:n},e){return{point:n,delta:Rk(n,PH(e)),offset:Rk(n,Lve(e)),velocity:Fve(e,.1)}}function Lve(n){return n[0]}function PH(n){return n[n.length-1]}function Fve(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=PH(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>T1(e)));)t--;if(!r)return{x:0,y:0};const s=(i.timestamp-r.timestamp)/1e3;if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ds(n){return n.max-n.min}function NM(n,e=0,t=.01){return Math.abs(n-e)<=t}function Bk(n,e,t,r=.5){n.origin=r,n.originPoint=dr(e.min,e.max,n.origin),n.scale=Ds(t)/Ds(e),(NM(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=dr(t.min,t.max,n.origin)-n.originPoint,(NM(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ig(n,e,t,r){Bk(n.x,e.x,t.x,r?r.originX:void 0),Bk(n.y,e.y,t.y,r?r.originY:void 0)}function Ik(n,e,t){n.min=t.min+e.min,n.max=n.min+Ds(e)}function kve(n,e,t){Ik(n.x,e.x,t.x),Ik(n.y,e.y,t.y)}function Dk(n,e,t){n.min=e.min-t.min,n.max=n.min+Ds(e)}function sg(n,e,t){Dk(n.x,e.x,t.x),Dk(n.y,e.y,t.y)}function Ove(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?dr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?dr(t,n,r.max):Math.min(n,t)),n}function Lk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Uve(n,{top:e,left:t,bottom:r,right:i}){return{x:Lk(n.x,t,i),y:Lk(n.y,e,r)}}function Fk(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Nve(n,e){return{x:Fk(n.x,e.x),y:Fk(n.y,e.y)}}function zve(n,e){let t=.5;const r=Ds(n),i=Ds(e);return i>r?t=I_(e.min,e.max-r,n.min):r>i&&(t=I_(n.min,n.max-i,e.min)),Dh(0,1,t)}function Gve(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const zM=.35;function Hve(n=zM){return n===!1?n=0:n===!0&&(n=zM),{x:kk(n,"left","right"),y:kk(n,"top","bottom")}}function kk(n,e,t){return{min:Ok(n,e),max:Ok(n,t)}}function Ok(n,e){return typeof n=="number"?n:n[e]||0}const Uk=()=>({translate:0,scale:1,origin:0,originPoint:0}),og=()=>({x:Uk(),y:Uk()}),Nk=()=>({min:0,max:0}),Lr=()=>({x:Nk(),y:Nk()});function ua(n){return[n("x"),n("y")]}function RH({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Vve({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Wve(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Wb(n){return n===void 0||n===1}function GM({scale:n,scaleX:e,scaleY:t}){return!Wb(n)||!Wb(e)||!Wb(t)}function Oc(n){return GM(n)||BH(n)||n.z||n.rotate||n.rotateX||n.rotateY}function BH(n){return zk(n.x)||zk(n.y)}function zk(n){return n&&n!=="0%"}function L_(n,e,t){const r=n-t,i=e*r;return t+i}function Gk(n,e,t,r,i){return i!==void 0&&(n=L_(n,i,r)),L_(n,t,r)+e}function HM(n,e=0,t=1,r,i){n.min=Gk(n.min,e,t,r,i),n.max=Gk(n.max,e,t,r,i)}function IH(n,{x:e,y:t}){HM(n.x,e.translate,e.scale,e.originPoint),HM(n.y,t.translate,t.scale,t.originPoint)}function jve(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,IH(n,o)),r&&Oc(s.latestValues)&&Jd(n,s.latestValues))}e.x=Hk(e.x),e.y=Hk(e.y)}function Hk(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function tu(n,e){n.min=n.min+e,n.max=n.max+e}function Vk(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=dr(n.min,n.max,s);HM(n,e[t],e[r],o,e.scale)}const $ve=["x","scaleX","originX"],Xve=["y","scaleY","originY"];function Jd(n,e){Vk(n.x,e,$ve),Vk(n.y,e,Xve)}function DH(n,e){return RH(Wve(n.getBoundingClientRect(),e))}function Kve(n,e,t){const r=DH(n,t),{scroll:i}=e;return i&&(tu(r.x,i.offset.x),tu(r.y,i.offset.y)),r}const Jve=new WeakMap;class Yve{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=l=>{this.stopAnimation(),t&&this.snapToCursor(Lx(l,"page").point)},s=(l,u)=>{const{drag:c,dragPropagation:f,onDragStart:d}=this.getProps();if(c&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Q8(c),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ua(g=>{let v=this.getAxisMotionValue(g).get()||0;if(_a.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const _=y.layout.layoutBox[g];_&&(v=Ds(_)*(parseFloat(v)/100))}}this.originPoint[g]=v}),d&&d(l,u);const{animationState:m}=this.visualElement;m&&m.setActive(In.Drag,!0)},o=(l,u)=>{const{dragPropagation:c,dragDirectionLock:f,onDirectionLock:d,onDrag:m}=this.getProps();if(!c&&!this.openGlobalLock)return;const{offset:g}=u;if(f&&this.currentDirection===null){this.currentDirection=Zve(g),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),m&&m(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new TH(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&s(e,t)}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive(In.Drag,!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Zy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Ove(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&Xd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Uve(r.layoutBox,e):this.constraints=!1,this.elastic=Hve(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ua(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Gve(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Kve(r,i.root,this.visualElement.getTransformPagePoint());let o=Nve(i.layout.layoutBox,s);if(t){const a=t(Vve(o));this.hasMutatedConstraints=!!a,a&&(o=RH(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ua(c=>{if(!Zy(c,t,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const d=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(c3(e,r,0,t))}stopAnimation(){ua(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ua(t=>{const{drag:r}=this.getProps();if(!Zy(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Xd(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ua(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=zve({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ua(o=>{if(!Zy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(dr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Jve.set(this.visualElement,this);const e=this.visualElement.current,t=cl(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xd(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=rl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ua(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=zM,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Zy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Zve(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Qve extends Zu{constructor(e){super(e),this.removeGroupControls=xa,this.removeListeners=xa,this.controls=new Yve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xa}unmount(){this.removeGroupControls(),this.removeListeners()}}class qve extends Zu{constructor(){super(...arguments),this.removePointerDownListener=xa}onPointerDown(e){this.session=new TH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:e,onStart:t,onMove:r,onEnd:(s,o)=>{delete this.session,i&&i(s,o)}}}mount(){this.removePointerDownListener=cl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function eye(){const n=B.useContext(HT);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=B.useId();return B.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}function Wk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const wm={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ot.test(n))n=parseFloat(n);else return n;const t=Wk(n,e.target.x),r=Wk(n,e.target.y);return`${t}% ${r}%`}};function VM(n){return typeof n=="string"&&n.startsWith("var(--")}const LH=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tye(n){const e=LH.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function WM(n,e,t=1){const[r,i]=tye(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);return s?s.trim():VM(i)?WM(i,e,t+1):i}function nye(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!VM(s))return;const o=WM(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!VM(s))continue;const o=WM(s,r);o&&(e[i]=o,t&&t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const jk="_$css",rye={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=n.includes("var("),s=[];i&&(n=n.replace(LH,m=>(s.push(m),jk)));const o=Gu.parse(n);if(o.length>5)return r;const a=Gu.createTransformer(n),l=typeof o[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;o[0+l]/=u,o[1+l]/=c;const f=dr(u,c,.5);typeof o[2+l]=="number"&&(o[2+l]/=f),typeof o[3+l]=="number"&&(o[3+l]/=f);let d=a(o);if(i){let m=0;d=d.replace(jk,()=>{const g=s[m];return m++,g})}return d}};class iye extends he.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;uge(sye),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),tg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ji.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FH(n){const[e,t]=eye(),r=B.useContext(O8);return he.createElement(iye,{...n,layoutGroup:r,switchLayoutGroup:B.useContext(U8),isPresent:e,safeToRemove:t})}const sye={borderRadius:{...wm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wm,borderTopRightRadius:wm,borderBottomLeftRadius:wm,borderBottomRightRadius:wm,boxShadow:rye};function oye(n,e,t={}){const r=ds(n)?n:Lh(n);return r.start(c3("",r,e,t)),{stop:()=>r.stop(),isAnimating:()=>r.isAnimating()}}const kH=["TopLeft","TopRight","BottomLeft","BottomRight"],aye=kH.length,$k=n=>typeof n=="string"?parseFloat(n):n,Xk=n=>typeof n=="number"||Ot.test(n);function lye(n,e,t,r,i,s){i?(n.opacity=dr(0,t.opacity!==void 0?t.opacity:1,uye(r)),n.opacityExit=dr(e.opacity!==void 0?e.opacity:1,0,cye(r))):s&&(n.opacity=dr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<aye;o++){const a=`border${kH[o]}Radius`;let l=Kk(e,a),u=Kk(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Xk(l)===Xk(u)?(n[a]=Math.max(dr($k(l),$k(u),r),0),(_a.test(u)||_a.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=dr(e.rotate||0,t.rotate||0,r))}function Kk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const uye=OH(0,.5,l3),cye=OH(.5,.95,xa);function OH(n,e,t){return r=>r<n?0:r>e?1:t(I_(n,e,r))}function Jk(n,e){n.min=e.min,n.max=e.max}function Bo(n,e){Jk(n.x,e.x),Jk(n.y,e.y)}function Yk(n,e,t,r,i){return n-=e,n=L_(n,1/t,r),i!==void 0&&(n=L_(n,1/i,r)),n}function fye(n,e=0,t=1,r=.5,i,s=n,o=n){if(_a.test(e)&&(e=parseFloat(e),e=dr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dr(s.min,s.max,r);n===s&&(a-=e),n.min=Yk(n.min,e,t,a,i),n.max=Yk(n.max,e,t,a,i)}function Zk(n,e,[t,r,i],s,o){fye(n,e[t],e[r],e[i],e.scale,s,o)}const dye=["x","scaleX","originX"],hye=["y","scaleY","originY"];function Qk(n,e,t,r){Zk(n.x,e,dye,t?t.x:void 0,r?r.x:void 0),Zk(n.y,e,hye,t?t.y:void 0,r?r.y:void 0)}function qk(n){return n.translate===0&&n.scale===1}function UH(n){return qk(n.x)&&qk(n.y)}function NH(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function eO(n){return Ds(n.x)/Ds(n.y)}class pye{constructor(){this.members=[]}add(e){ZT(this.members,e),e.scheduleRender()}remove(e){if(QT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tO(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:c}=t;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const mye=(n,e)=>n.depth-e.depth;class gye{constructor(){this.children=[],this.isDirty=!1}add(e){ZT(this.children,e),this.isDirty=!0}remove(e){QT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mye),this.isDirty=!1,this.children.forEach(e)}}const nO=["","X","Y","Z"],rO=1e3;let vye=0;function zH({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o,a={},l=e==null?void 0:e()){this.id=vye++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isTransformDirty=!1,this.isProjectionDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.nodes.forEach(xye),this.nodes.forEach(bye),this.nodes.forEach(Aye)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=o,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0,o&&this.root.registerPotentialNode(o,this);for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new gye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new qT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}registerPotentialNode(o,a){this.potentialNodes.set(o,a)}mount(o,a=!1){if(this.instance)return;this.isSVG=o instanceof SVGElement&&o.tagName!=="svg",this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),a&&(u||l)&&(this.isLayoutDirty=!0),n){let f;const d=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=MH(d,250),tg.hasAnimatedSinceResize&&(tg.hasAnimatedSinceResize=!1,this.nodes.forEach(sO))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||Pye,{onLayoutAnimationStart:y,onLayoutAnimationComplete:_}=c.getProps(),x=!this.targetLayout||!NH(this.targetLayout,g)||m,w=!d&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const S={...EH(v,"layout"),onPlay:y,onComplete:_};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else!d&&this.animationProgress===0&&sO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zu.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Mye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iO);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Rye),this.potentialNodes.clear()),this.nodes.forEach(Sye),this.nodes.forEach(yye),this.nodes.forEach(_ye),this.clearAllSnapshots(),Fb.update(),Fb.preRender(),Fb.render())}clearAllSnapshots(){this.nodes.forEach(wye),this.sharedNodes.forEach(Eye)}scheduleUpdateProjection(){ji.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){ji.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!UH(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Oc(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Bye(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Lr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(tu(a.x,l.offset.x),tu(a.y,l.offset.y)),a}removeElementScroll(o){const a=Lr();Bo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){Bo(a,o);const{scroll:d}=this.root;d&&(tu(a.x,-d.offset.x),tu(a.y,-d.offset.y))}tu(a.x,c.offset.x),tu(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=Lr();Bo(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Jd(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Oc(c.latestValues)&&Jd(l,c.latestValues)}return Oc(this.latestValues)&&Jd(l,this.latestValues),l}removeTransform(o){const a=Lr();Bo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Oc(u.latestValues))continue;GM(u.latestValues)&&u.updateSnapshot();const c=Lr(),f=u.measurePageBox();Bo(c,f),Qk(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Oc(this.latestValues)&&Qk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.isProjectionDirty=!0,this.root.scheduleUpdateProjection()}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){const o=this.getLead();if(this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),!this.isProjectionDirty&&!this.attemptToResolveRelativeTarget)return;const{layout:a,layoutId:l}=this.options;if(!(!this.layout||!(a||l))){if(!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout?(this.relativeParent=u,this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),sg(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),Bo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?kve(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bo(this.target,this.layout.layoutBox),IH(this.target,this.targetDelta)):Bo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target?(this.relativeParent=u,this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),sg(this.relativeTargetOrigin,this.target,u.target),Bo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||GM(this.parent.latestValues)||BH(this.parent.latestValues)))return(this.parent.relativeTarget||this.parent.targetDelta||this.parent.options.layoutRoot)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}calcProjection(){const{isProjectionDirty:o,isTransformDirty:a}=this;this.isProjectionDirty=this.isTransformDirty=!1;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if(o&&(c=!1),u&&a&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Bo(this.layoutCorrected,this.layout.layoutBox),jve(this.layoutCorrected,this.treeScale,this.path,u);const{target:m}=l;if(!m)return;this.projectionDelta||(this.projectionDelta=og(),this.projectionDeltaWithTransform=og());const g=this.treeScale.x,v=this.treeScale.y,y=this.projectionTransform;ig(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=tO(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==g||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=og();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Lr(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,y=this.getStack(),_=!y||y.members.length<=1,x=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(Tye));this.animationProgress=0,this.mixTargetDelta=w=>{const S=w/1e3;oO(f.x,o.x,S),oO(f.y,o.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sg(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Cye(this.relativeTarget,this.relativeTargetOrigin,d,S)),v&&(this.animationValues=c,lye(c,u,this.latestValues,S,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zu.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ji.update(()=>{tg.hasAnimatedSinceResize=!0,this.currentAnimation=oye(0,rO,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&GH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Lr();const f=Ds(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const d=Ds(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Bo(a,l),Jd(a,c),ig(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new pye),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<nO.length;c++){const f="rotate"+nO[c];l[f]&&(u[f]=l[f],o.setStaticValue(f,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=C1(o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=C1(o.pointerEvents)||""),this.hasProjected&&!Oc(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=tO(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in E_){if(d[v]===void 0)continue;const{correct:y,applyTo:_}=E_[v],x=u.transform==="none"?d[v]:y(d[v],f);if(_){const w=_.length;for(let S=0;S<w;S++)u[_[S]]=x}else u[v]=x}return this.options.layoutId&&(u.pointerEvents=f===this?C1(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(iO),this.root.sharedNodes.clear()}}}function yye(n){n.updateLayout()}function _ye(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?ua(f=>{const d=o?t.measuredBox[f]:t.layoutBox[f],m=Ds(d);d.min=r[f].min,d.max=d.min+m}):GH(s,t.layoutBox,r)&&ua(f=>{const d=o?t.measuredBox[f]:t.layoutBox[f],m=Ds(r[f]);d.max=d.min+m});const a=og();ig(a,r,t.layoutBox);const l=og();o?ig(l,n.applyTransform(i,!0),t.measuredBox):ig(l,r,t.layoutBox);const u=!UH(a);let c=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:m}=f;if(d&&m){const g=Lr();sg(g,t.layoutBox,d.layoutBox);const v=Lr();sg(v,r,m.layoutBox),NH(g,v)||(c=!0),f.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=g,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function xye(n){n.isProjectionDirty||(n.isProjectionDirty=!!(n.parent&&n.parent.isProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=!!(n.parent&&n.parent.isTransformDirty))}function wye(n){n.clearSnapshot()}function iO(n){n.clearMeasurements()}function Sye(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function sO(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0}function bye(n){n.resolveTargetDelta()}function Aye(n){n.calcProjection()}function Mye(n){n.resetRotation()}function Eye(n){n.removeLeadSnapshot()}function oO(n,e,t){n.translate=dr(e.translate,0,t),n.scale=dr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function aO(n,e,t,r){n.min=dr(e.min,t.min,r),n.max=dr(e.max,t.max,r)}function Cye(n,e,t,r){aO(n.x,e.x,t.x,r),aO(n.y,e.y,t.y,r)}function Tye(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Pye={duration:.45,ease:[.4,0,.1,1]};function Rye(n,e){let t=n.root;for(let s=n.path.length-1;s>=0;s--)if(n.path[s].instance){t=n.path[s];break}const i=(t&&t!==n.root?t.instance:document).querySelector(`[data-projection-id="${e}"]`);i&&n.mount(i,!0)}function lO(n){n.min=Math.round(n.min),n.max=Math.round(n.max)}function Bye(n){lO(n.x),lO(n.y)}function GH(n,e,t){return n==="position"||n==="preserve-aspect"&&!NM(eO(e),eO(t),.2)}const Iye=zH({attachResizeListener:(n,e)=>rl(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jb={current:void 0},HH=zH({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!jb.current){const n=new Iye(0,{});n.mount(window),n.setOptions({layoutScroll:!0}),jb.current=n}return jb.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Dye={pan:{Feature:qve},drag:{Feature:Qve,ProjectionNode:HH,MeasureLayout:FH}},Lye=new Set(["width","height","top","left","right","bottom","x","y"]),VH=n=>Lye.has(n),Fye=n=>Object.keys(n).some(VH),uO=n=>n===Ff||n===Ot;var cO;(function(n){n.width="width",n.height="height",n.left="left",n.right="right",n.top="top",n.bottom="bottom"})(cO||(cO={}));const fO=(n,e)=>parseFloat(n.split(", ")[e]),dO=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return fO(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?fO(s[1],n):0}},kye=new Set(["x","y","z"]),Oye=Dx.filter(n=>!kye.has(n));function Uye(n){const e=[];return Oye.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const hO={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:dO(4,13),y:dO(5,14)},Nye=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=hO[u](r,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),n[u]=hO[u](l,s)}),n},zye=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(VH);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let c=t[l],f=xm(c);const d=e[l];let m;if(T_(d)){const g=d.length,v=d[0]===null?1:0;c=d[v],f=xm(c);for(let y=v;y<g;y++)m?B_(xm(d[y])===m):m=xm(d[y])}else m=xm(d);if(f!==m)if(uO(f)&&uO(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&m===Ot&&(e[l]=d.map(parseFloat))}else f!=null&&f.transform&&(m!=null&&m.transform)&&(c===0||d===0)?c===0?u.set(m.transform(c)):e[l]=f.transform(d):(o||(s=Uye(n),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Nye(e,n,a);return s.length&&s.forEach(([c,f])=>{n.getValue(c).set(f)}),n.render(),Rx&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Gye(n,e,t,r){return Fye(e)?zye(n,e,t,r):{target:e,transitionEnd:r}}const Hye=(n,e,t,r)=>{const i=nye(n,e,r);return e=i.target,r=i.transitionEnd,Gye(n,e,t,r)},jM={current:null},WH={current:!1};function Vye(){if(WH.current=!0,!!Rx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>jM.current=n.matches;n.addListener(e),e()}else jM.current=!1}function Wye(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(ds(s))n.addValue(i,s),R_(r)&&r.add(i);else if(ds(o))n.addValue(i,Lh(s,{owner:n})),R_(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,Lh(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const jH=Object.keys(Xg),jye=jH.length,pO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $ye{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ji.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Ix(t),this.isVariantNode=F8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{});for(const f in c){const d=c[f];a[f]!==void 0&&ds(d)&&(d.set(a[f],!1),R_(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),WH.current||Vye(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zu.update(this.notifyUpdate),zu.render(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=ip.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ji.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s,o){let a,l;for(let u=0;u<jye;u++){const c=jH[u],{isEnabled:f,Feature:d,ProjectionNode:m,MeasureLayout:g}=Xg[c];m&&(a=m),f(t)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),g&&(l=g))}if(!this.projection&&a){this.projection=new a(s,this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:f,dragConstraints:d,layoutScroll:m,layoutRoot:g}=t;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!f||d&&Xd(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:o,layoutScroll:m,layoutRoot:g})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update(this.props,this.prevProps):(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<pO.length;r++){const i=pO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Wye(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<Xye;r++){const i=$H[r],s=this.props[i];($g(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Lh(t,{owner:this}),this.addValue(e,r)),r}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=YT(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ds(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new qT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}const $H=["initial",...f3],Xye=$H.length;class XH extends $ye{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=S0e(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){x0e(this,r,o);const a=Hye(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function Kye(n){return window.getComputedStyle(n)}class Jye extends XH{readValueFromInstance(e,t){if(ip.has(t)){const r=n3(t);return r&&r.default||0}else{const r=Kye(e),i=(z8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return DH(e,t)}build(e,t,r,i){WT(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return JT(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ds(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){j8(e,t,r,i)}}class Yye extends XH{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ip.has(t)){const r=n3(t);return r&&r.default||0}return t=$8.has(t)?t:KT(t),e.getAttribute(t)}measureInstanceViewportBox(){return Lr()}scrapeMotionValuesFromProps(e,t){return K8(e,t)}build(e,t,r,i){$T(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){X8(e,t,r,i)}mount(e){this.isSVGTag=XT(e.tagName),super.mount(e)}}const Zye=(n,e)=>VT(n)?new Yye(e,{enableHardwareAcceleration:!1}):new Jye(e,{enableHardwareAcceleration:!0}),Qye={layout:{ProjectionNode:HH,MeasureLayout:FH}},qye={...Ive,...Kge,...Dye,...Qye},F_=age((n,e)=>Fge(n,e,qye,Zye)),ag={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},e1e=()=>{const{progress:n}=r5();return xn(Lee,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[qe("span",{className:"canvas-loader"}),xn("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},t1e=()=>{const n=Ju("./planet/scene.gltf");return qe("primitive",{object:n.scene,scale:2.5,"position-y":0,"rotation-y":0})},n1e=()=>qe(YC,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:xn(B.Suspense,{fallback:qe(e1e,{}),children:[qe(_ie,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),qe(t1e,{}),qe(J5,{all:!0})]})});function fh(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mO(Object(t),!0).forEach(function(r){fh(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function KH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}new De;new De;var Js=function n(e,t,r){var i=this;KH(this,n),fh(this,"dot2",function(s,o){return i.x*s+i.y*o}),fh(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},r1e=[new Js(1,1,0),new Js(-1,1,0),new Js(1,-1,0),new Js(-1,-1,0),new Js(1,0,1),new Js(-1,0,1),new Js(1,0,-1),new Js(-1,0,-1),new Js(0,1,1),new Js(0,-1,1),new Js(0,1,-1),new Js(0,-1,-1)],vO=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],yO=new Array(512),_O=new Array(512),i1e=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=vO[t]^e&255:r=vO[t]^e>>8&255,yO[t]=yO[t+256]=r,_O[t]=_O[t+256]=r1e[r%12]}};i1e(0);function s1e(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function xO(n){var e=s1e(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var o1e=function n(e){var t=this;KH(this,n),fh(this,"seed",0),fh(this,"init",function(r){t.seed=r,t.value=xO(r)}),fh(this,"value",xO(this.seed)),this.init(e)},a1e=new o1e(Math.random()),l1e={radius:1,center:[0,0,0]};function u1e(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a1e,r=gO(gO({},l1e),e),i=r.radius,s=r.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,u=t.value()*2-1,c=t.value()*2-1,f=Math.sqrt(l*l+u*u+c*c);l=a*l/f,u=a*u/f,c=a*c/f,n[o]=l*i+s[0],n[o+1]=u*i+s[1],n[o+2]=c*i+s[2]}return n}const c1e=n=>{const e=B.useRef(),[t]=B.useState(()=>u1e(new Float32Array(5e3),{radius:1.2}));return fi((r,i)=>{e.current.rotation.x-=i/10,e.current.rotation.y-=i/15}),qe("group",{rotation:[0,0,Math.PI/4],children:qe(tse,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:qe(Die,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},f1e=()=>qe("div",{className:"w-full h-full absolute inset-0 z-[2]",children:xn(YC,{camera:{position:[0,0,1]},children:[qe(B.Suspense,{fallback:null,children:qe(c1e,{})}),qe(J5,{all:!0})]})}),$M=(n,e,t,r)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:r,ease:"easeOut"}}});async function d1e(n,e,t,r,i){return fetch("https://formspree.io/f/xvgzqjvl",{method:"POST",body:JSON.stringify({name:n,email:e,phone:t,interest:i,BusinessWebsite:r}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{console.log(s)}).catch(s=>{console.error(s)}),{done:"code run complete"}}function h1e(){const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,s]=B.useState(""),[o,a]=B.useState(""),[l,u]=B.useState(""),[c,f]=B.useState(!1),[d,m]=B.useState(!1),g=async v=>{v.preventDefault(),console.log("started"),f(!0);const y=await d1e(n,i,t,o,l);console.log(y),e(""),s(""),a(""),u(""),r(""),f(!1),m(!0),console.log("ended")};return xn("div",{className:"relative p-10 z-0 bg-[rgb(195,239,252)] flex-1 w-full h-fit overflow-hidden",children:[qe(f1e,{}),qe(m1e,{}),d&&qe("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:xn(F_.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},className:"bg-[rgb(195,239,252)] rounded-2xl shadow-lg p-6 w-80 flex flex-col items-center",children:[qe("div",{className:"w-16 h-16 bg-green-100 flex items-center justify-center rounded-full mb-4 ",children:"✅"}),qe("h2",{className:"text-xl font-semibold text-gray-800",children:"Success!"}),qe("p",{className:"text-gray-600 text-center mt-2",children:"Your action was completed successfully."}),qe("button",{onClick:()=>m(!1),className:"mt-5 px-6 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700 transition",children:"Done"})]})}),qe(p1e,{handleSubmit:g,name:n,setName:e,phone:t,setPhone:r,email:i,setEmail:s,business:o,setBusiness:a,message:l,setMessage:u,loading:c})]})}function p1e({handleSubmit:n,name:e,setName:t,phone:r,setPhone:i,email:s,setEmail:o,business:a,setBusiness:l,message:u,setMessage:c,loading:f}){return xn("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden bg-[rgb(195,239,252)]",children:[xn(F_.div,{variants:$M("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[qe("h3",{className:ag.sectionHeadText,children:"Contact Us"}),qe("p",{className:`${ag.sectionSubText} font-extrabold text-white`,children:"Let’s Launch Your Digital Strategy"}),qe("p",{className:"text-cyan-50 mt-2",children:"Have questions or ready to get started? Our team is here to help. Fill out the form below, and we’ll get back to you within 24 hours."}),xn("form",{className:"mt-12 flex flex-col gap-8",onSubmit:n,children:[xn("label",{className:"flex flex-col z-20",children:[qe("span",{className:"text-white font-medium mb-4",children:"Your Name"}),qe("input",{type:"text",value:e,onChange:d=>t(d.target.value),placeholder:"What's your good name?",className:"bg-tertiary py-4 px-6 text-white rounded-lg outline-none border-none font-medium"})]}),xn("label",{className:"flex flex-col z-20",children:[qe("span",{className:"text-white font-medium mb-4",children:"Your Email"}),qe("input",{type:"email",value:s,onChange:d=>o(d.target.value),placeholder:"What's your email?",className:"bg-tertiary py-4 px-6 text-white rounded-lg outline-none border-none font-medium"})]}),xn("label",{className:"flex flex-col z-20",children:[qe("span",{className:"text-white font-medium mb-4",children:"Your Phone Number"}),qe("input",{type:"tel",value:r,onChange:d=>i(d.target.value),placeholder:"What's your phone number?",className:"bg-tertiary py-4 px-6 text-white rounded-lg outline-none border-none font-medium"})]}),xn("label",{className:"flex flex-col z-20",children:[qe("span",{className:"text-white font-medium mb-4",children:"Your Business Website"}),qe("input",{type:"text",value:a,onChange:d=>l(d.target.value),placeholder:"What's your Business Website?",className:"bg-tertiary py-4 px-6 text-white rounded-lg outline-none border-none font-medium"})]}),xn("label",{className:"flex flex-col z-20",children:[qe("span",{className:"text-white font-medium mb-4",children:"Service Interested In"}),qe("textarea",{rows:7,value:u,onChange:d=>c(d.target.value),placeholder:"What Service are you interested in?",className:"bg-tertiary py-4 px-6 text-white rounded-lg outline-none border-none font-medium"})]}),qe("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl text-white font-bold shadow-md cursor-pointer z-20",children:f?"Loading...":"Contact Us"})]})]}),qe(F_.div,{variants:$M("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:qe(n1e,{style:{pointerEvents:"none"}})})]})}function m1e(){return qe("div",{className:"xl:mt-12 overflow-hidden bg-[rgb(195,239,252)]",children:xn(F_.div,{variants:$M("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl w-full",children:[qe("h3",{className:`${ag.sectionHeadText}`,children:"About Us"}),qe("p",{className:`${ag.sectionSubText} font-extrabold text-white`,children:" Letâ€™s Launch Your Digital Strategy      "}),qe("p",{className:` ${ag.sectionSubText}`,children:" Have questions or ready to get started? Our team is here to help. Fill out the form below, and weâ€™ll get back to you within 24 hours."})]})})}function g1e(){function n(){return qe(O_,{children:qe(fle,{children:qe(Kme,{})})})}return qe(bj,{children:xn(Q7,{children:[qe(z2,{path:"/",element:qe(n,{})}),qe(z2,{path:"/about",element:qe(h1e,{})})]})})}$b.createRoot(document.getElementById("root")).render(qe(he.StrictMode,{children:qe(g1e,{})}));
